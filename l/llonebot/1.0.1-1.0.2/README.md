# Comparing `tmp/llonebot-1.0.1-py3-none-any.whl.zip` & `tmp/llonebot-1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,34 @@
-Zip file size: 21692 bytes, number of entries: 32
--rw-rw-rw-  2.0 fat      111 b- defN 24-Apr-07 11:37 onebot/__init__.py
--rw-rw-rw-  2.0 fat    18640 b- defN 24-Apr-13 15:02 onebot/application.py
--rw-rw-rw-  2.0 fat      890 b- defN 24-Apr-13 08:23 onebot/exceptions.py
+Zip file size: 23422 bytes, number of entries: 32
+-rw-rw-rw-  2.0 fat       88 b- defN 24-Apr-14 18:34 onebot/__init__.py
+-rw-rw-rw-  2.0 fat    20638 b- defN 24-Apr-14 18:31 onebot/application.py
+-rw-rw-rw-  2.0 fat     1533 b- defN 24-Apr-14 15:11 onebot/exceptions.py
 -rw-rw-rw-  2.0 fat       60 b- defN 24-Apr-12 19:32 onebot/dtypes/__init__.py
 -rw-rw-rw-  2.0 fat      728 b- defN 24-Apr-10 15:10 onebot/dtypes/enum.py
 -rw-rw-rw-  2.0 fat     2735 b- defN 24-Apr-13 10:16 onebot/dtypes/message.py
--rw-rw-rw-  2.0 fat     3569 b- defN 24-Apr-12 19:32 onebot/dtypes/models.py
+-rw-rw-rw-  2.0 fat     4464 b- defN 24-Apr-13 18:06 onebot/dtypes/models.py
 -rw-rw-rw-  2.0 fat       79 b- defN 24-Apr-07 10:47 onebot/fliters/__init__.py
 -rw-rw-rw-  2.0 fat      248 b- defN 24-Apr-09 17:09 onebot/fliters/interfaces.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Apr-02 10:08 onebot/fliters/impl/__init__.py
--rw-rw-rw-  2.0 fat     1164 b- defN 24-Apr-12 17:12 onebot/fliters/impl/group.py
--rw-rw-rw-  2.0 fat      346 b- defN 24-Apr-13 14:19 onebot/fliters/impl/message.py
+-rw-rw-rw-  2.0 fat     1171 b- defN 24-Apr-14 18:35 onebot/fliters/impl/group.py
+-rw-rw-rw-  2.0 fat      251 b- defN 24-Apr-14 18:34 onebot/fliters/impl/message.py
 -rw-rw-rw-  2.0 fat      121 b- defN 24-Apr-13 10:32 onebot/handlers/__init__.py
 -rw-rw-rw-  2.0 fat     1128 b- defN 24-Apr-11 11:45 onebot/handlers/composite.py
 -rw-rw-rw-  2.0 fat      362 b- defN 24-Apr-11 11:43 onebot/handlers/interfaces.py
 -rw-rw-rw-  2.0 fat     7188 b- defN 24-Apr-13 12:16 onebot/handlers/registration.py
 -rw-rw-rw-  2.0 fat        0 b- defN 24-Apr-05 16:42 onebot/handlers/impl/__init__.py
 -rw-rw-rw-  2.0 fat      384 b- defN 24-Apr-11 11:43 onebot/handlers/impl/echo.py
 -rw-rw-rw-  2.0 fat     4625 b- defN 24-Apr-13 12:03 onebot/handlers/impl/message.py
--rw-rw-rw-  2.0 fat      348 b- defN 24-Apr-11 11:43 onebot/handlers/impl/meta.py
+-rw-rw-rw-  2.0 fat      343 b- defN 24-Apr-14 16:28 onebot/handlers/impl/meta.py
 -rw-rw-rw-  2.0 fat     1156 b- defN 24-Apr-13 09:57 onebot/handlers/impl/request.py
 -rw-rw-rw-  2.0 fat       69 b- defN 24-Apr-07 11:49 onebot/parameter/__init__.py
--rw-rw-rw-  2.0 fat    10004 b- defN 24-Apr-13 12:50 onebot/parameter/arguments.py
--rw-rw-rw-  2.0 fat     4029 b- defN 24-Apr-13 08:23 onebot/parameter/composite.py
--rw-rw-rw-  2.0 fat     2246 b- defN 24-Apr-11 15:28 onebot/parameter/interfaces.py
+-rw-rw-rw-  2.0 fat    10411 b- defN 24-Apr-15 06:53 onebot/parameter/arguments.py
+-rw-rw-rw-  2.0 fat     4236 b- defN 24-Apr-15 07:42 onebot/parameter/composite.py
+-rw-rw-rw-  2.0 fat     4149 b- defN 24-Apr-15 07:37 onebot/parameter/interfaces.py
 -rw-rw-rw-  2.0 fat       21 b- defN 24-Apr-07 11:58 onebot/parameter/resolver/__init__.py
 -rw-rw-rw-  2.0 fat      585 b- defN 24-Apr-10 17:23 onebot/parameter/resolver/app.py
 -rw-rw-rw-  2.0 fat     1773 b- defN 24-Apr-10 17:26 onebot/parameter/resolver/depends.py
--rw-rw-rw-  2.0 fat      254 b- defN 24-Apr-13 15:07 llonebot-1.0.1.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-13 15:07 llonebot-1.0.1.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        7 b- defN 24-Apr-13 15:07 llonebot-1.0.1.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     2655 b- defN 24-Apr-13 15:07 llonebot-1.0.1.dist-info/RECORD
-32 files, 65617 bytes uncompressed, 17412 bytes compressed:  73.5%
+-rw-rw-rw-  2.0 fat     1193 b- defN 24-Apr-15 09:48 llonebot-1.0.2.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-15 09:48 llonebot-1.0.2.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        7 b- defN 24-Apr-15 09:48 llonebot-1.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     2656 b- defN 24-Apr-15 09:48 llonebot-1.0.2.dist-info/RECORD
+32 files, 72494 bytes uncompressed, 19142 bytes compressed:  73.6%
```

## zipnote {}

```diff
@@ -78,20 +78,20 @@
 
 Filename: onebot/parameter/resolver/app.py
 Comment: 
 
 Filename: onebot/parameter/resolver/depends.py
 Comment: 
 
-Filename: llonebot-1.0.1.dist-info/METADATA
+Filename: llonebot-1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: llonebot-1.0.1.dist-info/WHEEL
+Filename: llonebot-1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: llonebot-1.0.1.dist-info/top_level.txt
+Filename: llonebot-1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: llonebot-1.0.1.dist-info/RECORD
+Filename: llonebot-1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## onebot/__init__.py

```diff
@@ -1,4 +1,3 @@
 from .application import OneBot
-from .dtypes import *
 from .parameter.composite import parameter_resolver
```

## onebot/application.py

```diff
@@ -4,20 +4,22 @@
 import json
 import sys
 import uuid
 
 import websockets
 
 from asyncio import Future
-from typing import List, Union, Any, Dict
+from typing import List, Union, Any, Dict, Optional
 from loguru import logger
 
+from websockets import ConnectionClosedError, ConnectionClosedOK
+
 from .dtypes import MessageBuilder
-from .dtypes.models import Login, Friend, Group, Message
-from .exceptions import SendMessageError
+from .dtypes.models import Login, Friend, Group, Message, GroupUser, Version
+from .exceptions import SendMessageError, AuthenticationError
 from .fliters import Filter
 from .handlers import event_dispatcher, HandlerManager
 
 
 class OneBot:
 
     def __init__(self, host: str, port: int, token: str = None):
@@ -31,15 +33,15 @@
         # websocket headers
         self._headers = []
         if token is not None:
             self._headers.append(('Authorization', f'Bearer {token}'))
         # Websocket连接状态
         self.connect_state = False
         # 机器人ID
-        self.robot_id: int = ...
+        self.robot_id: int = 0
         # 消息处理器
         self.task_manager = HandlerManager()
         # 消息响应
         self.message_response: Dict[Any, Future] = {}
         # 事件循环
         self.loop = asyncio.get_event_loop()
         # 定时任务上下文
@@ -99,45 +101,54 @@
         while True:
             try:
                 self._websocket = await websockets.connect(self._url, extra_headers=self._headers)
                 break
             except (ConnectionRefusedError, websockets.exceptions.ConnectionClosedError):
                 logger.error('连接失败，等待10秒重试...')
                 await asyncio.sleep(10)
-        self.connect_state = True
+        message = await self._websocket.recv()
+        message = json.loads(message)
+        if message.get('retcode') == 1403:
+            raise AuthenticationError('Token认证失败')
         logger.info('websocket连接成功！')
+        self.connect_state = True
 
     async def _receiver(self):
         """
-        消息接收和处理
+        消息接收并处理
         """
         while True:
             try:
                 data = await self._websocket.recv()
                 logger.debug(data)
                 self.loop.create_task(event_dispatcher.handler(self, json.loads(data), {}))
-            except websockets.exceptions.ConnectionClosedError:
+            except (ConnectionClosedError, ConnectionClosedOK):
                 await self._connecting()
 
     def run(self, log_level='INFO'):
         """
         启动入口
         :param log_level:   日志等级
         """
-        # 设置日志
+        # 删除默认日志
         logger.remove()
+        # 添加日志
         logger.add(sys.stdout, level=log_level)
-        # 连接websocket
+        # 连接WebSocket
         self.loop.run_until_complete(self._connecting())
-        receiver_task = self.loop.create_task(self._receiver())
+        # 启动消息监听任务
+        self.loop.create_task(self._receiver())
+        # 调用启动事件
         self.loop.create_task(self.task_manager.execute_event_task('startup', self))
         try:
-            self.loop.run_until_complete(receiver_task)
+            self.loop.run_forever()
         except KeyboardInterrupt:
+            # 调用结束事件
             self.loop.run_until_complete(self.task_manager.execute_event_task('shutdown', self))
+            # 关闭websocket连接
             self.loop.run_until_complete(self._websocket.close())
 
     async def _send_message(self, message: dict) -> dict:
         """
         发送消息
         :param message: 消息
         :return:        消息ID
@@ -218,19 +229,19 @@
             }
         })
         if response.get('status') == 'ok':
             return response['data']['message_id']
         else:
             raise SendMessageError(json.dumps(response))
 
-    async def get_msg(self, message_id: int) -> Message:
+    async def get_msg(self, message_id: int) -> Optional[Message]:
         """
         获取消息
         :param message_id:  消息ID
-        :return:   MsgInfo实体类
+        :return: MsgInfo实体类
         """
         response = await self._send_message({
             'action': 'get_msg',
             'params': {
                 'message_id': message_id
             }
         })
@@ -239,35 +250,54 @@
 
     async def delete_msg(self, message_id: int) -> None:
         """
         撤回消息
         :param message_id:
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'delete_msg',
             'params': {
                 'message_id': message_id
             }
         })
+        return response.get('status') == 'ok'
 
-    async def send_like(self, user_id: int, times: int) -> None:
+    async def send_like(self, user_id: int, times: int) -> bool:
         """
         好友点赞
         :param user_id: QQ
         :param times:   次数
         :return:
         """
         response = await self._send_message({
             'action': 'send_like',
             'params': {
                 'user_id': user_id,
                 'times': times
             }
         })
+        return response.get('status') == 'ok'
+
+    async def get_friend_info(self, user_id: int, no_cache: bool = False) -> Optional[Friend]:
+        """
+        获取好友信息(目前尚不能获取陌生人信息)
+        :param user_id:     QQ号
+        :param no_cache:    是否不使用缓存（使用缓存可能更新不及时，但响应更快）
+        :return:
+        """
+        response = await self._send_message({
+            'action': 'get_stranger_info',
+            'params': {
+                'user_id': user_id,
+                'no_cache': no_cache,
+            }
+        })
+        if response.get('status') == 'ok':
+            return Friend.model_validate(response['data'])
 
     async def get_friend_list(self) -> List[Friend]:
         """
         获取好友列表
         :return:
         """
         response = await self._send_message({
@@ -300,15 +330,15 @@
         """
         response = await self._send_message({
             'action': 'get_group_list'
         })
         if response.get('status') == 'ok':
             return [Group.model_validate(group_info) for group_info in response.get('data', [])]
 
-    async def get_group_info(self, group_id: int, no_cache: bool) -> Group:
+    async def get_group_info(self, group_id: int, no_cache: bool) -> Optional[Group]:
         """
         获取群信息
         :param group_id:  群号
         :param no_cache:  是否不使用缓存（使用缓存可能更新不及时，但响应更快）
         :return:
         """
         response = await self._send_message({
@@ -317,209 +347,209 @@
                 'group_id': group_id,
                 'no_cache': no_cache
             }
         })
         if response.get('status') == 'ok':
             return Group.model_validate(response['data'])
 
-    async def get_group_member_list(self, group_id: int):
+    async def get_group_member_list(self, group_id: int) -> List[GroupUser]:
         """
         获取群成员列表
         :param group_id:
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'get_group_member_list',
             'params': {
                 'group_id': group_id,
             }
         })
+        if response.get('status') == 'ok':
+            return [GroupUser.model_validate(row) for row in response['data']]
 
-    async def get_group_member_info(self, group_id: int, user_id: int, no_cache: bool = False):
+    async def get_group_member_info(self, group_id: int, user_id: int, no_cache: bool = False) -> Optional[GroupUser]:
         """
         获取群成员信息
 
         :param group_id:    群号
         :param user_id:     QQ号
         :param no_cache:    是否使用缓存
         :return:
         """
-        await self._send_message({
-            'action': 'get_group_member_list',
+        response = await self._send_message({
+            'action': 'get_group_member_info',
             'params': {
                 'group_id': group_id,
                 'user_id': user_id,
                 'no_cache': no_cache
             }
         })
+        if response.get('status') == 'ok':
+            return GroupUser.model_validate(response['data'])
 
-    async def set_group_add_request(self, flag: str, sub_type: str, approve: bool, reason: str = ''):
+    async def set_group_add_request(self, flag: str, sub_type: str, approve: bool, reason: str = '') -> bool:
         """
         加群请求
         :param flag:        加群请求的 flag（需从上报的数据中获得）
         :param sub_type:    add 或 invite，请求类型（需要和上报消息中的 sub_type 字段相符）
         :param approve:     是否同意请求／邀请
         :param reason:      拒绝理由（仅在拒绝时有效）
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_add_request',
             'params': {
                 'flag': flag,
                 'sub_type': sub_type,
                 'approve': approve,
                 'reason': reason,
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_leave(self, group_id: int, is_dismiss: bool):
+    async def set_group_leave(self, group_id: int, is_dismiss: bool = False) -> bool:
         """
         退群
         :param group_id:    群号
         :param is_dismiss:  是否解散，如果登录号是群主，则仅在此项为 true 时能够解散
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_leave',
             'params': {
                 'group_id': group_id,
                 'is_dismiss': is_dismiss,
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_kick(self, group_id: int, user_id: int, reject_add_request: bool):
+    async def set_group_kick(self, group_id: int, user_id: int, reject_add_request: bool = False) -> bool:
         """
         群组踢人
         :param group_id:            群号
         :param user_id:             要踢的 QQ 号
         :param reject_add_request:  拒绝此人的加群请求
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_kick',
             'params': {
                 'group_id': group_id,
                 'user_id': user_id,
                 'reject_add_request': reject_add_request,
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_ban(self, group_id: int, user_id: int, duration: int):
+    async def set_group_ban(self, group_id: int, user_id: int, duration: int) -> bool:
         """
         群组单人禁言
         :param group_id:    group_id
         :param user_id:     user_id
         :param duration:    duration
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_ban',
             'params': {
                 'group_id': group_id,
                 'user_id': user_id,
                 'duration': duration,
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_whole_ban(self, group_id: int, enable: bool):
+    async def set_group_whole_ban(self, group_id: int, enable: bool) -> bool:
         """
         群组禁言
-        :param group_id:    群主
-        :param enable:
+        :param group_id:    群号
+        :param enable:      开启 or 关闭
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_whole_ban',
             'params': {
                 'group_id': group_id,
                 'enable': enable
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_admin(self, group_id: int, user_id: int, enable: bool):
+    async def set_group_admin(self, group_id: int, user_id: int, enable: bool) -> bool:
         """
         群组设置管理员
         :param group_id:    群号
         :param user_id:     要设置管理员的 QQ 号
-        :param enable:      true 为设置，false 为取消
+        :param enable:      True 为设置, False为取消
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_admin',
             'params': {
                 'group_id': group_id,
                 'user_id': user_id,
                 'enable': enable
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_card(self, group_id: int, user_id: int, card: str):
+    async def set_group_card(self, group_id: int, user_id: int, card: str) -> bool:
         """
         设置群名片（群备注）
         :param group_id:    群号
         :param user_id:     要设置的 QQ 号
         :param card:        群名片内容，不填或空字符串表示删除群名片
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_card',
             'params': {
                 'group_id': group_id,
                 'user_id': user_id,
                 'card': card
             }
         })
+        return response.get('status') == 'ok'
 
-    async def set_group_name(self, group_id: int, group_name: str):
+    async def set_group_name(self, group_id: int, group_name: str) -> bool:
         """
         设置群名
         :param group_id:
         :param group_name:
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'set_group_name',
             'params': {
                 'group_id': group_id,
                 'group_name': group_name,
             }
         })
+        return response.get('status') == 'ok'
 
-    async def get_stranger_info(self, user_id: int, no_cache: bool):
-        """
-        获取陌生人信息
-        :param user_id:     QQ号
-        :param no_cache:    是否不使用缓存（使用缓存可能更新不及时，但响应更快）
-        :return:
-        """
-        await self._send_message({
-            'action': 'set_group_name',
-            'params': {
-                'user_id': user_id,
-                'no_cache': no_cache,
-            }
-        })
-
-    async def get_version_info(self):
+    async def get_version_info(self) -> Optional[Version]:
         """
         获取版本信息
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'get_version_info',
         })
+        if response.get('status') == 'ok':
+            return Version.model_validate(response['data'])
 
     async def get_status(self):
         """
         获取运行状态
         :return:
         """
-        await self._send_message({
+        response = await self._send_message({
             'action': 'get_status',
         })
+        return response.get('status') == 'ok'
 
     async def can_send_image(self) -> bool:
         """
         检查是否可以发送图片
         :return:
         """
         response = await self._send_message({
@@ -533,52 +563,55 @@
         :return:
         """
         response = await self._send_message({
             'action': 'can_send_record',
         })
         return response['yes']
 
-    async def get_image(self, file: str) -> str:
+    async def get_image(self, file: str) -> Optional[str]:
         """
         获取图片详情
         :param file:    收到的图片文件名（消息段的 file 参数），如 6B4DE3DFD1BD271E3297859D41C530F5.jpg
         :return:
         """
         response = await self._send_message({
             'action': 'get_image',
             'params': {
                 'file': file,
             }
         })
-        return response['file']
+        if response.get('status') == 'ok':
+            return response['data']['file']
 
-    async def get_record(self, file: str, out_format: str) -> str:
+    async def get_record(self, file: str, out_format: str) -> Optional[str]:
         """
         获取语音文件
         :param file:        收到的语音文件名（消息段的 file 参数），如 0B38145AA44505000B38145AA4450500.silk
         :param out_format:  要转换到的格式，目前支持 mp3、amr、wma、m4a、spx、ogg、wav、flac
         :return:
         """
         response = await self._send_message({
             'action': 'get_record',
             'params': {
                 'file': file,
                 'out_format': out_format
             }
         })
-        return response['file']
+        if response.get('status') == 'ok':
+            return response['data']['file']
 
-    async def get_file(self, file: str):
+    async def get_file(self, file: str) -> Optional[str]:
         response = await self._send_message({
-            'action': 'get_record',
+            'action': 'get_file',
             'params': {
-                'file': file,
-                'out_format': file
+                'file_id': file,
             }
         })
+        if response.get('status') == 'ok':
+            return response['data']['file']
 
     async def clean_cache(self) -> bool:
         """
         清理QQ缓存
         :return:
         """
         response = await self._send_message({
```

## onebot/exceptions.py

```diff
@@ -34,7 +34,29 @@
     def __init__(self, message: str, fn: Callable, parameter: Parameter):
         self.msg = message
         self.fn = fn
         self.parameter = parameter
 
     def __str__(self):
         return f"{self.msg}, 函数: {self.fn.__name__} 参数: {self.parameter.name} 文件: {getfile(self.fn)}"
+
+
+class AuthenticationError(Exception):
+    """
+    用于认证过程中出现的错误的异常。
+
+    属性:
+        message (str): 错误的解释，默认为"Token认证失败"。
+
+    方法:
+        __init__: 构造AuthenticationError对象所需的所有属性。
+    """
+
+    def __init__(self, message="Token认证失败"):
+        """
+        使用可选的自定义消息初始化AuthenticationError。
+
+        参数:
+            message (str): 描述认证失败的自定义错误消息，默认为"Token认证失败"。
+        """
+        self.message = message
+        super().__init__(self.message)
```

## onebot/dtypes/models.py

```diff
@@ -196,17 +196,65 @@
     remark: str
     # 性别
     sex: Gender
     # 等级
     level: int
 
 
+class GroupUser(BaseModel):
+    # 群号
+    group_id: int
+    # QQ 号
+    user_id: int
+    # 昵称
+    nickname: str
+    # 群名片／备注
+    card: str
+    # 性别
+    sex: str
+    # 年龄
+    age: int
+    # 地区
+    area: str
+    # 成员等级
+    level: int
+    # QQ等级
+    qq_level: int
+    # 加群时间戳
+    join_time: int
+    # 最后发言时间
+    last_sent_time: int
+    # 专属头衔过期时间戳
+    title_expire_time: int
+    # 是否不良记录成员
+    unfriendly: bool
+    # 是否允许修改群名片
+    card_changeable: bool
+    # 是否为机器人
+    is_robot: bool
+    # 禁言时间
+    shut_up_timestamp: int
+    # 身份
+    role: str
+    # 专属头衔
+    title: str
+
+
 class Sender(BaseModel):
     """
     消息发送人
     """
     # 用户QQ
     user_id: int
     # 用户昵称
     nickname: str
     # 用户角色
     role: GroupRole = Field(None)
+
+
+class Version(BaseModel):
+    """
+    版本信息
+    """
+    app_name: str
+    protocol_version: str
+    app_version: str
```

## onebot/fliters/impl/group.py

```diff
@@ -1,14 +1,14 @@
 from __future__ import annotations
 from typing import Set, List, Union
 
 from onebot.fliters.interfaces import Filter
 
 
-class Group(Filter):
+class GroupMessage(Filter):
     """
     是否为群组消息
     """
 
     async def support(self, app, message: dict, context: dict) -> bool:
         return 'group_id' in message
```

## onebot/fliters/impl/message.py

```diff
@@ -1,13 +1,9 @@
 from onebot.fliters import Filter
 
 
-class Regex(Filter):
-    def __init__(self, content):
-        content = content
-
+class FriendMessage(Filter):
+    """
+    过滤好友消息
+    """
     async def support(self, app, message: dict, context: dict) -> bool:
-        if 'text' not in context:
-            return False
-        text = ''.join(context.get('text'))
-        # TODO 消息过滤器待实现
-
+        return 'group_id' not in message and 'user_id' in message
```

## onebot/handlers/impl/meta.py

```diff
@@ -3,8 +3,8 @@
 
 class MetaEventEventHandler(EventHandler):
 
     async def support(self, app, message: dict, context: dict) -> bool:
         return message.get('post_type') == 'meta_event'
 
     async def handler(self, app, message: dict, context: dict):
-        app.robot_id = str(message['self_id'])
+        app.robot_id = message['self_id']
```

## onebot/parameter/arguments.py

```diff
@@ -37,22 +37,27 @@
 
 
 class GetGroupID(Depend):
     """
     获取群组ID
     """
 
+    def __init__(self, allow_none: bool = False):
+        self.allow_none = allow_none
+
     async def support(self, message: dict, context: dict) -> bool:
+        if self.allow_none:
+            return True
         return 'group_id' in message
 
     async def resolver(self, parameter: Parameter, app, message: dict, context: dict) -> Optional[int]:
         return message.get('group_id')
 
 
-class GetSendUserID(Depend):
+class GetUserID(Depend):
     """
     获取发送用户QQ
     """
 
     async def support(self, message: dict, context: dict) -> bool:
         return 'user_id' in message
 
@@ -168,14 +173,15 @@
             return context['text']
 
 
 class GetJSON(Depend):
     """
     获取JSON
     """
+
     def __init__(self, text=False):
         self.text = text
 
     async def support(self, message: dict, context: dict) -> bool:
         return 'json' in context
 
     async def resolver(self, parameter: Parameter, app, message: dict, context: dict) -> Optional[dict]:
@@ -269,14 +275,26 @@
     async def support(self, message: dict, context: dict) -> bool:
         return True
 
     async def resolver(self, parameter: Parameter, app, message: dict, context: dict) -> dict:
         return context
 
 
+class GetEnv(Depend):
+    """
+    获取环境变量
+    """
+
+    async def support(self, message: dict, context: dict) -> bool:
+        pass
+
+    async def resolver(self, parameter: Parameter, app, message: dict, context: dict) -> Any:
+        pass
+
+
 class Depends(Depend):
     def __init__(self, fn, use_cache=True, args=None, kwargs=None):
         # 方法
         if kwargs is None:
             kwargs = {}
         if args is None:
             args = ()
```

## onebot/parameter/composite.py

```diff
@@ -1,9 +1,9 @@
 import asyncio
-from inspect import Parameter, iscoroutinefunction, getfile, signature
+from inspect import Parameter, iscoroutinefunction, signature
 from typing import List, Dict, Set, Any, Callable
 
 from .interfaces import Resolver
 from .resolver.app import AppResolver
 from .resolver.depends import DependsResolver
 from ..exceptions import ParameterError
 
@@ -22,14 +22,19 @@
         self.unresolvable_param: Set[Parameter] = set()
         # 是否为异步函数
         self.func_async_status = {}
 
         self.loop = asyncio.get_event_loop()
 
     def get_parameter_resolve(self, parameter):
+        """
+        获取参数解析器
+        :param parameter: 参数
+        :return: 参数解析器
+        """
         if parameter in self.unresolvable_param:
             return
         if parameter in self.argument_resolve_cache:
             return self.argument_resolve_cache.get(parameter)
         for resolver in self.argument_resolves:
             if resolver.support_parameter(parameter):
                 self.argument_resolve_cache[parameter] = resolver
@@ -43,29 +48,29 @@
         :return:
         """
         return self.get_parameter_resolve(parameter) is not None
 
     def support_function(self, fn: Callable):
         """
         检查函数参数是否支持解析
-        :param fn:  函数
+        :param fn: 函数
         :return:
         """
         arguments = signature(fn).parameters.values()
         for param in arguments:
             if not self.support_parameter(param):
                 raise ParameterError('参数不支持解析', fn, param)
         return arguments
 
     async def support_resolver(self, parameter: Parameter, message: dict, context: dict) -> bool:
         """
         该参数是否支持解析
-        :param parameter:
-        :param message:
-        :param context:
+        :param parameter: 参数
+        :param message: 消息
+        :param context: 上下文
         :return:
         """
         support_resolver = self.get_parameter_resolve(parameter).support_resolver
         if support_resolver not in self.func_async_status:
             self.func_async_status[support_resolver] = iscoroutinefunction(support_resolver)
         if self.func_async_status[support_resolver]:
             return await support_resolver(parameter, message, context)
@@ -80,27 +85,29 @@
             return await resolver(parameter, app, message, context)
         else:
             return await self.loop.run_in_executor(None, resolver, parameter, app, message, context)
 
     async def close(self, parameter, context: dict):
         """
         关闭函数
+        :param parameter: 参数
+        :param context: 上下文
         """
         close = self.get_parameter_resolve(parameter).close
         if close not in self.func_async_status:
             self.func_async_status[close] = iscoroutinefunction(close)
         if self.func_async_status[close]:
             return await close(parameter, context)
         else:
             return await self.loop.run_in_executor(None, close, parameter, context)
 
     def add_resolve(self, resolver: Resolver):
         """
         添加参数解决器
-        :param resolver:  解决器
+        :param resolver: 解决器
         """
         self.argument_resolves.append(resolver)
 
 
 parameter_resolver = ResolverComposite()
 parameter_resolver.add_resolve(AppResolver())
 parameter_resolver.add_resolve(DependsResolver())
```

## onebot/parameter/interfaces.py

```diff
@@ -6,86 +6,104 @@
 from inspect import Parameter
 from typing import Any
 
 
 class Resolver(ABC):
     """
     参数解析器接口
+
+    该接口定义了参数解析器的基本方法，用于判断参数是否由该解析器解析、
+    当前请求的参数是否支持解析以及进行参数解析的具体实现。
     """
 
     @abstractmethod
     def support_parameter(self, parameter: Parameter) -> bool:
         """
-        参数是否由该解析器解析
-        :param parameter:   参数
-        :return:  是否支持
+        判断参数是否由该解析器解析
+
+        :param parameter: 参数，inspect.Parameter 对象，表示函数或方法的参数
+        :return: bool，如果该解析器支持解析指定的参数，则返回 True；否则返回 False
         """
         pass
 
     @abstractmethod
     async def support_resolver(self, parameter: Parameter, message: dict, context: dict) -> bool:
         """
-        当前请求该参数是否支持解析
-        :param parameter:   参数
-        :param message:     消息
-        :param context:     上下文
-        :return:  是否支持
+        判断当前请求的参数是否支持解析
+
+        :param parameter: 参数，inspect.Parameter 对象
+        :param message: 消息，字典类型，表示当前处理的消息数据
+        :param context: 上下文，字典类型，表示当前请求的上下文信息
+        :return: bool，如果当前请求的参数支持解析，则返回 True；否则返回 False
         """
         pass
 
     @abstractmethod
     async def resolver(self, parameter: Parameter, app, message: dict, context: dict) -> Any:
         """
-        参数解析
-        :param parameter:   参数
-        :param app:         主程序
-        :param message:     消息
-        :param context:     上下文
-        :return:
+        参数解析方法
+
+        :param parameter: 参数，inspect.Parameter 对象
+        :param app: 主程序，通常是应用程序或框架的实例
+        :param message: 消息，字典类型，表示当前处理的消息数据
+        :param context: 上下文，字典类型，表示当前请求的上下文信息
+        :return: 解析后的参数值，类型依赖于参数解析的具体实现
         """
         pass
 
     async def close(self, parameter, context: dict):
         """
-        单次请求结束后调用函数
-        :param parameter:   参数
-        :param context:     上下文
-        :return:
+        单次请求结束后调用的函数
+
+        :param parameter: 参数，inspect.Parameter 对象
+        :param context: 上下文，字典类型，表示当前请求的上下文信息
+        :return: 无返回值
         """
         pass
 
 
 class Depend(ABC):
     """
     参数注入接口
+
+    该接口定义了参数注入的基本方法，用于判断当前请求的参数是否支持解析以及进行参数解析的具体实现。
     """
 
     @abstractmethod
     async def support(self, message: dict, context: dict) -> bool:
         """
-        是否支持解析
-        :param message:
-        :param context:
-        :return:
+        判断是否支持解析当前请求的参数
+
+        该方法用于判断给定的消息和上下文信息是否满足解析条件。
+
+        :param message: 消息，字典类型，表示当前处理的消息数据
+        :param context: 上下文，字典类型，表示当前请求的上下文信息
+        :return: bool，如果支持解析，则返回 True；否则返回 False
         """
         pass
 
     @abstractmethod
     async def resolver(self, parameter: Parameter, app, message: dict, context: dict) -> Any:
         """
-        参数解析
-        :param parameter:   参数
-        :param app:         主程序
-        :param message:     消息
-        :param context:     上下文
-        :return:            结果
+        参数解析方法
+
+        该方法用于根据给定的参数、应用程序实例、消息和上下文信息解析出实际的参数值。
+
+        :param parameter: 参数，inspect.Parameter 对象，表示函数或方法的参数
+        :param app: 主程序，通常是应用程序或框架的实例
+        :param message: 消息，字典类型，表示当前处理的消息数据
+        :param context: 上下文，字典类型，表示当前请求的上下文信息
+        :return: 解析后的参数值，类型依赖于参数解析的具体实现
         """
         pass
 
     async def close(self, parameter: Parameter, context: dict):
         """
-        单次请求结束后调用函数
-        :param parameter:
-        :param context:
-        :return:
+        单次请求结束后调用的函数
+
+        该方法在每次请求结束后调用，用于执行清理操作或资源释放。
+
+        :param parameter: 参数，inspect.Parameter 对象
+        :param context: 上下文，字典类型，表示当前请求的上下文信息
+        :return: 无返回值
         """
         pass
```

## Comparing `llonebot-1.0.1.dist-info/RECORD` & `llonebot-1.0.2.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,32 +1,32 @@
-onebot/__init__.py,sha256=uMEtisFrTZ1YvQUzXoVIxW1-uzKEKxJx-lnwb88TNCQ,111
-onebot/application.py,sha256=iO9RzuN3hiIHgYmzWrzf5bS2SraxXSrklMZ-DFpjwy4,18640
-onebot/exceptions.py,sha256=N_wWZPpG-UXIwC9TKPZXvS1Ee7Fy4E9kNOEoP3pemYQ,890
+onebot/__init__.py,sha256=bZ0PIU_VoY8XVkjjN1Du-G4DLwMcJxTE2GpNvtRYj2Q,88
+onebot/application.py,sha256=BKGh8PEmSIi6-5DmOlC3Aua7ns2nXq6bjCWU1DGRaQ0,20638
+onebot/exceptions.py,sha256=UZJ6EEAC3cMkz_f1UNOafUgxXttYJSwl5Glbt5Fki1E,1533
 onebot/dtypes/__init__.py,sha256=KA5x1kJKpZjlcPG-y4CQ-qHw5QLf-yHiSzErQa8Mcp8,60
 onebot/dtypes/enum.py,sha256=FbwMeaY4iCPtQFfm8s349hcwgDXOiEJyRlA1OVIlv_I,728
 onebot/dtypes/message.py,sha256=NtgLbclZNFZVnPvj3vnTOfx7HfPqaEuUF7ejOjaDAx0,2735
-onebot/dtypes/models.py,sha256=VzPGqCmwDjQGfgB5o0Ft7tE56UiZYrrT9s74eQKlPNk,3569
+onebot/dtypes/models.py,sha256=nZS19SSLo3tnyFyZD2QRGWADGGkeagItLjL7d2jfOHw,4464
 onebot/fliters/__init__.py,sha256=TmJNj2v6Bn-OTjiypd2DxepKHdeNVk2FgI5ynzSVQyk,79
 onebot/fliters/interfaces.py,sha256=MwZSNwyML-WQmCa3JhjiTR45Q1QI6IcTURBVAFlGGjA,248
 onebot/fliters/impl/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-onebot/fliters/impl/group.py,sha256=uAr_P-zuYzVOyVpHJz8RJA8d_xbzMH9XxJ3qNZ9koHI,1164
-onebot/fliters/impl/message.py,sha256=V2BwrDisu-uRLXOQBckXcsQIogssKXCwDZqrAkvEptk,346
+onebot/fliters/impl/group.py,sha256=M63NxNU9JPFpId3icAsmY6lhrWcWNqp5BceJipq6yi4,1171
+onebot/fliters/impl/message.py,sha256=r8hgyQs2Jpnkm8hsPFwoe22VTtlQxLN4qCLQtMBNYFk,251
 onebot/handlers/__init__.py,sha256=3xSbcSddb1sn7HetHiYrQ3KJcuUwlgpdofT3vBrTbXU,121
 onebot/handlers/composite.py,sha256=A2-j5qBwKWw_EuocEha9aAFuwfIoj4dO9P3FJy4c5mg,1128
 onebot/handlers/interfaces.py,sha256=BRxooC8zPb69-xgeZaovqQNanI0WgaE1sYxrxRBnv_o,362
 onebot/handlers/registration.py,sha256=X5TIrP5XIOYkA-zDiYKbbdJVms15mbcqSu9xGc7TLz8,7188
 onebot/handlers/impl/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 onebot/handlers/impl/echo.py,sha256=oaMR7SPCboFtUQMLYk8JPaNLEvbWnmEhN3nkHDdn32I,384
 onebot/handlers/impl/message.py,sha256=MzXDtMZy6jEhyIY9tGrVHTQEfwigP-H0rDcxvgANCv8,4625
-onebot/handlers/impl/meta.py,sha256=RFBvZYJvAeKdNshlVF7dOQfB8Y59fZlo9wqzwwGJc_w,348
+onebot/handlers/impl/meta.py,sha256=uOPcsAsjqR3aTPFL_JRNwvkOb78yxYxKLl0HaMIZ5yw,343
 onebot/handlers/impl/request.py,sha256=S9naWiLnMnPO2nzUtnbqWBm6yM6KE4xq2Z5ullTv53U,1156
 onebot/parameter/__init__.py,sha256=9kva7l1aQxoCDtzZMLzjmTaNmyw97NGe2Y6pIZx_nMQ,69
-onebot/parameter/arguments.py,sha256=KLCLA2-YGEZM8Kai7Du6JKiNGjcRSEqhaQdivY2BqFc,10004
-onebot/parameter/composite.py,sha256=9s3zdBO8BTseXy9BdqpbbP6dDzoMy3_js_OPJzzvog0,4029
-onebot/parameter/interfaces.py,sha256=oi4lC23pj7o1T-jhaLSBnAWyzdkzGAdlqBLRQ5RMLNc,2246
+onebot/parameter/arguments.py,sha256=fI8MFwUNLREZhEwFVDQ-kY0EJ-JAfFwDEZpBmgAmSgo,10411
+onebot/parameter/composite.py,sha256=BDlKZVMnCaLl-SIR92RwTQMwOUtuFAh4PKThDqsgdlQ,4236
+onebot/parameter/interfaces.py,sha256=YKb2OXa4l0vYJl8Lt4FpAtucuCnCWC8gf6EtHAj9Z1s,4149
 onebot/parameter/resolver/__init__.py,sha256=LNFENZ8BamsaFF1WIL5GNyM6tzPsDY8aQ82E8qdfWdo,21
 onebot/parameter/resolver/app.py,sha256=Tk0hHPSuUQBZilSHvggXqFUeVpuu3hdDM15CRhB9miE,585
 onebot/parameter/resolver/depends.py,sha256=6OwHwu0DnsomoidE5I80W_xRTsLnk_EomeCjXmMFNps,1773
-llonebot-1.0.1.dist-info/METADATA,sha256=kRa8tV3FvQq2TfGQ0JV0-iUmeswwmPGZGk1l4CudcpE,254
-llonebot-1.0.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-llonebot-1.0.1.dist-info/top_level.txt,sha256=CfpTAemsEKgEPhI8yzky2VBpbwQQ167T4xqOvfEh2f8,7
-llonebot-1.0.1.dist-info/RECORD,,
+llonebot-1.0.2.dist-info/METADATA,sha256=mvldZXm400BiAFnUIO5hRa4e1-mpr6_VtlHBm90Rdk0,1193
+llonebot-1.0.2.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+llonebot-1.0.2.dist-info/top_level.txt,sha256=CfpTAemsEKgEPhI8yzky2VBpbwQQ167T4xqOvfEh2f8,7
+llonebot-1.0.2.dist-info/RECORD,,
```

