# Comparing `tmp/pytelegrambotapi_fixed-4.12.6.tar.gz` & `tmp/pytelegrambotapi_fixed-4.12.7.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "pytelegrambotapi_fixed-4.12.6.tar", last modified: Sat Apr 13 18:00:02 2024, max compression
+gzip compressed data, was "pytelegrambotapi_fixed-4.12.7.tar", last modified: Mon Apr 15 06:42:44 2024, max compression
```

## Comparing `pytelegrambotapi_fixed-4.12.6.tar` & `pytelegrambotapi_fixed-4.12.7.tar`

### file list

```diff
@@ -1,31 +1,31 @@
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 18:00:02.201470 pytelegrambotapi_fixed-4.12.6/
--rw-r--r--   0 runner    (1001) docker     (127)    18047 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/LICENSE
--rw-r--r--   0 runner    (1001) docker     (127)    47238 2024-04-13 18:00:02.201470 pytelegrambotapi_fixed-4.12.6/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (127)    46205 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/README.md
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 18:00:02.201470 pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/
--rw-r--r--   0 runner    (1001) docker     (127)    47238 2024-04-13 18:00:02.000000 pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (127)      661 2024-04-13 18:00:02.000000 pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (127)        1 2024-04-13 18:00:02.000000 pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (127)       90 2024-04-13 18:00:02.000000 pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/requires.txt
--rw-r--r--   0 runner    (1001) docker     (127)        8 2024-04-13 18:00:02.000000 pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/top_level.txt
--rw-r--r--   0 runner    (1001) docker     (127)       38 2024-04-13 18:00:02.201470 pytelegrambotapi_fixed-4.12.6/setup.cfg
--rw-r--r--   0 runner    (1001) docker     (127)     1093 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/setup.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 18:00:02.201470 pytelegrambotapi_fixed-4.12.6/telebot/
--rw-r--r--   0 runner    (1001) docker     (127)   389180 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    88656 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/apihelper.py
--rw-r--r--   0 runner    (1001) docker     (127)   362868 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/async_telebot.py
--rw-r--r--   0 runner    (1001) docker     (127)    13004 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/asyncio_filters.py
--rw-r--r--   0 runner    (1001) docker     (127)     3756 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/asyncio_handler_backends.py
--rw-r--r--   0 runner    (1001) docker     (127)    89216 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/asyncio_helper.py
--rw-r--r--   0 runner    (1001) docker     (127)     5203 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/callback_data.py
--rw-r--r--   0 runner    (1001) docker     (127)    13156 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/custom_filters.py
--rw-r--r--   0 runner    (1001) docker     (127)     9693 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/formatting.py
--rw-r--r--   0 runner    (1001) docker     (127)     8915 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/handler_backends.py
--rw-r--r--   0 runner    (1001) docker     (127)     1969 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/service_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)   407331 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/types.py
--rw-r--r--   0 runner    (1001) docker     (127)    20780 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/util.py
--rw-r--r--   0 runner    (1001) docker     (127)       96 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/telebot/version.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 18:00:02.201470 pytelegrambotapi_fixed-4.12.6/tests/
--rw-r--r--   0 runner    (1001) docker     (127)    10288 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/tests/test_handler_backends.py
--rw-r--r--   0 runner    (1001) docker     (127)    27233 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/tests/test_telebot.py
--rw-r--r--   0 runner    (1001) docker     (127)    19474 2024-04-13 17:59:53.000000 pytelegrambotapi_fixed-4.12.6/tests/test_types.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-15 06:42:44.891348 pytelegrambotapi_fixed-4.12.7/
+-rw-r--r--   0 runner    (1001) docker     (127)    18047 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (127)    47238 2024-04-15 06:42:44.891348 pytelegrambotapi_fixed-4.12.7/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)    46205 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/README.md
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-15 06:42:44.891348 pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (127)    47238 2024-04-15 06:42:44.000000 pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)      661 2024-04-15 06:42:44.000000 pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        1 2024-04-15 06:42:44.000000 pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (127)       90 2024-04-15 06:42:44.000000 pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/requires.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        8 2024-04-15 06:42:44.000000 pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/top_level.txt
+-rw-r--r--   0 runner    (1001) docker     (127)       38 2024-04-15 06:42:44.891348 pytelegrambotapi_fixed-4.12.7/setup.cfg
+-rw-r--r--   0 runner    (1001) docker     (127)     1093 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/setup.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-15 06:42:44.891348 pytelegrambotapi_fixed-4.12.7/telebot/
+-rw-r--r--   0 runner    (1001) docker     (127)   397341 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    92343 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/apihelper.py
+-rw-r--r--   0 runner    (1001) docker     (127)   362868 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/async_telebot.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13004 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/asyncio_filters.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3756 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/asyncio_handler_backends.py
+-rw-r--r--   0 runner    (1001) docker     (127)    89216 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/asyncio_helper.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5203 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/callback_data.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13156 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/custom_filters.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9693 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/formatting.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8915 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/handler_backends.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1969 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/service_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)   407331 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/types.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20780 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/util.py
+-rw-r--r--   0 runner    (1001) docker     (127)       96 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/telebot/version.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-15 06:42:44.891348 pytelegrambotapi_fixed-4.12.7/tests/
+-rw-r--r--   0 runner    (1001) docker     (127)    10288 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/tests/test_handler_backends.py
+-rw-r--r--   0 runner    (1001) docker     (127)    27233 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/tests/test_telebot.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19474 2024-04-15 06:42:31.000000 pytelegrambotapi_fixed-4.12.7/tests/test_types.py
```

### Comparing `pytelegrambotapi_fixed-4.12.6/LICENSE` & `pytelegrambotapi_fixed-4.12.7/LICENSE`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/PKG-INFO` & `pytelegrambotapi_fixed-4.12.7/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pytelegrambotapi_fixed
-Version: 4.12.6
+Version: 4.12.7
 Summary: fixed version of pyTelegramBotApi
 Home-page: https://github.com/molokov-klim/pyTelegramBotAPI_fixed
 License: MIT
 Platform: any
 Classifier: Framework :: Pytest
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `pytelegrambotapi_fixed-4.12.6/README.md` & `pytelegrambotapi_fixed-4.12.7/README.md`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/PKG-INFO` & `pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pytelegrambotapi_fixed
-Version: 4.12.6
+Version: 4.12.7
 Summary: fixed version of pyTelegramBotApi
 Home-page: https://github.com/molokov-klim/pyTelegramBotAPI_fixed
 License: MIT
 Platform: any
 Classifier: Framework :: Pytest
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `pytelegrambotapi_fixed-4.12.6/pytelegrambotapi_fixed.egg-info/SOURCES.txt` & `pytelegrambotapi_fixed-4.12.7/pytelegrambotapi_fixed.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/setup.py` & `pytelegrambotapi_fixed-4.12.7/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 from setuptools import setup
 
 setup(
     name="pytelegrambotapi_fixed",
     description="fixed version of pyTelegramBotApi",
     long_description=open("README.md").read(),
     long_description_content_type="text/markdown",
-    version="4.12.6",
+    version="4.12.7",
     url="https://github.com/molokov-klim/pyTelegramBotAPI_fixed",
     license="MIT",
     py_modules=["telebot"],
     packages=["telebot"],
     install_requires=["pytest", "requests==2.31.0", "wheel==0.38.1", "aiohttp==3.9.0"],
     extras_require={"test": ["beautifulsoup4", "lxml", "requests"]},
     platforms="any",
```

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/__init__.py` & `pytelegrambotapi_fixed-4.12.7/telebot/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -40,21 +40,18 @@
 from telebot import apihelper, util, types
 from telebot.handler_backends import (
     HandlerBackend, MemoryHandlerBackend, FileHandlerBackend, BaseMiddleware,
     CancelUpdate, SkipHandler, State, ContinueHandling
 )
 from telebot.custom_filters import SimpleCustomFilter, AdvancedCustomFilter
 
-
 REPLY_MARKUP_TYPES = Union[
-    types.InlineKeyboardMarkup, types.ReplyKeyboardMarkup, 
+    types.InlineKeyboardMarkup, types.ReplyKeyboardMarkup,
     types.ReplyKeyboardRemove, types.ForceReply]
 
-
-
 """
 Module : telebot
 """
 
 
 class Handler:
     """
@@ -154,31 +151,32 @@
     
 
     :param colorful_logs: Outputs colorful logs
     :type colorful_logs: :obj:`bool`, optional
     """
 
     def __init__(
-            self, token: str, parse_mode: Optional[str]=None, threaded: Optional[bool]=True,
-            skip_pending: Optional[bool]=False, num_threads: Optional[int]=2,
-            next_step_backend: Optional[HandlerBackend]=None, reply_backend: Optional[HandlerBackend]=None,
-            exception_handler: Optional[ExceptionHandler]=None, last_update_id: Optional[int]=0,
-            suppress_middleware_excepions: Optional[bool]=False, state_storage: Optional[StateStorageBase]=StateMemoryStorage(),
-            use_class_middlewares: Optional[bool]=False, 
-            disable_web_page_preview: Optional[bool]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            colorful_logs: Optional[bool]=False,
+            self, token: str, parse_mode: Optional[str] = None, threaded: Optional[bool] = True,
+            skip_pending: Optional[bool] = False, num_threads: Optional[int] = 2,
+            next_step_backend: Optional[HandlerBackend] = None, reply_backend: Optional[HandlerBackend] = None,
+            exception_handler: Optional[ExceptionHandler] = None, last_update_id: Optional[int] = 0,
+            suppress_middleware_excepions: Optional[bool] = False,
+            state_storage: Optional[StateStorageBase] = StateMemoryStorage(),
+            use_class_middlewares: Optional[bool] = False,
+            disable_web_page_preview: Optional[bool] = None,
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            allow_sending_without_reply: Optional[bool] = None,
+            colorful_logs: Optional[bool] = False,
             ssl_verify=True,
     ):
 
         # update-related
         self.token = token
-        self.skip_pending = skip_pending # backward compatibility
+        self.skip_pending = skip_pending  # backward compatibility
         self.last_update_id = last_update_id
 
         # properties
         self.suppress_middleware_excepions = suppress_middleware_excepions
         self.parse_mode = parse_mode
         self.disable_web_page_preview = disable_web_page_preview
         self.disable_notification = disable_notification
@@ -277,29 +275,30 @@
             )
         self.middlewares = [] if use_class_middlewares else None
 
         # threads
         self.threaded = threaded
         if self.threaded:
             self.worker_pool = util.ThreadPool(self, num_threads=num_threads)
-    
+
     @property
     def user(self) -> types.User:
         """
         The User object representing this bot.
         Equivalent to bot.get_me() but the result is cached so only one API call is needed.
 
         :return: Bot's info.
         :rtype: :class:`telebot.types.User`
         """
         if not self._user:
             self._user = self.get_me()
         return self._user
 
-    def enable_save_next_step_handlers(self, delay: Optional[int]=120, filename: Optional[str]="./.handler-saves/step.save"):
+    def enable_save_next_step_handlers(self, delay: Optional[int] = 120,
+                                       filename: Optional[str] = "./.handler-saves/step.save"):
         """
         Enable saving next step handlers (by default saving disabled)
 
         This function explicitly assigns FileHandlerBackend (instead of Saver) just to keep backward
         compatibility whose purpose was to enable file saving capability for handlers. And the same
         implementation is now available with FileHandlerBackend
 
@@ -309,30 +308,28 @@
         :param filename: Filename of save file, defaults to "./.handler-saves/step.save"
         :type filename: :obj:`str`, optional
 
         :return: None
         """
         self.next_step_backend = FileHandlerBackend(self.next_step_backend.handlers, filename, delay)
 
-
-    def enable_saving_states(self, filename: Optional[str]="./.state-save/states.pkl"):
+    def enable_saving_states(self, filename: Optional[str] = "./.state-save/states.pkl"):
         """
         Enable saving states (by default saving disabled)
 
         .. note::
             It is recommended to pass a :class:`~telebot.storage.StatePickleStorage` instance as state_storage
             to TeleBot class.
 
         :param filename: Filename of saving file, defaults to "./.state-save/states.pkl"
         :type filename: :obj:`str`, optional
         """
         self.current_states = StatePickleStorage(file_path=filename)
         self.current_states.create_dir()
 
-
     def enable_save_reply_handlers(self, delay=120, filename="./.handler-saves/reply.save"):
         """
         Enable saving reply handlers (by default saving disable)
 
         This function explicitly assigns FileHandlerBackend (instead of Saver) just to keep backward
         compatibility whose purpose was to enable file saving capability for handlers. And the same
         implementation is now available with FileHandlerBackend
@@ -341,37 +338,34 @@
         :type delay: :obj:`int`, optional
 
         :param filename: Filename of save file, defaults to "./.handler-saves/reply.save"
         :type filename: :obj:`str`, optional
         """
         self.reply_backend = FileHandlerBackend(self.reply_backend.handlers, filename, delay)
 
-
     def disable_save_next_step_handlers(self):
         """
         Disable saving next step handlers (by default saving disable)
 
         This function is left to keep backward compatibility whose purpose was to disable file saving capability
         for handlers. For the same purpose, MemoryHandlerBackend is reassigned as a new next_step_backend backend
         instead of FileHandlerBackend.
         """
         self.next_step_backend = MemoryHandlerBackend(self.next_step_backend.handlers)
 
-
     def disable_save_reply_handlers(self):
         """
         Disable saving next step handlers (by default saving disable)
 
         This function is left to keep backward compatibility whose purpose was to disable file saving capability
         for handlers. For the same purpose, MemoryHandlerBackend is reassigned as a new reply_backend backend
         instead of FileHandlerBackend.
         """
         self.reply_backend = MemoryHandlerBackend(self.reply_backend.handlers)
 
-
     def load_next_step_handlers(self, filename="./.handler-saves/step.save", del_file_after_loading=True):
         """
         Load next step handlers from save file
 
         This function is left to keep backward compatibility whose purpose was to load handlers from file with the
         help of FileHandlerBackend and is only recommended to use if next_step_backend was assigned as
         FileHandlerBackend before entering this function
@@ -381,15 +375,14 @@
         :type filename: :obj:`str`, optional
 
         :param del_file_after_loading: If True is passed, after the loading file will be deleted, defaults to True
         :type del_file_after_loading: :obj:`bool`, optional
         """
         self.next_step_backend.load_handlers(filename, del_file_after_loading)
 
-
     def load_reply_handlers(self, filename="./.handler-saves/reply.save", del_file_after_loading=True):
         """
         Load reply handlers from save file
 
         This function is left to keep backward compatibility whose purpose was to load handlers from file with the
         help of FileHandlerBackend and is only recommended to use if reply_backend was assigned as
         FileHandlerBackend before entering this function
@@ -398,18 +391,19 @@
         :type filename: :obj:`str`, optional
 
         :param del_file_after_loading: If True is passed, after the loading file will be deleted, defaults to True, defaults to True
         :type del_file_after_loading: :obj:`bool`, optional
         """
         self.reply_backend.load_handlers(filename, del_file_after_loading)
 
-
-    def set_webhook(self, url: Optional[str]=None, certificate: Optional[Union[str, Any]]=None, max_connections: Optional[int]=None,
-                    allowed_updates: Optional[List[str]]=None, ip_address: Optional[str]=None,
-                    drop_pending_updates: Optional[bool] = None, timeout: Optional[int]=None, secret_token: Optional[str]=None) -> bool:
+    def set_webhook(self, url: Optional[str] = None, certificate: Optional[Union[str, Any]] = None,
+                    max_connections: Optional[int] = None,
+                    allowed_updates: Optional[List[str]] = None, ip_address: Optional[str] = None,
+                    drop_pending_updates: Optional[bool] = None, timeout: Optional[int] = None,
+                    secret_token: Optional[str] = None) -> bool:
         """
         Use this method to specify a URL and receive incoming updates via an outgoing webhook.
         Whenever there is an update for the bot, we will send an HTTPS POST request to the specified URL,
         containing a JSON-serialized Update. In case of an unsuccessful request, we will give up after
         a reasonable amount of attempts. Returns True on success.
 
         If you'd like to make sure that the webhook was set by you, you can specify secret data in the parameter secret_token.
@@ -453,33 +447,32 @@
         :type secret_token: :obj:`str`, optional
 
         :return: True on success.
         :rtype: :obj:`bool` if the request was successful.
         """
 
         return apihelper.set_webhook(
-            self.token, url = url, certificate = certificate, max_connections = max_connections,
-            allowed_updates = allowed_updates, ip_address = ip_address, drop_pending_updates = drop_pending_updates,
-            timeout = timeout, secret_token = secret_token)
-
+            self.token, url=url, certificate=certificate, max_connections=max_connections,
+            allowed_updates=allowed_updates, ip_address=ip_address, drop_pending_updates=drop_pending_updates,
+            timeout=timeout, secret_token=secret_token, verify=self.ssl_verify)
 
     def run_webhooks(self,
-                    listen: Optional[str]="127.0.0.1",
-                    port: Optional[int]=443,
-                    url_path: Optional[str]=None,
-                    certificate: Optional[str]=None,
-                    certificate_key: Optional[str]=None,
-                    webhook_url: Optional[str]=None,
-                    max_connections: Optional[int]=None,
-                    allowed_updates: Optional[List]=None,
-                    ip_address: Optional[str]=None,
-                    drop_pending_updates: Optional[bool] = None,
-                    timeout: Optional[int]=None,
-                    secret_token: Optional[str]=None,
-                    secret_token_length: Optional[int]=20):
+                     listen: Optional[str] = "127.0.0.1",
+                     port: Optional[int] = 443,
+                     url_path: Optional[str] = None,
+                     certificate: Optional[str] = None,
+                     certificate_key: Optional[str] = None,
+                     webhook_url: Optional[str] = None,
+                     max_connections: Optional[int] = None,
+                     allowed_updates: Optional[List] = None,
+                     ip_address: Optional[str] = None,
+                     drop_pending_updates: Optional[bool] = None,
+                     timeout: Optional[int] = None,
+                     secret_token: Optional[str] = None,
+                     secret_token_length: Optional[int] = 20):
         """
         This class sets webhooks and listens to a given url and port.
 
         Requires fastapi, uvicorn, and latest version of starlette.
 
         :param listen: IP address to listen to, defaults to "127.0.0.1"
         :type listen: :obj:`str`, optional
@@ -530,15 +523,15 @@
         # generate secret token if not set
         if not secret_token:
             secret_token = ''.join(random.choices(string.ascii_uppercase + string.digits, k=secret_token_length))
 
         if not url_path:
             url_path = self.token + '/'
         if url_path[-1] != '/': url_path += '/'
-        
+
         protocol = "https" if certificate else "http"
         if not webhook_url:
             webhook_url = "{}://{}:{}/{}".format(protocol, listen, port, url_path)
 
         if certificate and certificate_key:
             # noinspection PyTypeChecker
             ssl_ctx = ssl.create_default_context(ssl.Purpose.CLIENT_AUTH)
@@ -560,19 +553,19 @@
 
         ssl_context = (certificate, certificate_key) if certificate else (None, None)
         # webhooks module
         try:
             from telebot.ext.sync import SyncWebhookListener
         except (NameError, ImportError):
             raise ImportError("Please install uvicorn and fastapi in order to use `run_webhooks` method.")
-        self.webhook_listener = SyncWebhookListener(bot=self, secret_token=secret_token, host=listen, port=port, ssl_context=ssl_context, url_path='/'+url_path)
+        self.webhook_listener = SyncWebhookListener(bot=self, secret_token=secret_token, host=listen, port=port,
+                                                    ssl_context=ssl_context, url_path='/' + url_path)
         self.webhook_listener.run_app()
 
-
-    def delete_webhook(self, drop_pending_updates: Optional[bool]=None, timeout: Optional[int]=None) -> bool:
+    def delete_webhook(self, drop_pending_updates: Optional[bool] = None, timeout: Optional[int] = None) -> bool:
         """
         Use this method to remove webhook integration if you decide to switch back to getUpdates.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#deletewebhook
 
         :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
@@ -581,48 +574,45 @@
         :param timeout: Request connection timeout, defaults to None
         :type timeout: :obj:`int`, optional
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
         return apihelper.delete_webhook(
-            self.token, drop_pending_updates=drop_pending_updates, timeout=timeout)
+            self.token, drop_pending_updates=drop_pending_updates, timeout=timeout, verify=self.ssl_verify)
 
-
-    def get_webhook_info(self, timeout: Optional[int]=None) -> types.WebhookInfo:
+    def get_webhook_info(self, timeout: Optional[int] = None) -> types.WebhookInfo:
         """
         Use this method to get current webhook status. Requires no parameters.
         On success, returns a WebhookInfo object. If the bot is using getUpdates, will return an object with the url field empty.
 
         Telegram documentation: https://core.telegram.org/bots/api#getwebhookinfo
 
         :param timeout: Request connection timeout
         :type timeout: :obj:`int`, optional
 
         :return: On success, returns a WebhookInfo object.
         :rtype: :class:`telebot.types.WebhookInfo`
         """
         return types.WebhookInfo.de_json(
-            apihelper.get_webhook_info(self.token, timeout=timeout)
+            apihelper.get_webhook_info(self.token, timeout=timeout, verify=self.ssl_verify)
         )
 
-
     def remove_webhook(self) -> bool:
         """
         Deletes webhooks using set_webhook() function.
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
         return self.set_webhook()  # No params resets webhook
 
-
-    def get_updates(self, offset: Optional[int]=None, limit: Optional[int]=None, 
-            timeout: Optional[int]=20, allowed_updates: Optional[List[str]]=None, 
-            long_polling_timeout: int=20) -> List[types.Update]:
+    def get_updates(self, offset: Optional[int] = None, limit: Optional[int] = None,
+                    timeout: Optional[int] = 20, allowed_updates: Optional[List[str]] = None,
+                    long_polling_timeout: int = 20) -> List[types.Update]:
         """
         Use this method to receive incoming updates using long polling (wiki). An Array of Update objects is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#getupdates
 
 
         :param offset: Identifier of the first update to be returned. Must be greater by one than the highest among the identifiers of previously received updates.
@@ -644,15 +634,15 @@
         :type long_polling_timeout: :obj:`int`, optional
 
         :return: An Array of Update objects is returned.
         :rtype: :obj:`list` of :class:`telebot.types.Update`
         """
         json_updates = apihelper.get_updates(
             self.token, offset=offset, limit=limit, timeout=timeout, allowed_updates=allowed_updates,
-            long_polling_timeout=long_polling_timeout)
+            long_polling_timeout=long_polling_timeout, verify=self.ssl_verify)
         return [types.Update.de_json(ju) for ju in json_updates]
 
     def __skip_updates(self):
         """
         Get and discard all pending updates before first poll of the bot.
 
         :meta private:
@@ -670,15 +660,15 @@
         
         :raises ApiException when a call has failed.
         """
         if self.skip_pending:
             self.__skip_updates()
             logger.debug('Skipped all pending messages')
             self.skip_pending = False
-        updates = self.get_updates(offset=(self.last_update_id + 1), 
+        updates = self.get_updates(offset=(self.last_update_id + 1),
                                    allowed_updates=allowed_updates,
                                    timeout=timeout, long_polling_timeout=long_polling_timeout)
         self.process_new_updates(updates)
 
     def process_new_updates(self, updates: List[types.Update]):
         """
         Processes new updates. Just pass list of subclasses of Update to this method.
@@ -710,15 +700,15 @@
         new_chat_join_request = None
         new_chat_boosts = None
         new_removed_chat_boosts = None
         new_business_connections = None
         new_business_messages = None
         new_edited_business_messages = None
         new_deleted_business_messages = None
-        
+
         for update in updates:
             if apihelper.ENABLE_MIDDLEWARE and not self.use_class_middlewares:
                 try:
                     self.process_middlewares(update)
                 except Exception as e:
                     logger.error(str(e))
                     if not self.suppress_middleware_excepions:
@@ -792,15 +782,14 @@
             if update.edited_business_message:
                 if new_edited_business_messages is None: new_edited_business_messages = []
                 new_edited_business_messages.append(update.edited_business_message)
             if update.deleted_business_messages:
                 if new_deleted_business_messages is None: new_deleted_business_messages = []
                 new_deleted_business_messages.append(update.deleted_business_messages)
 
-
         if new_messages:
             self.process_new_messages(new_messages)
         if new_edited_messages:
             self.process_new_edited_messages(new_edited_messages)
         if new_channel_posts:
             self.process_new_channel_posts(new_channel_posts)
         if new_edited_channel_posts:
@@ -870,20 +859,21 @@
         self._notify_command_handlers(self.edited_channel_post_handlers, new_edited_channel_post, 'edited_channel_post')
 
     def process_new_message_reaction(self, new_message_reactions):
         """
         :meta private:
         """
         self._notify_command_handlers(self.message_reaction_handlers, new_message_reactions, 'message_reaction')
-    
+
     def process_new_message_reaction_count(self, new_message_reaction_counts):
         """
         :meta private:
         """
-        self._notify_command_handlers(self.message_reaction_count_handlers, new_message_reaction_counts, 'message_reaction_count')
+        self._notify_command_handlers(self.message_reaction_count_handlers, new_message_reaction_counts,
+                                      'message_reaction_count')
 
     def process_new_inline_query(self, new_inline_queries):
         """
         :meta private:
         """
         self._notify_command_handlers(self.inline_handlers, new_inline_queries, 'inline_query')
 
@@ -918,15 +908,15 @@
         self._notify_command_handlers(self.poll_handlers, new_polls, 'poll')
 
     def process_new_poll_answer(self, new_poll_answers):
         """
         :meta private:
         """
         self._notify_command_handlers(self.poll_answer_handlers, new_poll_answers, 'poll_answer')
-    
+
     def process_new_my_chat_member(self, new_my_chat_members):
         """
         :meta private:
         """
         self._notify_command_handlers(self.my_chat_member_handlers, new_my_chat_members, 'my_chat_member')
 
     def process_new_chat_member(self, new_chat_members):
@@ -953,36 +943,36 @@
         """
         self._notify_command_handlers(self.removed_chat_boost_handlers, new_removed_chat_boosts, 'removed_chat_boost')
 
     def process_new_business_connection(self, new_business_connections):
         """
         :meta private:
         """
-        self._notify_command_handlers(self.business_connection_handlers, new_business_connections, 'business_connection')
+        self._notify_command_handlers(self.business_connection_handlers, new_business_connections,
+                                      'business_connection')
 
     def process_new_business_message(self, new_business_messages):
         """
         :meta private:
         """
         self._notify_command_handlers(self.business_message_handlers, new_business_messages, 'business_message')
 
     def process_new_edited_business_message(self, new_edited_business_messages):
         """
         :meta private:
         """
-        self._notify_command_handlers(self.edited_business_message_handlers, new_edited_business_messages, 'edited_business_message')
-        
+        self._notify_command_handlers(self.edited_business_message_handlers, new_edited_business_messages,
+                                      'edited_business_message')
+
     def process_new_deleted_business_messages(self, new_deleted_business_messages):
         """
         :meta private:
         """
-        self._notify_command_handlers(self.deleted_business_messages_handlers, new_deleted_business_messages, 'deleted_business_messages')
-    
-
-
+        self._notify_command_handlers(self.deleted_business_messages_handlers, new_deleted_business_messages,
+                                      'deleted_business_messages')
 
     def process_middlewares(self, update):
         """
         :meta private:
         """
         if self.typed_middleware_handlers:
             for update_type, middlewares in self.typed_middleware_handlers.items():
@@ -998,15 +988,14 @@
             for default_middleware_handler in self.default_middleware_handlers:
                 try:
                     default_middleware_handler(self, update)
                 except Exception as e:
                     e.args = e.args + (f'Default middleware handler "{default_middleware_handler.__qualname__}"',)
                     raise
 
-
     def __notify_update(self, new_messages):
         """
         :meta private:
         """
         if len(self.update_listener) == 0:
             return
         for listener in self.update_listener:
@@ -1023,22 +1012,23 @@
 
         self.event_handler = EventHandler()
         path = path_to_watch if path_to_watch else None
         if path is None:
             # Make it possible to specify --path argument to the script
             path = sys.argv[sys.argv.index('--path') + 1] if '--path' in sys.argv else '.'
 
-            
         self.event_observer = Observer()
         self.event_observer.schedule(self.event_handler, path, recursive=True)
         self.event_observer.start()
 
-    def infinity_polling(self, timeout: Optional[int]=20, skip_pending: Optional[bool]=False, long_polling_timeout: Optional[int]=20,
-                         logger_level: Optional[int]=logging.ERROR, allowed_updates: Optional[List[str]]=None,
-                         restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None, *args, **kwargs):
+    def infinity_polling(self, timeout: Optional[int] = 20, skip_pending: Optional[bool] = False,
+                         long_polling_timeout: Optional[int] = 20,
+                         logger_level: Optional[int] = logging.ERROR, allowed_updates: Optional[List[str]] = None,
+                         restart_on_change: Optional[bool] = False, path_to_watch: Optional[str] = None, *args,
+                         **kwargs):
         """
         Wrap polling with infinite loop and exception handling to avoid bot stops polling.
 
         .. note::
         
             Install watchdog and psutil before using restart_on_change option.
 
@@ -1091,19 +1081,20 @@
                 time.sleep(3)
                 continue
             if logger_level and logger_level >= logging.INFO:
                 logger.error("Infinity polling: polling exited")
         if logger_level and logger_level >= logging.INFO:
             logger.error("Break infinity polling")
 
-
-    def polling(self, non_stop: Optional[bool]=False, skip_pending: Optional[bool]=False, interval: Optional[int]=0,
-                timeout: Optional[int]=20, long_polling_timeout: Optional[int]=20,
-                logger_level: Optional[int]=logging.ERROR, allowed_updates: Optional[List[str]]=None,
-                none_stop: Optional[bool]=None, restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None):
+    def polling(self, non_stop: Optional[bool] = False, skip_pending: Optional[bool] = False,
+                interval: Optional[int] = 0,
+                timeout: Optional[int] = 20, long_polling_timeout: Optional[int] = 20,
+                logger_level: Optional[int] = logging.ERROR, allowed_updates: Optional[List[str]] = None,
+                none_stop: Optional[bool] = None, restart_on_change: Optional[bool] = False,
+                path_to_watch: Optional[str] = None):
         """
         This function creates a new Thread that calls an internal __retrieve_updates function.
         This allows the bot to retrieve Updates automatically and notify listeners and message handlers accordingly.
 
         Warning: Do not call this function more than once!
         
         Always gets updates.
@@ -1162,51 +1153,54 @@
         if skip_pending:
             self.__skip_updates()
 
         if restart_on_change:
             self._setup_change_detector(path_to_watch)
 
         logger.info('Starting your bot with username: [@%s]', self.user.username)
-            
+
         if self.threaded:
-            self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
+            self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout,
+                                    long_polling_timeout=long_polling_timeout,
                                     logger_level=logger_level, allowed_updates=allowed_updates)
         else:
-            self.__non_threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
+            self.__non_threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout,
+                                        long_polling_timeout=long_polling_timeout,
                                         logger_level=logger_level, allowed_updates=allowed_updates)
 
     def _handle_exception(self, exception: Exception) -> bool:
         if self.exception_handler is None:
             return False
 
         handled = self.exception_handler.handle(exception)
         return handled
 
-    def __threaded_polling(self, non_stop = False, interval = 0, timeout = None, long_polling_timeout = None,
+    def __threaded_polling(self, non_stop=False, interval=0, timeout=None, long_polling_timeout=None,
                            logger_level=logging.ERROR, allowed_updates=None):
         if (not logger_level) or (logger_level < logging.INFO):
             warning = "\n  Warning: this message appearance will be changed. Set logger_level=logging.INFO to continue seeing it."
         else:
             warning = ""
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
+        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
         logger.info('Started polling.' + warning)
         self.__stop_polling.clear()
         error_interval = 0.25
 
         polling_thread = util.WorkerThread(name="PollingThread")
         or_event = util.OrEvent(
             polling_thread.done_event,
             polling_thread.exception_event,
             self.worker_pool.exception_event
         )
 
         while not self.__stop_polling.wait(interval):
             or_event.clear()
             try:
-                polling_thread.put(self.__retrieve_updates, timeout, long_polling_timeout, allowed_updates=allowed_updates)
+                polling_thread.put(self.__retrieve_updates, timeout, long_polling_timeout,
+                                   allowed_updates=allowed_updates)
                 or_event.wait()  # wait for polling thread finish, polling thread error or thread pool error
                 polling_thread.raise_exceptions()
                 self.worker_pool.raise_exceptions()
                 error_interval = 0.25
             except apihelper.ApiException as e:
                 handled = self._handle_exception(e)
                 if not handled:
@@ -1226,47 +1220,46 @@
                             error_interval *= 2
                         else:
                             error_interval = 60
                 else:
                     # polling_thread.clear_exceptions()
                     # self.worker_pool.clear_exceptions()
                     time.sleep(error_interval)
-                polling_thread.clear_exceptions()   #*
-                self.worker_pool.clear_exceptions() #*
+                polling_thread.clear_exceptions()  # *
+                self.worker_pool.clear_exceptions()  # *
             except KeyboardInterrupt:
                 # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
                 logger.info("KeyboardInterrupt received." + warning)
                 self.__stop_polling.set()
                 break
             except Exception as e:
                 handled = self._handle_exception(e)
                 if not handled:
                     polling_thread.stop()
-                    polling_thread.clear_exceptions()   #*
-                    self.worker_pool.clear_exceptions() #*
+                    polling_thread.clear_exceptions()  # *
+                    self.worker_pool.clear_exceptions()  # *
                     raise e
                 else:
                     polling_thread.clear_exceptions()
                     self.worker_pool.clear_exceptions()
                     time.sleep(error_interval)
 
         polling_thread.stop()
         polling_thread.clear_exceptions()
         self.worker_pool.clear_exceptions()
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
+        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
         logger.info('Stopped polling.' + warning)
 
-
     def __non_threaded_polling(self, non_stop=False, interval=0, timeout=None, long_polling_timeout=None,
                                logger_level=logging.ERROR, allowed_updates=None):
         if (not logger_level) or (logger_level < logging.INFO):
             warning = "\n  Warning: this message appearance will be changed. Set logger_level=logging.INFO to continue seeing it."
         else:
             warning = ""
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
+        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
         logger.info('Started polling.' + warning)
         self.__stop_polling.clear()
         error_interval = 0.25
 
         while not self.__stop_polling.wait(interval):
             try:
                 self.__retrieve_updates(timeout, long_polling_timeout, allowed_updates=allowed_updates)
@@ -1296,70 +1289,64 @@
                 break
             except Exception as e:
                 handled = self._handle_exception(e)
                 if not handled:
                     raise e
                 else:
                     time.sleep(error_interval)
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
+        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
         logger.info('Stopped polling.' + warning)
 
-
     def _exec_task(self, task, *args, **kwargs):
         if self.threaded:
             self.worker_pool.put(task, *args, **kwargs)
         else:
             try:
                 task(*args, **kwargs)
             except Exception as e:
                 handled = self._handle_exception(e)
                 if not handled:
                     raise e
 
-
     def stop_polling(self):
         """
         Stops polling.
 
         Does not accept any arguments.
         """
         self.__stop_polling.set()
 
-
     def stop_bot(self):
         """
         Stops bot by stopping polling and closing the worker pool.
         """
         self.stop_polling()
         if self.threaded and self.worker_pool:
             self.worker_pool.close()
 
-
     def set_update_listener(self, listener: Callable):
         """
         Sets a listener function to be called when a new update is received.
 
         :param listener: Listener function.
         :type listener: Callable
         """
         self.update_listener.append(listener)
 
-
     def get_me(self) -> types.User:
         """
         A simple method for testing your bot's authentication token. Requires no parameters.
         Returns basic information about the bot in form of a User object.
 
         Telegram documentation: https://core.telegram.org/bots/api#getme
         """
         return types.User.de_json(
-            apihelper.get_me(self.token)
+            apihelper.get_me(self.token, verify=self.ssl_verify)
         )
 
-
     def get_file(self, file_id: Optional[str]) -> types.File:
         """
         Use this method to get basic info about a file and prepare it for downloading.
         For the moment, bots can download files of up to 20MB in size. 
         On success, a File object is returned. 
         It is guaranteed that the link will be valid for at least 1 hour. 
         When the link expires, a new one can be requested by calling get_file again.
@@ -1368,43 +1355,40 @@
 
         :param file_id: File identifier
         :type file_id: :obj:`str`
 
         :return: :class:`telebot.types.File`
         """
         return types.File.de_json(
-            apihelper.get_file(self.token, file_id)
+            apihelper.get_file(self.token, file_id, verify=self.ssl_verify)
         )
 
-
     def get_file_url(self, file_id: Optional[str]) -> str:
         """
         Get a valid URL for downloading a file.
 
         :param file_id: File identifier to get download URL for.
         :type file_id: :obj:`str`
 
         :return: URL for downloading the file.
         :rtype: :obj:`str`
         """
-        return apihelper.get_file_url(self.token, file_id)
-
+        return apihelper.get_file_url(self.token, file_id, verify=self.ssl_verify)
 
     def download_file(self, file_path: str) -> bytes:
         """
         Downloads file.
 
         :param file_path: Path where the file should be downloaded.
         :type file_path: str
 
         :return: bytes
         :rtype: :obj:`bytes`
         """
-        return apihelper.download_file(self.token, file_path)
-
+        return apihelper.download_file(self.token, file_path, verify=self.ssl_verify)
 
     def log_out(self) -> bool:
         """
         Use this method to log out from the cloud Bot API server before launching the bot locally. 
         You MUST log out the bot before running it locally, otherwise there is no guarantee
         that the bot will receive updates.
         After a successful call, you can immediately log in on a local server, 
@@ -1412,32 +1396,33 @@
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#logout
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.log_out(self.token)
-    
-    
+        return apihelper.log_out(self.token, verify=self.ssl_verify)
+
     def close(self) -> bool:
         """
         Use this method to close the bot instance before moving it from one local server to another. 
         You need to delete the webhook before calling this method to ensure that the bot isn't launched again
         after server restart.
         The method will return error 429 in the first 10 minutes after the bot is launched. 
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#close
 
         :return: :obj:`bool`
         """
-        return apihelper.close(self.token)
-    
-    def set_message_reaction(self, chat_id: Union[int, str], message_id: int, reaction: Optional[List[types.ReactionType]]=None, is_big: Optional[bool]=None) -> bool:
+        return apihelper.close(self.token, verify=self.ssl_verify)
+
+    def set_message_reaction(self, chat_id: Union[int, str], message_id: int,
+                             reaction: Optional[List[types.ReactionType]] = None,
+                             is_big: Optional[bool] = None) -> bool:
         """
         Use this method to change the chosen reactions on a message. 
         Service messages can't be reacted to. Automatically forwarded messages from a channel to its discussion group have the same
         available reactions as messages in the channel. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setmessagereaction
 
@@ -1453,19 +1438,18 @@
 
         :param is_big: Pass True to set the reaction with a big animation
         :type is_big: :obj:`bool`
 
         :return: :obj:`bool`
         """
         return apihelper.set_message_reaction(
-            self.token, chat_id, message_id, reaction = reaction, is_big = is_big)
+            self.token, chat_id, message_id, reaction=reaction, is_big=is_big, verify=self.ssl_verify)
 
-
-    def get_user_profile_photos(self, user_id: int, offset: Optional[int]=None, 
-            limit: Optional[int]=None) -> types.UserProfilePhotos:
+    def get_user_profile_photos(self, user_id: int, offset: Optional[int] = None,
+                                limit: Optional[int] = None) -> types.UserProfilePhotos:
         """
         Use this method to get a list of profile pictures for a user.
         Returns a :class:`telebot.types.UserProfilePhotos` object.
 
         Telegram documentation: https://core.telegram.org/bots/api#getuserprofilephotos
 
         :param user_id: Unique identifier of the target user
@@ -1478,67 +1462,63 @@
         :type limit: :obj:`int`
 
         :return: `UserProfilePhotos <https://core.telegram.org/bots/api#userprofilephotos>`_
         :rtype: :class:`telebot.types.UserProfilePhotos`
 
         """
         return types.UserProfilePhotos.de_json(
-            apihelper.get_user_profile_photos(self.token, user_id, offset=offset, limit=limit)
+            apihelper.get_user_profile_photos(self.token, user_id, offset=offset, limit=limit, verify=self.ssl_verify)
         )
 
-
     def get_chat(self, chat_id: Union[int, str]) -> types.Chat:
         """
         Use this method to get up to date information about the chat (current name of the user for one-on-one
         conversations, current username of a user, group or channel, etc.). Returns a Chat object on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getchat
 
         :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: Chat information
         :rtype: :class:`telebot.types.Chat`
         """
         return types.Chat.de_json(
-            apihelper.get_chat(self.token, chat_id)
+            apihelper.get_chat(self.token, chat_id, verify=self.ssl_verify)
         )
 
-
     def leave_chat(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method for your bot to leave a group, supergroup or channel. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#leavechat
 
         :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: :obj:`bool`
         """
-        return apihelper.leave_chat(self.token, chat_id)
-
+        return apihelper.leave_chat(self.token, chat_id, verify=self.ssl_verify)
 
     def get_chat_administrators(self, chat_id: Union[int, str]) -> List[types.ChatMember]:
         """
         Use this method to get a list of administrators in a chat.
         On success, returns an Array of ChatMember objects that contains
         information about all chat administrators except other bots.
 
         Telegram documentation: https://core.telegram.org/bots/api#getchatadministrators    
 
         :param chat_id: Unique identifier for the target chat or username
             of the target supergroup or channel (in the format @channelusername)
         :return: List made of ChatMember objects.
         :rtype: :obj:`list` of :class:`telebot.types.ChatMember`
         """
-        result = apihelper.get_chat_administrators(self.token, chat_id)
+        result = apihelper.get_chat_administrators(self.token, chat_id, verify=self.ssl_verify)
         return [types.ChatMember.de_json(r) for r in result]
 
-
     @util.deprecated(deprecation_text="Use get_chat_member_count instead")
     def get_chat_members_count(self, chat_id: Union[int, str]) -> int:
         """
         This function is deprecated. Use `get_chat_member_count` instead.
 
         .. deprecated:: 4.0.0
             This function is deprecated. Use `get_chat_member_count` instead.
@@ -1549,31 +1529,29 @@
 
         :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: Number of members in the chat.
         :rtype: :obj:`int`
         """
-        return apihelper.get_chat_member_count(self.token, chat_id)
-
+        return apihelper.get_chat_member_count(self.token, chat_id, verify=self.ssl_verify)
 
     def get_chat_member_count(self, chat_id: Union[int, str]) -> int:
         """
         Use this method to get the number of members in a chat.
 
         Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
 
         :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: Number of members in the chat.
         :rtype: :obj:`int`
         """
-        return apihelper.get_chat_member_count(self.token, chat_id)
-
+        return apihelper.get_chat_member_count(self.token, chat_id, verify=self.ssl_verify)
 
     def set_chat_sticker_set(self, chat_id: Union[int, str], sticker_set_name: str) -> types.StickerSet:
         """
         Use this method to set a new group sticker set for a supergroup. The bot must be an administrator in the chat
         for this to work and must have the appropriate administrator rights. Use the field can_set_sticker_set optionally returned
         in getChat requests to check if the bot can use this method. Returns True on success.
         
@@ -1584,16 +1562,15 @@
 
         :param sticker_set_name: Name of the sticker set to be set as the group sticker set
         :type sticker_set_name: :obj:`str`
 
         :return: StickerSet object
         :rtype: :class:`telebot.types.StickerSet`
         """
-        return apihelper.set_chat_sticker_set(self.token, chat_id, sticker_set_name)
-
+        return apihelper.set_chat_sticker_set(self.token, chat_id, sticker_set_name, verify=self.ssl_verify)
 
     def delete_chat_sticker_set(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to delete a group sticker set from a supergroup. The bot must be an administrator in the chat
         for this to work and must have the appropriate admin rights. Use the field can_set_sticker_set
         optionally returned in getChat requests to check if the bot can use this method. Returns True on success.
         
@@ -1601,16 +1578,15 @@
 
         :param chat_id:	Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_chat_sticker_set(self.token, chat_id)
-
+        return apihelper.delete_chat_sticker_set(self.token, chat_id, verify=self.ssl_verify)
 
     def get_chat_member(self, chat_id: Union[int, str], user_id: int) -> types.ChatMember:
         """
         Use this method to get information about a member of a chat. Returns a ChatMember object on success.
         
         Telegram documentation: https://core.telegram.org/bots/api#getchatmember
 
@@ -1620,33 +1596,32 @@
         :param user_id: Unique identifier of the target user
         :type user_id: :obj:`int`
 
         :return: Returns ChatMember object on success.
         :rtype: :class:`telebot.types.ChatMember`
         """
         return types.ChatMember.de_json(
-            apihelper.get_chat_member(self.token, chat_id, user_id)
+            apihelper.get_chat_member(self.token, chat_id, user_id, verify=self.ssl_verify)
         )
 
-
     def send_message(
-            self, chat_id: Union[int, str], text: str, 
-            parse_mode: Optional[str]=None, 
-            entities: Optional[List[types.MessageEntity]]=None,
-            disable_web_page_preview: Optional[bool]=None,    # deprecated, for backward compatibility
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            link_preview_options : Optional[types.LinkPreviewOptions]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], text: str,
+            parse_mode: Optional[str] = None,
+            entities: Optional[List[types.MessageEntity]] = None,
+            disable_web_page_preview: Optional[bool] = None,  # deprecated, for backward compatibility
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            link_preview_options: Optional[types.LinkPreviewOptions] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send text messages.
 
         Warning: Do not send more than about 4096 characters each message, otherwise you'll risk an HTTP 414 error.
         If you must send more than 4096 characters, 
         use the `split_string` or `smart_split` function in util.py.
 
@@ -1708,30 +1683,34 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if disable_web_page_preview is not None:
-            logger.warning("The parameter 'disable_web_page_preview' is deprecated. Use 'link_preview_options' instead.")
+            logger.warning(
+                "The parameter 'disable_web_page_preview' is deprecated. Use 'link_preview_options' instead.")
 
             if link_preview_options:
-                logger.warning("Both 'link_preview_options' and 'disable_web_page_preview' parameters are set: conflicting, 'disable_web_page_preview' is deprecated")
+                logger.warning(
+                    "Both 'link_preview_options' and 'disable_web_page_preview' parameters are set: conflicting, 'disable_web_page_preview' is deprecated")
             else:
                 # create a LinkPreviewOptions object
                 link_preview_options = types.LinkPreviewOptions(is_disabled=disable_web_page_preview)
 
         if link_preview_options and (link_preview_options.is_disabled is None):
             link_preview_options.is_disabled = self.disable_web_page_preview
 
@@ -1740,24 +1719,25 @@
             # create a LinkPreviewOptions object
             link_preview_options = types.LinkPreviewOptions(is_disabled=self.disable_web_page_preview)
 
         return types.Message.de_json(
             apihelper.send_message(
                 self.token, chat_id, text,
                 reply_markup=reply_markup, parse_mode=parse_mode, disable_notification=disable_notification,
-                timeout=timeout, entities=entities, protect_content=protect_content, message_thread_id=message_thread_id,
-                reply_parameters=reply_parameters, link_preview_options=link_preview_options, business_connection_id=business_connection_id))
-
+                timeout=timeout, entities=entities, protect_content=protect_content,
+                message_thread_id=message_thread_id,
+                reply_parameters=reply_parameters, link_preview_options=link_preview_options,
+                business_connection_id=business_connection_id, verify=self.ssl_verify))
 
     def forward_message(
-            self, chat_id: Union[int, str], from_chat_id: Union[int, str], 
-            message_id: int, disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
+            self, chat_id: Union[int, str], from_chat_id: Union[int, str],
+            message_id: int, disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            message_thread_id: Optional[int] = None) -> types.Message:
         """
         Use this method to forward messages of any kind.
 
         Telegram documentation: https://core.telegram.org/bots/api#forwardmessage
 
         :param disable_notification: Sends the message silently. Users will receive a notification with no sound
         :type disable_notification: :obj:`bool`
@@ -1785,32 +1765,32 @@
         """
         disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
         protect_content = self.protect_content if (protect_content is None) else protect_content
 
         return types.Message.de_json(
             apihelper.forward_message(
                 self.token, chat_id, from_chat_id, message_id, disable_notification=disable_notification,
-                timeout=timeout, protect_content=protect_content, message_thread_id=message_thread_id))
-
+                timeout=timeout, protect_content=protect_content, message_thread_id=message_thread_id,
+                verify=self.ssl_verify))
 
     def copy_message(
-            self, chat_id: Union[int, str], 
-            from_chat_id: Union[int, str], 
-            message_id: int, 
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None) -> types.MessageID:
+            self, chat_id: Union[int, str],
+            from_chat_id: Union[int, str],
+            message_id: int,
+            caption: Optional[str] = None,
+            parse_mode: Optional[str] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None) -> types.MessageID:
         """
         Use this method to copy messages of any kind.
 
         Telegram documentation: https://core.telegram.org/bots/api#copymessage
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -1865,34 +1845,37 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.MessageID.de_json(
             apihelper.copy_message(self.token, chat_id, from_chat_id, message_id, caption=caption,
-                parse_mode=parse_mode, caption_entities=caption_entities, disable_notification=disable_notification,
-                reply_markup=reply_markup, timeout=timeout, protect_content=protect_content,
-               message_thread_id=message_thread_id, reply_parameters=reply_parameters))
-
+                                   parse_mode=parse_mode, caption_entities=caption_entities,
+                                   disable_notification=disable_notification,
+                                   reply_markup=reply_markup, timeout=timeout, protect_content=protect_content,
+                                   message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                                   verify=self.ssl_verify))
 
-    def delete_message(self, chat_id: Union[int, str], message_id: int, 
-            timeout: Optional[int]=None) -> bool:
+    def delete_message(self, chat_id: Union[int, str], message_id: int,
+                       timeout: Optional[int] = None) -> bool:
         """
         Use this method to delete a message, including service messages, with the following limitations:
         - A message can only be deleted if it was sent less than 48 hours ago.
         - A dice message in a private chat can only be deleted if it was sent more than 24 hours ago.
         - Bots can delete outgoing messages in private chats, groups, and supergroups.
         - Bots can delete incoming messages in private chats.
         - Bots granted can_post_messages permissions can delete outgoing messages in channels.
@@ -1910,17 +1893,16 @@
 
         :param timeout: Timeout in seconds for the request.
         :type timeout: :obj:`int`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_message(self.token, chat_id, message_id, timeout=timeout)
+        return apihelper.delete_message(self.token, chat_id, message_id, timeout=timeout, verify=self.ssl_verify)
 
-    
     def delete_messages(self, chat_id: Union[int, str], message_ids: List[int]):
         """
         Use this method to delete multiple messages simultaneously. If some of the specified messages can't be found, they are skipped.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#deletemessages
 
@@ -1929,19 +1911,20 @@
 
         :param message_ids: Identifiers of the messages to be deleted
         :type message_ids: :obj:`list` of :obj:`int`
 
         :return: Returns True on success.
 
         """
-        return apihelper.delete_messages(self.token, chat_id, message_ids)
+        return apihelper.delete_messages(self.token, chat_id, message_ids, verify=self.ssl_verify)
 
-    
-    def forward_messages(self, chat_id: Union[str, int], from_chat_id: Union[str, int], message_ids: List[int], disable_notification: Optional[bool]=None,
-                         message_thread_id: Optional[int]=None, protect_content: Optional[bool]=None) -> List[types.MessageID]:
+    def forward_messages(self, chat_id: Union[str, int], from_chat_id: Union[str, int], message_ids: List[int],
+                         disable_notification: Optional[bool] = None,
+                         message_thread_id: Optional[int] = None, protect_content: Optional[bool] = None) -> List[
+        types.MessageID]:
         """
         Use this method to forward multiple messages of any kind. If some of the specified messages can't be found or forwarded, they are skipped.
         Service messages and messages with protected content can't be forwarded. Album grouping is kept for forwarded messages.
         On success, an array of MessageId of the sent messages is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#forwardmessages
 
@@ -1969,22 +1952,22 @@
 
         disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
         protect_content = self.protect_content if (protect_content is None) else protect_content
 
         result = apihelper.forward_messages(
             self.token, chat_id, from_chat_id, message_ids,
             disable_notification=disable_notification, message_thread_id=message_thread_id,
-            protect_content=protect_content)
+            protect_content=protect_content, verify=self.ssl_verify)
         return [types.MessageID.de_json(message_id) for message_id in result]
 
-    
     def copy_messages(self, chat_id: Union[str, int], from_chat_id: Union[str, int], message_ids: List[int],
-                        disable_notification: Optional[bool] = None, message_thread_id: Optional[int] = None,
-                        protect_content: Optional[bool] = None, remove_caption: Optional[bool] = None) -> List[types.MessageID]:
-            """
+                      disable_notification: Optional[bool] = None, message_thread_id: Optional[int] = None,
+                      protect_content: Optional[bool] = None, remove_caption: Optional[bool] = None) -> List[
+        types.MessageID]:
+        """
             Use this method to copy messages of any kind. If some of the specified messages can't be found or copied, they are skipped.
             Service messages, giveaway messages, giveaway winners messages, and invoice messages can't be copied.
             A quiz poll can be copied only if the value of the field correct_option_id is known to the bot.
             The method is analogous to the method forwardMessages, but the copied messages don't have a link to the original message.
             Album grouping is kept for copied messages. On success, an array of MessageId of the sent messages is returned.
 
             Telegram documentation: https://core.telegram.org/bots/api#copymessages
@@ -2010,34 +1993,34 @@
 
             :param remove_caption: Pass True to copy the messages without their captions
             :type remove_caption: :obj:`bool`
 
             :return: On success, an array of MessageId of the sent messages is returned.
             :rtype: :obj:`list` of :class:`telebot.types.MessageID`
             """
-            disable_notification = self.disable_notification if disable_notification is None else disable_notification
-            protect_content = self.protect_content if protect_content is None else protect_content
+        disable_notification = self.disable_notification if disable_notification is None else disable_notification
+        protect_content = self.protect_content if protect_content is None else protect_content
 
-            result = apihelper.copy_messages(
-                self.token, chat_id, from_chat_id, message_ids, disable_notification=disable_notification,
-                message_thread_id=message_thread_id, protect_content=protect_content, remove_caption=remove_caption)
-            return [types.MessageID.de_json(message_id) for message_id in result]
-    
+        result = apihelper.copy_messages(
+            self.token, chat_id, from_chat_id, message_ids, disable_notification=disable_notification,
+            message_thread_id=message_thread_id, protect_content=protect_content, remove_caption=remove_caption,
+            verify=self.ssl_verify)
+        return [types.MessageID.de_json(message_id) for message_id in result]
 
     def send_dice(
             self, chat_id: Union[int, str],
-            emoji: Optional[str]=None, disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            emoji: Optional[str] = None, disable_notification: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send an animated emoji that will display a random value. On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#senddice
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -2084,47 +2067,48 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_dice(
                 self.token, chat_id, emoji=emoji, disable_notification=disable_notification,
                 reply_markup=reply_markup, timeout=timeout, protect_content=protect_content,
-                message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id))
-
-
+                message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify))
 
     def send_photo(
-            self, chat_id: Union[int, str], photo: Union[Any, str], 
-            caption: Optional[str]=None, parse_mode: Optional[str]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None,
-            has_spoiler: Optional[bool]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], photo: Union[Any, str],
+            caption: Optional[str] = None, parse_mode: Optional[str] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            message_thread_id: Optional[int] = None,
+            has_spoiler: Optional[bool] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send photos. On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendphoto
         
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -2185,51 +2169,52 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_photo(
                 self.token, chat_id, photo, caption=caption, reply_markup=reply_markup,
                 parse_mode=parse_mode, disable_notification=disable_notification, timeout=timeout,
                 caption_entities=caption_entities, protect_content=protect_content,
-                message_thread_id=message_thread_id, has_spoiler=has_spoiler, reply_parameters=reply_parameters, business_connection_id=business_connection_id))
-        
-
+                message_thread_id=message_thread_id, has_spoiler=has_spoiler, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify))
 
     def send_audio(
-            self, chat_id: Union[int, str], audio: Union[Any, str], 
-            caption: Optional[str]=None, duration: Optional[int]=None, 
-            performer: Optional[str]=None, title: Optional[str]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None,
-            timeout: Optional[int]=None, 
-            thumbnail: Optional[Union[Any, str]]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], audio: Union[Any, str],
+            caption: Optional[str] = None, duration: Optional[int] = None,
+            performer: Optional[str] = None, title: Optional[str] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            parse_mode: Optional[str] = None,
+            disable_notification: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            thumbnail: Optional[Union[Any, str]] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            thumb: Optional[Union[Any, str]] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send audio files, if you want Telegram clients to display them in the music player.
         Your audio must be in the .MP3 or .M4A format. On success, the sent Message is returned. Bots can currently send audio files of up to 50 MB in size,
         this limit may be changed in the future.
 
         For sending voice messages, use the send_voice method instead.
 
@@ -2308,52 +2293,55 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if thumb is not None and thumbnail is None:
             logger.warning('The parameter "thumb" is deprecated. Use "thumbnail" instead.')
             thumbnail = thumb
 
         return types.Message.de_json(
             apihelper.send_audio(
                 self.token, chat_id, audio, caption=caption, duration=duration, performer=performer, title=title,
                 reply_markup=reply_markup, parse_mode=parse_mode, disable_notification=disable_notification,
-                timeout=timeout, thumbnail=thumbnail, caption_entities=caption_entities, protect_content=protect_content,
-                message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                timeout=timeout, thumbnail=thumbnail, caption_entities=caption_entities,
+                protect_content=protect_content,
+                message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
         )
 
-
     def send_voice(
-            self, chat_id: Union[int, str], voice: Union[Any, str], 
-            caption: Optional[str]=None, duration: Optional[int]=None, 
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], voice: Union[Any, str],
+            caption: Optional[str] = None, duration: Optional[int] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            parse_mode: Optional[str] = None,
+            disable_notification: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message.
         For this to work, your audio must be in an .OGG file encoded with OPUS (other formats may be sent as Audio or Document).
         On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendvoice
         
@@ -2414,52 +2402,54 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_voice(
                 self.token, chat_id, voice, caption=caption, duration=duration, reply_markup=reply_markup,
                 parse_mode=parse_mode, disable_notification=disable_notification, timeout=timeout,
                 caption_entities=caption_entities, protect_content=protect_content,
-                message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
         )
 
-
     def send_document(
             self, chat_id: Union[int, str], document: Union[Any, str],
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            caption: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None, 
-            thumbnail: Optional[Union[Any, str]]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            visible_file_name: Optional[str]=None,
-            disable_content_type_detection: Optional[bool]=None,
-            data: Optional[Union[Any, str]]=None,
-            protect_content: Optional[bool]=None, message_thread_id: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            caption: Optional[str] = None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            parse_mode: Optional[str] = None,
+            disable_notification: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            thumbnail: Optional[Union[Any, str]] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            visible_file_name: Optional[str] = None,
+            disable_content_type_detection: Optional[bool] = None,
+            data: Optional[Union[Any, str]] = None,
+            protect_content: Optional[bool] = None, message_thread_id: Optional[int] = None,
+            thumb: Optional[Union[Any, str]] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send general files.
 
         Telegram documentation: https://core.telegram.org/bots/api#senddocument
         
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -2531,20 +2521,22 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if data and (not document):
             logger.warning('The parameter "data" is deprecated. Use "document" instead.')
@@ -2556,32 +2548,32 @@
 
         return types.Message.de_json(
             apihelper.send_data(
                 self.token, chat_id, document, 'document',
                 reply_markup=reply_markup, parse_mode=parse_mode, disable_notification=disable_notification,
                 timeout=timeout, caption=caption, thumbnail=thumbnail, caption_entities=caption_entities,
                 disable_content_type_detection=disable_content_type_detection, visible_file_name=visible_file_name,
-                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
         )
 
-
     def send_sticker(
             self, chat_id: Union[int, str],
             sticker: Union[Any, str],
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            disable_notification: Optional[bool]=None,
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content:Optional[bool]=None,
-            data: Union[Any, str]=None,
-            message_thread_id: Optional[int]=None,
-            emoji: Optional[str]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            disable_notification: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            data: Union[Any, str] = None,
+            message_thread_id: Optional[int] = None,
+            emoji: Optional[str] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send static .WEBP, animated .TGS, or video .WEBM stickers.
         On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendsticker
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
@@ -2635,60 +2627,62 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if data and (not sticker):
             logger.warning('The parameter "data" is deprecated. Use "sticker" instead.')
             sticker = data
-            
+
         return types.Message.de_json(
             apihelper.send_data(
                 self.token, chat_id, sticker, 'sticker',
                 reply_markup=reply_markup, disable_notification=disable_notification, timeout=timeout,
                 protect_content=protect_content, message_thread_id=message_thread_id, emoji=emoji,
-                reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                reply_parameters=reply_parameters, business_connection_id=business_connection_id,
+                verify=self.ssl_verify)
         )
 
-
     def send_video(
-            self, chat_id: Union[int, str], video: Union[Any, str], 
-            duration: Optional[int]=None,
-            width: Optional[int]=None,
-            height: Optional[int]=None,
-            thumbnail: Optional[Union[Any, str]]=None, 
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            supports_streaming: Optional[bool]=None, 
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            data: Optional[Union[Any, str]]=None,
-            message_thread_id: Optional[int]=None,
-            has_spoiler: Optional[bool]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], video: Union[Any, str],
+            duration: Optional[int] = None,
+            width: Optional[int] = None,
+            height: Optional[int] = None,
+            thumbnail: Optional[Union[Any, str]] = None,
+            caption: Optional[str] = None,
+            parse_mode: Optional[str] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            supports_streaming: Optional[bool] = None,
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            data: Optional[Union[Any, str]] = None,
+            message_thread_id: Optional[int] = None,
+            has_spoiler: Optional[bool] = None,
+            thumb: Optional[Union[Any, str]] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send video files, Telegram clients support mp4 videos (other formats may be sent as Document).
         
         Telegram documentation: https://core.telegram.org/bots/api#sendvideo
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -2768,20 +2762,22 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if data and (not video):
             logger.warning('The parameter "data" is deprecated. Use "video" instead.')
@@ -2794,38 +2790,38 @@
         return types.Message.de_json(
             apihelper.send_video(
                 self.token, chat_id, video,
                 duration=duration, caption=caption, reply_markup=reply_markup, parse_mode=parse_mode,
                 supports_streaming=supports_streaming, disable_notification=disable_notification, timeout=timeout,
                 thumbnail=thumbnail, height=height, width=width, caption_entities=caption_entities,
                 protect_content=protect_content, message_thread_id=message_thread_id, has_spoiler=has_spoiler,
-                reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                reply_parameters=reply_parameters, business_connection_id=business_connection_id,
+                verify=self.ssl_verify)
         )
 
-
     def send_animation(
-            self, chat_id: Union[int, str], animation: Union[Any, str], 
-            duration: Optional[int]=None,
-            width: Optional[int]=None,
-            height: Optional[int]=None,
-            thumbnail: Optional[Union[Any, str]]=None,
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None,
-            has_spoiler: Optional[bool]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], animation: Union[Any, str],
+            duration: Optional[int] = None,
+            width: Optional[int] = None,
+            height: Optional[int] = None,
+            thumbnail: Optional[Union[Any, str]] = None,
+            caption: Optional[str] = None,
+            parse_mode: Optional[str] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            message_thread_id: Optional[int] = None,
+            has_spoiler: Optional[bool] = None,
+            thumb: Optional[Union[Any, str]] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send animation files (GIF or H.264/MPEG-4 AVC video without sound).
         On success, the sent Message is returned. Bots can currently send animation files of up to 50 MB in size, this limit may be changed in the future.
         
         Telegram documentation: https://core.telegram.org/bots/api#sendanimation
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
@@ -2904,20 +2900,22 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if thumbnail is None and thumb is not None:
             logger.warning('The parameter "thumb" is deprecated. Use "thumbnail" instead.')
@@ -2925,33 +2923,32 @@
 
         return types.Message.de_json(
             apihelper.send_animation(
                 self.token, chat_id, animation, duration=duration, caption=caption, reply_markup=reply_markup,
                 parse_mode=parse_mode, disable_notification=disable_notification, timeout=timeout,
                 thumbnail=thumbnail, caption_entities=caption_entities, protect_content=protect_content,
                 width=width, height=height, message_thread_id=message_thread_id, reply_parameters=reply_parameters,
-                has_spoiler=has_spoiler, business_connection_id=business_connection_id)
-            )
-
+                has_spoiler=has_spoiler, business_connection_id=business_connection_id, verify=self.ssl_verify)
+        )
 
     def send_video_note(
-            self, chat_id: Union[int, str], data: Union[Any, str], 
-            duration: Optional[int]=None, 
-            length: Optional[int]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None, 
-            thumbnail: Optional[Union[Any, str]]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], data: Union[Any, str],
+            duration: Optional[int] = None,
+            length: Optional[int] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            disable_notification: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            thumbnail: Optional[Union[Any, str]] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            thumb: Optional[Union[Any, str]] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         As of v.4.0, Telegram clients support rounded square MPEG4 videos of up to 1 minute long.
         Use this method to send video messages. On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendvideonote
         
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
@@ -3014,50 +3011,52 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if thumbnail is None and thumb is not None:
             logger.warning('The parameter "thumb" is deprecated. Use "thumbnail" instead.')
             thumbnail = thumb
 
         return types.Message.de_json(
             apihelper.send_video_note(
                 self.token, chat_id, data, duration=duration, length=length, reply_markup=reply_markup,
                 disable_notification=disable_notification, timeout=timeout, thumbnail=thumbnail,
-                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
         )
 
-
     def send_media_group(
-            self, chat_id: Union[int, str], 
+            self, chat_id: Union[int, str],
             media: List[Union[
-                types.InputMediaAudio, types.InputMediaDocument, 
+                types.InputMediaAudio, types.InputMediaDocument,
                 types.InputMediaPhoto, types.InputMediaVideo]],
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> List[types.Message]:
+            disable_notification: Optional[bool] = None,
+            protect_content: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> List[types.Message]:
         """
         Use this method to send a group of photos, videos, documents or audios as an album. Documents and audio files
         can be only grouped in an album with messages of the same type. On success, an array of Messages that were sent is returned.
         
         Telegram documentation: https://core.telegram.org/bots/api#sendmediagroup
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
@@ -3099,48 +3098,49 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         result = apihelper.send_media_group(
             self.token, chat_id, media, disable_notification=disable_notification, timeout=timeout,
             protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters,
-            business_connection_id=business_connection_id)
+            business_connection_id=business_connection_id, verify=self.ssl_verify)
         return [types.Message.de_json(msg) for msg in result]
 
-
     def send_location(
-            self, chat_id: Union[int, str], 
-            latitude: float, longitude: float, 
-            live_period: Optional[int]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            horizontal_accuracy: Optional[float]=None, 
-            heading: Optional[int]=None, 
-            proximity_alert_radius: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility 
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str],
+            latitude: float, longitude: float,
+            live_period: Optional[int] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            disable_notification: Optional[bool] = None,
+            timeout: Optional[int] = None,
+            horizontal_accuracy: Optional[float] = None,
+            heading: Optional[int] = None,
+            proximity_alert_radius: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send point on the map. On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendlocation
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -3201,44 +3201,46 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_location(
                 self.token, chat_id, latitude, longitude, live_period=live_period, reply_markup=reply_markup,
                 disable_notification=disable_notification, timeout=timeout, horizontal_accuracy=horizontal_accuracy,
                 heading=heading, proximity_alert_radius=proximity_alert_radius, protect_content=protect_content,
-                message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
-            )
-
+                message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
+        )
 
     def edit_message_live_location(
-            self, latitude: float, longitude: float, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
-            timeout: Optional[int]=None,
-            horizontal_accuracy: Optional[float]=None, 
-            heading: Optional[int]=None, 
-            proximity_alert_radius: Optional[int]=None) -> types.Message or bool:
+            self, latitude: float, longitude: float,
+            chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None,
+            timeout: Optional[int] = None,
+            horizontal_accuracy: Optional[float] = None,
+            heading: Optional[int] = None,
+            proximity_alert_radius: Optional[int] = None) -> types.Message or bool:
         """
         Use this method to edit live location messages. A location can be edited until its live_period expires or editing is explicitly
             disabled by a call to stopMessageLiveLocation. On success, if the edited message is not an inline message, the edited Message
             is returned, otherwise True is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagelivelocation
 
@@ -3274,26 +3276,26 @@
         :type proximity_alert_radius: :obj:`int`
 
         :return: On success, if the edited message is not an inline message, the edited Message is returned, otherwise True is returned.
         :rtype: :class:`telebot.types.Message` or bool
         """
         return types.Message.de_json(
             apihelper.edit_message_live_location(
-                self.token, latitude, longitude, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
+                self.token, latitude, longitude, chat_id=chat_id, message_id=message_id,
+                inline_message_id=inline_message_id,
                 reply_markup=reply_markup, timeout=timeout, horizontal_accuracy=horizontal_accuracy, heading=heading,
-                proximity_alert_radius=proximity_alert_radius)
-            )
-
+                proximity_alert_radius=proximity_alert_radius, verify=self.ssl_verify)
+        )
 
     def stop_message_live_location(
-            self, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
-            timeout: Optional[int]=None) -> types.Message or bool:
+            self, chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None,
+            timeout: Optional[int] = None) -> types.Message or bool:
         """
         Use this method to stop updating a live location message before live_period expires.
         On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#stopmessagelivelocation
         
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
@@ -3314,35 +3316,34 @@
 
         :return: On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
         :rtype: :class:`telebot.types.Message` or bool
         """
         return types.Message.de_json(
             apihelper.stop_message_live_location(
                 self.token, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
-                reply_markup=reply_markup, timeout=timeout)
+                reply_markup=reply_markup, timeout=timeout, verify=self.ssl_verify)
         )
 
-
     def send_venue(
-            self, chat_id: Union[int, str], 
-            latitude: Optional[float], longitude: Optional[float], 
-            title: str, address: str, 
-            foursquare_id: Optional[str]=None, 
-            foursquare_type: Optional[str]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            google_place_id: Optional[str]=None,
-            google_place_type: Optional[str]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str],
+            latitude: Optional[float], longitude: Optional[float],
+            title: str, address: str,
+            foursquare_id: Optional[str] = None,
+            foursquare_type: Optional[str] = None,
+            disable_notification: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            google_place_id: Optional[str] = None,
+            google_place_type: Optional[str] = None,
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send information about a venue. On success, the sent Message is returned.
         
         Telegram documentation: https://core.telegram.org/bots/api#sendvenue
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
         :type chat_id: :obj:`int` or :obj:`str`
@@ -3410,46 +3411,48 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_venue(
                 self.token, chat_id, latitude, longitude, title, address, foursquare_id=foursquare_id,
                 foursquare_type=foursquare_type, disable_notification=disable_notification, reply_markup=reply_markup,
                 timeout=timeout, google_place_id=google_place_id, google_place_type=google_place_type,
-                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
-            )
-
+                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
+        )
 
     def send_contact(
-            self, chat_id: Union[int, str], phone_number: str, 
-            first_name: str, last_name: Optional[str]=None, 
-            vcard: Optional[str]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content: Optional[bool]=None, message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], phone_number: str,
+            first_name: str, last_name: Optional[str] = None,
+            vcard: Optional[str] = None,
+            disable_notification: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None, message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send phone contacts. On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendcontact
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
         :type chat_id: :obj:`int` or :obj:`str`
@@ -3504,36 +3507,39 @@
         if allow_sending_without_reply is not None:
             logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
 
         if reply_to_message_id:
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_contact(
                 self.token, chat_id, phone_number, first_name, last_name=last_name, vcard=vcard,
                 disable_notification=disable_notification, reply_markup=reply_markup, timeout=timeout,
-                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
-            )
-
+                protect_content=protect_content, message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
+        )
 
     def send_chat_action(
-            self, chat_id: Union[int, str], action: str, timeout: Optional[int]=None, message_thread_id: Optional[int]=None,
-            business_connection_id: Optional[str]=None) -> bool:
+            self, chat_id: Union[int, str], action: str, timeout: Optional[int] = None,
+            message_thread_id: Optional[int] = None,
+            business_connection_id: Optional[str] = None) -> bool:
         """
         Use this method when you need to tell the user that something is happening on the bot's side.
         The status is set for 5 seconds or less (when a message arrives from your bot, Telegram clients clear its typing status).
         Returns True on success.
 
         Example: The ImageBot needs some time to process a request and upload the image. Instead of sending a text message along the lines of
         “Retrieving image, please wait…”, the bot may use sendChatAction with action = upload_photo. The user will see a “sending photo” status for the bot.
@@ -3558,33 +3564,33 @@
         :param business_connection_id: Identifier of a business connection
         :type business_connection_id: :obj:`str`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
         return apihelper.send_chat_action(
-            self.token, chat_id, action, timeout=timeout, message_thread_id=message_thread_id, business_connection_id=business_connection_id)
+            self.token, chat_id, action, timeout=timeout, message_thread_id=message_thread_id,
+            business_connection_id=business_connection_id, verify=self.ssl_verify)
 
-    
     @util.deprecated(deprecation_text="Use ban_chat_member instead")
     def kick_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date:Optional[Union[int, datetime]]=None, 
-            revoke_messages: Optional[bool]=None) -> bool:
+            self, chat_id: Union[int, str], user_id: int,
+            until_date: Optional[Union[int, datetime]] = None,
+            revoke_messages: Optional[bool] = None) -> bool:
         """
         This function is deprecated. Use `ban_chat_member` instead.
         """
         return apihelper.ban_chat_member(
-            self.token, chat_id, user_id, until_date=until_date, revoke_messages=revoke_messages)
-
+            self.token, chat_id, user_id, until_date=until_date, revoke_messages=revoke_messages,
+            verify=self.ssl_verify)
 
     def ban_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date: Optional[Union[int, datetime]]=None, 
-            revoke_messages: Optional[bool]=None) -> bool:
+            self, chat_id: Union[int, str], user_id: int,
+            until_date: Optional[Union[int, datetime]] = None,
+            revoke_messages: Optional[bool] = None) -> bool:
         """
         Use this method to ban a user in a group, a supergroup or a channel. 
         In the case of supergroups and channels, the user will not be able to return to the chat on their 
         own using invite links, etc., unless unbanned first. 
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#banchatmember
@@ -3605,20 +3611,20 @@
             Always True for supergroups and channels.
         :type revoke_messages: :obj:`bool`
         
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
         return apihelper.ban_chat_member(
-            self.token, chat_id, user_id, until_date=until_date, revoke_messages=revoke_messages)
-
+            self.token, chat_id, user_id, until_date=until_date, revoke_messages=revoke_messages,
+            verify=self.ssl_verify)
 
     def unban_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            only_if_banned: Optional[bool]=False) -> bool:
+            self, chat_id: Union[int, str], user_id: int,
+            only_if_banned: Optional[bool] = False) -> bool:
         """
         Use this method to unban a previously kicked user in a supergroup or channel.
         The user will not return to the group or channel automatically, but will be able to join via link, etc.
         The bot must be an administrator for this to work. By default, this method guarantees that after the call
         the user is not a member of the chat, but will be able to join it. So if the user is a member of the chat
         they will also be removed from the chat. If you don't want this, use the parameter only_if_banned.
 
@@ -3633,30 +3639,29 @@
 
         :param only_if_banned: Do nothing if the user is not banned
         :type only_if_banned: :obj:`bool`
 
         :return: True on success
         :rtype: :obj:`bool`
         """
-        return apihelper.unban_chat_member(self.token, chat_id, user_id, only_if_banned)
-
+        return apihelper.unban_chat_member(self.token, chat_id, user_id, only_if_banned, verify=self.ssl_verify)
 
     def restrict_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date: Optional[Union[int, datetime]]=None,
-            can_send_messages: Optional[bool]=None, 
-            can_send_media_messages: Optional[bool]=None,
-            can_send_polls: Optional[bool]=None, 
-            can_send_other_messages: Optional[bool]=None,
-            can_add_web_page_previews: Optional[bool]=None, 
-            can_change_info: Optional[bool]=None,
-            can_invite_users: Optional[bool]=None, 
-            can_pin_messages: Optional[bool]=None,
-            permissions: Optional[types.ChatPermissions]=None,
-            use_independent_chat_permissions: Optional[bool]=None) -> bool:
+            self, chat_id: Union[int, str], user_id: int,
+            until_date: Optional[Union[int, datetime]] = None,
+            can_send_messages: Optional[bool] = None,
+            can_send_media_messages: Optional[bool] = None,
+            can_send_polls: Optional[bool] = None,
+            can_send_other_messages: Optional[bool] = None,
+            can_add_web_page_previews: Optional[bool] = None,
+            can_change_info: Optional[bool] = None,
+            can_invite_users: Optional[bool] = None,
+            can_pin_messages: Optional[bool] = None,
+            permissions: Optional[types.ChatPermissions] = None,
+            use_independent_chat_permissions: Optional[bool] = None) -> bool:
         """
         Use this method to restrict a user in a supergroup.
         The bot must be an administrator in the supergroup for this to work and must have
         the appropriate admin rights. Pass True for all boolean parameters to lift restrictions from a user.
 
         Telegram documentation: https://core.telegram.org/bots/api#restrictchatmember
 
@@ -3722,35 +3727,34 @@
                 can_change_info=can_change_info,
                 can_invite_users=can_invite_users,
                 can_pin_messages=can_pin_messages
             )
 
         return apihelper.restrict_chat_member(
             self.token, chat_id, user_id, permissions, until_date=until_date,
-            use_independent_chat_permissions=use_independent_chat_permissions)
-
+            use_independent_chat_permissions=use_independent_chat_permissions, verify=self.ssl_verify)
 
     def promote_chat_member(
             self, chat_id: Union[int, str], user_id: int,
-            can_change_info: Optional[bool]=None, 
-            can_post_messages: Optional[bool]=None,
-            can_edit_messages: Optional[bool]=None, 
-            can_delete_messages: Optional[bool]=None, 
-            can_invite_users: Optional[bool]=None,
-            can_restrict_members: Optional[bool]=None, 
-            can_pin_messages: Optional[bool]=None, 
-            can_promote_members: Optional[bool]=None,
-            is_anonymous: Optional[bool]=None, 
-            can_manage_chat: Optional[bool]=None, 
-            can_manage_video_chats: Optional[bool]=None,
-            can_manage_voice_chats: Optional[bool]=None,
-            can_manage_topics: Optional[bool]=None,
-            can_post_stories: Optional[bool]=None,
-            can_edit_stories: Optional[bool]=None,
-            can_delete_stories: Optional[bool]=None) -> bool:
+            can_change_info: Optional[bool] = None,
+            can_post_messages: Optional[bool] = None,
+            can_edit_messages: Optional[bool] = None,
+            can_delete_messages: Optional[bool] = None,
+            can_invite_users: Optional[bool] = None,
+            can_restrict_members: Optional[bool] = None,
+            can_pin_messages: Optional[bool] = None,
+            can_promote_members: Optional[bool] = None,
+            is_anonymous: Optional[bool] = None,
+            can_manage_chat: Optional[bool] = None,
+            can_manage_video_chats: Optional[bool] = None,
+            can_manage_voice_chats: Optional[bool] = None,
+            can_manage_topics: Optional[bool] = None,
+            can_post_stories: Optional[bool] = None,
+            can_edit_stories: Optional[bool] = None,
+            can_delete_stories: Optional[bool] = None) -> bool:
         """
         Use this method to promote or demote a user in a supergroup or a channel. The bot must be an administrator
         in the chat for this to work and must have the appropriate admin rights.
         Pass False for all boolean parameters to demote a user.
 
         Telegram documentation: https://core.telegram.org/bots/api#promotechatmember
 
@@ -3816,28 +3820,28 @@
         :param can_delete_stories: Pass True if the administrator can delete the channel's stories
         :type can_delete_stories: :obj:`bool`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
         if can_manage_voice_chats is not None:
-            logger.warning('The parameter "can_manage_voice_chats" is deprecated. Use "can_manage_video_chats" instead.')
+            logger.warning(
+                'The parameter "can_manage_voice_chats" is deprecated. Use "can_manage_video_chats" instead.')
             if can_manage_video_chats is None:
                 can_manage_video_chats = can_manage_voice_chats
 
         return apihelper.promote_chat_member(
             self.token, chat_id, user_id, can_change_info=can_change_info, can_post_messages=can_post_messages,
             can_edit_messages=can_edit_messages, can_delete_messages=can_delete_messages,
             can_invite_users=can_invite_users, can_restrict_members=can_restrict_members,
             can_pin_messages=can_pin_messages, can_promote_members=can_promote_members,
             is_anonymous=is_anonymous, can_manage_chat=can_manage_chat,
             can_manage_video_chats=can_manage_video_chats, can_manage_topics=can_manage_topics,
             can_post_stories=can_post_stories, can_edit_stories=can_edit_stories,
-            can_delete_stories=can_delete_stories)
-
+            can_delete_stories=can_delete_stories, verify=self.ssl_verify)
 
     def set_chat_administrator_custom_title(
             self, chat_id: Union[int, str], user_id: int, custom_title: str) -> bool:
         """
         Use this method to set a custom title for an administrator in a supergroup promoted by the bot.
         Returns True on success.
 
@@ -3853,17 +3857,17 @@
         :param custom_title: New custom title for the administrator;
             0-16 characters, emoji are not allowed
         :type custom_title: :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_chat_administrator_custom_title(self.token, chat_id, user_id, custom_title)
+        return apihelper.set_chat_administrator_custom_title(self.token, chat_id, user_id, custom_title,
+                                                             verify=self.ssl_verify)
 
-    
     def ban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
         """
         Use this method to ban a channel chat in a supergroup or a channel.
         The owner of the chat will not be able to send messages and join live 
         streams on behalf of the chat, unless it is unbanned first. 
         The bot must be an administrator in the supergroup or channel 
         for this to work and must have the appropriate administrator rights. 
@@ -3876,16 +3880,15 @@
 
         :param sender_chat_id: Unique identifier of the target sender chat
         :type sender_chat_id: :obj:`int` or :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.ban_chat_sender_chat(self.token, chat_id, sender_chat_id)
-
+        return apihelper.ban_chat_sender_chat(self.token, chat_id, sender_chat_id, verify=self.ssl_verify)
 
     def unban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
         """
         Use this method to unban a previously banned channel chat in a supergroup or channel. 
         The bot must be an administrator for this to work and must have the appropriate 
         administrator rights.
         Returns True on success.
@@ -3897,20 +3900,19 @@
 
         :param sender_chat_id: Unique identifier of the target sender chat.
         :type sender_chat_id: :obj:`int` or :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.unban_chat_sender_chat(self.token, chat_id, sender_chat_id)
-
+        return apihelper.unban_chat_sender_chat(self.token, chat_id, sender_chat_id, verify=self.ssl_verify)
 
     def set_chat_permissions(
             self, chat_id: Union[int, str], permissions: types.ChatPermissions,
-            use_independent_chat_permissions: Optional[bool]=None) -> bool:
+            use_independent_chat_permissions: Optional[bool] = None) -> bool:
         """
         Use this method to set default chat permissions for all members.
         The bot must be an administrator in the group or a supergroup for this to work
         and must have the can_restrict_members admin rights.
 
         Telegram documentation: https://core.telegram.org/bots/api#setchatpermissions
 
@@ -3927,23 +3929,23 @@
             can_send_voice_notes permissions; the can_send_polls permission will imply the can_send_messages permission.
         :type use_independent_chat_permissions: :obj:`bool`
 
         :return: True on success
         :rtype: :obj:`bool`
         """
         return apihelper.set_chat_permissions(
-            self.token, chat_id, permissions, use_independent_chat_permissions=use_independent_chat_permissions)
-
+            self.token, chat_id, permissions, use_independent_chat_permissions=use_independent_chat_permissions,
+            verify=self.ssl_verify)
 
     def create_chat_invite_link(
             self, chat_id: Union[int, str],
-            name: Optional[str]=None,
-            expire_date: Optional[Union[int, datetime]]=None, 
-            member_limit: Optional[int]=None,
-            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
+            name: Optional[str] = None,
+            expire_date: Optional[Union[int, datetime]] = None,
+            member_limit: Optional[int] = None,
+            creates_join_request: Optional[bool] = None) -> types.ChatInviteLink:
         """
         Use this method to create an additional invite link for a chat. The bot must be an administrator in the chat for this to work and
         must have the appropriate administrator rights.
         The link can be revoked using the method revokeChatInviteLink.
         Returns the new invite link as ChatInviteLink object.
 
         Telegram documentation: https://core.telegram.org/bots/api#createchatinvitelink
@@ -3964,25 +3966,25 @@
         :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
         :type creates_join_request: :obj:`bool`
 
         :return: Returns the new invite link as ChatInviteLink object.
         :rtype: :class:`telebot.types.ChatInviteLink`
         """
         return types.ChatInviteLink.de_json(
-            apihelper.create_chat_invite_link(self.token, chat_id, name, expire_date, member_limit, creates_join_request)
+            apihelper.create_chat_invite_link(self.token, chat_id, name, expire_date, member_limit,
+                                              creates_join_request, verify=self.ssl_verify)
         )
 
-
     def edit_chat_invite_link(
             self, chat_id: Union[int, str],
             invite_link: Optional[str] = None,
-            name: Optional[str]=None,
-            expire_date: Optional[Union[int, datetime]]=None,
-            member_limit: Optional[int]=None,
-            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
+            name: Optional[str] = None,
+            expire_date: Optional[Union[int, datetime]] = None,
+            member_limit: Optional[int] = None,
+            creates_join_request: Optional[bool] = None) -> types.ChatInviteLink:
         """
         Use this method to edit a non-primary invite link created by the bot.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
 
         Telegram documentation: https://core.telegram.org/bots/api#editchatinvitelink
 
         :param chat_id: Id: Unique identifier for the target chat or username of the target channel
@@ -4004,18 +4006,18 @@
         :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
         :type creates_join_request: :obj:`bool`
 
         :return: Returns the new invite link as ChatInviteLink object.
         :rtype: :class:`telebot.types.ChatInviteLink`
         """
         return types.ChatInviteLink.de_json(
-            apihelper.edit_chat_invite_link(self.token, chat_id, invite_link, name, expire_date, member_limit, creates_join_request)
+            apihelper.edit_chat_invite_link(self.token, chat_id, invite_link, name, expire_date, member_limit,
+                                            creates_join_request, verify=self.ssl_verify)
         )
 
-
     def revoke_chat_invite_link(
             self, chat_id: Union[int, str], invite_link: str) -> types.ChatInviteLink:
         """
         Use this method to revoke an invite link created by the bot.
         Note: If the primary link is revoked, a new link is automatically generated The bot must be an administrator 
         in the chat for this to work and must have the appropriate admin rights.
 
@@ -4028,34 +4030,32 @@
         :param invite_link: The invite link to revoke
         :type invite_link: :obj:`str`
 
         :return: Returns the new invite link as ChatInviteLink object.
         :rtype: :class:`telebot.types.ChatInviteLink`
         """
         return types.ChatInviteLink.de_json(
-            apihelper.revoke_chat_invite_link(self.token, chat_id, invite_link)
+            apihelper.revoke_chat_invite_link(self.token, chat_id, invite_link, verify=self.ssl_verify)
         )
 
-
     def export_chat_invite_link(self, chat_id: Union[int, str]) -> str:
         """
         Use this method to export an invite link to a supergroup or a channel. The bot must be an administrator
         in the chat for this to work and must have the appropriate admin rights.
 
         Telegram documentation: https://core.telegram.org/bots/api#exportchatinvitelink
 
         :param chat_id: Id: Unique identifier for the target chat or username of the target channel
             (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: exported invite link as String on success.
         :rtype: :obj:`str`
         """
-        return apihelper.export_chat_invite_link(self.token, chat_id)
-
+        return apihelper.export_chat_invite_link(self.token, chat_id, verify=self.ssl_verify)
 
     def approve_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
         """
         Use this method to approve a chat join request. 
         The bot must be an administrator in the chat for this to work and must have
         the can_invite_users administrator right. Returns True on success.
 
@@ -4067,16 +4067,15 @@
 
         :param user_id: Unique identifier of the target user
         :type user_id: :obj:`int` or :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.approve_chat_join_request(self.token, chat_id, user_id)
-
+        return apihelper.approve_chat_join_request(self.token, chat_id, user_id, verify=self.ssl_verify)
 
     def decline_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
         """
         Use this method to decline a chat join request. 
         The bot must be an administrator in the chat for this to work and must have
         the can_invite_users administrator right. Returns True on success.
 
@@ -4088,16 +4087,15 @@
 
         :param user_id: Unique identifier of the target user
         :type user_id: :obj:`int` or :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.decline_chat_join_request(self.token, chat_id, user_id)
-
+        return apihelper.decline_chat_join_request(self.token, chat_id, user_id, verify=self.ssl_verify)
 
     def set_chat_photo(self, chat_id: Union[int, str], photo: Any) -> bool:
         """
         Use this method to set a new profile photo for the chat. Photos can't be changed for private chats.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
         Returns True on success.
         Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
@@ -4110,16 +4108,15 @@
         :type chat_id: :obj:`int` or :obj:`str`
 
         :param photo: InputFile: New chat photo, uploaded using multipart/form-data
         :type photo: :obj:`typing.Union[file_like, str]`
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_chat_photo(self.token, chat_id, photo)
-
+        return apihelper.set_chat_photo(self.token, chat_id, photo, verify=self.ssl_verify)
 
     def delete_chat_photo(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to delete a chat photo. Photos can't be changed for private chats.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
         Returns True on success.
         Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’ setting is off in the target group.
@@ -4129,19 +4126,18 @@
         :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
             (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_chat_photo(self.token, chat_id)
+        return apihelper.delete_chat_photo(self.token, chat_id, verify=self.ssl_verify)
 
-    
-    def get_my_commands(self, scope: Optional[types.BotCommandScope]=None, 
-            language_code: Optional[str]=None) -> List[types.BotCommand]:
+    def get_my_commands(self, scope: Optional[types.BotCommandScope] = None,
+                        language_code: Optional[str] = None) -> List[types.BotCommand]:
         """
         Use this method to get the current list of the bot's commands. 
         Returns List of BotCommand on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getmycommands
 
         :param scope: The scope of users for which the commands are relevant. 
@@ -4152,54 +4148,51 @@
             commands will be applied to all users from the given scope, 
             for whose language there are no dedicated commands
         :type language_code: :obj:`str`
 
         :return: List of BotCommand on success.
         :rtype: :obj:`list` of :class:`telebot.types.BotCommand`
         """
-        result = apihelper.get_my_commands(self.token, scope=scope, language_code=language_code)
+        result = apihelper.get_my_commands(self.token, scope=scope, language_code=language_code, verify=self.ssl_verify)
         return [types.BotCommand.de_json(cmd) for cmd in result]
 
-
-    def set_my_name(self, name: Optional[str]=None, language_code: Optional[str]=None):
+    def set_my_name(self, name: Optional[str] = None, language_code: Optional[str] = None):
         """
         Use this method to change the bot's name. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setmyname
 
         :param name: Optional. New bot name; 0-64 characters. Pass an empty string to remove the dedicated name for the given language.
         :type name: :obj:`str`
 
         :param language_code: Optional. A two-letter ISO 639-1 language code. If empty, the name will be shown to all users for whose
             language there is no dedicated name.
         :type language_code: :obj:`str`
 
         :return: True on success.
         """
-        return apihelper.set_my_name(self.token, name=name, language_code=language_code)
+        return apihelper.set_my_name(self.token, name=name, language_code=language_code, verify=self.ssl_verify)
 
-    
-    def get_my_name(self, language_code: Optional[str]=None):
+    def get_my_name(self, language_code: Optional[str] = None):
         """
         Use this method to get the current bot name for the given user language.
         Returns BotName on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getmyname
 
         :param language_code: Optional. A two-letter ISO 639-1 language code or an empty string
         :type language_code: :obj:`str`
 
         :return: :class:`telebot.types.BotName`
         """
         return types.BotName.de_json(
-            apihelper.get_my_name(self.token, language_code=language_code)
+            apihelper.get_my_name(self.token, language_code=language_code, verify=self.ssl_verify)
         )
 
-
-    def set_my_description(self, description: Optional[str]=None, language_code: Optional[str]=None):
+    def set_my_description(self, description: Optional[str] = None, language_code: Optional[str] = None):
         """
         Use this method to change the bot's description, which is shown in
         the chat with the bot if the chat is empty.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setmydescription
 
@@ -4210,34 +4203,32 @@
             whose language there is no dedicated description.
         :type language_code: :obj:`str`
 
         :return: True on success.
         """
 
         return apihelper.set_my_description(
-            self.token, description=description, language_code=language_code)
+            self.token, description=description, language_code=language_code, verify=self.ssl_verify)
 
-    
-    def get_my_description(self, language_code: Optional[str]=None):
+    def get_my_description(self, language_code: Optional[str] = None):
         """
         Use this method to get the current bot description for the given user language.
         Returns BotDescription on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getmydescription
 
         :param language_code: A two-letter ISO 639-1 language code or an empty string
         :type language_code: :obj:`str`
 
         :return: :class:`telebot.types.BotDescription`
         """
         return types.BotDescription.de_json(
-            apihelper.get_my_description(self.token, language_code=language_code))
+            apihelper.get_my_description(self.token, language_code=language_code, verify=self.ssl_verify))
 
-    
-    def set_my_short_description(self, short_description:Optional[str]=None, language_code:Optional[str]=None):
+    def set_my_short_description(self, short_description: Optional[str] = None, language_code: Optional[str] = None):
         """
         Use this method to change the bot's short description, which is shown on the bot's profile page and
         is sent together with the link when users share the bot. 
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setmyshortdescription
 
@@ -4247,34 +4238,32 @@
         :param language_code: A two-letter ISO 639-1 language code.
             If empty, the short description will be applied to all users for whose language there is no dedicated short description.
         :type language_code: :obj:`str`
 
         :return: True on success.
         """
         return apihelper.set_my_short_description(
-            self.token, short_description=short_description, language_code=language_code)
+            self.token, short_description=short_description, language_code=language_code, verify=self.ssl_verify)
 
-    
-    def get_my_short_description(self, language_code: Optional[str]=None):
+    def get_my_short_description(self, language_code: Optional[str] = None):
         """
         Use this method to get the current bot short description for the given user language.
         Returns BotShortDescription on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getmyshortdescription
 
         :param language_code: A two-letter ISO 639-1 language code or an empty string
         :type language_code: :obj:`str`
 
         :return: :class:`telebot.types.BotShortDescription`
         """
         return types.BotShortDescription.de_json(
-            apihelper.get_my_short_description(self.token, language_code=language_code))
+            apihelper.get_my_short_description(self.token, language_code=language_code, verify=self.ssl_verify))
 
-
-    def set_chat_menu_button(self, chat_id: Union[int, str]=None, menu_button: types.MenuButton=None) -> bool:
+    def set_chat_menu_button(self, chat_id: Union[int, str] = None, menu_button: types.MenuButton = None) -> bool:
         """
         Use this method to change the bot's menu button in a private chat, 
         or the default menu button. 
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setchatmenubutton
 
@@ -4284,18 +4273,18 @@
 
         :param menu_button: A JSON-serialized object for the new bot's menu button. Defaults to MenuButtonDefault
         :type menu_button: :class:`telebot.types.MenuButton`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_chat_menu_button(self.token, chat_id=chat_id, menu_button=menu_button)
-
+        return apihelper.set_chat_menu_button(self.token, chat_id=chat_id, menu_button=menu_button,
+                                              verify=self.ssl_verify)
 
-    def get_chat_menu_button(self, chat_id: Union[int, str]=None) -> types.MenuButton:
+    def get_chat_menu_button(self, chat_id: Union[int, str] = None) -> types.MenuButton:
         """
         Use this method to get the current value of the bot's menu button
         in a private chat, or the default menu button.
         Returns MenuButton on success.
 
         Telegram Documentation: https://core.telegram.org/bots/api#getchatmenubutton
 
@@ -4303,19 +4292,18 @@
             If not specified, default bot's menu button will be returned.
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: types.MenuButton
         :rtype: :class:`telebot.types.MenuButton`
         """
         return types.MenuButton.de_json(
-            apihelper.get_chat_menu_button(self.token, chat_id=chat_id))
-
+            apihelper.get_chat_menu_button(self.token, chat_id=chat_id, verify=self.ssl_verify))
 
-    def set_my_default_administrator_rights(self, rights: types.ChatAdministratorRights=None, 
-                                    for_channels: Optional[bool]=None) -> bool:
+    def set_my_default_administrator_rights(self, rights: types.ChatAdministratorRights = None,
+                                            for_channels: Optional[bool] = None) -> bool:
         """
         Use this method to change the default administrator rights requested by the bot
         when it's added as an administrator to groups or channels.
         These rights will be suggested to users, but they are are free to modify
         the list before adding the bot. 
         Returns True on success.
 
@@ -4328,35 +4316,35 @@
         :param for_channels: Pass True to change the default administrator rights of the bot in channels.
             Otherwise, the default administrator rights of the bot for groups and supergroups will be changed.
         :type for_channels: :obj:`bool`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_my_default_administrator_rights(self.token, rights=rights, for_channels=for_channels)
+        return apihelper.set_my_default_administrator_rights(self.token, rights=rights, for_channels=for_channels,
+                                                             verify=self.ssl_verify)
 
-
-    def get_my_default_administrator_rights(self, for_channels: Optional[bool]=None) -> types.ChatAdministratorRights:
+    def get_my_default_administrator_rights(self, for_channels: Optional[bool] = None) -> types.ChatAdministratorRights:
         """
         Use this method to get the current default administrator rights of the bot.
         Returns ChatAdministratorRights on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getmydefaultadministratorrights
 
         :param for_channels: Pass True to get the default administrator rights of the bot in channels. Otherwise, the default administrator rights of the bot for groups and supergroups will be returned.
         :type for_channels: :obj:`bool`
 
         :return: Returns ChatAdministratorRights on success.
         :rtype: :class:`telebot.types.ChatAdministratorRights`
         """
         return types.ChatAdministratorRights.de_json(
-            apihelper.get_my_default_administrator_rights(self.token, for_channels=for_channels)
+            apihelper.get_my_default_administrator_rights(self.token, for_channels=for_channels,
+                                                          verify=self.ssl_verify)
         )
 
-
     def get_business_connection(self, business_connection_id: str) -> types.BusinessConnection:
         """
         Use this method to get information about the connection of the bot with a business account.
         Returns a BusinessConnection object on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#getbusinessconnection
 
@@ -4364,21 +4352,20 @@
         :type business_connection_id: :obj:`str`
 
         :return: Returns a BusinessConnection object on success.
         :rtype: :class:`telebot.types.BusinessConnection`
         """
 
         return types.BusinessConnection.de_json(
-            apihelper.get_business_connection(self.token, business_connection_id)
+            apihelper.get_business_connection(self.token, business_connection_id, verify=self.ssl_verify)
         )
-    
-        
+
     def set_my_commands(self, commands: List[types.BotCommand],
-            scope: Optional[types.BotCommandScope]=None,
-            language_code: Optional[str]=None) -> bool:
+                        scope: Optional[types.BotCommandScope] = None,
+                        language_code: Optional[str] = None) -> bool:
         """
         Use this method to change the list of the bot's commands.
 
         Telegram documentation: https://core.telegram.org/bots/api#setmycommands
 
         :param commands: List of BotCommand. At most 100 commands can be specified.
         :type commands: :obj:`list` of :class:`telebot.types.BotCommand`
@@ -4391,19 +4378,19 @@
             commands will be applied to all users from the given scope, 
             for whose language there are no dedicated commands
         :type language_code: :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_my_commands(self.token, commands, scope=scope, language_code=language_code)
+        return apihelper.set_my_commands(self.token, commands, scope=scope, language_code=language_code,
+                                         verify=self.ssl_verify)
 
-    
-    def delete_my_commands(self, scope: Optional[types.BotCommandScope]=None, 
-            language_code: Optional[str]=None) -> bool:
+    def delete_my_commands(self, scope: Optional[types.BotCommandScope] = None,
+                           language_code: Optional[str] = None) -> bool:
         """
         Use this method to delete the list of the bot's commands for the given scope and user language. 
         After deletion, higher level commands will be shown to affected users. 
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#deletemycommands
         
@@ -4415,16 +4402,16 @@
             commands will be applied to all users from the given scope, 
             for whose language there are no dedicated commands
         :type language_code: :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_my_commands(self.token, scope=scope, language_code=language_code)
-
+        return apihelper.delete_my_commands(self.token, scope=scope, language_code=language_code,
+                                            verify=self.ssl_verify)
 
     def set_chat_title(self, chat_id: Union[int, str], title: str) -> bool:
         """
         Use this method to change the title of a chat. Titles can't be changed for private chats.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
         Returns True on success.
         Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
@@ -4438,18 +4425,17 @@
 
         :param title: New chat title, 1-255 characters
         :type title: :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_chat_title(self.token, chat_id, title)
+        return apihelper.set_chat_title(self.token, chat_id, title, verify=self.ssl_verify)
 
-
-    def set_chat_description(self, chat_id: Union[int, str], description: Optional[str]=None) -> bool:
+    def set_chat_description(self, chat_id: Union[int, str], description: Optional[str] = None) -> bool:
         """
         Use this method to change the description of a supergroup or a channel.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
 
         Telegram documentation: https://core.telegram.org/bots/api#setchatdescription
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
@@ -4458,20 +4444,19 @@
 
         :param description: Str: New chat description, 0-255 characters
         :type description: :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_chat_description(self.token, chat_id, description)
-
+        return apihelper.set_chat_description(self.token, chat_id, description, verify=self.ssl_verify)
 
     def pin_chat_message(
-            self, chat_id: Union[int, str], message_id: int, 
-            disable_notification: Optional[bool]=False) -> bool:
+            self, chat_id: Union[int, str], message_id: int,
+            disable_notification: Optional[bool] = False) -> bool:
         """
         Use this method to pin a message in a supergroup.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#pinchatmessage
 
@@ -4487,18 +4472,18 @@
         :type disable_notification: :obj:`bool`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
         disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
 
-        return apihelper.pin_chat_message(self.token, chat_id, message_id, disable_notification=disable_notification)
-
+        return apihelper.pin_chat_message(self.token, chat_id, message_id, disable_notification=disable_notification,
+                                          verify=self.ssl_verify)
 
-    def unpin_chat_message(self, chat_id: Union[int, str], message_id: Optional[int]=None) -> bool:
+    def unpin_chat_message(self, chat_id: Union[int, str], message_id: Optional[int] = None) -> bool:
         """
         Use this method to unpin specific pinned message in a supergroup chat.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#unpinchatmessage
 
@@ -4508,16 +4493,15 @@
 
         :param message_id: Int: Identifier of a message to unpin
         :type message_id: :obj:`int`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.unpin_chat_message(self.token, chat_id, message_id)
-
+        return apihelper.unpin_chat_message(self.token, chat_id, message_id, verify=self.ssl_verify)
 
     def unpin_all_chat_messages(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to unpin a all pinned messages in a supergroup chat.
         The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
         Returns True on success.
 
@@ -4526,27 +4510,26 @@
         :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
             (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.unpin_all_chat_messages(self.token, chat_id)
-
+        return apihelper.unpin_all_chat_messages(self.token, chat_id, verify=self.ssl_verify)
 
     def edit_message_text(
-            self, text: str, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None, 
-            parse_mode: Optional[str]=None,
-            entities: Optional[List[types.MessageEntity]]=None,
-            disable_web_page_preview: Optional[bool]=None,        # deprecated, for backward compatibility
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
-            link_preview_options : Optional[types.LinkPreviewOptions]=None) -> Union[types.Message, bool]:
+            self, text: str,
+            chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            parse_mode: Optional[str] = None,
+            entities: Optional[List[types.MessageEntity]] = None,
+            disable_web_page_preview: Optional[bool] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None,
+            link_preview_options: Optional[types.LinkPreviewOptions] = None) -> Union[types.Message, bool]:
         """
         Use this method to edit text and game messages.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagetext
 
         :param text: New text of the message, 1-4096 characters after entities parsing
         :type text: :obj:`str`
@@ -4575,48 +4558,50 @@
         :param link_preview_options: A JSON-serialized object for options used to automatically generate previews for links.
         :type link_preview_options: :obj:`LinkPreviewOptions`
 
         :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
         :rtype: :obj:`types.Message` or :obj:`bool`
         """
         parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-                
+
         if disable_web_page_preview is not None:
             # show a deprecation warning
-            logger.warning("The parameter 'disable_web_page_preview' is deprecated. Use 'link_preview_options' instead.")
+            logger.warning(
+                "The parameter 'disable_web_page_preview' is deprecated. Use 'link_preview_options' instead.")
 
             if link_preview_options:
                 # show a conflict warning
-                logger.warning("Both 'link_preview_options' and 'disable_web_page_preview' parameters are set: conflicting, 'disable_web_page_preview' is deprecated")
+                logger.warning(
+                    "Both 'link_preview_options' and 'disable_web_page_preview' parameters are set: conflicting, 'disable_web_page_preview' is deprecated")
             else:
                 # create a LinkPreviewOptions object
                 link_preview_options = types.LinkPreviewOptions(is_disabled=disable_web_page_preview)
 
         if link_preview_options and (link_preview_options.is_disabled is None):
             link_preview_options.is_disabled = self.disable_web_page_preview
 
         # Fix preview link options if link_preview_options not provided. Get param from class
         if not link_preview_options and self.disable_web_page_preview:
             # create a LinkPreviewOptions object
             link_preview_options = types.LinkPreviewOptions(is_disabled=self.disable_web_page_preview)
 
         result = apihelper.edit_message_text(
             self.token, text, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
-            parse_mode=parse_mode, entities=entities, reply_markup=reply_markup, link_preview_options=link_preview_options)
+            parse_mode=parse_mode, entities=entities, reply_markup=reply_markup,
+            link_preview_options=link_preview_options, verify=self.ssl_verify)
 
         if type(result) == bool:  # if edit inline message return is bool not Message.
             return result
         return types.Message.de_json(result)
 
-
     def edit_message_media(
-            self, media: Any, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+            self, media: Any, chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None) -> Union[types.Message, bool]:
         """
         Use this method to edit animation, audio, document, photo, or video messages.
         If a message is a part of a message album, then it can be edited only to a photo or a video.
         Otherwise, message type can be changed arbitrarily. When inline message is edited, new file can't be uploaded.
         Use previously uploaded file via its file_id or specify a URL.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagemedia
@@ -4636,26 +4621,25 @@
         :type reply_markup: :obj:`telebot.types.InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
 
         :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
         :rtype: :obj:`types.Message` or :obj:`bool`
         """
         result = apihelper.edit_message_media(
             self.token, media, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
-            reply_markup=reply_markup)
+            reply_markup=reply_markup, verify=self.ssl_verify)
 
         if type(result) == bool:  # if edit inline message return is bool not Message.
             return result
         return types.Message.de_json(result)
 
-
     def edit_message_reply_markup(
-            self, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+            self, chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None) -> Union[types.Message, bool]:
         """
         Use this method to edit only the reply markup of messages.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagereplymarkup
 
         :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -4670,32 +4654,31 @@
         :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
 
         :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
         :rtype: :obj:`types.Message` or :obj:`bool`
         """
         result = apihelper.edit_message_reply_markup(
             self.token, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
-            reply_markup=reply_markup)
+            reply_markup=reply_markup, verify=self.ssl_verify)
 
         if type(result) == bool:
             return result
         return types.Message.de_json(result)
 
-
     def send_game(
-            self, chat_id: Union[int, str], game_short_name: str, 
-            disable_notification: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            self, chat_id: Union[int, str], game_short_name: str,
+            disable_notification: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Used to send the game.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendgame
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
@@ -4742,40 +4725,42 @@
 
         if reply_to_message_id:
             # show a deprecation warning
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
                 # show a conflict warning
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_game(
                 self.token, chat_id, game_short_name, disable_notification=disable_notification,
                 reply_markup=reply_markup, timeout=timeout, protect_content=protect_content,
-                message_thread_id=message_thread_id, reply_parameters=reply_parameters, business_connection_id=business_connection_id)
+                message_thread_id=message_thread_id, reply_parameters=reply_parameters,
+                business_connection_id=business_connection_id, verify=self.ssl_verify)
         )
 
-
     def set_game_score(
-            self, user_id: Union[int, str], score: int, 
-            force: Optional[bool]=None, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None,
-            disable_edit_message: Optional[bool]=None) -> Union[types.Message, bool]:
+            self, user_id: Union[int, str], score: int,
+            force: Optional[bool] = None,
+            chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            disable_edit_message: Optional[bool] = None) -> Union[types.Message, bool]:
         """
         Sets the value of points in the game to a specific user.
 
         Telegram documentation: https://core.telegram.org/bots/api#setgamescore
 
         :param user_id: User identifier
         :type user_id: :obj:`int` or :obj:`str`
@@ -4799,25 +4784,24 @@
         :type disable_edit_message: :obj:`bool`
 
         :return: On success, if the message was sent by the bot, returns the edited Message, otherwise returns True.
         :rtype: :obj:`types.Message` or :obj:`bool`
         """
         result = apihelper.set_game_score(
             self.token, user_id, score, force=force, disable_edit_message=disable_edit_message,
-            chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id)
+            chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id, verify=self.ssl_verify)
 
         if type(result) == bool:
             return result
         return types.Message.de_json(result)
 
-
     def get_game_high_scores(
-            self, user_id: int, chat_id: Optional[Union[int, str]]=None,
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None) -> List[types.GameHighScore]:
+            self, user_id: int, chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None) -> List[types.GameHighScore]:
         """
         Use this method to get data for high score tables. Will return the score of the specified user and several of
         their neighbors in a game. On success, returns an Array of GameHighScore objects.
 
         This method will currently return scores for the target user, plus two of their closest neighbors on each side.
         Will also return the top three users if the user and their neighbors are not among them.
         Please note that this behavior is subject to change.
@@ -4836,40 +4820,40 @@
         :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
         :type inline_message_id: :obj:`str`
 
         :return: On success, returns an Array of GameHighScore objects.
         :rtype: List[types.GameHighScore]
         """
         result = apihelper.get_game_high_scores(
-            self.token, user_id, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id)
+            self.token, user_id, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
+            verify=self.ssl_verify)
         return [types.GameHighScore.de_json(r) for r in result]
 
-
     def send_invoice(
-            self, chat_id: Union[int, str], title: str, description: str, 
-            invoice_payload: str, provider_token: str, currency: str, 
-            prices: List[types.LabeledPrice], start_parameter: Optional[str]=None, 
-            photo_url: Optional[str]=None, photo_size: Optional[int]=None, 
-            photo_width: Optional[int]=None, photo_height: Optional[int]=None,
-            need_name: Optional[bool]=None, need_phone_number: Optional[bool]=None, 
-            need_email: Optional[bool]=None, need_shipping_address: Optional[bool]=None,
-            send_phone_number_to_provider: Optional[bool]=None, 
-            send_email_to_provider: Optional[bool]=None, 
-            is_flexible: Optional[bool]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            provider_data: Optional[str]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
+            self, chat_id: Union[int, str], title: str, description: str,
+            invoice_payload: str, provider_token: str, currency: str,
+            prices: List[types.LabeledPrice], start_parameter: Optional[str] = None,
+            photo_url: Optional[str] = None, photo_size: Optional[int] = None,
+            photo_width: Optional[int] = None, photo_height: Optional[int] = None,
+            need_name: Optional[bool] = None, need_phone_number: Optional[bool] = None,
+            need_email: Optional[bool] = None, need_shipping_address: Optional[bool] = None,
+            send_phone_number_to_provider: Optional[bool] = None,
+            send_email_to_provider: Optional[bool] = None,
+            is_flexible: Optional[bool] = None,
+            disable_notification: Optional[bool] = None,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            provider_data: Optional[str] = None,
+            timeout: Optional[int] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
             max_tip_amount: Optional[int] = None,
-            suggested_tip_amounts: Optional[List[int]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None) -> types.Message:
+            suggested_tip_amounts: Optional[List[int]] = None,
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None) -> types.Message:
         """
         Sends invoice.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendinvoice
 
         :param chat_id: Unique identifier for the target private chat
         :type chat_id: :obj:`int` or :obj:`str`
@@ -4982,57 +4966,61 @@
 
         if reply_to_message_id:
             # show a deprecation warning
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
                 # show a conflict warning
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         return types.Message.de_json(
             apihelper.send_invoice(
                 self.token, chat_id, title, description, invoice_payload, provider_token,
                 currency, prices, start_parameter=start_parameter, photo_url=photo_url,
                 photo_size=photo_size, photo_width=photo_width, photo_height=photo_height,
                 need_name=need_name, need_phone_number=need_phone_number, need_email=need_email,
-                need_shipping_address=need_shipping_address, send_phone_number_to_provider=send_phone_number_to_provider,
+                need_shipping_address=need_shipping_address,
+                send_phone_number_to_provider=send_phone_number_to_provider,
                 send_email_to_provider=send_email_to_provider, is_flexible=is_flexible,
                 disable_notification=disable_notification, reply_markup=reply_markup,
                 provider_data=provider_data, timeout=timeout, protect_content=protect_content,
                 message_thread_id=message_thread_id, reply_parameters=reply_parameters,
-                max_tip_amount=max_tip_amount, suggested_tip_amounts=suggested_tip_amounts)
+                max_tip_amount=max_tip_amount, suggested_tip_amounts=suggested_tip_amounts,
+                verify=self.ssl_verify)
         )
 
     def create_invoice_link(self,
-            title: str, description: str, payload:str, provider_token: str, 
-            currency: str, prices: List[types.LabeledPrice],
-            max_tip_amount: Optional[int] = None, 
-            suggested_tip_amounts: Optional[List[int]]=None,
-            provider_data: Optional[str]=None,
-            photo_url: Optional[str]=None,
-            photo_size: Optional[int]=None,
-            photo_width: Optional[int]=None,
-            photo_height: Optional[int]=None,
-            need_name: Optional[bool]=None,
-            need_phone_number: Optional[bool]=None,
-            need_email: Optional[bool]=None,
-            need_shipping_address: Optional[bool]=None,
-            send_phone_number_to_provider: Optional[bool]=None,
-            send_email_to_provider: Optional[bool]=None,
-            is_flexible: Optional[bool]=None) -> str:
-            
+                            title: str, description: str, payload: str, provider_token: str,
+                            currency: str, prices: List[types.LabeledPrice],
+                            max_tip_amount: Optional[int] = None,
+                            suggested_tip_amounts: Optional[List[int]] = None,
+                            provider_data: Optional[str] = None,
+                            photo_url: Optional[str] = None,
+                            photo_size: Optional[int] = None,
+                            photo_width: Optional[int] = None,
+                            photo_height: Optional[int] = None,
+                            need_name: Optional[bool] = None,
+                            need_phone_number: Optional[bool] = None,
+                            need_email: Optional[bool] = None,
+                            need_shipping_address: Optional[bool] = None,
+                            send_phone_number_to_provider: Optional[bool] = None,
+                            send_email_to_provider: Optional[bool] = None,
+                            is_flexible: Optional[bool] = None) -> str:
+
         """
         Use this method to create a link for an invoice. 
         Returns the created invoice link as String on success.
 
         Telegram documentation:
         https://core.telegram.org/bots/api#createinvoicelink
 
@@ -5109,38 +5097,37 @@
         return apihelper.create_invoice_link(
             self.token, title, description, payload, provider_token,
             currency, prices, max_tip_amount=max_tip_amount, suggested_tip_amounts=suggested_tip_amounts,
             provider_data=provider_data, photo_url=photo_url, photo_size=photo_size,
             photo_width=photo_width, photo_height=photo_height, need_name=need_name,
             need_phone_number=need_phone_number, need_email=need_email,
             need_shipping_address=need_shipping_address, send_phone_number_to_provider=send_phone_number_to_provider,
-            send_email_to_provider=send_email_to_provider, is_flexible=is_flexible)
-
+            send_email_to_provider=send_email_to_provider, is_flexible=is_flexible, verify=self.ssl_verify)
 
     # noinspection PyShadowingBuiltins
     def send_poll(
             self, chat_id: Union[int, str], question: str, options: List[str],
-            is_anonymous: Optional[bool]=None, type: Optional[str]=None, 
-            allows_multiple_answers: Optional[bool]=None, 
-            correct_option_id: Optional[int]=None,
-            explanation: Optional[str]=None, 
-            explanation_parse_mode: Optional[str]=None, 
-            open_period: Optional[int]=None, 
-            close_date: Optional[Union[int, datetime]]=None, 
-            is_closed: Optional[bool]=None,
-            disable_notification: Optional[bool]=False,
-            reply_to_message_id: Optional[int]=None,          # deprecated, for backward compatibility
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            allow_sending_without_reply: Optional[bool]=None, # deprecated, for backward compatibility
-            timeout: Optional[int]=None,
-            explanation_entities: Optional[List[types.MessageEntity]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None,
-            reply_parameters: Optional[types.ReplyParameters]=None,
-            business_connection_id: Optional[str]=None) -> types.Message:
+            is_anonymous: Optional[bool] = None, type: Optional[str] = None,
+            allows_multiple_answers: Optional[bool] = None,
+            correct_option_id: Optional[int] = None,
+            explanation: Optional[str] = None,
+            explanation_parse_mode: Optional[str] = None,
+            open_period: Optional[int] = None,
+            close_date: Optional[Union[int, datetime]] = None,
+            is_closed: Optional[bool] = None,
+            disable_notification: Optional[bool] = False,
+            reply_to_message_id: Optional[int] = None,  # deprecated, for backward compatibility
+            reply_markup: Optional[REPLY_MARKUP_TYPES] = None,
+            allow_sending_without_reply: Optional[bool] = None,  # deprecated, for backward compatibility
+            timeout: Optional[int] = None,
+            explanation_entities: Optional[List[types.MessageEntity]] = None,
+            protect_content: Optional[bool] = None,
+            message_thread_id: Optional[int] = None,
+            reply_parameters: Optional[types.ReplyParameters] = None,
+            business_connection_id: Optional[str] = None) -> types.Message:
         """
         Use this method to send a native poll.
         On success, the sent Message is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#sendpoll
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
@@ -5225,20 +5212,22 @@
 
         if reply_to_message_id:
             # show a deprecation warning
             logger.warning("The parameter 'reply_to_message_id' is deprecated. Use 'reply_parameters' instead.")
 
             if reply_parameters:
                 # show a conflict warning
-                logger.warning("Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
+                logger.warning(
+                    "Both 'reply_parameters' and 'reply_to_message_id' parameters are set: conflicting, 'reply_to_message_id' is deprecated")
             else:
                 # create a ReplyParameters object
                 reply_parameters = types.ReplyParameters(
                     reply_to_message_id,
-                    allow_sending_without_reply=self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+                    allow_sending_without_reply=self.allow_sending_without_reply if (
+                                allow_sending_without_reply is None) else allow_sending_without_reply
                 )
 
         if reply_parameters and (reply_parameters.allow_sending_without_reply is None):
             reply_parameters.allow_sending_without_reply = self.allow_sending_without_reply
 
         if isinstance(question, types.Poll):
             raise RuntimeError("The send_poll signature was changed, please see send_poll function details.")
@@ -5250,21 +5239,21 @@
                 self.token, chat_id, question, options,
                 is_anonymous=is_anonymous, type=type, allows_multiple_answers=allows_multiple_answers,
                 correct_option_id=correct_option_id, explanation=explanation,
                 explanation_parse_mode=explanation_parse_mode, open_period=open_period,
                 close_date=close_date, is_closed=is_closed, disable_notification=disable_notification,
                 reply_markup=reply_markup, timeout=timeout, explanation_entities=explanation_entities,
                 protect_content=protect_content, message_thread_id=message_thread_id,
-                reply_parameters=reply_parameters, business_connection_id=business_connection_id)
-            )
-
+                reply_parameters=reply_parameters, business_connection_id=business_connection_id,
+                verify=self.ssl_verify)
+        )
 
     def stop_poll(
-            self, chat_id: Union[int, str], message_id: int, 
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> types.Poll:
+            self, chat_id: Union[int, str], message_id: int,
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None) -> types.Poll:
         """
         Use this method to stop a poll which was sent by the bot. On success, the stopped Poll is returned.
 
         Telegram documentation: https://core.telegram.org/bots/api#stoppoll
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
         :type chat_id: :obj:`int` | :obj:`str`
@@ -5275,22 +5264,21 @@
         :param reply_markup: A JSON-serialized object for a new message markup.
         :type reply_markup: :obj:`InlineKeyboardMarkup`
 
         :return: On success, the stopped Poll is returned.
         :rtype: :obj:`types.Poll`
         """
         return types.Poll.de_json(
-            apihelper.stop_poll(self.token, chat_id, message_id, reply_markup=reply_markup)
+            apihelper.stop_poll(self.token, chat_id, message_id, reply_markup=reply_markup, verify=self.ssl_verify)
         )
 
-
     def answer_shipping_query(
-            self, shipping_query_id: str, ok: bool, 
-            shipping_options: Optional[List[types.ShippingOption]]=None, 
-            error_message: Optional[str]=None) -> bool:
+            self, shipping_query_id: str, ok: bool,
+            shipping_options: Optional[List[types.ShippingOption]] = None,
+            error_message: Optional[str] = None) -> bool:
         """
         Asks for an answer to a shipping question.
 
         Telegram documentation: https://core.telegram.org/bots/api#answershippingquery
 
         :param shipping_query_id: Unique identifier for the query to be answered
         :type shipping_query_id: :obj:`str`
@@ -5305,20 +5293,20 @@
             (e.g. "Sorry, delivery to your desired address is unavailable'). Telegram will display this message to the user.
         :type error_message: :obj:`str`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         return apihelper.answer_shipping_query(
-            self.token, shipping_query_id, ok, shipping_options=shipping_options, error_message=error_message)
-
+            self.token, shipping_query_id, ok, shipping_options=shipping_options, error_message=error_message,
+            verify=self.ssl_verify)
 
     def answer_pre_checkout_query(
-            self, pre_checkout_query_id: int, ok: bool, 
-            error_message: Optional[str]=None) -> bool:
+            self, pre_checkout_query_id: int, ok: bool,
+            error_message: Optional[str] = None) -> bool:
         """
         Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the
         field pre_checkout_query. Use this method to respond to such pre-checkout queries.
         On success, True is returned.
 
         .. note::
             The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.
@@ -5336,24 +5324,23 @@
             color or garment!"). Telegram will display this message to the user.
         :type error_message: :obj:`str`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         return apihelper.answer_pre_checkout_query(
-            self.token, pre_checkout_query_id, ok, error_message=error_message)
-
+            self.token, pre_checkout_query_id, ok, error_message=error_message, verify=self.ssl_verify)
 
     def edit_message_caption(
-            self, caption: str, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None,
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+            self, caption: str, chat_id: Optional[Union[int, str]] = None,
+            message_id: Optional[int] = None,
+            inline_message_id: Optional[str] = None,
+            parse_mode: Optional[str] = None,
+            caption_entities: Optional[List[types.MessageEntity]] = None,
+            reply_markup: Optional[types.InlineKeyboardMarkup] = None) -> Union[types.Message, bool]:
         """
         Use this method to edit captions of messages.
 
         Telegram documentation: https://core.telegram.org/bots/api#editmessagecaption
 
         :param caption: New caption of the message
         :type caption: :obj:`str`
@@ -5379,21 +5366,21 @@
         :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
         :rtype: :obj:`types.Message` | :obj:`bool`
         """
         parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
 
         result = apihelper.edit_message_caption(
             self.token, caption, chat_id=chat_id, message_id=message_id, inline_message_id=inline_message_id,
-            parse_mode=parse_mode, caption_entities=caption_entities, reply_markup=reply_markup)
+            parse_mode=parse_mode, caption_entities=caption_entities, reply_markup=reply_markup,
+            verify=self.ssl_verify)
 
         if type(result) == bool:
             return result
         return types.Message.de_json(result)
 
-
     def reply_to(self, message: types.Message, text: str, **kwargs) -> types.Message:
         """
         Convenience function for `send_message(message.chat.id, text, reply_parameters=(message.message_id...), **kwargs)`
 
         :param message: Instance of :class:`telebot.types.Message`
         :type message: :obj:`types.Message`
 
@@ -5404,39 +5391,39 @@
 
         :return: On success, the sent Message is returned.
         :rtype: :class:`telebot.types.Message`
         """
         if kwargs:
             reply_parameters = kwargs.pop("reply_parameters", None)
             if "allow_sending_without_reply" in kwargs:
-                logger.warning("The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
+                logger.warning(
+                    "The parameter 'allow_sending_without_reply' is deprecated. Use 'reply_parameters' instead.")
         else:
             reply_parameters = None
 
         if not reply_parameters:
             reply_parameters = types.ReplyParameters(
                 message.message_id,
                 allow_sending_without_reply=kwargs.pop("allow_sending_without_reply", None) if kwargs else None
             )
 
         if not reply_parameters.message_id:
             reply_parameters.message_id = message.message_id
 
         return self.send_message(message.chat.id, text, reply_parameters=reply_parameters, **kwargs)
 
-
     def answer_inline_query(
-            self, inline_query_id: str, 
-            results: List[Any], 
-            cache_time: Optional[int]=None, 
-            is_personal: Optional[bool]=None, 
-            next_offset: Optional[str]=None,
-            switch_pm_text: Optional[str]=None, 
-            switch_pm_parameter: Optional[str]=None,
-            button: Optional[types.InlineQueryResultsButton]=None) -> bool:
+            self, inline_query_id: str,
+            results: List[Any],
+            cache_time: Optional[int] = None,
+            is_personal: Optional[bool] = None,
+            next_offset: Optional[str] = None,
+            switch_pm_text: Optional[str] = None,
+            switch_pm_parameter: Optional[str] = None,
+            button: Optional[types.InlineQueryResultsButton] = None) -> bool:
         """
         Use this method to send answers to an inline query. On success, True is returned.
         No more than 50 results per query are allowed.
 
         Telegram documentation: https://core.telegram.org/bots/api#answerinlinequery
 
         :param inline_query_id: Unique identifier for the answered query
@@ -5471,21 +5458,21 @@
         :param button: A JSON-serialized object describing a button to be shown above inline query results
         :type button: :obj:`types.InlineQueryResultsButton`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         if not button and (switch_pm_text or switch_pm_parameter):
-            logger.warning("switch_pm_text and switch_pm_parameter are deprecated for answer_inline_query. Use button instead.")
+            logger.warning(
+                "switch_pm_text and switch_pm_parameter are deprecated for answer_inline_query. Use button instead.")
             button = types.InlineQueryResultsButton(text=switch_pm_text, start_parameter=switch_pm_parameter)
-        
+
         return apihelper.answer_inline_query(
             self.token, inline_query_id, results, cache_time=cache_time, is_personal=is_personal,
-            next_offset=next_offset, button=button)
-
+            next_offset=next_offset, button=button, verify=self.ssl_verify)
 
     def unpin_all_general_forum_topic_messages(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to clear the list of pinned messages in a General forum topic. 
         The bot must be an administrator in the chat for this to work and must have the
         can_pin_messages administrator right in the supergroup.
         Returns True on success.
@@ -5494,21 +5481,20 @@
 
         :param chat_id: Unique identifier for the target chat or username of chat
         :type chat_id: :obj:`int` | :obj:`str`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.unpin_all_general_forum_topic_messages(self.token, chat_id)
-
+        return apihelper.unpin_all_general_forum_topic_messages(self.token, chat_id, verify=self.ssl_verify)
 
     def answer_callback_query(
-            self, callback_query_id: int, 
-            text: Optional[str]=None, show_alert: Optional[bool]=None, 
-            url: Optional[str]=None, cache_time: Optional[int]=None) -> bool:
+            self, callback_query_id: int,
+            text: Optional[str] = None, show_alert: Optional[bool] = None,
+            url: Optional[str] = None, cache_time: Optional[int] = None) -> bool:
         """
         Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to
         the user as a notification at the top of the chat screen or as an alert.
 
         Telegram documentation: https://core.telegram.org/bots/api#answercallbackquery
 
         :param callback_query_id: Unique identifier for the query to be answered
@@ -5527,17 +5513,17 @@
         :param cache_time: The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching
             starting in version 3.14. Defaults to 0.
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         return apihelper.answer_callback_query(
-            self.token, callback_query_id, text=text, show_alert=show_alert, url=url, cache_time=cache_time)
+            self.token, callback_query_id, text=text, show_alert=show_alert, url=url, cache_time=cache_time,
+            verify=self.ssl_verify)
 
-    
     def get_user_chat_boosts(self, chat_id: Union[int, str], user_id: int) -> types.UserChatBoosts:
         """
         Use this method to get the list of boosts added to a chat by a user. Requires administrator rights in the chat. Returns a UserChatBoosts object.
 
         Telegram documentation: https://core.telegram.org/bots/api#getuserchatboosts
 
         :param chat_id: Unique identifier for the target chat or username of the target channel
@@ -5546,19 +5532,19 @@
         :param user_id: Unique identifier of the target user
         :type user_id: :obj:`int`
 
         :return: On success, a UserChatBoosts object is returned.
         :rtype: :class:`telebot.types.UserChatBoosts`
         """
         return types.UserChatBoosts.de_json(
-            apihelper.get_user_chat_boosts(self.token, chat_id, user_id)
+            apihelper.get_user_chat_boosts(self.token, chat_id, user_id, verify=self.ssl_verify)
         )
 
-
-    def set_sticker_set_thumbnail(self, name: str, user_id: int, thumbnail: Union[Any, str]=None, format: Optional[str]=None) -> bool:
+    def set_sticker_set_thumbnail(self, name: str, user_id: int, thumbnail: Union[Any, str] = None,
+                                  format: Optional[str] = None) -> bool:
         """
         Use this method to set the thumbnail of a sticker set. 
         Animated thumbnails can be set for animated sticker sets only. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setstickersetthumbnail
 
         :param name: Sticker set name
@@ -5578,22 +5564,22 @@
         :param format: Format of the thumbnail, must be one of “static” for a .WEBP or .PNG image, “animated” for a .TGS animation, or “video” for a WEBM video
         :type format: :obj:`str`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         if not format:
-            logger.warning("Deprecation warning. 'format' parameter is required in set_sticker_set_thumbnail. Setting format to 'static'.")
+            logger.warning(
+                "Deprecation warning. 'format' parameter is required in set_sticker_set_thumbnail. Setting format to 'static'.")
             format = "static"
 
-        return apihelper.set_sticker_set_thumbnail(self.token, name, user_id, thumbnail, format)
+        return apihelper.set_sticker_set_thumbnail(self.token, name, user_id, thumbnail, format, verify=self.ssl_verify)
 
-    
     @util.deprecated(deprecation_text="Use set_sticker_set_thumbnail instead")
-    def set_sticker_set_thumb(self, name: str, user_id: int, thumb: Union[Any, str]=None):
+    def set_sticker_set_thumb(self, name: str, user_id: int, thumb: Union[Any, str] = None):
         """
         Use this method to set the thumbnail of a sticker set. 
         Animated thumbnails can be set for animated sticker sets only. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#setstickersetthumb
 
         :param name: Sticker set name
@@ -5607,128 +5593,123 @@
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         # deprecated
         return self.set_sticker_set_thumbnail(name, user_id, thumbnail=thumb)
 
-
     def get_sticker_set(self, name: str) -> types.StickerSet:
         """
         Use this method to get a sticker set. On success, a StickerSet object is returned.
         
         Telegram documentation: https://core.telegram.org/bots/api#getstickerset
 
         :param name: Sticker set name
         :type name: :obj:`str`
 
         :return: On success, a StickerSet object is returned.
         :rtype: :class:`telebot.types.StickerSet`
         """
         return types.StickerSet.de_json(
-            apihelper.get_sticker_set(self.token, name)
+            apihelper.get_sticker_set(self.token, name, verify=self.ssl_verify)
         )
 
     def get_custom_emoji_stickers(self, custom_emoji_ids: List[str]) -> List[types.Sticker]:
         """
         Use this method to get information about custom emoji stickers by their identifiers.
         Returns an Array of Sticker objects.
 
         :param custom_emoji_ids: List of custom emoji identifiers. At most 200 custom emoji identifiers can be specified.
         :type custom_emoji_ids: :obj:`list` of :obj:`str`
 
         :return: Returns an Array of Sticker objects.
         :rtype: :obj:`list` of :class:`telebot.types.Sticker`
         """
-        result = apihelper.get_custom_emoji_stickers(self.token, custom_emoji_ids)
+        result = apihelper.get_custom_emoji_stickers(self.token, custom_emoji_ids, verify=self.ssl_verify)
         return [types.Sticker.de_json(sticker) for sticker in result]
 
-    
-    def set_sticker_keywords(self, sticker: str, keywords: List[str]=None) -> bool:
+    def set_sticker_keywords(self, sticker: str, keywords: List[str] = None) -> bool:
         """
         Use this method to change search keywords assigned to a regular or custom emoji sticker.
         The sticker must belong to a sticker set created by the bot.
         Returns True on success.
 
         :param sticker: File identifier of the sticker.
         :type sticker: :obj:`str`
 
         :param keywords: A JSON-serialized list of 0-20 search keywords for the sticker with total length of up to 64 characters
         :type keywords: :obj:`list` of :obj:`str`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_sticker_keywords(self.token, sticker, keywords=keywords)
+        return apihelper.set_sticker_keywords(self.token, sticker, keywords=keywords, verify=self.ssl_verify)
 
-    
-    def set_sticker_mask_position(self, sticker: str, mask_position: types.MaskPosition=None) -> bool:
+    def set_sticker_mask_position(self, sticker: str, mask_position: types.MaskPosition = None) -> bool:
         """
         Use this method to change the mask position of a mask sticker.
         The sticker must belong to a sticker set that was created by the bot.
         Returns True on success.
 
         :param sticker: File identifier of the sticker.
         :type sticker: :obj:`str`
 
         :param mask_position: A JSON-serialized object for position where the mask should be placed on faces.
         :type mask_position: :class:`telebot.types.MaskPosition`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_sticker_mask_position(self.token, sticker, mask_position=mask_position)
-    
+        return apihelper.set_sticker_mask_position(self.token, sticker, mask_position=mask_position,
+                                                   verify=self.ssl_verify)
 
-    def set_custom_emoji_sticker_set_thumbnail(self, name: str, custom_emoji_id: Optional[str]=None) -> bool:
+    def set_custom_emoji_sticker_set_thumbnail(self, name: str, custom_emoji_id: Optional[str] = None) -> bool:
         """
         Use this method to set the thumbnail of a custom emoji sticker set.
         Returns True on success.
 
         :param name: Sticker set name
         :type name: :obj:`str`
 
         :param custom_emoji_id: Custom emoji identifier of a sticker from the sticker set; pass an empty string to drop the thumbnail and use the first sticker as the thumbnail.
         :type custom_emoji_id: :obj:`str`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_custom_emoji_sticker_set_thumbnail(self.token, name, custom_emoji_id=custom_emoji_id)
+        return apihelper.set_custom_emoji_sticker_set_thumbnail(self.token, name, custom_emoji_id=custom_emoji_id,
+                                                                verify=self.ssl_verify)
 
-    
     def set_sticker_set_title(self, name: str, title: str) -> bool:
         """
         Use this method to set the title of a created sticker set.
         Returns True on success.
 
         :param name: Sticker set name
         :type name: :obj:`str`
 
         :param title: New sticker set title
         :type title: :obj:`str`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_sticker_set_title(self.token, name, title)
+        return apihelper.set_sticker_set_title(self.token, name, title, verify=self.ssl_verify)
 
-    
-    def delete_sticker_set(self, name:str) -> bool:
+    def delete_sticker_set(self, name: str) -> bool:
         """
         Use this method to delete a sticker set. Returns True on success.
 
         :param name: Sticker set name
         :type name: :obj:`str`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_sticker_set(self.token, name)
-
+        return apihelper.delete_sticker_set(self.token, name, verify=self.ssl_verify)
 
     def replace_sticker_in_set(self, user_id: int, name: str, old_sticker: str, sticker: types.InputSticker) -> bool:
         """
         Use this method to replace an existing sticker in a sticker set with a new one. The method is equivalent to calling deleteStickerFromSet, then addStickerToSet,
             then setStickerPositionInSet. Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#replaceStickerInSet
@@ -5744,35 +5725,35 @@
 
         :param sticker: A JSON-serialized object with information about the added sticker. If exactly the same sticker had already been added to the set, then the set remains unchanged.
         :type sticker: :class:`telebot.types.InputSticker`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.replace_sticker_in_set(self.token, user_id, name, old_sticker, sticker)
-    
-    
+        return apihelper.replace_sticker_in_set(self.token, user_id, name, old_sticker, sticker, verify=self.ssl_verify)
+
     def set_sticker_emoji_list(self, sticker: str, emoji_list: List[str]) -> bool:
         """
         Use this method to set the emoji list of a custom emoji sticker set.
         Returns True on success.
 
         :param sticker: Sticker identifier
         :type sticker: :obj:`str`
 
         :param emoji_list: List of emoji
         :type emoji_list: :obj:`list` of :obj:`str`
 
         :return: Returns True on success.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_sticker_emoji_list(self.token, sticker, emoji_list)
-
+        return apihelper.set_sticker_emoji_list(self.token, sticker, emoji_list, verify=self.ssl_verify)
 
-    def upload_sticker_file(self, user_id: int, png_sticker: Union[Any, str]=None, sticker: Optional[types.InputFile]=None, sticker_format: Optional[str]=None) -> types.File:
+    def upload_sticker_file(self, user_id: int, png_sticker: Union[Any, str] = None,
+                            sticker: Optional[types.InputFile] = None,
+                            sticker_format: Optional[str] = None) -> types.File:
         """
         Use this method to upload a .png file with a sticker for later use in createNewStickerSet and addStickerToSet
         methods (can be used multiple times). Returns the uploaded File on success.
         
         Telegram documentation: https://core.telegram.org/bots/api#uploadstickerfile
 
         :param user_id: User identifier of sticker set owner
@@ -5792,32 +5773,31 @@
         :return: On success, the sent file is returned.
         :rtype: :class:`telebot.types.File`
         """
         if png_sticker:
             logger.warning('The parameter "png_sticker" is deprecated. Use "sticker" instead.')
             sticker = png_sticker
             sticker_format = "static"
-        
+
         return types.File.de_json(
-            apihelper.upload_sticker_file(self.token, user_id, sticker, sticker_format)
+            apihelper.upload_sticker_file(self.token, user_id, sticker, sticker_format, verify=self.ssl_verify)
         )
 
-
     def create_new_sticker_set(
-            self, user_id: int, name: str, title: str, 
-            emojis: Optional[List[str]]=None, 
-            png_sticker: Union[Any, str]=None, 
-            tgs_sticker: Union[Any, str]=None, 
-            webm_sticker: Union[Any, str]=None,
-            contains_masks: Optional[bool]=None,
-            sticker_type: Optional[str]=None,
-            mask_position: Optional[types.MaskPosition]=None,
-            needs_repainting: Optional[bool]=None,
-            stickers: List[types.InputSticker]=None,
-            sticker_format: Optional[str]=None) -> bool:
+            self, user_id: int, name: str, title: str,
+            emojis: Optional[List[str]] = None,
+            png_sticker: Union[Any, str] = None,
+            tgs_sticker: Union[Any, str] = None,
+            webm_sticker: Union[Any, str] = None,
+            contains_masks: Optional[bool] = None,
+            sticker_type: Optional[str] = None,
+            mask_position: Optional[types.MaskPosition] = None,
+            needs_repainting: Optional[bool] = None,
+            stickers: List[types.InputSticker] = None,
+            sticker_format: Optional[str] = None) -> bool:
         """
         Use this method to create new sticker set owned by a user. 
         The bot will be able to edit the created sticker set.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#createnewstickerset
 
@@ -5875,40 +5855,40 @@
         """
         if tgs_sticker:
             sticker_format = 'animated'
         elif webm_sticker:
             sticker_format = 'video'
         elif png_sticker:
             sticker_format = 'static'
-        
+
         if contains_masks is not None:
             logger.warning('The parameter "contains_masks" is deprecated, use "sticker_type" instead')
             if sticker_type is None:
-               sticker_type = 'mask' if contains_masks else 'regular'
+                sticker_type = 'mask' if contains_masks else 'regular'
 
         if stickers is None:
             stickers = png_sticker or tgs_sticker or webm_sticker
             if stickers is None:
                 raise ValueError('You must pass at least one sticker')
             stickers = [types.InputSticker(sticker=stickers, emoji_list=emojis, mask_position=mask_position)]
 
         if sticker_format:
             logger.warning('The parameter "sticker_format" is deprecated since Bot API 7.2. Stickers can now be mixed')
 
         return apihelper.create_new_sticker_set(
-            self.token, user_id, name, title, stickers, sticker_type=sticker_type, needs_repainting=needs_repainting)
-
+            self.token, user_id, name, title, stickers, sticker_type=sticker_type, needs_repainting=needs_repainting,
+            verify=self.ssl_verify)
 
     def add_sticker_to_set(
             self, user_id: int, name: str, emojis: Union[List[str], str],
-            png_sticker: Optional[Union[Any, str]]=None, 
-            tgs_sticker: Optional[Union[Any, str]]=None,  
-            webm_sticker: Optional[Union[Any, str]]=None,
-            mask_position: Optional[types.MaskPosition]=None,
-            sticker: Optional[types.InputSticker]=None) -> bool:
+            png_sticker: Optional[Union[Any, str]] = None,
+            tgs_sticker: Optional[Union[Any, str]] = None,
+            webm_sticker: Optional[Union[Any, str]] = None,
+            mask_position: Optional[types.MaskPosition] = None,
+            sticker: Optional[types.InputSticker] = None) -> bool:
         """
         Use this method to add a new sticker to a set created by the bot.
         The format of the added sticker must match the format of the other stickers in the set.
         Emoji sticker sets can have up to 200 stickers. Animated and video sticker sets can have up to 50 stickers.
         Static sticker sets can have up to 120 stickers.
         Returns True on success.
 
@@ -5950,21 +5930,21 @@
         # split emojis if string
         if isinstance(emojis, str):
             emojis = list(emojis)
         # Replaced the parameters png_sticker, tgs_sticker, webm_sticker, emojis and mask_position
         if sticker is None:
             old_sticker = png_sticker or tgs_sticker or webm_sticker
             if old_sticker is not None:
-                logger.warning('The parameters "..._sticker", "emojis" and "mask_position" are deprecated, use "sticker" instead')
+                logger.warning(
+                    'The parameters "..._sticker", "emojis" and "mask_position" are deprecated, use "sticker" instead')
             if not old_sticker:
                 raise ValueError('You must pass at least one sticker.')
             sticker = types.InputSticker(old_sticker, emojis, mask_position)
 
-        return apihelper.add_sticker_to_set(self.token, user_id, name, sticker)
-
+        return apihelper.add_sticker_to_set(self.token, user_id, name, sticker, verify=self.ssl_verify)
 
     def set_sticker_position_in_set(self, sticker: str, position: int) -> bool:
         """
         Use this method to move a sticker in a set created by the bot to a specific position . Returns True on success.
         
         Telegram documentation: https://core.telegram.org/bots/api#setstickerpositioninset
 
@@ -5973,33 +5953,31 @@
 
         :param position: New sticker position in the set, zero-based
         :type position: :obj:`int`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.set_sticker_position_in_set(self.token, sticker, position)
-
+        return apihelper.set_sticker_position_in_set(self.token, sticker, position, verify=self.ssl_verify)
 
     def delete_sticker_from_set(self, sticker: str) -> bool:
         """
         Use this method to delete a sticker from a set created by the bot. Returns True on success.
        
         Telegram documentation: https://core.telegram.org/bots/api#deletestickerfromset
 
         :param sticker: File identifier of the sticker
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_sticker_from_set(self.token, sticker)
-
+        return apihelper.delete_sticker_from_set(self.token, sticker, verify=self.ssl_verify)
 
     def create_forum_topic(self,
-            chat_id: int, name: str, icon_color: Optional[int]=None,
-            icon_custom_emoji_id: Optional[str]=None) -> types.ForumTopic:
+                           chat_id: int, name: str, icon_color: Optional[int] = None,
+                           icon_custom_emoji_id: Optional[str] = None) -> types.ForumTopic:
         """
         Use this method to create a topic in a forum supergroup chat. The bot must be an administrator
         in the chat for this to work and must have the can_manage_topics administrator rights.
         Returns information about the created topic as a ForumTopic object.
 
         Telegram documentation: https://core.telegram.org/bots/api#createforumtopic
 
@@ -6016,23 +5994,23 @@
         :type icon_custom_emoji_id: :obj:`str`
 
         :return: On success, information about the created topic is returned as a ForumTopic object.
         :rtype: :class:`telebot.types.ForumTopic`
         """
         return types.ForumTopic.de_json(
             apihelper.create_forum_topic(
-                self.token, chat_id, name, icon_color=icon_color, icon_custom_emoji_id=icon_custom_emoji_id)
+                self.token, chat_id, name, icon_color=icon_color, icon_custom_emoji_id=icon_custom_emoji_id,
+                verify=self.ssl_verify)
         )
 
-
     def edit_forum_topic(
             self, chat_id: Union[int, str],
-            message_thread_id: int, name: Optional[str]=None,
-            icon_custom_emoji_id: Optional[str]=None
-        ) -> bool:
+            message_thread_id: int, name: Optional[str] = None,
+            icon_custom_emoji_id: Optional[str] = None
+    ) -> bool:
         """
         Use this method to edit name and icon of a topic in a forum supergroup chat. The bot must be an
         administrator in the chat for this to work and must have can_manage_topics administrator rights,
         unless it is the creator of the topic. Returns True on success.
 
         Telegram Documentation: https://core.telegram.org/bots/api#editforumtopic
 
@@ -6051,16 +6029,16 @@
             icon. If not specified, the current icon will be kept
         :type icon_custom_emoji_id: :obj:`str`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
         return apihelper.edit_forum_topic(
-            self.token, chat_id, message_thread_id, name=name, icon_custom_emoji_id=icon_custom_emoji_id)
-
+            self.token, chat_id, message_thread_id, name=name, icon_custom_emoji_id=icon_custom_emoji_id,
+            verify=self.ssl_verify)
 
     def close_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
         """
         Use this method to close an open topic in a forum supergroup chat. The bot must be an administrator
         in the chat for this to work and must have the can_manage_topics administrator rights, unless it is
         the creator of the topic. Returns True on success.
 
@@ -6071,16 +6049,15 @@
 
         :param message_thread_id: Identifier of the topic to close
         :type message_thread_id: :obj:`int`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.close_forum_topic(self.token, chat_id, message_thread_id)
-
+        return apihelper.close_forum_topic(self.token, chat_id, message_thread_id, verify=self.ssl_verify)
 
     def reopen_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
         """
         Use this method to reopen a closed topic in a forum supergroup chat. The bot must be an administrator in the chat
         for this to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic.
         Returns True on success.
 
@@ -6091,16 +6068,15 @@
 
         :param message_thread_id: Identifier of the topic to reopen
         :type message_thread_id: :obj:`int`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.reopen_forum_topic(self.token, chat_id, message_thread_id)
-
+        return apihelper.reopen_forum_topic(self.token, chat_id, message_thread_id, verify=self.ssl_verify)
 
     def delete_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
         """
         Use this method to delete a topic in a forum supergroup chat. The bot must be an administrator in the chat for this
         to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic. Returns True
         on success.
 
@@ -6111,16 +6087,15 @@
 
         :param message_thread_id: Identifier of the topic to delete
         :type message_thread_id: :obj:`int`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.delete_forum_topic(self.token, chat_id, message_thread_id)
-
+        return apihelper.delete_forum_topic(self.token, chat_id, message_thread_id, verify=self.ssl_verify)
 
     def unpin_all_forum_topic_messages(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
         """
         Use this method to clear the list of pinned messages in a forum topic. The bot must be an administrator in the
         chat for this to work and must have the can_pin_messages administrator right in the supergroup.
         Returns True on success.
 
@@ -6131,16 +6106,15 @@
 
         :param message_thread_id: Identifier of the topic
         :type message_thread_id: :obj:`int`
 
         :return: On success, True is returned.
         :rtype: :obj:`bool`
         """
-        return apihelper.unpin_all_forum_topic_messages(self.token, chat_id, message_thread_id)
-
+        return apihelper.unpin_all_forum_topic_messages(self.token, chat_id, message_thread_id, verify=self.ssl_verify)
 
     def edit_general_forum_topic(self, chat_id: Union[int, str], name: str) -> bool:
         """
         Use this method to edit the name of the 'General' topic in a forum supergroup chat.
         The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
         Returns True on success.
         
@@ -6148,87 +6122,82 @@
         
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
 
         :param name: New topic name, 1-128 characters
         :type name: :obj:`str`
         """
-        return apihelper.edit_general_forum_topic(self.token, chat_id, name)
-
+        return apihelper.edit_general_forum_topic(self.token, chat_id, name, verify=self.ssl_verify)
 
     def close_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to close the 'General' topic in a forum supergroup chat.
         The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#closegeneralforumtopic
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
         """
-        return apihelper.close_general_forum_topic(self.token, chat_id)
-
+        return apihelper.close_general_forum_topic(self.token, chat_id, verify=self.ssl_verify)
 
     def reopen_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to reopen the 'General' topic in a forum supergroup chat.
         The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#reopengeneralforumtopic
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
         """
-        return apihelper.reopen_general_forum_topic(self.token, chat_id)
-
+        return apihelper.reopen_general_forum_topic(self.token, chat_id, verify=self.ssl_verify)
 
     def hide_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to hide the 'General' topic in a forum supergroup chat.
         The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#hidegeneralforumtopic
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
         """
-        return apihelper.hide_general_forum_topic(self.token, chat_id)
-
+        return apihelper.hide_general_forum_topic(self.token, chat_id, verify=self.ssl_verify)
 
     def unhide_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
         """
         Use this method to unhide the 'General' topic in a forum supergroup chat.
         The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
         Returns True on success.
 
         Telegram documentation: https://core.telegram.org/bots/api#unhidegeneralforumtopic
 
         :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
         :type chat_id: :obj:`int` or :obj:`str`
         """
-        return apihelper.unhide_general_forum_topic(self.token, chat_id)
-
+        return apihelper.unhide_general_forum_topic(self.token, chat_id, verify=self.ssl_verify)
 
     def get_forum_topic_icon_stickers(self) -> List[types.Sticker]:
         """
         Use this method to get custom emoji stickers, which can be used as a forum topic icon by any user.
         Requires no parameters. Returns an Array of Sticker objects.
 
         Telegram documentation: https://core.telegram.org/bots/api#getforumtopiciconstickers
 
         :return: On success, a list of StickerSet objects is returned.
         :rtype: List[:class:`telebot.types.StickerSet`]
         """
-        return apihelper.get_forum_topic_icon_stickers(self.token)
-
+        return apihelper.get_forum_topic_icon_stickers(self.token, verify=self.ssl_verify)
 
-    def answer_web_app_query(self, web_app_query_id: str, result: types.InlineQueryResultBase) -> types.SentWebAppMessage:
+    def answer_web_app_query(self, web_app_query_id: str,
+                             result: types.InlineQueryResultBase) -> types.SentWebAppMessage:
         """
         Use this method to set the result of an interaction with a Web App and
         send a corresponding message on behalf of the user to the chat from which
         the query originated. 
         On success, a SentWebAppMessage object is returned.
 
         Telegram Documentation: https://core.telegram.org/bots/api#answerwebappquery
@@ -6238,16 +6207,15 @@
 
         :param result: A JSON-serialized object describing the message to be sent
         :type result: :class:`telebot.types.InlineQueryResultBase`
 
         :return: On success, a SentWebAppMessage object is returned.
         :rtype: :class:`telebot.types.SentWebAppMessage`
         """
-        return apihelper.answer_web_app_query(self.token, web_app_query_id, result)
-
+        return apihelper.answer_web_app_query(self.token, web_app_query_id, result, verify=self.ssl_verify)
 
     def register_for_reply(self, message: types.Message, callback: Callable, *args, **kwargs) -> None:
         """
         Registers a callback function to be notified when a reply to `message` arrives.
 
         Warning: In case `callback` as lambda function, saving reply handlers will not work.
 
@@ -6261,15 +6229,14 @@
         :param args: Optional arguments for the callback function.
         :param kwargs: Optional keyword arguments for the callback function.
         
         :return: None
         """
         self.register_for_reply_by_message_id(message.message_id, callback, *args, **kwargs)
 
-
     def register_for_reply_by_message_id(
             self, message_id: int, callback: Callable, *args, **kwargs) -> None:
         """
         Registers a callback function to be notified when a reply to `message` arrives.
 
         Warning: In case `callback` as lambda function, saving reply handlers will not work.
 
@@ -6283,30 +6250,28 @@
         :param args: Optional arguments for the callback function.
         :param kwargs: Optional keyword arguments for the callback function.
 
         :return: None
         """
         self.reply_backend.register_handler(message_id, Handler(callback, *args, **kwargs))
 
-
     def _notify_reply_handlers(self, new_messages) -> None:
         """
         Notify handlers of the answers
 
         :param new_messages:
         :return:
         """
         for message in new_messages:
             if hasattr(message, "reply_to_message") and message.reply_to_message is not None:
                 handlers = self.reply_backend.get_handlers(message.reply_to_message.message_id)
                 if handlers:
                     for handler in handlers:
                         self._exec_task(handler["callback"], message, *handler["args"], **handler["kwargs"])
 
-
     def register_next_step_handler(self, message: types.Message, callback: Callable, *args, **kwargs) -> None:
         """
         Registers a callback function to be notified when new message arrives after `message`.
 
         Warning: In case `callback` as lambda function, saving next step handlers will not work.
 
         :param message: The message for which we want to handle new message in the same chat.
@@ -6319,15 +6284,14 @@
 
         :param kwargs: Args to pass in callback func
 
         :return: None
         """
         self.register_next_step_handler_by_chat_id(message.chat.id, callback, *args, **kwargs)
 
-
     def setup_middleware(self, middleware: BaseMiddleware):
         """
         Registers class-based middleware.
 
         :param middleware: Subclass of :class:`telebot.handler_backends.BaseMiddleware`
         :type middleware: :class:`telebot.handler_backends.BaseMiddleware`
         :return: None
@@ -6342,16 +6306,15 @@
 
         if not hasattr(middleware, 'update_sensitive'):
             logger.warning('Middleware has no update_sensitive parameter. Parameter was set to False.')
             middleware.update_sensitive = False
 
         self.middlewares.append(middleware)
 
-
-    def set_state(self, user_id: int, state: Union[int, str, State], chat_id: Optional[int]=None) -> None:
+    def set_state(self, user_id: int, state: Union[int, str, State], chat_id: Optional[int] = None) -> None:
         """
         Sets a new state of a user.
 
         .. note::
 
             You should set both user id and chat id in order to set state for a user in a chat.
             Otherwise, if you only set user_id, chat_id will equal to user_id, this means that
@@ -6368,16 +6331,15 @@
 
         :return: None
         """
         if chat_id is None:
             chat_id = user_id
         self.current_states.set_state(chat_id, user_id, state)
 
-
-    def reset_data(self, user_id: int, chat_id: Optional[int]=None):
+    def reset_data(self, user_id: int, chat_id: Optional[int] = None):
         """
         Reset data for a user in chat.
 
         :param user_id: User's identifier
         :type user_id: :obj:`int`
 
         :param chat_id: Chat's identifier
@@ -6385,16 +6347,15 @@
 
         :return: None
         """
         if chat_id is None:
             chat_id = user_id
         self.current_states.reset_data(chat_id, user_id)
 
-
-    def delete_state(self, user_id: int, chat_id: Optional[int]=None) -> None:
+    def delete_state(self, user_id: int, chat_id: Optional[int] = None) -> None:
         """
         Delete the current state of a user.
 
         :param user_id: User's identifier
         :type user_id: :obj:`int`
         
         :param chat_id: Chat's identifier
@@ -6402,16 +6363,15 @@
 
         :return: None
         """
         if chat_id is None:
             chat_id = user_id
         self.current_states.delete_state(chat_id, user_id)
 
-
-    def retrieve_data(self, user_id: int, chat_id: Optional[int]=None) -> Optional[Any]:
+    def retrieve_data(self, user_id: int, chat_id: Optional[int] = None) -> Optional[Any]:
         """
         Returns context manager with data for a user in chat.
 
         :param user_id: User identifier
         :type user_id: int
 
         :param chat_id: Chat's unique identifier, defaults to user_id
@@ -6420,16 +6380,15 @@
         :return: Context manager with data for a user in chat
         :rtype: Optional[Any]
         """
         if chat_id is None:
             chat_id = user_id
         return self.current_states.get_interactive_data(chat_id, user_id)
 
-
-    def get_state(self, user_id: int, chat_id: Optional[int]=None) -> Optional[Union[int, str, State]]:
+    def get_state(self, user_id: int, chat_id: Optional[int] = None) -> Optional[Union[int, str, State]]:
         """
         Gets current state of a user.
         Not recommended to use this method. But it is ok for debugging.
 
         :param user_id: User's identifier
         :type user_id: :obj:`int`
 
@@ -6439,16 +6398,15 @@
         :return: state of a user
         :rtype: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
         """
         if chat_id is None:
             chat_id = user_id
         return self.current_states.get_state(chat_id, user_id)
 
-
-    def add_data(self, user_id: int, chat_id: Optional[int]=None, **kwargs):
+    def add_data(self, user_id: int, chat_id: Optional[int] = None, **kwargs):
         """
         Add data to states.
 
         :param user_id: User's identifier
         :type user_id: :obj:`int`
 
         :param chat_id: Chat's identifier
@@ -6458,15 +6416,14 @@
         :return: None
         """
         if chat_id is None:
             chat_id = user_id
         for key, value in kwargs.items():
             self.current_states.set_data(chat_id, user_id, key, value)
 
-
     def register_next_step_handler_by_chat_id(
             self, chat_id: int, callback: Callable, *args, **kwargs) -> None:
         """
         Registers a callback function to be notified when new message arrives in the given chat.
 
         Warning: In case `callback` as lambda function, saving next step handlers will not work.
 
@@ -6480,63 +6437,58 @@
         
         :param kwargs: Args to pass in callback func
 
         :return: None
         """
         self.next_step_backend.register_handler(chat_id, Handler(callback, *args, **kwargs))
 
-
     def clear_step_handler(self, message: types.Message) -> None:
         """
         Clears all callback functions registered by register_next_step_handler().
 
         :param message: The message for which we want to handle new message after that in same chat.
         :type message: :class:`telebot.types.Message`
 
         :return: None
         """
         self.clear_step_handler_by_chat_id(message.chat.id)
 
-
     def clear_step_handler_by_chat_id(self, chat_id: Union[int, str]) -> None:
         """
         Clears all callback functions registered by register_next_step_handler().
 
         :param chat_id: The chat for which we want to clear next step handlers
         :type chat_id: :obj:`int` or :obj:`str`
 
         :return: None
         """
         self.next_step_backend.clear_handlers(chat_id)
 
-
     def clear_reply_handlers(self, message: types.Message) -> None:
         """
         Clears all callback functions registered by register_for_reply() and register_for_reply_by_message_id().
 
         :param message: The message for which we want to clear reply handlers
         :type message: :class:`telebot.types.Message`
 
         :return: None
         """
         self.clear_reply_handlers_by_message_id(message.message_id)
 
-
     def clear_reply_handlers_by_message_id(self, message_id: int) -> None:
         """
         Clears all callback functions registered by register_for_reply() and register_for_reply_by_message_id().
 
         :param message_id: The message id for which we want to clear reply handlers
         :type message_id: :obj:`int`
 
         :return: None
         """
         self.reply_backend.clear_handlers(message_id)
 
-
     def _notify_next_handlers(self, new_messages):
         """
         Description: TBD
 
         :param new_messages:
         :return:
         """
@@ -6547,34 +6499,32 @@
                 for handler in handlers:
                     need_pop = True
                     self._exec_task(handler["callback"], message, *handler["args"], **handler["kwargs"])
             if need_pop:
                 # removing message that was detected with next_step_handler
                 new_messages.pop(i)
 
-
     @staticmethod
     def _build_handler_dict(handler, pass_bot=False, **filters):
         """
         Builds a dictionary for a handler
 
         :param handler:
         :param filters:
         :return:
         """
         return {
             'function': handler,
             'pass_bot': pass_bot,
             'filters': {ftype: fvalue for ftype, fvalue in filters.items() if fvalue is not None}
             # Remove None values, they are skipped in _test_filter anyway
-            #'filters': filters
+            # 'filters': filters
         }
 
-
-    def middleware_handler(self, update_types: Optional[List[str]]=None):
+    def middleware_handler(self, update_types: Optional[List[str]] = None):
         """
         Function-based middleware handler decorator.
 
         This decorator can be used to decorate functions that must be handled as middlewares before entering any other
         message handlers
         But, be careful and check type of the update inside the handler if more than one update_type is given
 
@@ -6596,48 +6546,49 @@
                 print(update.update_id)
 
         :param update_types: Optional list of update types that can be passed into the middleware handler.
         :type update_types: :obj:`list` of :obj:`str`
 
         :return: function
         """
+
         def decorator(handler):
             self.add_middleware_handler(handler, update_types)
             return handler
 
         return decorator
 
-
     def add_middleware_handler(self, handler, update_types=None):
         """
         Add middleware handler.
 
         :meta private:
 
         :param handler:
         :param update_types:
         :return:
         """
         if not apihelper.ENABLE_MIDDLEWARE:
-            raise RuntimeError("Middleware is not enabled. Use apihelper.ENABLE_MIDDLEWARE before initialising TeleBot.")
+            raise RuntimeError(
+                "Middleware is not enabled. Use apihelper.ENABLE_MIDDLEWARE before initialising TeleBot.")
 
         if self.use_class_middlewares:
-            logger.error("middleware_handler/register_middleware_handler/add_middleware_handler cannot be used with use_class_middlewares=True. Skipped.")
+            logger.error(
+                "middleware_handler/register_middleware_handler/add_middleware_handler cannot be used with use_class_middlewares=True. Skipped.")
             return
 
         added = False
         if update_types and self.typed_middleware_handlers:
             for update_type in update_types:
                 if update_type in self.typed_middleware_handlers:
                     added = True
                     self.typed_middleware_handlers[update_type].append(handler)
         if not added:
             self.default_middleware_handlers.append(handler)
 
-
     # function register_middleware_handler
     def register_middleware_handler(self, callback, update_types=None):
         """
         Adds function-based middleware handler.
 
         This function will register your decorator function. Function-based middlewares are executed before handlers.
         But, be careful and check type of the update inside the handler if more than one update_type is given
@@ -6654,40 +6605,38 @@
         :param update_types: Optional list of update types that can be passed into the middleware handler.
         :type update_types: :obj:`list` of :obj:`str`
 
         :return: None
         """
         self.add_middleware_handler(callback, update_types)
 
-
     @staticmethod
     def check_commands_input(commands, method_name):
         """
         :meta private:
         """
         if not isinstance(commands, list) or not all(isinstance(item, str) for item in commands):
-            logger.error(f"{method_name}: Commands filter should be list of strings (commands), unknown type supplied to the 'commands' filter list. Not able to use the supplied type.")
-
+            logger.error(
+                f"{method_name}: Commands filter should be list of strings (commands), unknown type supplied to the 'commands' filter list. Not able to use the supplied type.")
 
     @staticmethod
     def check_regexp_input(regexp, method_name):
         """
         :meta private:
         """
         if not isinstance(regexp, str):
             logger.error(f"{method_name}: Regexp filter should be string. Not able to use the supplied type.")
 
-
     def message_handler(
             self,
-            commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None,
-            func: Optional[Callable]=None,
-            content_types: Optional[List[str]]=None,
-            chat_types: Optional[List[str]]=None,
+            commands: Optional[List[str]] = None,
+            regexp: Optional[str] = None,
+            func: Optional[Callable] = None,
+            content_types: Optional[List[str]] = None,
+            chat_types: Optional[List[str]] = None,
             **kwargs):
         """
         Handles New incoming message of any kind - text, photo, sticker, etc.
         As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
         All message handlers are tested in the order they were added.
 
         Example:
@@ -6749,15 +6698,16 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler,
                                                     chat_types=chat_types,
                                                     content_types=content_types,
                                                     commands=commands,
@@ -6765,30 +6715,30 @@
                                                     func=func,
                                                     **kwargs)
             self.add_message_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_message_handler(self, handler_dict):
         """
         Adds a message handler
         Note that you should use register_message_handler to add message_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.message_handlers.append(handler_dict)
 
-
-    def register_message_handler(self, callback: Callable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
+    def register_message_handler(self, callback: Callable, content_types: Optional[List[str]] = None,
+                                 commands: Optional[List[str]] = None,
+                                 regexp: Optional[str] = None, func: Optional[Callable] = None,
+                                 chat_types: Optional[List[str]] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers message handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
@@ -6820,31 +6770,30 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("register_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "register_message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
-        
-
         handler_dict = self._build_handler_dict(callback,
                                                 chat_types=chat_types,
                                                 content_types=content_types,
                                                 commands=commands,
                                                 regexp=regexp,
                                                 func=func,
                                                 pass_bot=pass_bot,
                                                 **kwargs)
         self.add_message_handler(handler_dict)
 
-
-    def edited_message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None, **kwargs):
+    def edited_message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None,
+                               **kwargs):
         """
         Handles new version of a message that is known to the bot and was edited.
         As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
 
         :param commands: Optional list of strings (commands to handle).
         :type commands: :obj:`list` of :obj:`str`
 
@@ -6874,15 +6823,16 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler,
                                                     chat_types=chat_types,
                                                     content_types=content_types,
                                                     commands=commands,
@@ -6890,31 +6840,31 @@
                                                     func=func,
                                                     **kwargs)
             self.add_edited_message_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_edited_message_handler(self, handler_dict):
         """
         Adds the edit message handler
         Note that you should use register_edited_message_handler to add edited_message_handler to the bot.
         
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.edited_message_handlers.append(handler_dict)
 
-
-    def register_edited_message_handler(self, callback: Callable, content_types: Optional[List[str]]=None,
-        commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None,
-        chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
+    def register_edited_message_handler(self, callback: Callable, content_types: Optional[List[str]] = None,
+                                        commands: Optional[List[str]] = None, regexp: Optional[str] = None,
+                                        func: Optional[Callable] = None,
+                                        chat_types: Optional[List[str]] = None, pass_bot: Optional[bool] = False,
+                                        **kwargs):
         """
         Registers edited message handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
@@ -6946,28 +6896,28 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("register_edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "register_edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         handler_dict = self._build_handler_dict(callback,
                                                 chat_types=chat_types,
                                                 content_types=content_types,
                                                 commands=commands,
                                                 regexp=regexp,
                                                 func=func,
                                                 pass_bot=pass_bot,
                                                 **kwargs)
         self.add_edited_message_handler(handler_dict)
 
-
     def channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
         """
         Handles new incoming channel post of any kind - text, photo, sticker, etc.
         As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
 
         :param commands: Optional list of strings (commands to handle).
         :type commands: :obj:`list` of :obj:`str`
@@ -6995,46 +6945,45 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler,
                                                     content_types=content_types,
                                                     commands=commands,
                                                     regexp=regexp,
                                                     func=func,
                                                     **kwargs)
             self.add_channel_post_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_channel_post_handler(self, handler_dict):
         """
         Adds channel post handler
         Note that you should use register_channel_post_handler to add channel_post_handler to the bot.
 
         :meta private:
         
         :param handler_dict:
         :return:
         """
         self.channel_post_handlers.append(handler_dict)
 
-
     def register_channel_post_handler(
-            self, callback: Callable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+            self, callback: Callable, content_types: Optional[List[str]] = None, commands: Optional[List[str]] = None,
+            regexp: Optional[str] = None, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers channel post message handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
@@ -7063,27 +7012,27 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("register_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "register_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         handler_dict = self._build_handler_dict(callback,
                                                 content_types=content_types,
                                                 commands=commands,
                                                 regexp=regexp,
                                                 func=func,
                                                 pass_bot=pass_bot,
                                                 **kwargs)
         self.add_channel_post_handler(handler_dict)
 
-
     def edited_channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
         """
         Handles new version of a channel post that is known to the bot and was edited.
         As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
 
         :param commands: Optional list of strings (commands to handle).
         :type commands: :obj:`list` of :obj:`str`
@@ -7111,46 +7060,45 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler,
                                                     content_types=content_types,
                                                     commands=commands,
                                                     regexp=regexp,
                                                     func=func,
                                                     **kwargs)
             self.add_edited_channel_post_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_edited_channel_post_handler(self, handler_dict):
         """
         Adds the edit channel post handler
         Note that you should use register_edited_channel_post_handler to add edited_channel_post_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.edited_channel_post_handlers.append(handler_dict)
 
-
     def register_edited_channel_post_handler(
-            self, callback: Callable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+            self, callback: Callable, content_types: Optional[List[str]] = None, commands: Optional[List[str]] = None,
+            regexp: Optional[str] = None, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers edited channel post message handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
@@ -7179,61 +7127,61 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("register_edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "register_edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         handler_dict = self._build_handler_dict(callback,
                                                 content_types=content_types,
                                                 commands=commands,
                                                 regexp=regexp,
                                                 func=func,
                                                 pass_bot=pass_bot,
                                                 **kwargs)
         self.add_edited_channel_post_handler(handler_dict)
 
-
     def message_reaction_handler(self, func=None, **kwargs):
         """
         Handles new incoming message reaction.
         As a parameter to the decorator function, it passes :class:`telebot.types.MessageReactionUpdated` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return:
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_message_reaction_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_message_reaction_handler(self, handler_dict):
         """
         Adds message reaction handler
         Note that you should use register_message_reaction_handler to add message_reaction_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.message_reaction_handlers.append(handler_dict)
 
-
-    def register_message_reaction_handler(self, callback: Callable, func: Callable=None, pass_bot: Optional[bool]=False, **kwargs):
+    def register_message_reaction_handler(self, callback: Callable, func: Callable = None,
+                                          pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers message reaction handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7245,49 +7193,48 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_message_reaction_handler(handler_dict)
 
-
     def message_reaction_count_handler(self, func=None, **kwargs):
         """
         Handles new incoming message reaction count.
         As a parameter to the decorator function, it passes :class:`telebot.types.MessageReactionCountUpdated` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return:
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_message_reaction_count_handler(handler_dict)
             return handler
 
         return decorator
 
-    
     def add_message_reaction_count_handler(self, handler_dict):
         """
         Adds message reaction count handler
         Note that you should use register_message_reaction_count_handler to add message_reaction_count_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.message_reaction_count_handlers.append(handler_dict)
 
-
-    def register_message_reaction_count_handler(self, callback: Callable, func: Callable=None, pass_bot: Optional[bool]=False, **kwargs):
+    def register_message_reaction_count_handler(self, callback: Callable, func: Callable = None,
+                                                pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers message reaction count handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7299,49 +7246,47 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_message_reaction_count_handler(handler_dict)
 
-
     def inline_handler(self, func, **kwargs):
         """
         Handles new incoming inline query.
         As a parameter to the decorator function, it passes :class:`telebot.types.InlineQuery` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_inline_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_inline_handler(self, handler_dict):
         """
         Adds inline call handler
         Note that you should use register_inline_handler to add inline_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.inline_handlers.append(handler_dict)
 
-
-    def register_inline_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_inline_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers inline handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7353,50 +7298,49 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: decorated function
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_inline_handler(handler_dict)
 
-
     def chosen_inline_handler(self, func, **kwargs):
         """
         Handles the result of an inline query that was chosen by a user and sent to their chat partner.
         Please see our documentation on the feedback collecting for details on how to enable these updates for your bot.
         As a parameter to the decorator function, it passes :class:`telebot.types.ChosenInlineResult` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
         
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_chosen_inline_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_chosen_inline_handler(self, handler_dict):
         """
         Description: TBD
         Note that you should use register_chosen_inline_handler to add chosen_inline_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.chosen_inline_handlers.append(handler_dict)
 
-
-    def register_chosen_inline_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_chosen_inline_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False,
+                                       **kwargs):
         """
         Registers chosen inline handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7408,49 +7352,48 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_chosen_inline_handler(handler_dict)
 
-
     def callback_query_handler(self, func, **kwargs):
         """
         Handles new incoming callback query.
         As a parameter to the decorator function, it passes :class:`telebot.types.CallbackQuery` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_callback_query_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_callback_query_handler(self, handler_dict):
         """
         Adds a callback request handler
         Note that you should use register_callback_query_handler to add callback_query_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.callback_query_handlers.append(handler_dict)
 
-
-    def register_callback_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_callback_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False,
+                                        **kwargs):
         """
         Registers callback query handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7462,49 +7405,48 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_callback_query_handler(handler_dict)
 
-
     def shipping_query_handler(self, func, **kwargs):
         """
         Handles new incoming shipping query. Only for invoices with flexible price.
         As a parameter to the decorator function, it passes :class:`telebot.types.ShippingQuery` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_shipping_query_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_shipping_query_handler(self, handler_dict):
         """
         Adds a shipping request handler.
         Note that you should use register_shipping_query_handler to add shipping_query_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.shipping_query_handlers.append(handler_dict)
 
-
-    def register_shipping_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_shipping_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False,
+                                        **kwargs):
         """
         Registers shipping query handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7516,49 +7458,48 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_shipping_query_handler(handler_dict)
 
-
     def pre_checkout_query_handler(self, func, **kwargs):
         """
         New incoming pre-checkout query. Contains full information about checkout.
         As a parameter to the decorator function, it passes :class:`telebot.types.PreCheckoutQuery` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_pre_checkout_query_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_pre_checkout_query_handler(self, handler_dict):
         """
         Adds a pre-checkout request handler
         Note that you should use register_pre_checkout_query_handler to add pre_checkout_query_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.pre_checkout_query_handlers.append(handler_dict)
 
-    
-    def register_pre_checkout_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_pre_checkout_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False,
+                                            **kwargs):
         """
         Registers pre-checkout request handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7569,48 +7510,46 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: decorated function
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_pre_checkout_query_handler(handler_dict)
 
-
     def poll_handler(self, func, **kwargs):
         """
         Handles new state of a poll. Bots receive only updates about stopped polls and polls, which are sent by the bot
         As a parameter to the decorator function, it passes :class:`telebot.types.Poll` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_poll_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_poll_handler(self, handler_dict):
         """
         Adds a poll request handler
         Note that you should use register_poll_handler to add poll_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.poll_handlers.append(handler_dict)
 
-
-    def register_poll_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_poll_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers poll handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7622,50 +7561,49 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_poll_handler(handler_dict)
 
-
     def poll_answer_handler(self, func=None, **kwargs):
         """
         Handles change of user's answer in a non-anonymous poll(when user changes the vote).
         Bots receive new votes only in polls that were sent by the bot itself.
         As a parameter to the decorator function, it passes :class:`telebot.types.PollAnswer` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_poll_answer_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_poll_answer_handler(self, handler_dict):
         """
         Adds a poll_answer request handler.
         Note that you should use register_poll_answer_handler to add poll_answer_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.poll_answer_handlers.append(handler_dict)
 
-
-    def register_poll_answer_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+    def register_poll_answer_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool] = False,
+                                     **kwargs):
         """
         Registers poll answer handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7677,50 +7615,49 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_poll_answer_handler(handler_dict)
 
-
     def my_chat_member_handler(self, func=None, **kwargs):
         """
         Handles update in a status of a bot. For private chats,
         this update is received only when the bot is blocked or unblocked by the user.
         As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_my_chat_member_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_my_chat_member_handler(self, handler_dict):
         """
         Adds a my_chat_member handler.
         Note that you should use register_my_chat_member_handler to add my_chat_member_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.my_chat_member_handlers.append(handler_dict)
 
-
-    def register_my_chat_member_handler(self, callback: Callable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+    def register_my_chat_member_handler(self, callback: Callable, func: Optional[Callable] = None,
+                                        pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers my chat member handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7732,52 +7669,50 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_my_chat_member_handler(handler_dict)
 
-
     def chat_member_handler(self, func=None, **kwargs):
         """
         Handles update in a status of a user in a chat.
         The bot must be an administrator in the chat and must explicitly specify “chat_member”
         in the list of allowed_updates to receive these updates.
         As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_chat_member_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_chat_member_handler(self, handler_dict):
         """
         Adds a chat_member handler.
         Note that you should use register_chat_member_handler to add chat_member_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.chat_member_handlers.append(handler_dict)
 
-
     def register_chat_member_handler(
-            self, callback: Callable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+            self, callback: Callable, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers chat member handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7789,51 +7724,49 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return:None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_chat_member_handler(handler_dict)
 
-
     def chat_join_request_handler(self, func=None, **kwargs):
         """
         Handles a request to join the chat has been sent. The bot must have the can_invite_users
         administrator right in the chat to receive these updates.
         As a parameter to the decorator function, it passes :class:`telebot.types.ChatJoinRequest` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_chat_join_request_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_chat_join_request_handler(self, handler_dict):
         """
         Adds a chat_join_request handler.
         Note that you should use register_chat_join_request_handler to add chat_join_request_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.chat_join_request_handlers.append(handler_dict)
 
-
     def register_chat_join_request_handler(
-            self, callback: Callable, func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
+            self, callback: Callable, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers chat join request handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -7845,49 +7778,47 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_chat_join_request_handler(handler_dict)
 
-
     def chat_boost_handler(self, func=None, **kwargs):
         """
         Handles new incoming chat boost state. 
         it passes :class:`telebot.types.ChatBoostUpdated` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_chat_boost_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_chat_boost_handler(self, handler_dict):
         """
         Adds a chat_boost handler.
         Note that you should use register_chat_boost_handler to add chat_boost_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.chat_boost_handlers.append(handler_dict)
 
-
     def register_chat_boost_handler(
-            self, callback: Callable, func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
+            self, callback: Callable, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers chat boost handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
         
         :param func: Function executed as a filter
@@ -7898,49 +7829,47 @@
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_chat_boost_handler(handler_dict)
 
-
     def removed_chat_boost_handler(self, func=None, **kwargs):
         """
         Handles new incoming chat boost state. 
         it passes :class:`telebot.types.ChatBoostRemoved` object.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_removed_chat_boost_handler(handler_dict)
             return handler
 
         return decorator
 
-    
     def add_removed_chat_boost_handler(self, handler_dict):
         """
         Adds a removed_chat_boost handler.
         Note that you should use register_removed_chat_boost_handler to add removed_chat_boost_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.removed_chat_boost_handlers.append(handler_dict)
 
-
     def register_removed_chat_boost_handler(
-            self, callback: Callable, func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
+            self, callback: Callable, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers removed chat boost handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
         
         :param func: Function executed as a filter
@@ -7961,35 +7890,36 @@
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         :return: None
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
             self.add_business_connection_handler(handler_dict)
             return handler
-        
+
         return decorator
-    
+
     def add_business_connection_handler(self, handler_dict):
         """
         Adds a business_connection handler.
         Note that you should use register_business_connection_handler to add business_connection_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.business_connection_handlers.append(handler_dict)
 
     def register_business_connection_handler(
-            self, callback: Callable, func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
+            self, callback: Callable, func: Optional[Callable] = None, pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers business connection handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -8003,18 +7933,18 @@
         :return: None
         """
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_business_connection_handler(handler_dict)
 
     def business_message_handler(
             self,
-            commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None,
-            func: Optional[Callable]=None,
-            content_types: Optional[List[str]]=None,
+            commands: Optional[List[str]] = None,
+            regexp: Optional[str] = None,
+            func: Optional[Callable] = None,
+            content_types: Optional[List[str]] = None,
             **kwargs):
         """
         Handles New incoming message of any kind(for business accounts, see bot api 7.2 for more) - text, photo, sticker, etc.
         As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
         All message handlers are tested in the order they were added.
 
         Example:
@@ -8068,48 +7998,49 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("business_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "business_message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler,
                                                     content_types=content_types,
                                                     commands=commands,
                                                     regexp=regexp,
                                                     func=func,
                                                     **kwargs)
             self.add_business_message_handler(handler_dict)
             return handler
 
         return decorator
-    
+
     def add_business_message_handler(self, handler_dict):
         """
         Adds a business_message handler.
         Note that you should use register_business_message_handler to add business_message_handler to the bot.
 
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.business_message_handlers.append(handler_dict)
 
     def register_business_message_handler(self,
-            callback: Callable,
-            commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None,
-            func: Optional[Callable]=None,
-            content_types: Optional[List[str]]=None,
-            **kwargs):
+                                          callback: Callable,
+                                          commands: Optional[List[str]] = None,
+                                          regexp: Optional[str] = None,
+                                          func: Optional[Callable] = None,
+                                          content_types: Optional[List[str]] = None,
+                                          **kwargs):
         """
         Registers business connection handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -8118,20 +8049,18 @@
         :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
         :type pass_bot: :obj:`bool`
 
         :param kwargs: Optional keyword arguments(custom filters)
 
         :return: None
         """
-        handler_dict = self._build_handler_dict(callback, content_types=content_types, commands=commands, regexp=regexp, func=func, **kwargs)
+        handler_dict = self._build_handler_dict(callback, content_types=content_types, commands=commands, regexp=regexp,
+                                                func=func, **kwargs)
         self.add_business_message_handler(handler_dict)
 
-    
-    
-
     def edited_business_message_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
         """
         Handles new version of a message(business accounts) that is known to the bot and was edited.
         As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
 
         :param commands: Optional list of strings (commands to handle).
         :type commands: :obj:`list` of :obj:`str`
@@ -8159,46 +8088,46 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("edited_business_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "edited_business_message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler,
                                                     content_types=content_types,
                                                     commands=commands,
                                                     regexp=regexp,
                                                     func=func,
                                                     **kwargs)
             self.add_edited_business_message_handler(handler_dict)
             return handler
 
         return decorator
 
-
     def add_edited_business_message_handler(self, handler_dict):
         """
         Adds the edit message handler
         Note that you should use register_edited_business_message_handler to add edited_business_message_handler to the bot.
         
         :meta private:
 
         :param handler_dict:
         :return:
         """
         self.edited_business_message_handlers.append(handler_dict)
 
-
-    def register_edited_business_message_handler(self, callback: Callable, content_types: Optional[List[str]]=None,
-        commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None,
-        pass_bot: Optional[bool]=False, **kwargs):
+    def register_edited_business_message_handler(self, callback: Callable, content_types: Optional[List[str]] = None,
+                                                 commands: Optional[List[str]] = None, regexp: Optional[str] = None,
+                                                 func: Optional[Callable] = None,
+                                                 pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers edited message handler for business accounts.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
@@ -8227,56 +8156,58 @@
             if isinstance(commands, str):
                 commands = [commands]
 
         if regexp is not None:
             self.check_regexp_input(regexp, method_name)
 
         if isinstance(content_types, str):
-            logger.warning("edited_business_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            logger.warning(
+                "edited_business_message_handler: 'content_types' filter should be List of strings (content types), not string.")
             content_types = [content_types]
 
         handler_dict = self._build_handler_dict(callback,
                                                 content_types=content_types,
                                                 commands=commands,
                                                 regexp=regexp,
                                                 func=func,
                                                 pass_bot=pass_bot,
                                                 **kwargs)
         self.add_edited_business_message_handler(handler_dict)
 
-    
     def deleted_business_messages_handler(self, func=None, **kwargs):
         """
         Handles new incoming deleted messages state.
 
         :param func: Function executed as a filter
         :type func: :obj:`function`
 
         :param kwargs: Optional keyword arguments(custom filters)
         :return: None
 
         """
+
         def decorator(handler):
             handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
 
             self.add_deleted_business_messages_handler(handler_dict)
             return handler
-        
+
         return decorator
-    
+
     def add_deleted_business_messages_handler(self, handler_dict):
         """
         Adds a deleted_business_messages handler.
         Note that you should use register_deleted_business_messages_handler to add deleted_business_messages_handler to the bot.
 
         :meta private:
         """
         self.deleted_business_messages_handlers.append(handler_dict)
 
-    def register_deleted_business_messages_handler(self, callback: Callable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+    def register_deleted_business_messages_handler(self, callback: Callable, func: Optional[Callable] = None,
+                                                   pass_bot: Optional[bool] = False, **kwargs):
         """
         Registers deleted business messages handler.
 
         :param callback: function to be called
         :type callback: :obj:`function`
 
         :param func: Function executed as a filter
@@ -8289,18 +8220,14 @@
 
         :return: None
         """
 
         handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
         self.add_deleted_business_messages_handler(handler_dict)
 
-
-
-
-
     def add_custom_filter(self, custom_filter: Union[SimpleCustomFilter, AdvancedCustomFilter]):
         """
         Create custom filter.
 
         .. code-block:: python3
             :caption: Example on checking the text of a message
 
@@ -8311,15 +8238,14 @@
                     return text == message.text
 
         :param custom_filter: Class with check(message) method.
         :param custom_filter: Custom filter class with key.
         """
         self.custom_filters[custom_filter.key] = custom_filter
 
-
     def _test_message_handler(self, message_handler, message):
         """
         Test message handler
 
         :param message_handler:
         :param message:
         :return:
@@ -8329,15 +8255,14 @@
                 continue
 
             if not self._test_filter(message_filter, filter_value, message):
                 return False
 
         return True
 
-
     def _test_filter(self, message_filter, filter_value, message):
         """
         Test filters
 
         :param message_filter: Filter type passed in handler
         :param filter_value: Filter value passed in handler
         :param message: Message to test
@@ -8350,46 +8275,43 @@
         elif message_filter == 'commands':
             return message.content_type == 'text' and util.extract_command(message.text) in filter_value
         elif message_filter == 'chat_types':
             return message.chat.type in filter_value
         elif message_filter == 'func':
             return filter_value(message)
         elif self.custom_filters and message_filter in self.custom_filters:
-            return self._check_filter(message_filter,filter_value,message)
+            return self._check_filter(message_filter, filter_value, message)
         else:
             return False
 
-
     def _check_filter(self, message_filter, filter_value, message):
         filter_check = self.custom_filters.get(message_filter)
         if not filter_check:
             return False
         elif isinstance(filter_check, SimpleCustomFilter):
             return filter_value == filter_check.check(message)
         elif isinstance(filter_check, AdvancedCustomFilter):
             return filter_check.check(message, filter_value)
         else:
             logger.error("Custom filter: wrong type. Should be SimpleCustomFilter or AdvancedCustomFilter.")
             return False
 
-
     # middleware check-up method
     def _get_middlewares(self, update_type):
         """
         Check middleware
 
         :param update_type:
         :return:
         """
         middlewares = None
-        if self.middlewares: 
+        if self.middlewares:
             middlewares = [i for i in self.middlewares if update_type in i.update_types]
         return middlewares
 
-
     def _run_middlewares_and_handler(self, message, handlers, middlewares, update_type):
         """
         This method is made to run handlers and middlewares in queue.
 
         :param message: received message (update part) to process with handlers and/or middlewares
         :param handlers: all created handlers (not filtered)
         :param middlewares: middlewares that should be executed (already filtered)
@@ -8414,15 +8336,17 @@
 
         if middlewares:
             for middleware in middlewares:
                 if middleware.update_sensitive:
                     if hasattr(middleware, f'pre_process_{update_type}'):
                         result = getattr(middleware, f'pre_process_{update_type}')(message, data)
                     else:
-                        logger.error('Middleware {} does not have pre_process_{} method. pre_process function execution was skipped.'.format(middleware.__class__.__name__, update_type))
+                        logger.error(
+                            'Middleware {} does not have pre_process_{} method. pre_process function execution was skipped.'.format(
+                                middleware.__class__.__name__, update_type))
                         result = None
                 else:
                     result = middleware.pre_process(message, data)
                 # We will break this loop if CancelUpdate is returned
                 # Also, we will not run other middlewares
                 if isinstance(result, CancelUpdate):
                     return
@@ -8441,26 +8365,30 @@
                         result = handler['function'](message)
                     elif "data" in params:
                         if len(params) == 2:
                             result = handler['function'](message, data)
                         elif len(params) == 3:
                             result = handler['function'](message, data=data, bot=self)
                         else:
-                            logger.error("It is not allowed to pass data and values inside data to the handler. Check your handler: {}".format(handler['function']))
+                            logger.error(
+                                "It is not allowed to pass data and values inside data to the handler. Check your handler: {}".format(
+                                    handler['function']))
                             return
                     else:
                         data_copy = data.copy()
                         for key in list(data_copy):
                             # remove data from data_copy if handler does not accept it
                             if key not in params:
                                 del data_copy[key]
                         if handler.get('pass_bot'):
                             data_copy["bot"] = self
-                        if len(data_copy) > len(params) - 1: # remove the message parameter
-                            logger.error("You are passing more parameters than the handler needs. Check your handler: {}".format(handler['function']))
+                        if len(data_copy) > len(params) - 1:  # remove the message parameter
+                            logger.error(
+                                "You are passing more parameters than the handler needs. Check your handler: {}".format(
+                                    handler['function']))
                             return
                         result = handler["function"](message, **data_copy)
                     if not isinstance(result, ContinueHandling):
                         break
             except Exception as e:
                 handler_error = e
                 handled = self._handle_exception(e)
@@ -8470,19 +8398,20 @@
 
         if middlewares:
             for middleware in middlewares:
                 if middleware.update_sensitive:
                     if hasattr(middleware, f'post_process_{update_type}'):
                         getattr(middleware, f'post_process_{update_type}')(message, data, handler_error)
                     else:
-                        logger.error("Middleware: {} does not have post_process_{} method. Post process function was not executed.".format(middleware.__class__.__name__, update_type))
+                        logger.error(
+                            "Middleware: {} does not have post_process_{} method. Post process function was not executed.".format(
+                                middleware.__class__.__name__, update_type))
                 else:
                     middleware.post_process(message, data, handler_error)
 
-
     def _notify_command_handlers(self, handlers, new_messages, update_type):
         """
         Notifies command handlers.
 
         :param handlers: all created handlers
         :param new_messages: received messages to proceed
         :param update_type: handler/update type (Update fields)
```

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/apihelper.py` & `pytelegrambotapi_fixed-4.12.7/telebot/apihelper.py`

 * *Files 7% similar despite different names*

```diff
@@ -61,5481 +61,5712 @@
 000003c0: 0a43 5553 544f 4d5f 5345 5249 414c 495a  .CUSTOM_SERIALIZ
 000003d0: 4552 203d 204e 6f6e 650a 4355 5354 4f4d  ER = None.CUSTOM
 000003e0: 5f52 4551 5545 5354 5f53 454e 4445 5220  _REQUEST_SENDER 
 000003f0: 3d20 4e6f 6e65 0a0a 454e 4142 4c45 5f4d  = None..ENABLE_M
 00000400: 4944 444c 4557 4152 4520 3d20 4661 6c73  IDDLEWARE = Fals
 00000410: 650a 0a0a 6465 6620 5f67 6574 5f72 6571  e...def _get_req
 00000420: 5f73 6573 7369 6f6e 2872 6573 6574 3d46  _session(reset=F
-00000430: 616c 7365 293a 0a20 2020 2069 6620 5345  alse):.    if SE
-00000440: 5353 494f 4e5f 5449 4d45 5f54 4f5f 4c49  SSION_TIME_TO_LI
-00000450: 5645 3a0a 2020 2020 2020 2020 2320 4966  VE:.        # If
-00000460: 2073 6573 7369 6f6e 2054 544c 2069 7320   session TTL is 
-00000470: 7365 7420 2d20 6368 6563 6b20 7469 6d65  set - check time
-00000480: 2070 6173 7365 640a 2020 2020 2020 2020   passed.        
-00000490: 6372 6561 7469 6f6e 5f64 6174 6520 3d20  creation_date = 
-000004a0: 7574 696c 2e70 6572 5f74 6872 6561 6428  util.per_thread(
-000004b0: 2772 6571 5f73 6573 7369 6f6e 5f74 696d  'req_session_tim
-000004c0: 6527 2c20 6c61 6d62 6461 3a20 6461 7465  e', lambda: date
-000004d0: 7469 6d65 2e6e 6f77 2829 2c20 7265 7365  time.now(), rese
-000004e0: 7429 0a20 2020 2020 2020 2023 206e 6f69  t).        # noi
-000004f0: 6e73 7065 6374 696f 6e20 5079 5479 7065  nspection PyType
-00000500: 4368 6563 6b65 720a 2020 2020 2020 2020  Checker.        
-00000510: 6966 2028 6461 7465 7469 6d65 2e6e 6f77  if (datetime.now
-00000520: 2829 202d 2063 7265 6174 696f 6e5f 6461  () - creation_da
-00000530: 7465 292e 746f 7461 6c5f 7365 636f 6e64  te).total_second
-00000540: 7328 2920 3e20 5345 5353 494f 4e5f 5449  s() > SESSION_TI
-00000550: 4d45 5f54 4f5f 4c49 5645 3a0a 2020 2020  ME_TO_LIVE:.    
-00000560: 2020 2020 2020 2020 2320 466f 7263 6520          # Force 
-00000570: 7365 7373 696f 6e20 7265 7365 740a 2020  session reset.  
-00000580: 2020 2020 2020 2020 2020 7265 7365 7420            reset 
-00000590: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-000005a0: 2020 2023 2053 6176 6520 7265 7365 7420     # Save reset 
-000005b0: 7469 6d65 0a20 2020 2020 2020 2020 2020  time.           
-000005c0: 2075 7469 6c2e 7065 725f 7468 7265 6164   util.per_thread
-000005d0: 2827 7265 715f 7365 7373 696f 6e5f 7469  ('req_session_ti
-000005e0: 6d65 272c 206c 616d 6264 613a 2064 6174  me', lambda: dat
-000005f0: 6574 696d 652e 6e6f 7728 292c 2054 7275  etime.now(), Tru
-00000600: 6529 0a0a 2020 2020 6966 2053 4553 5349  e)..    if SESSI
-00000610: 4f4e 5f54 494d 455f 544f 5f4c 4956 4520  ON_TIME_TO_LIVE 
-00000620: 3d3d 2030 3a0a 2020 2020 2020 2020 2320  == 0:.        # 
-00000630: 5365 7373 696f 6e20 6973 206f 6e65 2d74  Session is one-t
-00000640: 696d 6520 7573 650a 2020 2020 2020 2020  ime use.        
-00000650: 7265 7475 726e 2072 6571 7565 7374 732e  return requests.
-00000660: 7365 7373 696f 6e73 2e53 6573 7369 6f6e  sessions.Session
-00000670: 2829 0a20 2020 2065 6c73 653a 0a20 2020  ().    else:.   
-00000680: 2020 2020 2023 2053 6573 7369 6f6e 206c       # Session l
-00000690: 6976 6573 2073 6f6d 6520 7469 6d65 206f  ives some time o
-000006a0: 7220 666f 7265 7665 7220 6f6e 6365 2063  r forever once c
-000006b0: 7265 6174 6564 2e20 4465 6661 756c 740a  reated. Default.
-000006c0: 2020 2020 2020 2020 7265 7475 726e 2075          return u
-000006d0: 7469 6c2e 7065 725f 7468 7265 6164 2827  til.per_thread('
-000006e0: 7265 715f 7365 7373 696f 6e27 2c20 6c61  req_session', la
-000006f0: 6d62 6461 3a20 7365 7373 696f 6e20 6966  mbda: session if
-00000700: 2073 6573 7369 6f6e 2065 6c73 6520 7265   session else re
-00000710: 7175 6573 7473 2e73 6573 7369 6f6e 732e  quests.sessions.
-00000720: 5365 7373 696f 6e28 292c 2072 6573 6574  Session(), reset
-00000730: 290a 0a0a 6465 6620 5f6d 616b 655f 7265  )...def _make_re
-00000740: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00000750: 686f 645f 6e61 6d65 2c20 6d65 7468 6f64  hod_name, method
-00000760: 3d27 6765 7427 2c20 7061 7261 6d73 3d4e  ='get', params=N
-00000770: 6f6e 652c 2066 696c 6573 3d4e 6f6e 652c  one, files=None,
-00000780: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
-00000790: 2020 2022 2222 0a20 2020 204d 616b 6573     """.    Makes
-000007a0: 2061 2072 6571 7565 7374 2074 6f20 7468   a request to th
-000007b0: 6520 5465 6c65 6772 616d 2041 5049 2e0a  e Telegram API..
-000007c0: 2020 2020 3a70 6172 616d 2074 6f6b 656e      :param token
-000007d0: 3a20 5468 6520 626f 7427 7320 4150 4920  : The bot's API 
-000007e0: 746f 6b65 6e2e 2028 4372 6561 7465 6420  token. (Created 
-000007f0: 7769 7468 2040 426f 7446 6174 6865 7229  with @BotFather)
-00000800: 0a20 2020 203a 7061 7261 6d20 6d65 7468  .    :param meth
-00000810: 6f64 5f6e 616d 653a 204e 616d 6520 6f66  od_name: Name of
-00000820: 2074 6865 2041 5049 206d 6574 686f 6420   the API method 
-00000830: 746f 2062 6520 6361 6c6c 6564 2e20 2845  to be called. (E
-00000840: 2e67 2e20 2767 6574 5570 6461 7465 7327  .g. 'getUpdates'
-00000850: 290a 2020 2020 3a70 6172 616d 206d 6574  ).    :param met
-00000860: 686f 643a 2048 5454 5020 6d65 7468 6f64  hod: HTTP method
-00000870: 2074 6f20 6265 2075 7365 642e 2044 6566   to be used. Def
-00000880: 6175 6c74 7320 746f 2027 6765 7427 2e0a  aults to 'get'..
-00000890: 2020 2020 3a70 6172 616d 2070 6172 616d      :param param
-000008a0: 733a 204f 7074 696f 6e61 6c20 7061 7261  s: Optional para
-000008b0: 6d65 7465 7273 2e20 5368 6f75 6c64 2062  meters. Should b
-000008c0: 6520 6120 6469 6374 696f 6e61 7279 2077  e a dictionary w
-000008d0: 6974 6820 6b65 792d 7661 6c75 6520 7061  ith key-value pa
-000008e0: 6972 732e 0a20 2020 203a 7061 7261 6d20  irs..    :param 
-000008f0: 6669 6c65 733a 204f 7074 696f 6e61 6c20  files: Optional 
-00000900: 6669 6c65 732e 0a20 2020 203a 7265 7475  files..    :retu
-00000910: 726e 3a20 5468 6520 7265 7375 6c74 2070  rn: The result p
-00000920: 6172 7365 6420 746f 2061 204a 534f 4e20  arsed to a JSON 
-00000930: 6469 6374 696f 6e61 7279 2e0a 2020 2020  dictionary..    
-00000940: 2222 220a 2020 2020 6966 206e 6f74 2074  """.    if not t
-00000950: 6f6b 656e 3a0a 2020 2020 2020 2020 7261  oken:.        ra
-00000960: 6973 6520 4578 6365 7074 696f 6e28 2742  ise Exception('B
-00000970: 6f74 2074 6f6b 656e 2069 7320 6e6f 7420  ot token is not 
-00000980: 6465 6669 6e65 6427 290a 2020 2020 6966  defined').    if
-00000990: 2041 5049 5f55 524c 3a0a 2020 2020 2020   API_URL:.      
-000009a0: 2020 2320 6e6f 696e 7370 6563 7469 6f6e    # noinspection
-000009b0: 2050 7955 6e72 6573 6f6c 7665 6452 6566   PyUnresolvedRef
-000009c0: 6572 656e 6365 730a 2020 2020 2020 2020  erences.        
-000009d0: 7265 7175 6573 745f 7572 6c20 3d20 4150  request_url = AP
-000009e0: 495f 5552 4c2e 666f 726d 6174 2874 6f6b  I_URL.format(tok
-000009f0: 656e 2c20 6d65 7468 6f64 5f6e 616d 6529  en, method_name)
-00000a00: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00000a10: 2020 2072 6571 7565 7374 5f75 726c 203d     request_url =
-00000a20: 2022 6874 7470 733a 2f2f 6170 692e 7465   "https://api.te
-00000a30: 6c65 6772 616d 2e6f 7267 2f62 6f74 7b30  legram.org/bot{0
-00000a40: 7d2f 7b31 7d22 2e66 6f72 6d61 7428 746f  }/{1}".format(to
-00000a50: 6b65 6e2c 206d 6574 686f 645f 6e61 6d65  ken, method_name
-00000a60: 290a 0a20 2020 206c 6f67 6765 722e 6465  )..    logger.de
-00000a70: 6275 6728 0a20 2020 2020 2020 2022 5265  bug(.        "Re
-00000a80: 7175 6573 743a 206d 6574 686f 643d 7b30  quest: method={0
-00000a90: 7d20 7572 6c3d 7b31 7d20 7061 7261 6d73  } url={1} params
-00000aa0: 3d7b 327d 2066 696c 6573 3d7b 337d 222e  ={2} files={3}".
-00000ab0: 666f 726d 6174 286d 6574 686f 642c 2072  format(method, r
-00000ac0: 6571 7565 7374 5f75 726c 2c20 7061 7261  equest_url, para
-00000ad0: 6d73 2c20 6669 6c65 7329 2e72 6570 6c61  ms, files).repla
-00000ae0: 6365 2874 6f6b 656e 2c0a 2020 2020 2020  ce(token,.      
-00000af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b50: 2020 2020 2020 2020 746f 6b65 6e2e 7370          token.sp
-00000b60: 6c69 7428 0a20 2020 2020 2020 2020 2020  lit(.           
-00000b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000430: 616c 7365 2c20 7665 7269 6679 3d54 7275  alse, verify=Tru
+00000440: 6529 3a0a 2020 2020 6966 2053 4553 5349  e):.    if SESSI
+00000450: 4f4e 5f54 494d 455f 544f 5f4c 4956 453a  ON_TIME_TO_LIVE:
+00000460: 0a20 2020 2020 2020 2023 2049 6620 7365  .        # If se
+00000470: 7373 696f 6e20 5454 4c20 6973 2073 6574  ssion TTL is set
+00000480: 202d 2063 6865 636b 2074 696d 6520 7061   - check time pa
+00000490: 7373 6564 0a20 2020 2020 2020 2063 7265  ssed.        cre
+000004a0: 6174 696f 6e5f 6461 7465 203d 2075 7469  ation_date = uti
+000004b0: 6c2e 7065 725f 7468 7265 6164 2827 7265  l.per_thread('re
+000004c0: 715f 7365 7373 696f 6e5f 7469 6d65 272c  q_session_time',
+000004d0: 206c 616d 6264 613a 2064 6174 6574 696d   lambda: datetim
+000004e0: 652e 6e6f 7728 292c 2072 6573 6574 290a  e.now(), reset).
+000004f0: 2020 2020 2020 2020 2320 6e6f 696e 7370          # noinsp
+00000500: 6563 7469 6f6e 2050 7954 7970 6543 6865  ection PyTypeChe
+00000510: 636b 6572 0a20 2020 2020 2020 2069 6620  cker.        if 
+00000520: 2864 6174 6574 696d 652e 6e6f 7728 2920  (datetime.now() 
+00000530: 2d20 6372 6561 7469 6f6e 5f64 6174 6529  - creation_date)
+00000540: 2e74 6f74 616c 5f73 6563 6f6e 6473 2829  .total_seconds()
+00000550: 203e 2053 4553 5349 4f4e 5f54 494d 455f   > SESSION_TIME_
+00000560: 544f 5f4c 4956 453a 0a20 2020 2020 2020  TO_LIVE:.       
+00000570: 2020 2020 2023 2046 6f72 6365 2073 6573       # Force ses
+00000580: 7369 6f6e 2072 6573 6574 0a20 2020 2020  sion reset.     
+00000590: 2020 2020 2020 2072 6573 6574 203d 2054         reset = T
+000005a0: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+000005b0: 2320 5361 7665 2072 6573 6574 2074 696d  # Save reset tim
+000005c0: 650a 2020 2020 2020 2020 2020 2020 7574  e.            ut
+000005d0: 696c 2e70 6572 5f74 6872 6561 6428 2772  il.per_thread('r
+000005e0: 6571 5f73 6573 7369 6f6e 5f74 696d 6527  eq_session_time'
+000005f0: 2c20 6c61 6d62 6461 3a20 6461 7465 7469  , lambda: dateti
+00000600: 6d65 2e6e 6f77 2829 2c20 5472 7565 290a  me.now(), True).
+00000610: 0a20 2020 2069 6620 5345 5353 494f 4e5f  .    if SESSION_
+00000620: 5449 4d45 5f54 4f5f 4c49 5645 203d 3d20  TIME_TO_LIVE == 
+00000630: 303a 0a20 2020 2020 2020 2023 2053 6573  0:.        # Ses
+00000640: 7369 6f6e 2069 7320 6f6e 652d 7469 6d65  sion is one-time
+00000650: 2075 7365 0a20 2020 2020 2020 2063 7572   use.        cur
+00000660: 7265 6e74 5f73 6573 7369 6f6e 203d 2072  rent_session = r
+00000670: 6571 7565 7374 732e 7365 7373 696f 6e73  equests.sessions
+00000680: 2e53 6573 7369 6f6e 2829 0a20 2020 2020  .Session().     
+00000690: 2020 2063 7572 7265 6e74 5f73 6573 7369     current_sessi
+000006a0: 6f6e 2e76 6572 6966 7920 3d20 7665 7269  on.verify = veri
+000006b0: 6679 0a20 2020 2020 2020 2072 6574 7572  fy.        retur
+000006c0: 6e20 6375 7272 656e 745f 7365 7373 696f  n current_sessio
+000006d0: 6e0a 2020 2020 656c 7365 3a0a 2020 2020  n.    else:.    
+000006e0: 2020 2020 2320 5365 7373 696f 6e20 6c69      # Session li
+000006f0: 7665 7320 736f 6d65 2074 696d 6520 6f72  ves some time or
+00000700: 2066 6f72 6576 6572 206f 6e63 6520 6372   forever once cr
+00000710: 6561 7465 642e 2044 6566 6175 6c74 0a20  eated. Default. 
+00000720: 2020 2020 2020 2063 7572 7265 6e74 5f73         current_s
+00000730: 6573 7369 6f6e 203d 2075 7469 6c2e 7065  ession = util.pe
+00000740: 725f 7468 7265 6164 2827 7265 715f 7365  r_thread('req_se
+00000750: 7373 696f 6e27 2c20 6c61 6d62 6461 3a20  ssion', lambda: 
+00000760: 7365 7373 696f 6e20 6966 2073 6573 7369  session if sessi
+00000770: 6f6e 2065 6c73 6520 7265 7175 6573 7473  on else requests
+00000780: 2e73 6573 7369 6f6e 732e 5365 7373 696f  .sessions.Sessio
+00000790: 6e28 292c 2072 6573 6574 290a 2020 2020  n(), reset).    
+000007a0: 2020 2020 6375 7272 656e 745f 7365 7373      current_sess
+000007b0: 696f 6e2e 7665 7269 6679 203d 2076 6572  ion.verify = ver
+000007c0: 6966 790a 2020 2020 2020 2020 7265 7475  ify.        retu
+000007d0: 726e 2063 7572 7265 6e74 5f73 6573 7369  rn current_sessi
+000007e0: 6f6e 0a0a 0a64 6566 205f 6d61 6b65 5f72  on...def _make_r
+000007f0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00000800: 7468 6f64 5f6e 616d 652c 206d 6574 686f  thod_name, metho
+00000810: 643d 2767 6574 272c 2070 6172 616d 733d  d='get', params=
+00000820: 4e6f 6e65 2c20 6669 6c65 733d 4e6f 6e65  None, files=None
+00000830: 2c20 7665 7269 6679 3d54 7275 6529 3a0a  , verify=True):.
+00000840: 2020 2020 2222 220a 2020 2020 4d61 6b65      """.    Make
+00000850: 7320 6120 7265 7175 6573 7420 746f 2074  s a request to t
+00000860: 6865 2054 656c 6567 7261 6d20 4150 492e  he Telegram API.
+00000870: 0a20 2020 203a 7061 7261 6d20 746f 6b65  .    :param toke
+00000880: 6e3a 2054 6865 2062 6f74 2773 2041 5049  n: The bot's API
+00000890: 2074 6f6b 656e 2e20 2843 7265 6174 6564   token. (Created
+000008a0: 2077 6974 6820 4042 6f74 4661 7468 6572   with @BotFather
+000008b0: 290a 2020 2020 3a70 6172 616d 206d 6574  ).    :param met
+000008c0: 686f 645f 6e61 6d65 3a20 4e61 6d65 206f  hod_name: Name o
+000008d0: 6620 7468 6520 4150 4920 6d65 7468 6f64  f the API method
+000008e0: 2074 6f20 6265 2063 616c 6c65 642e 2028   to be called. (
+000008f0: 452e 672e 2027 6765 7455 7064 6174 6573  E.g. 'getUpdates
+00000900: 2729 0a20 2020 203a 7061 7261 6d20 6d65  ').    :param me
+00000910: 7468 6f64 3a20 4854 5450 206d 6574 686f  thod: HTTP metho
+00000920: 6420 746f 2062 6520 7573 6564 2e20 4465  d to be used. De
+00000930: 6661 756c 7473 2074 6f20 2767 6574 272e  faults to 'get'.
+00000940: 0a20 2020 203a 7061 7261 6d20 7061 7261  .    :param para
+00000950: 6d73 3a20 4f70 7469 6f6e 616c 2070 6172  ms: Optional par
+00000960: 616d 6574 6572 732e 2053 686f 756c 6420  ameters. Should 
+00000970: 6265 2061 2064 6963 7469 6f6e 6172 7920  be a dictionary 
+00000980: 7769 7468 206b 6579 2d76 616c 7565 2070  with key-value p
+00000990: 6169 7273 2e0a 2020 2020 3a70 6172 616d  airs..    :param
+000009a0: 2066 696c 6573 3a20 4f70 7469 6f6e 616c   files: Optional
+000009b0: 2066 696c 6573 2e0a 2020 2020 3a72 6574   files..    :ret
+000009c0: 7572 6e3a 2054 6865 2072 6573 756c 7420  urn: The result 
+000009d0: 7061 7273 6564 2074 6f20 6120 4a53 4f4e  parsed to a JSON
+000009e0: 2064 6963 7469 6f6e 6172 792e 0a20 2020   dictionary..   
+000009f0: 2022 2222 0a20 2020 2069 6620 6e6f 7420   """.    if not 
+00000a00: 746f 6b65 6e3a 0a20 2020 2020 2020 2072  token:.        r
+00000a10: 6169 7365 2045 7863 6570 7469 6f6e 2827  aise Exception('
+00000a20: 426f 7420 746f 6b65 6e20 6973 206e 6f74  Bot token is not
+00000a30: 2064 6566 696e 6564 2729 0a20 2020 2069   defined').    i
+00000a40: 6620 4150 495f 5552 4c3a 0a20 2020 2020  f API_URL:.     
+00000a50: 2020 2023 206e 6f69 6e73 7065 6374 696f     # noinspectio
+00000a60: 6e20 5079 556e 7265 736f 6c76 6564 5265  n PyUnresolvedRe
+00000a70: 6665 7265 6e63 6573 0a20 2020 2020 2020  ferences.       
+00000a80: 2072 6571 7565 7374 5f75 726c 203d 2041   request_url = A
+00000a90: 5049 5f55 524c 2e66 6f72 6d61 7428 746f  PI_URL.format(to
+00000aa0: 6b65 6e2c 206d 6574 686f 645f 6e61 6d65  ken, method_name
+00000ab0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+00000ac0: 2020 2020 7265 7175 6573 745f 7572 6c20      request_url 
+00000ad0: 3d20 2268 7474 7073 3a2f 2f61 7069 2e74  = "https://api.t
+00000ae0: 656c 6567 7261 6d2e 6f72 672f 626f 747b  elegram.org/bot{
+00000af0: 307d 2f7b 317d 222e 666f 726d 6174 2874  0}/{1}".format(t
+00000b00: 6f6b 656e 2c20 6d65 7468 6f64 5f6e 616d  oken, method_nam
+00000b10: 6529 0a0a 2020 2020 6c6f 6767 6572 2e64  e)..    logger.d
+00000b20: 6562 7567 280a 2020 2020 2020 2020 2252  ebug(.        "R
+00000b30: 6571 7565 7374 3a20 6d65 7468 6f64 3d7b  equest: method={
+00000b40: 307d 2075 726c 3d7b 317d 2070 6172 616d  0} url={1} param
+00000b50: 733d 7b32 7d20 6669 6c65 733d 7b33 7d22  s={2} files={3}"
+00000b60: 2e66 6f72 6d61 7428 6d65 7468 6f64 2c20  .format(method, 
+00000b70: 7265 7175 6573 745f 7572 6c2c 2070 6172  request_url, par
+00000b80: 616d 732c 2066 696c 6573 292e 7265 706c  ams, files).repl
+00000b90: 6163 6528 746f 6b65 6e2c 0a20 2020 2020  ace(token,.     
 00000ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000bd0: 2020 2020 2020 2027 3a27 295b 0a20 2020         ':')[.   
+00000bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c00: 2020 2020 2020 2020 2074 6f6b 656e 2e73           token.s
+00000c10: 706c 6974 280a 2020 2020 2020 2020 2020  plit(.          
 00000c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c40: 2020 2020 2020 2020 2020 2020 2020 2030                 0
-00000c50: 5d20 2b20 223a 7b54 4f4b 454e 7d22 2929  ] + ":{TOKEN}"))
-00000c60: 0a20 2020 2072 6561 645f 7469 6d65 6f75  .    read_timeou
-00000c70: 7420 3d20 5245 4144 5f54 494d 454f 5554  t = READ_TIMEOUT
-00000c80: 0a20 2020 2063 6f6e 6e65 6374 5f74 696d  .    connect_tim
-00000c90: 656f 7574 203d 2043 4f4e 4e45 4354 5f54  eout = CONNECT_T
-00000ca0: 494d 454f 5554 0a0a 2020 2020 6966 2066  IMEOUT..    if f
-00000cb0: 696c 6573 3a0a 2020 2020 2020 2020 6669  iles:.        fi
-00000cc0: 6c65 735f 636f 7079 203d 2064 6963 7428  les_copy = dict(
-00000cd0: 6669 6c65 7329 0a20 2020 2020 2020 2023  files).        #
-00000ce0: 2070 726f 6365 7373 2074 7970 6573 2e49   process types.I
-00000cf0: 6e70 7574 4669 6c65 0a20 2020 2020 2020  nputFile.       
-00000d00: 2066 6f72 206b 6579 2c20 7661 6c75 6520   for key, value 
-00000d10: 696e 2066 696c 6573 5f63 6f70 792e 6974  in files_copy.it
-00000d20: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
-00000d30: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00000d40: 2876 616c 7565 2c20 7479 7065 732e 496e  (value, types.In
-00000d50: 7075 7446 696c 6529 3a0a 2020 2020 2020  putFile):.      
-00000d60: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
-00000d70: 6b65 795d 203d 2076 616c 7565 2e66 696c  key] = value.fil
-00000d80: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
-00000d90: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-00000da0: 6c75 652c 2074 7570 6c65 2920 616e 6420  lue, tuple) and 
-00000db0: 286c 656e 2876 616c 7565 2920 3d3d 2032  (len(value) == 2
-00000dc0: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-00000dd0: 2876 616c 7565 5b31 5d2c 2074 7970 6573  (value[1], types
-00000de0: 2e49 6e70 7574 4669 6c65 293a 0a20 2020  .InputFile):.   
-00000df0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00000e00: 6573 5b6b 6579 5d20 3d20 2876 616c 7565  es[key] = (value
-00000e10: 5b30 5d2c 2076 616c 7565 5b31 5d2e 6669  [0], value[1].fi
-00000e20: 6c65 290a 0a20 2020 2069 6620 6669 6c65  le)..    if file
-00000e30: 7320 616e 6420 666f 726d 6174 5f68 6561  s and format_hea
-00000e40: 6465 725f 7061 7261 6d3a 0a20 2020 2020  der_param:.     
-00000e50: 2020 2066 6965 6c64 732e 666f 726d 6174     fields.format
-00000e60: 5f68 6561 6465 725f 7061 7261 6d20 3d20  _header_param = 
-00000e70: 5f6e 6f5f 656e 636f 6465 2866 6f72 6d61  _no_encode(forma
-00000e80: 745f 6865 6164 6572 5f70 6172 616d 290a  t_header_param).
-00000e90: 2020 2020 6966 2070 6172 616d 733a 0a20      if params:. 
-00000ea0: 2020 2020 2020 2069 6620 2774 696d 656f         if 'timeo
-00000eb0: 7574 2720 696e 2070 6172 616d 733a 0a20  ut' in params:. 
-00000ec0: 2020 2020 2020 2020 2020 2072 6561 645f             read_
-00000ed0: 7469 6d65 6f75 7420 3d20 7061 7261 6d73  timeout = params
-00000ee0: 2e70 6f70 2827 7469 6d65 6f75 7427 290a  .pop('timeout').
-00000ef0: 2020 2020 2020 2020 2020 2020 636f 6e6e              conn
-00000f00: 6563 745f 7469 6d65 6f75 7420 3d20 7265  ect_timeout = re
-00000f10: 6164 5f74 696d 656f 7574 0a20 2020 2020  ad_timeout.     
-00000f20: 2020 2069 6620 276c 6f6e 675f 706f 6c6c     if 'long_poll
-00000f30: 696e 675f 7469 6d65 6f75 7427 2069 6e20  ing_timeout' in 
-00000f40: 7061 7261 6d73 3a0a 2020 2020 2020 2020  params:.        
-00000f50: 2020 2020 2320 466f 7220 6765 7455 7064      # For getUpd
-00000f60: 6174 6573 2e20 4974 2773 2074 6865 206f  ates. It's the o
-00000f70: 6e6c 7920 6675 6e63 7469 6f6e 2077 6974  nly function wit
-00000f80: 6820 7469 6d65 6f75 7420 7061 7261 6d65  h timeout parame
-00000f90: 7465 7220 6f6e 2074 6865 2042 4f54 2041  ter on the BOT A
-00000fa0: 5049 2073 6964 650a 2020 2020 2020 2020  PI side.        
-00000fb0: 2020 2020 6c6f 6e67 5f70 6f6c 6c69 6e67      long_polling
-00000fc0: 5f74 696d 656f 7574 203d 2070 6172 616d  _timeout = param
-00000fd0: 732e 706f 7028 276c 6f6e 675f 706f 6c6c  s.pop('long_poll
-00000fe0: 696e 675f 7469 6d65 6f75 7427 290a 2020  ing_timeout').  
-00000ff0: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-00001000: 5b27 7469 6d65 6f75 7427 5d20 3d20 6c6f  ['timeout'] = lo
-00001010: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00001020: 7574 0a20 2020 2020 2020 2020 2020 2023  ut.            #
-00001030: 204c 6f6e 6720 706f 6c6c 696e 6720 6861   Long polling ha
-00001040: 6e67 7320 666f 7220 6120 6769 7665 6e20  ngs for a given 
-00001050: 7469 6d65 2e20 5265 6164 2074 696d 656f  time. Read timeo
-00001060: 7574 2073 686f 756c 6420 6265 2067 7265  ut should be gre
-00001070: 6174 6572 2074 6861 7420 6c6f 6e67 5f70  ater that long_p
-00001080: 6f6c 6c69 6e67 5f74 696d 656f 7574 0a20  olling_timeout. 
-00001090: 2020 2020 2020 2020 2020 2072 6561 645f             read_
-000010a0: 7469 6d65 6f75 7420 3d20 6d61 7828 6c6f  timeout = max(lo
-000010b0: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-000010c0: 7574 202b 2035 2c20 7265 6164 5f74 696d  ut + 5, read_tim
-000010d0: 656f 7574 290a 0a20 2020 2070 6172 616d  eout)..    param
-000010e0: 7320 3d20 7061 7261 6d73 206f 7220 4e6f  s = params or No
-000010f0: 6e65 2020 2320 5365 7420 7061 7261 6d73  ne  # Set params
-00001100: 2074 6f20 4e6f 6e65 2069 6620 656d 7074   to None if empt
-00001110: 790a 2020 2020 7265 7375 6c74 203d 204e  y.    result = N
-00001120: 6f6e 650a 0a20 2020 2069 6620 4355 5354  one..    if CUST
-00001130: 4f4d 5f52 4551 5545 5354 5f53 454e 4445  OM_REQUEST_SENDE
-00001140: 523a 0a20 2020 2020 2020 2023 206e 6f69  R:.        # noi
-00001150: 6e73 7065 6374 696f 6e20 5079 4361 6c6c  nspection PyCall
-00001160: 696e 674e 6f6e 4361 6c6c 6162 6c65 0a20  ingNonCallable. 
-00001170: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00001180: 4355 5354 4f4d 5f52 4551 5545 5354 5f53  CUSTOM_REQUEST_S
-00001190: 454e 4445 5228 0a20 2020 2020 2020 2020  ENDER(.         
-000011a0: 2020 206d 6574 686f 642c 2072 6571 7565     method, reque
-000011b0: 7374 5f75 726c 2c20 7061 7261 6d73 3d70  st_url, params=p
-000011c0: 6172 616d 732c 2066 696c 6573 3d66 696c  arams, files=fil
-000011d0: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
-000011e0: 7469 6d65 6f75 743d 2863 6f6e 6e65 6374  timeout=(connect
-000011f0: 5f74 696d 656f 7574 2c20 7265 6164 5f74  _timeout, read_t
-00001200: 696d 656f 7574 292c 2070 726f 7869 6573  imeout), proxies
-00001210: 3d70 726f 7879 290a 2020 2020 656c 6966  =proxy).    elif
-00001220: 2052 4554 5259 5f4f 4e5f 4552 524f 5220   RETRY_ON_ERROR 
-00001230: 616e 6420 5245 5452 595f 454e 4749 4e45  and RETRY_ENGINE
-00001240: 203d 3d20 313a 0a20 2020 2020 2020 2067   == 1:.        g
-00001250: 6f74 5f72 6573 756c 7420 3d20 4661 6c73  ot_result = Fals
-00001260: 650a 2020 2020 2020 2020 6375 7272 656e  e.        curren
-00001270: 745f 7472 7920 3d20 300a 2020 2020 2020  t_try = 0.      
-00001280: 2020 7768 696c 6520 6e6f 7420 676f 745f    while not got_
-00001290: 7265 7375 6c74 2061 6e64 2063 7572 7265  result and curre
-000012a0: 6e74 5f74 7279 203c 204d 4158 5f52 4554  nt_try < MAX_RET
-000012b0: 5249 4553 202d 2031 3a0a 2020 2020 2020  RIES - 1:.      
-000012c0: 2020 2020 2020 6375 7272 656e 745f 7472        current_tr
-000012d0: 7920 2b3d 2031 0a20 2020 2020 2020 2020  y += 1.         
-000012e0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-000012f0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00001300: 205f 6765 745f 7265 715f 7365 7373 696f   _get_req_sessio
-00001310: 6e28 292e 7265 7175 6573 7428 0a20 2020  n().request(.   
-00001320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001330: 206d 6574 686f 642c 2072 6571 7565 7374   method, request
-00001340: 5f75 726c 2c20 7061 7261 6d73 3d70 6172  _url, params=par
-00001350: 616d 732c 2066 696c 6573 3d66 696c 6573  ams, files=files
-00001360: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00001370: 2020 2020 2020 7469 6d65 6f75 743d 2863        timeout=(c
-00001380: 6f6e 6e65 6374 5f74 696d 656f 7574 2c20  onnect_timeout, 
-00001390: 7265 6164 5f74 696d 656f 7574 292c 2070  read_timeout), p
-000013a0: 726f 7869 6573 3d70 726f 7879 2c0a 2020  roxies=proxy,.  
-000013b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000013c0: 2020 7665 7269 6679 3d76 6572 6966 7929    verify=verify)
-000013d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000013e0: 2067 6f74 5f72 6573 756c 7420 3d20 5472   got_result = Tr
-000013f0: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
-00001400: 7863 6570 7420 4854 5450 4572 726f 723a  xcept HTTPError:
-00001410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001420: 206c 6f67 6765 722e 6465 6275 6728 2248   logger.debug("H
-00001430: 5454 5020 4572 726f 7220 6f6e 207b 307d  TTP Error on {0}
-00001440: 206d 6574 686f 6420 2854 7279 2023 7b31   method (Try #{1
-00001450: 7d29 222e 666f 726d 6174 286d 6574 686f  })".format(metho
-00001460: 645f 6e61 6d65 2c20 6375 7272 656e 745f  d_name, current_
-00001470: 7472 7929 290a 2020 2020 2020 2020 2020  try)).          
-00001480: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
-00001490: 2852 4554 5259 5f54 494d 454f 5554 290a  (RETRY_TIMEOUT).
-000014a0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-000014b0: 7074 2043 6f6e 6e65 6374 696f 6e45 7272  pt ConnectionErr
-000014c0: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
-000014d0: 2020 2020 6c6f 6767 6572 2e64 6562 7567      logger.debug
-000014e0: 2822 436f 6e6e 6563 7469 6f6e 2045 7272  ("Connection Err
-000014f0: 6f72 206f 6e20 7b30 7d20 6d65 7468 6f64  or on {0} method
-00001500: 2028 5472 7920 237b 317d 2922 2e66 6f72   (Try #{1})".for
-00001510: 6d61 7428 6d65 7468 6f64 5f6e 616d 652c  mat(method_name,
-00001520: 2063 7572 7265 6e74 5f74 7279 2929 0a20   current_try)). 
-00001530: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00001540: 696d 652e 736c 6565 7028 5245 5452 595f  ime.sleep(RETRY_
-00001550: 5449 4d45 4f55 5429 0a20 2020 2020 2020  TIMEOUT).       
-00001560: 2020 2020 2065 7863 6570 7420 5469 6d65       except Time
-00001570: 6f75 743a 0a20 2020 2020 2020 2020 2020  out:.           
+00000c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c80: 2020 2020 2020 2020 273a 2729 5b0a 2020          ':')[.  
+00000c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000d00: 305d 202b 2022 3a7b 544f 4b45 4e7d 2229  0] + ":{TOKEN}")
+00000d10: 290a 2020 2020 7265 6164 5f74 696d 656f  ).    read_timeo
+00000d20: 7574 203d 2052 4541 445f 5449 4d45 4f55  ut = READ_TIMEOU
+00000d30: 540a 2020 2020 636f 6e6e 6563 745f 7469  T.    connect_ti
+00000d40: 6d65 6f75 7420 3d20 434f 4e4e 4543 545f  meout = CONNECT_
+00000d50: 5449 4d45 4f55 540a 0a20 2020 2069 6620  TIMEOUT..    if 
+00000d60: 6669 6c65 733a 0a20 2020 2020 2020 2066  files:.        f
+00000d70: 696c 6573 5f63 6f70 7920 3d20 6469 6374  iles_copy = dict
+00000d80: 2866 696c 6573 290a 2020 2020 2020 2020  (files).        
+00000d90: 2320 7072 6f63 6573 7320 7479 7065 732e  # process types.
+00000da0: 496e 7075 7446 696c 650a 2020 2020 2020  InputFile.      
+00000db0: 2020 666f 7220 6b65 792c 2076 616c 7565    for key, value
+00000dc0: 2069 6e20 6669 6c65 735f 636f 7079 2e69   in files_copy.i
+00000dd0: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
+00000de0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00000df0: 6528 7661 6c75 652c 2074 7970 6573 2e49  e(value, types.I
+00000e00: 6e70 7574 4669 6c65 293a 0a20 2020 2020  nputFile):.     
+00000e10: 2020 2020 2020 2020 2020 2066 696c 6573             files
+00000e20: 5b6b 6579 5d20 3d20 7661 6c75 652e 6669  [key] = value.fi
+00000e30: 6c65 0a20 2020 2020 2020 2020 2020 2065  le.            e
+00000e40: 6c69 6620 6973 696e 7374 616e 6365 2876  lif isinstance(v
+00000e50: 616c 7565 2c20 7475 706c 6529 2061 6e64  alue, tuple) and
+00000e60: 2028 6c65 6e28 7661 6c75 6529 203d 3d20   (len(value) == 
+00000e70: 3229 2061 6e64 2069 7369 6e73 7461 6e63  2) and isinstanc
+00000e80: 6528 7661 6c75 655b 315d 2c20 7479 7065  e(value[1], type
+00000e90: 732e 496e 7075 7446 696c 6529 3a0a 2020  s.InputFile):.  
+00000ea0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00000eb0: 6c65 735b 6b65 795d 203d 2028 7661 6c75  les[key] = (valu
+00000ec0: 655b 305d 2c20 7661 6c75 655b 315d 2e66  e[0], value[1].f
+00000ed0: 696c 6529 0a0a 2020 2020 6966 2066 696c  ile)..    if fil
+00000ee0: 6573 2061 6e64 2066 6f72 6d61 745f 6865  es and format_he
+00000ef0: 6164 6572 5f70 6172 616d 3a0a 2020 2020  ader_param:.    
+00000f00: 2020 2020 6669 656c 6473 2e66 6f72 6d61      fields.forma
+00000f10: 745f 6865 6164 6572 5f70 6172 616d 203d  t_header_param =
+00000f20: 205f 6e6f 5f65 6e63 6f64 6528 666f 726d   _no_encode(form
+00000f30: 6174 5f68 6561 6465 725f 7061 7261 6d29  at_header_param)
+00000f40: 0a20 2020 2069 6620 7061 7261 6d73 3a0a  .    if params:.
+00000f50: 2020 2020 2020 2020 6966 2027 7469 6d65          if 'time
+00000f60: 6f75 7427 2069 6e20 7061 7261 6d73 3a0a  out' in params:.
+00000f70: 2020 2020 2020 2020 2020 2020 7265 6164              read
+00000f80: 5f74 696d 656f 7574 203d 2070 6172 616d  _timeout = param
+00000f90: 732e 706f 7028 2774 696d 656f 7574 2729  s.pop('timeout')
+00000fa0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+00000fb0: 6e65 6374 5f74 696d 656f 7574 203d 2072  nect_timeout = r
+00000fc0: 6561 645f 7469 6d65 6f75 740a 2020 2020  ead_timeout.    
+00000fd0: 2020 2020 6966 2027 6c6f 6e67 5f70 6f6c      if 'long_pol
+00000fe0: 6c69 6e67 5f74 696d 656f 7574 2720 696e  ling_timeout' in
+00000ff0: 2070 6172 616d 733a 0a20 2020 2020 2020   params:.       
+00001000: 2020 2020 2023 2046 6f72 2067 6574 5570       # For getUp
+00001010: 6461 7465 732e 2049 7427 7320 7468 6520  dates. It's the 
+00001020: 6f6e 6c79 2066 756e 6374 696f 6e20 7769  only function wi
+00001030: 7468 2074 696d 656f 7574 2070 6172 616d  th timeout param
+00001040: 6574 6572 206f 6e20 7468 6520 424f 5420  eter on the BOT 
+00001050: 4150 4920 7369 6465 0a20 2020 2020 2020  API side.       
+00001060: 2020 2020 206c 6f6e 675f 706f 6c6c 696e       long_pollin
+00001070: 675f 7469 6d65 6f75 7420 3d20 7061 7261  g_timeout = para
+00001080: 6d73 2e70 6f70 2827 6c6f 6e67 5f70 6f6c  ms.pop('long_pol
+00001090: 6c69 6e67 5f74 696d 656f 7574 2729 0a20  ling_timeout'). 
+000010a0: 2020 2020 2020 2020 2020 2070 6172 616d             param
+000010b0: 735b 2774 696d 656f 7574 275d 203d 206c  s['timeout'] = l
+000010c0: 6f6e 675f 706f 6c6c 696e 675f 7469 6d65  ong_polling_time
+000010d0: 6f75 740a 2020 2020 2020 2020 2020 2020  out.            
+000010e0: 2320 4c6f 6e67 2070 6f6c 6c69 6e67 2068  # Long polling h
+000010f0: 616e 6773 2066 6f72 2061 2067 6976 656e  angs for a given
+00001100: 2074 696d 652e 2052 6561 6420 7469 6d65   time. Read time
+00001110: 6f75 7420 7368 6f75 6c64 2062 6520 6772  out should be gr
+00001120: 6561 7465 7220 7468 6174 206c 6f6e 675f  eater that long_
+00001130: 706f 6c6c 696e 675f 7469 6d65 6f75 740a  polling_timeout.
+00001140: 2020 2020 2020 2020 2020 2020 7265 6164              read
+00001150: 5f74 696d 656f 7574 203d 206d 6178 286c  _timeout = max(l
+00001160: 6f6e 675f 706f 6c6c 696e 675f 7469 6d65  ong_polling_time
+00001170: 6f75 7420 2b20 352c 2072 6561 645f 7469  out + 5, read_ti
+00001180: 6d65 6f75 7429 0a0a 2020 2020 7061 7261  meout)..    para
+00001190: 6d73 203d 2070 6172 616d 7320 6f72 204e  ms = params or N
+000011a0: 6f6e 6520 2023 2053 6574 2070 6172 616d  one  # Set param
+000011b0: 7320 746f 204e 6f6e 6520 6966 2065 6d70  s to None if emp
+000011c0: 7479 0a20 2020 2072 6573 756c 7420 3d20  ty.    result = 
+000011d0: 4e6f 6e65 0a0a 2020 2020 6966 2043 5553  None..    if CUS
+000011e0: 544f 4d5f 5245 5155 4553 545f 5345 4e44  TOM_REQUEST_SEND
+000011f0: 4552 3a0a 2020 2020 2020 2020 2320 6e6f  ER:.        # no
+00001200: 696e 7370 6563 7469 6f6e 2050 7943 616c  inspection PyCal
+00001210: 6c69 6e67 4e6f 6e43 616c 6c61 626c 650a  lingNonCallable.
+00001220: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00001230: 2043 5553 544f 4d5f 5245 5155 4553 545f   CUSTOM_REQUEST_
+00001240: 5345 4e44 4552 280a 2020 2020 2020 2020  SENDER(.        
+00001250: 2020 2020 6d65 7468 6f64 2c20 7265 7175      method, requ
+00001260: 6573 745f 7572 6c2c 2070 6172 616d 733d  est_url, params=
+00001270: 7061 7261 6d73 2c20 6669 6c65 733d 6669  params, files=fi
+00001280: 6c65 732c 0a20 2020 2020 2020 2020 2020  les,.           
+00001290: 2074 696d 656f 7574 3d28 636f 6e6e 6563   timeout=(connec
+000012a0: 745f 7469 6d65 6f75 742c 2072 6561 645f  t_timeout, read_
+000012b0: 7469 6d65 6f75 7429 2c20 7072 6f78 6965  timeout), proxie
+000012c0: 733d 7072 6f78 7929 0a20 2020 2065 6c69  s=proxy).    eli
+000012d0: 6620 5245 5452 595f 4f4e 5f45 5252 4f52  f RETRY_ON_ERROR
+000012e0: 2061 6e64 2052 4554 5259 5f45 4e47 494e   and RETRY_ENGIN
+000012f0: 4520 3d3d 2031 3a0a 2020 2020 2020 2020  E == 1:.        
+00001300: 676f 745f 7265 7375 6c74 203d 2046 616c  got_result = Fal
+00001310: 7365 0a20 2020 2020 2020 2063 7572 7265  se.        curre
+00001320: 6e74 5f74 7279 203d 2030 0a20 2020 2020  nt_try = 0.     
+00001330: 2020 2077 6869 6c65 206e 6f74 2067 6f74     while not got
+00001340: 5f72 6573 756c 7420 616e 6420 6375 7272  _result and curr
+00001350: 656e 745f 7472 7920 3c20 4d41 585f 5245  ent_try < MAX_RE
+00001360: 5452 4945 5320 2d20 313a 0a20 2020 2020  TRIES - 1:.     
+00001370: 2020 2020 2020 2063 7572 7265 6e74 5f74         current_t
+00001380: 7279 202b 3d20 310a 2020 2020 2020 2020  ry += 1.        
+00001390: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+000013a0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+000013b0: 3d20 5f67 6574 5f72 6571 5f73 6573 7369  = _get_req_sessi
+000013c0: 6f6e 2829 2e72 6571 7565 7374 280a 2020  on().request(.  
+000013d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013e0: 2020 6d65 7468 6f64 2c20 7265 7175 6573    method, reques
+000013f0: 745f 7572 6c2c 2070 6172 616d 733d 7061  t_url, params=pa
+00001400: 7261 6d73 2c20 6669 6c65 733d 6669 6c65  rams, files=file
+00001410: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+00001420: 2020 2020 2020 2074 696d 656f 7574 3d28         timeout=(
+00001430: 636f 6e6e 6563 745f 7469 6d65 6f75 742c  connect_timeout,
+00001440: 2072 6561 645f 7469 6d65 6f75 7429 2c20   read_timeout), 
+00001450: 7072 6f78 6965 733d 7072 6f78 792c 0a20  proxies=proxy,. 
+00001460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001470: 2020 2076 6572 6966 793d 7665 7269 6679     verify=verify
+00001480: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00001490: 2020 676f 745f 7265 7375 6c74 203d 2054    got_result = T
+000014a0: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+000014b0: 6578 6365 7074 2048 5454 5045 7272 6f72  except HTTPError
+000014c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000014d0: 2020 6c6f 6767 6572 2e64 6562 7567 2822    logger.debug("
+000014e0: 4854 5450 2045 7272 6f72 206f 6e20 7b30  HTTP Error on {0
+000014f0: 7d20 6d65 7468 6f64 2028 5472 7920 237b  } method (Try #{
+00001500: 317d 2922 2e66 6f72 6d61 7428 6d65 7468  1})".format(meth
+00001510: 6f64 5f6e 616d 652c 2063 7572 7265 6e74  od_name, current
+00001520: 5f74 7279 2929 0a20 2020 2020 2020 2020  _try)).         
+00001530: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+00001540: 7028 5245 5452 595f 5449 4d45 4f55 5429  p(RETRY_TIMEOUT)
+00001550: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00001560: 6570 7420 436f 6e6e 6563 7469 6f6e 4572  ept ConnectionEr
+00001570: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
 00001580: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
-00001590: 6728 2254 696d 656f 7574 2045 7272 6f72  g("Timeout Error
-000015a0: 206f 6e20 7b30 7d20 6d65 7468 6f64 2028   on {0} method (
-000015b0: 5472 7920 237b 317d 2922 2e66 6f72 6d61  Try #{1})".forma
-000015c0: 7428 6d65 7468 6f64 5f6e 616d 652c 2063  t(method_name, c
-000015d0: 7572 7265 6e74 5f74 7279 2929 0a20 2020  urrent_try)).   
-000015e0: 2020 2020 2020 2020 2020 2020 2074 696d               tim
-000015f0: 652e 736c 6565 7028 5245 5452 595f 5449  e.sleep(RETRY_TI
-00001600: 4d45 4f55 5429 0a20 2020 2020 2020 2069  MEOUT).        i
-00001610: 6620 6e6f 7420 676f 745f 7265 7375 6c74  f not got_result
-00001620: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00001630: 7375 6c74 203d 205f 6765 745f 7265 715f  sult = _get_req_
-00001640: 7365 7373 696f 6e28 292e 7265 7175 6573  session().reques
-00001650: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-00001660: 2020 206d 6574 686f 642c 2072 6571 7565     method, reque
-00001670: 7374 5f75 726c 2c20 7061 7261 6d73 3d70  st_url, params=p
-00001680: 6172 616d 732c 2066 696c 6573 3d66 696c  arams, files=fil
-00001690: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
-000016a0: 2020 2020 7469 6d65 6f75 743d 2863 6f6e      timeout=(con
-000016b0: 6e65 6374 5f74 696d 656f 7574 2c20 7265  nect_timeout, re
-000016c0: 6164 5f74 696d 656f 7574 292c 2070 726f  ad_timeout), pro
-000016d0: 7869 6573 3d70 726f 7879 2c0a 2020 2020  xies=proxy,.    
-000016e0: 2020 2020 2020 2020 2020 2020 7665 7269              veri
-000016f0: 6679 3d76 6572 6966 7929 0a20 2020 2065  fy=verify).    e
-00001700: 6c69 6620 5245 5452 595f 4f4e 5f45 5252  lif RETRY_ON_ERR
-00001710: 4f52 2061 6e64 2052 4554 5259 5f45 4e47  OR and RETRY_ENG
-00001720: 494e 4520 3d3d 2032 3a0a 2020 2020 2020  INE == 2:.      
-00001730: 2020 6874 7470 203d 205f 6765 745f 7265    http = _get_re
-00001740: 715f 7365 7373 696f 6e28 290a 2020 2020  q_session().    
-00001750: 2020 2020 2320 6e6f 696e 7370 6563 7469      # noinspecti
-00001760: 6f6e 2050 7955 6e72 6573 6f6c 7665 6452  on PyUnresolvedR
-00001770: 6566 6572 656e 6365 730a 2020 2020 2020  eferences.      
-00001780: 2020 7265 7472 795f 7374 7261 7465 6779    retry_strategy
-00001790: 203d 2072 6571 7565 7374 732e 7061 636b   = requests.pack
-000017a0: 6167 6573 2e75 726c 6c69 6233 2e75 7469  ages.urllib3.uti
-000017b0: 6c2e 7265 7472 792e 5265 7472 7928 0a20  l.retry.Retry(. 
-000017c0: 2020 2020 2020 2020 2020 2074 6f74 616c             total
-000017d0: 3d4d 4158 5f52 4554 5249 4553 2c0a 2020  =MAX_RETRIES,.  
-000017e0: 2020 2020 2020 2020 2020 616c 6c6f 7765            allowe
-000017f0: 645f 6d65 7468 6f64 733d 4e6f 6e65 2c0a  d_methods=None,.
-00001800: 2020 2020 2020 2020 2020 2020 6261 636b              back
-00001810: 6f66 665f 6661 6374 6f72 3d52 4554 5259  off_factor=RETRY
-00001820: 5f54 494d 454f 5554 2c0a 2020 2020 2020  _TIMEOUT,.      
-00001830: 2020 2020 2020 6261 636b 6f66 665f 6d61        backoff_ma
-00001840: 783d 5245 5452 595f 5449 4d45 4f55 540a  x=RETRY_TIMEOUT.
-00001850: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00001860: 2020 6164 6170 7465 7220 3d20 4854 5450    adapter = HTTP
-00001870: 4164 6170 7465 7228 6d61 785f 7265 7472  Adapter(max_retr
-00001880: 6965 733d 7265 7472 795f 7374 7261 7465  ies=retry_strate
-00001890: 6779 290a 2020 2020 2020 2020 666f 7220  gy).        for 
-000018a0: 7072 6566 6978 2069 6e20 2827 6874 7470  prefix in ('http
-000018b0: 3a2f 2f27 2c20 2768 7474 7073 3a2f 2f27  ://', 'https://'
-000018c0: 293a 0a20 2020 2020 2020 2020 2020 2068  ):.            h
-000018d0: 7474 702e 6d6f 756e 7428 7072 6566 6978  ttp.mount(prefix
-000018e0: 2c20 6164 6170 7465 7229 0a20 2020 2020  , adapter).     
-000018f0: 2020 2072 6573 756c 7420 3d20 6874 7470     result = http
-00001900: 2e72 6571 7565 7374 280a 2020 2020 2020  .request(.      
-00001910: 2020 2020 2020 6d65 7468 6f64 2c20 7265        method, re
-00001920: 7175 6573 745f 7572 6c2c 2070 6172 616d  quest_url, param
-00001930: 733d 7061 7261 6d73 2c20 6669 6c65 733d  s=params, files=
-00001940: 6669 6c65 732c 0a20 2020 2020 2020 2020  files,.         
-00001950: 2020 2074 696d 656f 7574 3d28 636f 6e6e     timeout=(conn
-00001960: 6563 745f 7469 6d65 6f75 742c 2072 6561  ect_timeout, rea
-00001970: 645f 7469 6d65 6f75 7429 2c20 7072 6f78  d_timeout), prox
-00001980: 6965 733d 7072 6f78 792c 0a20 2020 2020  ies=proxy,.     
-00001990: 2020 2020 2020 2076 6572 6966 793d 7665         verify=ve
-000019a0: 7269 6679 290a 2020 2020 656c 7365 3a0a  rify).    else:.
-000019b0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000019c0: 205f 6765 745f 7265 715f 7365 7373 696f   _get_req_sessio
-000019d0: 6e28 292e 7265 7175 6573 7428 0a20 2020  n().request(.   
-000019e0: 2020 2020 2020 2020 206d 6574 686f 642c           method,
-000019f0: 2072 6571 7565 7374 5f75 726c 2c20 7061   request_url, pa
-00001a00: 7261 6d73 3d70 6172 616d 732c 2066 696c  rams=params, fil
-00001a10: 6573 3d66 696c 6573 2c0a 2020 2020 2020  es=files,.      
-00001a20: 2020 2020 2020 7469 6d65 6f75 743d 2863        timeout=(c
-00001a30: 6f6e 6e65 6374 5f74 696d 656f 7574 2c20  onnect_timeout, 
-00001a40: 7265 6164 5f74 696d 656f 7574 292c 2070  read_timeout), p
-00001a50: 726f 7869 6573 3d70 726f 7879 2c0a 2020  roxies=proxy,.  
-00001a60: 2020 2020 2020 2020 2020 7665 7269 6679            verify
-00001a70: 3d76 6572 6966 7929 0a0a 2020 2020 6c6f  =verify)..    lo
-00001a80: 6767 6572 2e64 6562 7567 2822 5468 6520  gger.debug("The 
-00001a90: 7365 7276 6572 2072 6574 7572 6e65 643a  server returned:
-00001aa0: 2027 7b30 7d27 222e 666f 726d 6174 2872   '{0}'".format(r
-00001ab0: 6573 756c 742e 7465 7874 2e65 6e63 6f64  esult.text.encod
-00001ac0: 6528 2775 7466 3827 2929 290a 0a20 2020  e('utf8')))..   
-00001ad0: 206a 736f 6e5f 7265 7375 6c74 203d 205f   json_result = _
-00001ae0: 6368 6563 6b5f 7265 7375 6c74 286d 6574  check_result(met
-00001af0: 686f 645f 6e61 6d65 2c20 7265 7375 6c74  hod_name, result
-00001b00: 290a 2020 2020 6966 206a 736f 6e5f 7265  ).    if json_re
-00001b10: 7375 6c74 3a0a 2020 2020 2020 2020 7265  sult:.        re
-00001b20: 7475 726e 206a 736f 6e5f 7265 7375 6c74  turn json_result
-00001b30: 5b27 7265 7375 6c74 275d 0a0a 0a64 6566  ['result']...def
-00001b40: 205f 6368 6563 6b5f 7265 7375 6c74 286d   _check_result(m
-00001b50: 6574 686f 645f 6e61 6d65 2c20 7265 7375  ethod_name, resu
-00001b60: 6c74 293a 0a20 2020 2022 2222 0a20 2020  lt):.    """.   
-00001b70: 2043 6865 636b 7320 7768 6574 6865 7220   Checks whether 
-00001b80: 6072 6573 756c 7460 2069 7320 6120 7661  `result` is a va
-00001b90: 6c69 6420 4150 4920 7265 7370 6f6e 7365  lid API response
-00001ba0: 2e0a 2020 2020 4120 7265 7375 6c74 2069  ..    A result i
-00001bb0: 7320 636f 6e73 6964 6572 6564 2069 6e76  s considered inv
-00001bc0: 616c 6964 2069 663a 0a20 2020 2020 2020  alid if:.       
-00001bd0: 202d 2054 6865 2073 6572 7665 7220 7265   - The server re
-00001be0: 7475 726e 6564 2061 6e20 4854 5450 2072  turned an HTTP r
-00001bf0: 6573 706f 6e73 6520 636f 6465 206f 7468  esponse code oth
-00001c00: 6572 2074 6861 6e20 3230 300a 2020 2020  er than 200.    
-00001c10: 2020 2020 2d20 5468 6520 636f 6e74 656e      - The conten
-00001c20: 7420 6f66 2074 6865 2072 6573 756c 7420  t of the result 
-00001c30: 6973 2069 6e76 616c 6964 204a 534f 4e2e  is invalid JSON.
-00001c40: 0a20 2020 2020 2020 202d 2054 6865 206d  .        - The m
-00001c50: 6574 686f 6420 6361 6c6c 2077 6173 2075  ethod call was u
-00001c60: 6e73 7563 6365 7373 6675 6c20 2854 6865  nsuccessful (The
-00001c70: 204a 534f 4e20 276f 6b27 2066 6965 6c64   JSON 'ok' field
-00001c80: 2065 7175 616c 7320 4661 6c73 6529 0a0a   equals False)..
-00001c90: 2020 2020 3a72 6169 7365 7320 4170 6945      :raises ApiE
-00001ca0: 7863 6570 7469 6f6e 3a20 6966 206f 6e65  xception: if one
-00001cb0: 206f 6620 7468 6520 6162 6f76 6520 6c69   of the above li
-00001cc0: 7374 6564 2063 6173 6573 2069 7320 6170  sted cases is ap
-00001cd0: 706c 6963 6162 6c65 0a20 2020 203a 7061  plicable.    :pa
-00001ce0: 7261 6d20 6d65 7468 6f64 5f6e 616d 653a  ram method_name:
-00001cf0: 2054 6865 206e 616d 6520 6f66 2074 6865   The name of the
-00001d00: 206d 6574 686f 6420 6361 6c6c 6564 0a20   method called. 
-00001d10: 2020 203a 7061 7261 6d20 7265 7375 6c74     :param result
-00001d20: 3a20 5468 6520 7265 7475 726e 6564 2072  : The returned r
-00001d30: 6573 756c 7420 6f66 2074 6865 206d 6574  esult of the met
-00001d40: 686f 6420 7265 7175 6573 740a 2020 2020  hod request.    
-00001d50: 3a72 6574 7572 6e3a 2054 6865 2072 6573  :return: The res
-00001d60: 756c 7420 7061 7273 6564 2074 6f20 6120  ult parsed to a 
-00001d70: 4a53 4f4e 2064 6963 7469 6f6e 6172 792e  JSON dictionary.
-00001d80: 0a20 2020 2022 2222 0a20 2020 2074 7279  .    """.    try
-00001d90: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
-00001da0: 5f6a 736f 6e20 3d20 7265 7375 6c74 2e6a  _json = result.j
-00001db0: 736f 6e28 290a 2020 2020 6578 6365 7074  son().    except
-00001dc0: 3a0a 2020 2020 2020 2020 6966 2072 6573  :.        if res
-00001dd0: 756c 742e 7374 6174 7573 5f63 6f64 6520  ult.status_code 
-00001de0: 213d 2032 3030 3a0a 2020 2020 2020 2020  != 200:.        
-00001df0: 2020 2020 7261 6973 6520 4170 6948 5454      raise ApiHTT
-00001e00: 5045 7863 6570 7469 6f6e 286d 6574 686f  PException(metho
-00001e10: 645f 6e61 6d65 2c20 7265 7375 6c74 290a  d_name, result).
-00001e20: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00001e30: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00001e40: 4170 6949 6e76 616c 6964 4a53 4f4e 4578  ApiInvalidJSONEx
-00001e50: 6365 7074 696f 6e28 6d65 7468 6f64 5f6e  ception(method_n
-00001e60: 616d 652c 2072 6573 756c 7429 0a20 2020  ame, result).   
-00001e70: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-00001e80: 6620 6e6f 7420 7265 7375 6c74 5f6a 736f  f not result_jso
-00001e90: 6e5b 276f 6b27 5d3a 0a20 2020 2020 2020  n['ok']:.       
-00001ea0: 2020 2020 2072 6169 7365 2041 7069 5465       raise ApiTe
-00001eb0: 6c65 6772 616d 4578 6365 7074 696f 6e28  legramException(
-00001ec0: 6d65 7468 6f64 5f6e 616d 652c 2072 6573  method_name, res
-00001ed0: 756c 742c 2072 6573 756c 745f 6a73 6f6e  ult, result_json
-00001ee0: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00001ef0: 6e20 7265 7375 6c74 5f6a 736f 6e0a 0a0a  n result_json...
-00001f00: 6465 6620 6765 745f 6d65 2874 6f6b 656e  def get_me(token
-00001f10: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00001f20: 6c20 3d20 7227 6765 744d 6527 0a20 2020  l = r'getMe'.   
-00001f30: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00001f40: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00001f50: 686f 645f 7572 6c29 0a0a 0a64 6566 206c  hod_url)...def l
-00001f60: 6f67 5f6f 7574 2874 6f6b 656e 293a 0a20  og_out(token):. 
-00001f70: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00001f80: 7227 6c6f 674f 7574 270a 2020 2020 7265  r'logOut'.    re
-00001f90: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00001fa0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00001fb0: 5f75 726c 290a 0a0a 6465 6620 636c 6f73  _url)...def clos
-00001fc0: 6528 746f 6b65 6e29 3a0a 2020 2020 6d65  e(token):.    me
-00001fd0: 7468 6f64 5f75 726c 203d 2072 2763 6c6f  thod_url = r'clo
-00001fe0: 7365 270a 2020 2020 7265 7475 726e 205f  se'.    return _
-00001ff0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00002000: 656e 2c20 6d65 7468 6f64 5f75 726c 290a  en, method_url).
-00002010: 0a0a 6465 6620 6765 745f 6669 6c65 2874  ..def get_file(t
-00002020: 6f6b 656e 2c20 6669 6c65 5f69 6429 3a0a  oken, file_id):.
-00002030: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00002040: 2072 2767 6574 4669 6c65 270a 2020 2020   r'getFile'.    
-00002050: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-00002060: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00002070: 6f64 5f75 726c 2c20 7061 7261 6d73 3d7b  od_url, params={
-00002080: 2766 696c 655f 6964 273a 2066 696c 655f  'file_id': file_
-00002090: 6964 7d29 0a0a 0a64 6566 2067 6574 5f66  id})...def get_f
-000020a0: 696c 655f 7572 6c28 746f 6b65 6e2c 2066  ile_url(token, f
-000020b0: 696c 655f 6964 293a 0a20 2020 2069 6620  ile_id):.    if 
-000020c0: 4649 4c45 5f55 524c 2069 7320 4e6f 6e65  FILE_URL is None
-000020d0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-000020e0: 2022 6874 7470 733a 2f2f 6170 692e 7465   "https://api.te
-000020f0: 6c65 6772 616d 2e6f 7267 2f66 696c 652f  legram.org/file/
-00002100: 626f 747b 307d 2f7b 317d 222e 666f 726d  bot{0}/{1}".form
-00002110: 6174 2874 6f6b 656e 2c20 6765 745f 6669  at(token, get_fi
-00002120: 6c65 2874 6f6b 656e 2c20 6669 6c65 5f69  le(token, file_i
-00002130: 6429 5b27 6669 6c65 5f70 6174 6827 5d29  d)['file_path'])
-00002140: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00002150: 2020 2023 206e 6f69 6e73 7065 6374 696f     # noinspectio
-00002160: 6e20 5079 556e 7265 736f 6c76 6564 5265  n PyUnresolvedRe
-00002170: 6665 7265 6e63 6573 0a20 2020 2020 2020  ferences.       
-00002180: 2072 6574 7572 6e20 4649 4c45 5f55 524c   return FILE_URL
-00002190: 2e66 6f72 6d61 7428 746f 6b65 6e2c 2067  .format(token, g
-000021a0: 6574 5f66 696c 6528 746f 6b65 6e2c 2066  et_file(token, f
-000021b0: 696c 655f 6964 295b 2766 696c 655f 7061  ile_id)['file_pa
-000021c0: 7468 275d 290a 0a0a 6465 6620 646f 776e  th'])...def down
-000021d0: 6c6f 6164 5f66 696c 6528 746f 6b65 6e2c  load_file(token,
-000021e0: 2066 696c 655f 7061 7468 293a 0a20 2020   file_path):.   
-000021f0: 2069 6620 4649 4c45 5f55 524c 2069 7320   if FILE_URL is 
-00002200: 4e6f 6e65 3a0a 2020 2020 2020 2020 7572  None:.        ur
-00002210: 6c20 3d20 2268 7474 7073 3a2f 2f61 7069  l = "https://api
-00002220: 2e74 656c 6567 7261 6d2e 6f72 672f 6669  .telegram.org/fi
-00002230: 6c65 2f62 6f74 7b30 7d2f 7b31 7d22 2e66  le/bot{0}/{1}".f
-00002240: 6f72 6d61 7428 746f 6b65 6e2c 2066 696c  ormat(token, fil
-00002250: 655f 7061 7468 290a 2020 2020 656c 7365  e_path).    else
-00002260: 3a0a 2020 2020 2020 2020 2320 6e6f 696e  :.        # noin
-00002270: 7370 6563 7469 6f6e 2050 7955 6e72 6573  spection PyUnres
-00002280: 6f6c 7665 6452 6566 6572 656e 6365 730a  olvedReferences.
-00002290: 2020 2020 2020 2020 7572 6c20 3d20 4649          url = FI
-000022a0: 4c45 5f55 524c 2e66 6f72 6d61 7428 746f  LE_URL.format(to
-000022b0: 6b65 6e2c 2066 696c 655f 7061 7468 290a  ken, file_path).
-000022c0: 0a20 2020 2072 6573 756c 7420 3d20 5f67  .    result = _g
-000022d0: 6574 5f72 6571 5f73 6573 7369 6f6e 2829  et_req_session()
-000022e0: 2e67 6574 2875 726c 2c20 7072 6f78 6965  .get(url, proxie
-000022f0: 733d 7072 6f78 7929 0a20 2020 2069 6620  s=proxy).    if 
-00002300: 7265 7375 6c74 2e73 7461 7475 735f 636f  result.status_co
-00002310: 6465 2021 3d20 3230 303a 0a20 2020 2020  de != 200:.     
-00002320: 2020 2072 6169 7365 2041 7069 4854 5450     raise ApiHTTP
-00002330: 4578 6365 7074 696f 6e28 2744 6f77 6e6c  Exception('Downl
-00002340: 6f61 6420 6669 6c65 272c 2072 6573 756c  oad file', resul
-00002350: 7429 0a0a 2020 2020 7265 7475 726e 2072  t)..    return r
-00002360: 6573 756c 742e 636f 6e74 656e 740a 0a0a  esult.content...
-00002370: 6465 6620 7365 6e64 5f6d 6573 7361 6765  def send_message
-00002380: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
-00002390: 2063 6861 745f 6964 2c20 7465 7874 2c0a   chat_id, text,.
-000023a0: 2020 2020 2020 2020 7265 706c 795f 6d61          reply_ma
-000023b0: 726b 7570 3d4e 6f6e 652c 0a20 2020 2020  rkup=None,.     
-000023c0: 2020 2070 6172 7365 5f6d 6f64 653d 4e6f     parse_mode=No
-000023d0: 6e65 2c20 6469 7361 626c 655f 6e6f 7469  ne, disable_noti
-000023e0: 6669 6361 7469 6f6e 3d4e 6f6e 652c 2074  fication=None, t
-000023f0: 696d 656f 7574 3d4e 6f6e 652c 0a20 2020  imeout=None,.   
-00002400: 2020 2020 2065 6e74 6974 6965 733d 4e6f       entities=No
-00002410: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
-00002420: 656e 743d 4e6f 6e65 2c0a 2020 2020 2020  ent=None,.      
-00002430: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
-00002440: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
-00002450: 7061 7261 6d65 7465 7273 3d4e 6f6e 652c  parameters=None,
-00002460: 206c 696e 6b5f 7072 6576 6965 775f 6f70   link_preview_op
-00002470: 7469 6f6e 733d 4e6f 6e65 2c0a 2020 2020  tions=None,.    
-00002480: 2020 2020 6275 7369 6e65 7373 5f63 6f6e      business_con
-00002490: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 6529  nection_id=None)
-000024a0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000024b0: 203d 2072 2773 656e 644d 6573 7361 6765   = r'sendMessage
-000024c0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-000024d0: 7b27 6368 6174 5f69 6427 3a20 7374 7228  {'chat_id': str(
-000024e0: 6368 6174 5f69 6429 2c20 2774 6578 7427  chat_id), 'text'
-000024f0: 3a20 7465 7874 7d0a 2020 2020 6966 206c  : text}.    if l
-00002500: 696e 6b5f 7072 6576 6965 775f 6f70 7469  ink_preview_opti
-00002510: 6f6e 7320 6973 206e 6f74 204e 6f6e 653a  ons is not None:
-00002520: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00002530: 5b27 6c69 6e6b 5f70 7265 7669 6577 5f6f  ['link_preview_o
-00002540: 7074 696f 6e73 275d 203d 206c 696e 6b5f  ptions'] = link_
-00002550: 7072 6576 6965 775f 6f70 7469 6f6e 732e  preview_options.
-00002560: 746f 5f6a 736f 6e28 290a 2020 2020 6966  to_json().    if
-00002570: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-00002580: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00002590: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
-000025a0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-000025b0: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-000025c0: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
-000025d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000025e0: 645b 2770 6172 7365 5f6d 6f64 6527 5d20  d['parse_mode'] 
-000025f0: 3d20 7061 7273 655f 6d6f 6465 0a20 2020  = parse_mode.   
-00002600: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
-00002610: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
-00002620: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00002630: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
-00002640: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
-00002650: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00002660: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
-00002670: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00002680: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
-00002690: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-000026a0: 2065 6e74 6974 6965 733a 0a20 2020 2020   entities:.     
-000026b0: 2020 2070 6179 6c6f 6164 5b27 656e 7469     payload['enti
-000026c0: 7469 6573 275d 203d 206a 736f 6e2e 6475  ties'] = json.du
-000026d0: 6d70 7328 7479 7065 732e 4d65 7373 6167  mps(types.Messag
-000026e0: 6545 6e74 6974 792e 746f 5f6c 6973 745f  eEntity.to_list_
-000026f0: 6f66 5f64 6963 7473 2865 6e74 6974 6965  of_dicts(entitie
-00002700: 7329 290a 2020 2020 6966 2070 726f 7465  s)).    if prote
-00002710: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-00002720: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00002730: 7061 796c 6f61 645b 2770 726f 7465 6374  payload['protect
-00002740: 5f63 6f6e 7465 6e74 275d 203d 2070 726f  _content'] = pro
-00002750: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-00002760: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-00002770: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-00002780: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-00002790: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-000027a0: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-000027b0: 2020 2020 6966 2072 6570 6c79 5f70 6172      if reply_par
-000027c0: 616d 6574 6572 7320 6973 206e 6f74 204e  ameters is not N
-000027d0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-000027e0: 6c6f 6164 5b27 7265 706c 795f 7061 7261  load['reply_para
-000027f0: 6d65 7465 7273 275d 203d 2072 6570 6c79  meters'] = reply
-00002800: 5f70 6172 616d 6574 6572 732e 746f 5f6a  _parameters.to_j
-00002810: 736f 6e28 290a 2020 2020 6966 2062 7573  son().    if bus
-00002820: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00002830: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00002840: 6c6f 6164 5b27 6275 7369 6e65 7373 5f63  load['business_c
-00002850: 6f6e 6e65 6374 696f 6e5f 6964 275d 203d  onnection_id'] =
-00002860: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00002870: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
-00002880: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00002890: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000028a0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-000028b0: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
-000028c0: 2729 0a0a 0a64 6566 2073 6574 5f77 6562  ')...def set_web
-000028d0: 686f 6f6b 2874 6f6b 656e 2c20 7572 6c3d  hook(token, url=
-000028e0: 4e6f 6e65 2c20 6365 7274 6966 6963 6174  None, certificat
-000028f0: 653d 4e6f 6e65 2c20 6d61 785f 636f 6e6e  e=None, max_conn
-00002900: 6563 7469 6f6e 733d 4e6f 6e65 2c20 616c  ections=None, al
-00002910: 6c6f 7765 645f 7570 6461 7465 733d 4e6f  lowed_updates=No
-00002920: 6e65 2c20 6970 5f61 6464 7265 7373 3d4e  ne, ip_address=N
-00002930: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00002940: 2020 2020 2064 726f 705f 7065 6e64 696e       drop_pendin
-00002950: 675f 7570 6461 7465 733d 4e6f 6e65 2c20  g_updates=None, 
-00002960: 7469 6d65 6f75 743d 4e6f 6e65 2c20 7365  timeout=None, se
-00002970: 6372 6574 5f74 6f6b 656e 3d4e 6f6e 6529  cret_token=None)
-00002980: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00002990: 203d 2072 2773 6574 5765 6268 6f6f 6b27   = r'setWebhook'
-000029a0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-000029b0: 0a20 2020 2020 2020 2027 7572 6c27 3a20  .        'url': 
-000029c0: 7572 6c20 6966 2075 726c 2065 6c73 6520  url if url else 
-000029d0: 2222 2c0a 2020 2020 7d0a 2020 2020 6669  "",.    }.    fi
-000029e0: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
-000029f0: 6620 6365 7274 6966 6963 6174 653a 0a20  f certificate:. 
-00002a00: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-00002a10: 2763 6572 7469 6669 6361 7465 273a 2063  'certificate': c
-00002a20: 6572 7469 6669 6361 7465 7d0a 2020 2020  ertificate}.    
-00002a30: 6966 206d 6178 5f63 6f6e 6e65 6374 696f  if max_connectio
-00002a40: 6e73 3a0a 2020 2020 2020 2020 7061 796c  ns:.        payl
-00002a50: 6f61 645b 276d 6178 5f63 6f6e 6e65 6374  oad['max_connect
-00002a60: 696f 6e73 275d 203d 206d 6178 5f63 6f6e  ions'] = max_con
-00002a70: 6e65 6374 696f 6e73 0a20 2020 2069 6620  nections.    if 
-00002a80: 616c 6c6f 7765 645f 7570 6461 7465 7320  allowed_updates 
-00002a90: 6973 206e 6f74 204e 6f6e 653a 2020 2320  is not None:  # 
-00002aa0: 456d 7074 7920 6c69 7374 7320 7368 6f75  Empty lists shou
-00002ab0: 6c64 2070 6173 730a 2020 2020 2020 2020  ld pass.        
-00002ac0: 7061 796c 6f61 645b 2761 6c6c 6f77 6564  payload['allowed
-00002ad0: 5f75 7064 6174 6573 275d 203d 206a 736f  _updates'] = jso
-00002ae0: 6e2e 6475 6d70 7328 616c 6c6f 7765 645f  n.dumps(allowed_
-00002af0: 7570 6461 7465 7329 0a20 2020 2069 6620  updates).    if 
-00002b00: 6970 5f61 6464 7265 7373 2069 7320 6e6f  ip_address is no
-00002b10: 7420 4e6f 6e65 3a20 2023 2045 6d70 7479  t None:  # Empty
-00002b20: 2073 7472 696e 6720 7368 6f75 6c64 2070   string should p
-00002b30: 6173 730a 2020 2020 2020 2020 7061 796c  ass.        payl
-00002b40: 6f61 645b 2769 705f 6164 6472 6573 7327  oad['ip_address'
-00002b50: 5d20 3d20 6970 5f61 6464 7265 7373 0a20  ] = ip_address. 
-00002b60: 2020 2069 6620 6472 6f70 5f70 656e 6469     if drop_pendi
-00002b70: 6e67 5f75 7064 6174 6573 2069 7320 6e6f  ng_updates is no
-00002b80: 7420 4e6f 6e65 3a20 2023 2041 6e79 2062  t None:  # Any b
-00002b90: 6f6f 6c20 7661 6c75 6520 7368 6f75 6c64  ool value should
-00002ba0: 2070 6173 730a 2020 2020 2020 2020 7061   pass.        pa
-00002bb0: 796c 6f61 645b 2764 726f 705f 7065 6e64  yload['drop_pend
-00002bc0: 696e 675f 7570 6461 7465 7327 5d20 3d20  ing_updates'] = 
-00002bd0: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
-00002be0: 6174 6573 0a20 2020 2069 6620 7469 6d65  ates.    if time
-00002bf0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00002c00: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
-00002c10: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-00002c20: 2073 6563 7265 745f 746f 6b65 6e3a 0a20   secret_token:. 
-00002c30: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00002c40: 7365 6372 6574 5f74 6f6b 656e 275d 203d  secret_token'] =
-00002c50: 2073 6563 7265 745f 746f 6b65 6e0a 2020   secret_token.  
-00002c60: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00002c70: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00002c80: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00002c90: 3d70 6179 6c6f 6164 2c20 6669 6c65 733d  =payload, files=
-00002ca0: 6669 6c65 7329 0a0a 0a64 6566 2064 656c  files)...def del
-00002cb0: 6574 655f 7765 6268 6f6f 6b28 746f 6b65  ete_webhook(toke
-00002cc0: 6e2c 2064 726f 705f 7065 6e64 696e 675f  n, drop_pending_
-00002cd0: 7570 6461 7465 733d 4e6f 6e65 2c20 7469  updates=None, ti
-00002ce0: 6d65 6f75 743d 4e6f 6e65 293a 0a20 2020  meout=None):.   
-00002cf0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
-00002d00: 6465 6c65 7465 5765 6268 6f6f 6b27 0a20  deleteWebhook'. 
-00002d10: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
-00002d20: 2020 2020 6966 2064 726f 705f 7065 6e64      if drop_pend
-00002d30: 696e 675f 7570 6461 7465 7320 6973 206e  ing_updates is n
-00002d40: 6f74 204e 6f6e 653a 2020 2320 416e 7920  ot None:  # Any 
-00002d50: 626f 6f6c 2076 616c 7565 2073 686f 756c  bool value shoul
-00002d60: 6420 7061 7373 0a20 2020 2020 2020 2070  d pass.        p
-00002d70: 6179 6c6f 6164 5b27 6472 6f70 5f70 656e  ayload['drop_pen
-00002d80: 6469 6e67 5f75 7064 6174 6573 275d 203d  ding_updates'] =
-00002d90: 2064 726f 705f 7065 6e64 696e 675f 7570   drop_pending_up
-00002da0: 6461 7465 730a 2020 2020 6966 2074 696d  dates.    if tim
-00002db0: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
-00002dc0: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
-00002dd0: 203d 2074 696d 656f 7574 0a20 2020 2072   = timeout.    r
-00002de0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00002df0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00002e00: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00002e10: 796c 6f61 6429 0a0a 0a64 6566 2067 6574  yload)...def get
-00002e20: 5f77 6562 686f 6f6b 5f69 6e66 6f28 746f  _webhook_info(to
-00002e30: 6b65 6e2c 2074 696d 656f 7574 3d4e 6f6e  ken, timeout=Non
-00002e40: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00002e50: 726c 203d 2072 2767 6574 5765 6268 6f6f  rl = r'getWebhoo
-00002e60: 6b49 6e66 6f27 0a20 2020 2070 6179 6c6f  kInfo'.    paylo
-00002e70: 6164 203d 207b 7d0a 2020 2020 6966 2074  ad = {}.    if t
-00002e80: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
-00002e90: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
-00002ea0: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
-00002eb0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00002ec0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00002ed0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00002ee0: 7061 796c 6f61 6429 0a0a 0a64 6566 2067  payload)...def g
-00002ef0: 6574 5f75 7064 6174 6573 2874 6f6b 656e  et_updates(token
-00002f00: 2c20 6f66 6673 6574 3d4e 6f6e 652c 206c  , offset=None, l
-00002f10: 696d 6974 3d4e 6f6e 652c 2074 696d 656f  imit=None, timeo
-00002f20: 7574 3d4e 6f6e 652c 2061 6c6c 6f77 6564  ut=None, allowed
-00002f30: 5f75 7064 6174 6573 3d4e 6f6e 652c 206c  _updates=None, l
-00002f40: 6f6e 675f 706f 6c6c 696e 675f 7469 6d65  ong_polling_time
-00002f50: 6f75 743d 4e6f 6e65 293a 0a20 2020 206d  out=None):.    m
-00002f60: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
-00002f70: 7455 7064 6174 6573 270a 2020 2020 7061  tUpdates'.    pa
-00002f80: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-00002f90: 6620 6f66 6673 6574 3a0a 2020 2020 2020  f offset:.      
-00002fa0: 2020 7061 796c 6f61 645b 276f 6666 7365    payload['offse
-00002fb0: 7427 5d20 3d20 6f66 6673 6574 0a20 2020  t'] = offset.   
-00002fc0: 2069 6620 6c69 6d69 743a 0a20 2020 2020   if limit:.     
-00002fd0: 2020 2070 6179 6c6f 6164 5b27 6c69 6d69     payload['limi
-00002fe0: 7427 5d20 3d20 6c69 6d69 740a 2020 2020  t'] = limit.    
-00002ff0: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
-00003000: 2020 2020 7061 796c 6f61 645b 2774 696d      payload['tim
-00003010: 656f 7574 275d 203d 2074 696d 656f 7574  eout'] = timeout
-00003020: 0a20 2020 2070 6179 6c6f 6164 5b27 6c6f  .    payload['lo
-00003030: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00003040: 7574 275d 203d 206c 6f6e 675f 706f 6c6c  ut'] = long_poll
-00003050: 696e 675f 7469 6d65 6f75 7420 6966 206c  ing_timeout if l
-00003060: 6f6e 675f 706f 6c6c 696e 675f 7469 6d65  ong_polling_time
-00003070: 6f75 7420 656c 7365 204c 4f4e 475f 504f  out else LONG_PO
-00003080: 4c4c 494e 475f 5449 4d45 4f55 540a 2020  LLING_TIMEOUT.  
-00003090: 2020 6966 2061 6c6c 6f77 6564 5f75 7064    if allowed_upd
-000030a0: 6174 6573 2069 7320 6e6f 7420 4e6f 6e65  ates is not None
-000030b0: 3a20 2023 2045 6d70 7479 206c 6973 7473  :  # Empty lists
-000030c0: 2073 686f 756c 6420 7061 7373 0a20 2020   should pass.   
-000030d0: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
-000030e0: 6c6f 7765 645f 7570 6461 7465 7327 5d20  lowed_updates'] 
-000030f0: 3d20 6a73 6f6e 2e64 756d 7073 2861 6c6c  = json.dumps(all
-00003100: 6f77 6564 5f75 7064 6174 6573 290a 2020  owed_updates).  
-00003110: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00003120: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00003130: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00003140: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00003150: 6765 745f 7573 6572 5f70 726f 6669 6c65  get_user_profile
-00003160: 5f70 686f 746f 7328 746f 6b65 6e2c 2075  _photos(token, u
-00003170: 7365 725f 6964 2c20 6f66 6673 6574 3d4e  ser_id, offset=N
-00003180: 6f6e 652c 206c 696d 6974 3d4e 6f6e 6529  one, limit=None)
-00003190: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000031a0: 203d 2072 2767 6574 5573 6572 5072 6f66   = r'getUserProf
-000031b0: 696c 6550 686f 746f 7327 0a20 2020 2070  ilePhotos'.    p
-000031c0: 6179 6c6f 6164 203d 207b 2775 7365 725f  ayload = {'user_
-000031d0: 6964 273a 2075 7365 725f 6964 7d0a 2020  id': user_id}.  
-000031e0: 2020 6966 206f 6666 7365 743a 0a20 2020    if offset:.   
-000031f0: 2020 2020 2070 6179 6c6f 6164 5b27 6f66       payload['of
-00003200: 6673 6574 275d 203d 206f 6666 7365 740a  fset'] = offset.
-00003210: 2020 2020 6966 206c 696d 6974 3a0a 2020      if limit:.  
-00003220: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
-00003230: 696d 6974 275d 203d 206c 696d 6974 0a20  imit'] = limit. 
-00003240: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00003250: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00003260: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00003270: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
-00003280: 2073 6574 5f6d 6573 7361 6765 5f72 6561   set_message_rea
-00003290: 6374 696f 6e28 746f 6b65 6e2c 2063 6861  ction(token, cha
-000032a0: 745f 6964 2c20 6d65 7373 6167 655f 6964  t_id, message_id
-000032b0: 2c20 7265 6163 7469 6f6e 3d4e 6f6e 652c  , reaction=None,
-000032c0: 2069 735f 6269 673d 4e6f 6e65 293a 0a20   is_big=None):. 
-000032d0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000032e0: 7227 7365 744d 6573 7361 6765 5265 6163  r'setMessageReac
-000032f0: 7469 6f6e 270a 2020 2020 7061 796c 6f61  tion'.    payloa
-00003300: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-00003310: 6368 6174 5f69 642c 2027 6d65 7373 6167  chat_id, 'messag
-00003320: 655f 6964 273a 206d 6573 7361 6765 5f69  e_id': message_i
-00003330: 647d 0a20 2020 2069 6620 7265 6163 7469  d}.    if reacti
-00003340: 6f6e 3a0a 2020 2020 2020 2020 7061 796c  on:.        payl
-00003350: 6f61 645b 2772 6561 6374 696f 6e27 5d20  oad['reaction'] 
-00003360: 3d20 6a73 6f6e 2e64 756d 7073 285b 722e  = json.dumps([r.
-00003370: 746f 5f64 6963 7428 2920 666f 7220 7220  to_dict() for r 
-00003380: 696e 2072 6561 6374 696f 6e5d 290a 2020  in reaction]).  
-00003390: 2020 6966 2069 735f 6269 6720 6973 206e    if is_big is n
-000033a0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000033b0: 2070 6179 6c6f 6164 5b27 6973 5f62 6967   payload['is_big
-000033c0: 275d 203d 2069 735f 6269 670a 2020 2020  '] = is_big.    
-000033d0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-000033e0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-000033f0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00003400: 6179 6c6f 6164 290a 0a0a 6465 6620 6765  ayload)...def ge
-00003410: 745f 6368 6174 2874 6f6b 656e 2c20 6368  t_chat(token, ch
-00003420: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
-00003430: 6f64 5f75 726c 203d 2072 2767 6574 4368  od_url = r'getCh
-00003440: 6174 270a 2020 2020 7061 796c 6f61 6420  at'.    payload 
-00003450: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-00003460: 6174 5f69 647d 0a20 2020 2072 6574 7572  at_id}.    retur
-00003470: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00003480: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00003490: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-000034a0: 6429 0a0a 0a64 6566 206c 6561 7665 5f63  d)...def leave_c
-000034b0: 6861 7428 746f 6b65 6e2c 2063 6861 745f  hat(token, chat_
-000034c0: 6964 293a 0a20 2020 206d 6574 686f 645f  id):.    method_
-000034d0: 7572 6c20 3d20 7227 6c65 6176 6543 6861  url = r'leaveCha
-000034e0: 7427 0a20 2020 2070 6179 6c6f 6164 203d  t'.    payload =
-000034f0: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
-00003500: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
-00003510: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00003520: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00003530: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00003540: 290a 0a0a 6465 6620 6765 745f 6368 6174  )...def get_chat
-00003550: 5f61 646d 696e 6973 7472 6174 6f72 7328  _administrators(
-00003560: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
-00003570: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00003580: 3d20 7227 6765 7443 6861 7441 646d 696e  = r'getChatAdmin
-00003590: 6973 7472 6174 6f72 7327 0a20 2020 2070  istrators'.    p
-000035a0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-000035b0: 6964 273a 2063 6861 745f 6964 7d0a 2020  id': chat_id}.  
-000035c0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-000035d0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-000035e0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-000035f0: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00003600: 6765 745f 6368 6174 5f6d 656d 6265 725f  get_chat_member_
-00003610: 636f 756e 7428 746f 6b65 6e2c 2063 6861  count(token, cha
-00003620: 745f 6964 293a 0a20 2020 206d 6574 686f  t_id):.    metho
-00003630: 645f 7572 6c20 3d20 7227 6765 7443 6861  d_url = r'getCha
-00003640: 744d 656d 6265 7243 6f75 6e74 270a 2020  tMemberCount'.  
-00003650: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-00003660: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
-00003670: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-00003680: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
-00003690: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-000036a0: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
-000036b0: 6566 2073 6574 5f73 7469 636b 6572 5f73  ef set_sticker_s
-000036c0: 6574 5f74 6875 6d62 6e61 696c 2874 6f6b  et_thumbnail(tok
-000036d0: 656e 2c20 6e61 6d65 2c20 7573 6572 5f69  en, name, user_i
-000036e0: 642c 2074 6875 6d62 6e61 696c 2c20 666f  d, thumbnail, fo
-000036f0: 726d 6174 293a 0a20 2020 206d 6574 686f  rmat):.    metho
-00003700: 645f 7572 6c20 3d20 7227 7365 7453 7469  d_url = r'setSti
-00003710: 636b 6572 5365 7454 6875 6d62 6e61 696c  ckerSetThumbnail
-00003720: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00003730: 7b27 6e61 6d65 273a 206e 616d 652c 2027  {'name': name, '
-00003740: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
-00003750: 642c 2027 666f 726d 6174 273a 2066 6f72  d, 'format': for
-00003760: 6d61 747d 0a20 2020 2066 696c 6573 203d  mat}.    files =
-00003770: 207b 7d0a 2020 2020 6966 2074 6875 6d62   {}.    if thumb
-00003780: 6e61 696c 3a0a 2020 2020 2020 2020 6966  nail:.        if
-00003790: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-000037a0: 7468 756d 626e 6169 6c2c 2073 7472 293a  thumbnail, str):
-000037b0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-000037c0: 6573 5b27 7468 756d 626e 6169 6c27 5d20  es['thumbnail'] 
-000037d0: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
-000037e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000037f0: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00003800: 6875 6d62 6e61 696c 275d 203d 2074 6875  humbnail'] = thu
-00003810: 6d62 6e61 696c 0a20 2020 2072 6574 7572  mbnail.    retur
-00003820: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00003830: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00003840: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00003850: 642c 2066 696c 6573 3d66 696c 6573 206f  d, files=files o
-00003860: 7220 4e6f 6e65 290a 0a0a 6465 6620 7265  r None)...def re
-00003870: 706c 6163 655f 7374 6963 6b65 725f 696e  place_sticker_in
-00003880: 5f73 6574 2874 6f6b 656e 2c20 7573 6572  _set(token, user
-00003890: 5f69 642c 206e 616d 652c 206f 6c64 5f73  _id, name, old_s
-000038a0: 7469 636b 6572 2c20 7374 6963 6b65 7229  ticker, sticker)
-000038b0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000038c0: 203d 2072 2772 6570 6c61 6365 5374 6963   = r'replaceStic
-000038d0: 6b65 7249 6e53 6574 270a 2020 2020 7061  kerInSet'.    pa
-000038e0: 796c 6f61 6420 3d20 7b27 7573 6572 5f69  yload = {'user_i
-000038f0: 6427 3a20 7573 6572 5f69 642c 2027 6e61  d': user_id, 'na
-00003900: 6d65 273a 206e 616d 652c 2027 6f6c 645f  me': name, 'old_
-00003910: 7374 6963 6b65 7227 3a20 6f6c 645f 7374  sticker': old_st
-00003920: 6963 6b65 722c 2027 7374 6963 6b65 7227  icker, 'sticker'
-00003930: 3a20 7374 6963 6b65 722e 746f 5f6a 736f  : sticker.to_jso
-00003940: 6e28 297d 0a20 2020 2072 6574 7572 6e20  n()}.    return 
-00003950: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00003960: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00003970: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00003980: 0a0a 0a64 6566 2073 6574 5f63 6861 745f  ...def set_chat_
-00003990: 7374 6963 6b65 725f 7365 7428 746f 6b65  sticker_set(toke
-000039a0: 6e2c 2063 6861 745f 6964 2c20 7374 6963  n, chat_id, stic
-000039b0: 6b65 725f 7365 745f 6e61 6d65 293a 0a20  ker_set_name):. 
-000039c0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000039d0: 7227 7365 7443 6861 7453 7469 636b 6572  r'setChatSticker
-000039e0: 5365 7427 0a20 2020 2070 6179 6c6f 6164  Set'.    payload
-000039f0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-00003a00: 6861 745f 6964 2c20 2773 7469 636b 6572  hat_id, 'sticker
-00003a10: 5f73 6574 5f6e 616d 6527 3a20 7374 6963  _set_name': stic
-00003a20: 6b65 725f 7365 745f 6e61 6d65 7d0a 2020  ker_set_name}.  
-00003a30: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00003a40: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00003a50: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00003a60: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00003a70: 6465 6c65 7465 5f63 6861 745f 7374 6963  delete_chat_stic
-00003a80: 6b65 725f 7365 7428 746f 6b65 6e2c 2063  ker_set(token, c
-00003a90: 6861 745f 6964 293a 0a20 2020 206d 6574  hat_id):.    met
-00003aa0: 686f 645f 7572 6c20 3d20 7227 6465 6c65  hod_url = r'dele
-00003ab0: 7465 4368 6174 5374 6963 6b65 7253 6574  teChatStickerSet
-00003ac0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00003ad0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-00003ae0: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
-00003af0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00003b00: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00003b10: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00003b20: 0a0a 0a64 6566 2067 6574 5f63 6861 745f  ...def get_chat_
-00003b30: 6d65 6d62 6572 2874 6f6b 656e 2c20 6368  member(token, ch
-00003b40: 6174 5f69 642c 2075 7365 725f 6964 293a  at_id, user_id):
-00003b50: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00003b60: 3d20 7227 6765 7443 6861 744d 656d 6265  = r'getChatMembe
-00003b70: 7227 0a20 2020 2070 6179 6c6f 6164 203d  r'.    payload =
-00003b80: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
-00003b90: 745f 6964 2c20 2775 7365 725f 6964 273a  t_id, 'user_id':
-00003ba0: 2075 7365 725f 6964 7d0a 2020 2020 7265   user_id}.    re
-00003bb0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00003bc0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00003bd0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00003be0: 6c6f 6164 290a 0a0a 6465 6620 666f 7277  load)...def forw
-00003bf0: 6172 645f 6d65 7373 6167 6528 0a20 2020  ard_message(.   
-00003c00: 2020 2020 2074 6f6b 656e 2c20 6368 6174       token, chat
-00003c10: 5f69 642c 2066 726f 6d5f 6368 6174 5f69  _id, from_chat_i
-00003c20: 642c 206d 6573 7361 6765 5f69 642c 0a20  d, message_id,. 
-00003c30: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
-00003c40: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
-00003c50: 2c20 7469 6d65 6f75 743d 4e6f 6e65 2c20  , timeout=None, 
-00003c60: 7072 6f74 6563 745f 636f 6e74 656e 743d  protect_content=
-00003c70: 4e6f 6e65 2c20 6d65 7373 6167 655f 7468  None, message_th
-00003c80: 7265 6164 5f69 643d 4e6f 6e65 293a 0a20  read_id=None):. 
-00003c90: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00003ca0: 7227 666f 7277 6172 644d 6573 7361 6765  r'forwardMessage
-00003cb0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00003cc0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-00003cd0: 5f69 642c 2027 6672 6f6d 5f63 6861 745f  _id, 'from_chat_
-00003ce0: 6964 273a 2066 726f 6d5f 6368 6174 5f69  id': from_chat_i
-00003cf0: 642c 2027 6d65 7373 6167 655f 6964 273a  d, 'message_id':
-00003d00: 206d 6573 7361 6765 5f69 647d 0a20 2020   message_id}.   
-00003d10: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
-00003d20: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
-00003d30: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00003d40: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
-00003d50: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
-00003d60: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00003d70: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
-00003d80: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00003d90: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
-00003da0: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-00003db0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00003dc0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00003dd0: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-00003de0: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
-00003df0: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00003e00: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
-00003e10: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
-00003e20: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-00003e30: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
-00003e40: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-00003e50: 6164 5f69 640a 2020 2020 7265 7475 726e  ad_id.    return
-00003e60: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00003e70: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00003e80: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00003e90: 290a 0a0a 6465 6620 636f 7079 5f6d 6573  )...def copy_mes
-00003ea0: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
-00003eb0: 5f69 642c 2066 726f 6d5f 6368 6174 5f69  _id, from_chat_i
-00003ec0: 642c 206d 6573 7361 6765 5f69 642c 2063  d, message_id, c
-00003ed0: 6170 7469 6f6e 3d4e 6f6e 652c 2070 6172  aption=None, par
-00003ee0: 7365 5f6d 6f64 653d 4e6f 6e65 2c20 6361  se_mode=None, ca
-00003ef0: 7074 696f 6e5f 656e 7469 7469 6573 3d4e  ption_entities=N
-00003f00: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00003f10: 2020 2020 2020 6469 7361 626c 655f 6e6f        disable_no
-00003f20: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00003f30: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
-00003f40: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
-00003f50: 2c20 7072 6f74 6563 745f 636f 6e74 656e  , protect_conten
-00003f60: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00003f70: 2020 2020 2020 2020 206d 6573 7361 6765           message
-00003f80: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
-00003f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003fa0: 2020 7265 706c 795f 7061 7261 6d65 7465    reply_paramete
-00003fb0: 7273 3d4e 6f6e 6529 3a0a 2020 2020 6d65  rs=None):.    me
-00003fc0: 7468 6f64 5f75 726c 203d 2072 2763 6f70  thod_url = r'cop
-00003fd0: 794d 6573 7361 6765 270a 2020 2020 7061  yMessage'.    pa
-00003fe0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00003ff0: 6427 3a20 6368 6174 5f69 642c 2027 6672  d': chat_id, 'fr
-00004000: 6f6d 5f63 6861 745f 6964 273a 2066 726f  om_chat_id': fro
-00004010: 6d5f 6368 6174 5f69 642c 2027 6d65 7373  m_chat_id, 'mess
-00004020: 6167 655f 6964 273a 206d 6573 7361 6765  age_id': message
-00004030: 5f69 647d 0a20 2020 2069 6620 6361 7074  _id}.    if capt
-00004040: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
-00004050: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004060: 5b27 6361 7074 696f 6e27 5d20 3d20 6361  ['caption'] = ca
-00004070: 7074 696f 6e0a 2020 2020 6966 2070 6172  ption.    if par
-00004080: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
-00004090: 2070 6179 6c6f 6164 5b27 7061 7273 655f   payload['parse_
-000040a0: 6d6f 6465 275d 203d 2070 6172 7365 5f6d  mode'] = parse_m
-000040b0: 6f64 650a 2020 2020 6966 2063 6170 7469  ode.    if capti
-000040c0: 6f6e 5f65 6e74 6974 6965 7320 6973 206e  on_entities is n
-000040d0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000040e0: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
-000040f0: 6e5f 656e 7469 7469 6573 275d 203d 205f  n_entities'] = _
-00004100: 636f 6e76 6572 745f 656e 7469 7465 7328  convert_entites(
-00004110: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00004120: 290a 2020 2020 6966 2064 6973 6162 6c65  ).    if disable
-00004130: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
-00004140: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00004150: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
-00004160: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00004170: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
-00004180: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
-00004190: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-000041a0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-000041b0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000041c0: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-000041d0: 275d 203d 2072 6570 6c79 5f70 6172 616d  '] = reply_param
-000041e0: 6574 6572 732e 746f 5f6a 736f 6e28 290a  eters.to_json().
-000041f0: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-00004200: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00004210: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
-00004220: 656f 7574 0a20 2020 2069 6620 7072 6f74  eout.    if prot
-00004230: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
-00004240: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00004250: 2070 6179 6c6f 6164 5b27 7072 6f74 6563   payload['protec
-00004260: 745f 636f 6e74 656e 7427 5d20 3d20 7072  t_content'] = pr
-00004270: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
-00004280: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-00004290: 6561 645f 6964 2069 7320 6e6f 7420 4e6f  ead_id is not No
-000042a0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000042b0: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
-000042c0: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
-000042d0: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
-000042e0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-000042f0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00004300: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00004310: 7061 796c 6f61 6429 0a0a 0a64 6566 2073  payload)...def s
-00004320: 656e 645f 6469 6365 280a 2020 2020 2020  end_dice(.      
-00004330: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
-00004340: 2c0a 2020 2020 2020 2020 656d 6f6a 693d  ,.        emoji=
-00004350: 4e6f 6e65 2c20 6469 7361 626c 655f 6e6f  None, disable_no
-00004360: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00004370: 0a20 2020 2020 2020 2072 6570 6c79 5f6d  .        reply_m
-00004380: 6172 6b75 703d 4e6f 6e65 2c20 7469 6d65  arkup=None, time
-00004390: 6f75 743d 4e6f 6e65 2c20 7072 6f74 6563  out=None, protec
-000043a0: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
-000043b0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-000043c0: 643d 4e6f 6e65 2c20 7265 706c 795f 7061  d=None, reply_pa
-000043d0: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
-000043e0: 2020 2020 2020 2062 7573 696e 6573 735f         business_
-000043f0: 636f 6e6e 6563 7469 6f6e 5f69 643d 4e6f  connection_id=No
-00004400: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00004410: 7572 6c20 3d20 7227 7365 6e64 4469 6365  url = r'sendDice
-00004420: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00004430: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-00004440: 5f69 647d 0a20 2020 2069 6620 656d 6f6a  _id}.    if emoj
-00004450: 693a 0a20 2020 2020 2020 2070 6179 6c6f  i:.        paylo
-00004460: 6164 5b27 656d 6f6a 6927 5d20 3d20 656d  ad['emoji'] = em
-00004470: 6f6a 690a 2020 2020 6966 2064 6973 6162  oji.    if disab
-00004480: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
-00004490: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000044a0: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
-000044b0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-000044c0: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
-000044d0: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
-000044e0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-000044f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004500: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
-00004510: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
-00004520: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-00004530: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-00004540: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004550: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00004560: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
-00004570: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-00004580: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00004590: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
-000045a0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
-000045b0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-000045c0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-000045d0: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
-000045e0: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
-000045f0: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
-00004600: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00004610: 640a 2020 2020 6966 2072 6570 6c79 5f70  d.    if reply_p
-00004620: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
-00004630: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00004640: 6179 6c6f 6164 5b27 7265 706c 795f 7061  ayload['reply_pa
-00004650: 7261 6d65 7465 7273 275d 203d 2072 6570  rameters'] = rep
-00004660: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
-00004670: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
-00004680: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-00004690: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
-000046a0: 6179 6c6f 6164 5b27 6275 7369 6e65 7373  ayload['business
-000046b0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 275d  _connection_id']
-000046c0: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
-000046d0: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
-000046e0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-000046f0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00004700: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00004710: 6c6f 6164 290a 0a0a 6465 6620 7365 6e64  load)...def send
-00004720: 5f70 686f 746f 280a 2020 2020 2020 2020  _photo(.        
-00004730: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00004740: 7068 6f74 6f2c 0a20 2020 2020 2020 2063  photo,.        c
-00004750: 6170 7469 6f6e 3d4e 6f6e 652c 2072 6570  aption=None, rep
-00004760: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-00004770: 2020 2020 2020 2020 7061 7273 655f 6d6f          parse_mo
-00004780: 6465 3d4e 6f6e 652c 2064 6973 6162 6c65  de=None, disable
-00004790: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
-000047a0: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
-000047b0: 2c0a 2020 2020 2020 2020 6361 7074 696f  ,.        captio
-000047c0: 6e5f 656e 7469 7469 6573 3d4e 6f6e 652c  n_entities=None,
-000047d0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-000047e0: 3d4e 6f6e 652c 0a20 2020 2020 2020 206d  =None,.        m
-000047f0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00004800: 3d4e 6f6e 652c 2068 6173 5f73 706f 696c  =None, has_spoil
-00004810: 6572 3d4e 6f6e 652c 2072 6570 6c79 5f70  er=None, reply_p
-00004820: 6172 616d 6574 6572 733d 4e6f 6e65 2c20  arameters=None, 
-00004830: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00004840: 696f 6e5f 6964 3d4e 6f6e 6529 3a0a 2020  ion_id=None):.  
-00004850: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00004860: 2773 656e 6450 686f 746f 270a 2020 2020  'sendPhoto'.    
-00004870: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-00004880: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
-00004890: 2020 2066 696c 6573 203d 204e 6f6e 650a     files = None.
-000048a0: 2020 2020 6966 2075 7469 6c2e 6973 5f73      if util.is_s
-000048b0: 7472 696e 6728 7068 6f74 6f29 3a0a 2020  tring(photo):.  
-000048c0: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-000048d0: 686f 746f 275d 203d 2070 686f 746f 0a20  hoto'] = photo. 
-000048e0: 2020 2065 6c69 6620 7574 696c 2e69 735f     elif util.is_
-000048f0: 7069 6c5f 696d 6167 6528 7068 6f74 6f29  pil_image(photo)
-00004900: 3a0a 2020 2020 2020 2020 6669 6c65 7320  :.        files 
-00004910: 3d20 7b27 7068 6f74 6f27 3a20 7574 696c  = {'photo': util
-00004920: 2e70 696c 5f69 6d61 6765 5f74 6f5f 6669  .pil_image_to_fi
-00004930: 6c65 2870 686f 746f 297d 0a20 2020 2065  le(photo)}.    e
-00004940: 6c73 653a 0a20 2020 2020 2020 2066 696c  lse:.        fil
-00004950: 6573 203d 207b 2770 686f 746f 273a 2070  es = {'photo': p
-00004960: 686f 746f 7d0a 2020 2020 6966 2063 6170  hoto}.    if cap
-00004970: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
-00004980: 796c 6f61 645b 2763 6170 7469 6f6e 275d  yload['caption']
-00004990: 203d 2063 6170 7469 6f6e 0a20 2020 2069   = caption.    i
-000049a0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-000049b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000049c0: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
-000049d0: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
-000049e0: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-000049f0: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
-00004a00: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00004a10: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
-00004a20: 203d 2070 6172 7365 5f6d 6f64 650a 2020   = parse_mode.  
-00004a30: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
-00004a40: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
-00004a50: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00004a60: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
-00004a70: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
-00004a80: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00004a90: 6174 696f 6e0a 2020 2020 6966 2074 696d  ation.    if tim
-00004aa0: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
-00004ab0: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
-00004ac0: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
-00004ad0: 6620 6361 7074 696f 6e5f 656e 7469 7469  f caption_entiti
-00004ae0: 6573 3a0a 2020 2020 2020 2020 7061 796c  es:.        payl
-00004af0: 6f61 645b 2763 6170 7469 6f6e 5f65 6e74  oad['caption_ent
-00004b00: 6974 6965 7327 5d20 3d20 6a73 6f6e 2e64  ities'] = json.d
-00004b10: 756d 7073 2874 7970 6573 2e4d 6573 7361  umps(types.Messa
-00004b20: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
-00004b30: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
-00004b40: 6e5f 656e 7469 7469 6573 2929 0a20 2020  n_entities)).   
-00004b50: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
-00004b60: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
-00004b70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004b80: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
-00004b90: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
-00004ba0: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
-00004bb0: 7361 6765 5f74 6872 6561 645f 6964 2069  sage_thread_id i
-00004bc0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00004bd0: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
-00004be0: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
-00004bf0: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00004c00: 645f 6964 0a20 2020 2069 6620 6861 735f  d_id.    if has_
-00004c10: 7370 6f69 6c65 7220 6973 206e 6f74 204e  spoiler is not N
-00004c20: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00004c30: 6c6f 6164 5b27 6861 735f 7370 6f69 6c65  load['has_spoile
-00004c40: 7227 5d20 3d20 6861 735f 7370 6f69 6c65  r'] = has_spoile
-00004c50: 720a 2020 2020 6966 2072 6570 6c79 5f70  r.    if reply_p
-00004c60: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
-00004c70: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00004c80: 6179 6c6f 6164 5b27 7265 706c 795f 7061  ayload['reply_pa
-00004c90: 7261 6d65 7465 7273 275d 203d 2072 6570  rameters'] = rep
-00004ca0: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
-00004cb0: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
-00004cc0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-00004cd0: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
-00004ce0: 6179 6c6f 6164 5b27 6275 7369 6e65 7373  ayload['business
-00004cf0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 275d  _connection_id']
-00004d00: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
-00004d10: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
-00004d20: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00004d30: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00004d40: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00004d50: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00004d60: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
-00004d70: 290a 0a0a 6465 6620 7365 6e64 5f6d 6564  )...def send_med
-00004d80: 6961 5f67 726f 7570 280a 2020 2020 2020  ia_group(.      
-00004d90: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
-00004da0: 2c20 6d65 6469 612c 0a20 2020 2020 2020  , media,.       
-00004db0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00004dc0: 6174 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ation=None,.    
-00004dd0: 2020 2020 7469 6d65 6f75 743d 4e6f 6e65      timeout=None
-00004de0: 2c20 7072 6f74 6563 745f 636f 6e74 656e  , protect_conten
-00004df0: 743d 4e6f 6e65 2c20 6d65 7373 6167 655f  t=None, message_
-00004e00: 7468 7265 6164 5f69 643d 4e6f 6e65 2c20  thread_id=None, 
-00004e10: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00004e20: 3d4e 6f6e 652c 2062 7573 696e 6573 735f  =None, business_
-00004e30: 636f 6e6e 6563 7469 6f6e 5f69 643d 4e6f  connection_id=No
-00004e40: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00004e50: 7572 6c20 3d20 7227 7365 6e64 4d65 6469  url = r'sendMedi
-00004e60: 6147 726f 7570 270a 2020 2020 6d65 6469  aGroup'.    medi
-00004e70: 615f 6a73 6f6e 2c20 6669 6c65 7320 3d20  a_json, files = 
-00004e80: 636f 6e76 6572 745f 696e 7075 745f 6d65  convert_input_me
-00004e90: 6469 615f 6172 7261 7928 6d65 6469 6129  dia_array(media)
-00004ea0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00004eb0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-00004ec0: 6964 2c20 276d 6564 6961 273a 206d 6564  id, 'media': med
-00004ed0: 6961 5f6a 736f 6e7d 0a20 2020 2069 6620  ia_json}.    if 
-00004ee0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00004ef0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-00004f00: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00004f10: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
-00004f20: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
-00004f30: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00004f40: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-00004f50: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004f60: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00004f70: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
-00004f80: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-00004f90: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00004fa0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
-00004fb0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
-00004fc0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-00004fd0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-00004fe0: 7265 6164 5f69 6420 6973 206e 6f74 204e  read_id is not N
-00004ff0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00005000: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
-00005010: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
-00005020: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
-00005030: 2020 6966 2072 6570 6c79 5f70 6172 616d    if reply_param
-00005040: 6574 6572 7320 6973 206e 6f74 204e 6f6e  eters is not Non
-00005050: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00005060: 6164 5b27 7265 706c 795f 7061 7261 6d65  ad['reply_parame
-00005070: 7465 7273 275d 203d 2072 6570 6c79 5f70  ters'] = reply_p
-00005080: 6172 616d 6574 6572 732e 746f 5f6a 736f  arameters.to_jso
-00005090: 6e28 290a 2020 2020 6966 2062 7573 696e  n().    if busin
-000050a0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-000050b0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-000050c0: 6164 5b27 6275 7369 6e65 7373 5f63 6f6e  ad['business_con
-000050d0: 6e65 6374 696f 6e5f 6964 275d 203d 2062  nection_id'] = b
-000050e0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-000050f0: 6f6e 5f69 640a 2020 2020 7265 7475 726e  on_id.    return
-00005100: 205f 6d61 6b65 5f72 6571 7565 7374 280a   _make_request(.
-00005110: 2020 2020 2020 2020 746f 6b65 6e2c 206d          token, m
-00005120: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00005130: 733d 7061 796c 6f61 642c 0a20 2020 2020  s=payload,.     
-00005140: 2020 206d 6574 686f 643d 2770 6f73 7427     method='post'
-00005150: 2069 6620 6669 6c65 7320 656c 7365 2027   if files else '
-00005160: 6765 7427 2c0a 2020 2020 2020 2020 6669  get',.        fi
-00005170: 6c65 733d 6669 6c65 7320 6966 2066 696c  les=files if fil
-00005180: 6573 2065 6c73 6520 4e6f 6e65 290a 0a0a  es else None)...
-00005190: 6465 6620 7365 6e64 5f6c 6f63 6174 696f  def send_locatio
-000051a0: 6e28 0a20 2020 2020 2020 2074 6f6b 656e  n(.        token
-000051b0: 2c20 6368 6174 5f69 642c 206c 6174 6974  , chat_id, latit
-000051c0: 7564 652c 206c 6f6e 6769 7475 6465 2c0a  ude, longitude,.
-000051d0: 2020 2020 2020 2020 6c69 7665 5f70 6572          live_per
-000051e0: 696f 643d 4e6f 6e65 2c0a 2020 2020 2020  iod=None,.      
-000051f0: 2020 7265 706c 795f 6d61 726b 7570 3d4e    reply_markup=N
-00005200: 6f6e 652c 2064 6973 6162 6c65 5f6e 6f74  one, disable_not
-00005210: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c0a  ification=None,.
-00005220: 2020 2020 2020 2020 7469 6d65 6f75 743d          timeout=
-00005230: 4e6f 6e65 2c20 686f 7269 7a6f 6e74 616c  None, horizontal
-00005240: 5f61 6363 7572 6163 793d 4e6f 6e65 2c20  _accuracy=None, 
-00005250: 6865 6164 696e 673d 4e6f 6e65 2c0a 2020  heading=None,.  
-00005260: 2020 2020 2020 7072 6f78 696d 6974 795f        proximity_
-00005270: 616c 6572 745f 7261 6469 7573 3d4e 6f6e  alert_radius=Non
-00005280: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-00005290: 6e74 3d4e 6f6e 652c 0a20 2020 2020 2020  nt=None,.       
-000052a0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-000052b0: 6964 3d4e 6f6e 652c 2072 6570 6c79 5f70  id=None, reply_p
-000052c0: 6172 616d 6574 6572 733d 4e6f 6e65 2c20  arameters=None, 
-000052d0: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-000052e0: 696f 6e5f 6964 3d4e 6f6e 6529 3a0a 2020  ion_id=None):.  
-000052f0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00005300: 2773 656e 644c 6f63 6174 696f 6e27 0a20  'sendLocation'. 
-00005310: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-00005320: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-00005330: 2c20 276c 6174 6974 7564 6527 3a20 6c61  , 'latitude': la
-00005340: 7469 7475 6465 2c20 276c 6f6e 6769 7475  titude, 'longitu
-00005350: 6465 273a 206c 6f6e 6769 7475 6465 7d0a  de': longitude}.
-00005360: 2020 2020 6966 206c 6976 655f 7065 7269      if live_peri
-00005370: 6f64 3a0a 2020 2020 2020 2020 7061 796c  od:.        payl
-00005380: 6f61 645b 276c 6976 655f 7065 7269 6f64  oad['live_period
-00005390: 275d 203d 206c 6976 655f 7065 7269 6f64  '] = live_period
-000053a0: 0a20 2020 2069 6620 686f 7269 7a6f 6e74  .    if horizont
-000053b0: 616c 5f61 6363 7572 6163 793a 0a20 2020  al_accuracy:.   
-000053c0: 2020 2020 2070 6179 6c6f 6164 5b27 686f       payload['ho
-000053d0: 7269 7a6f 6e74 616c 5f61 6363 7572 6163  rizontal_accurac
-000053e0: 7927 5d20 3d20 686f 7269 7a6f 6e74 616c  y'] = horizontal
-000053f0: 5f61 6363 7572 6163 790a 2020 2020 6966  _accuracy.    if
-00005400: 2068 6561 6469 6e67 3a0a 2020 2020 2020   heading:.      
-00005410: 2020 7061 796c 6f61 645b 2768 6561 6469    payload['headi
-00005420: 6e67 275d 203d 2068 6561 6469 6e67 0a20  ng'] = heading. 
-00005430: 2020 2069 6620 7072 6f78 696d 6974 795f     if proximity_
-00005440: 616c 6572 745f 7261 6469 7573 3a0a 2020  alert_radius:.  
-00005450: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-00005460: 726f 7869 6d69 7479 5f61 6c65 7274 5f72  roximity_alert_r
-00005470: 6164 6975 7327 5d20 3d20 7072 6f78 696d  adius'] = proxim
-00005480: 6974 795f 616c 6572 745f 7261 6469 7573  ity_alert_radius
-00005490: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-000054a0: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-000054b0: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-000054c0: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
-000054d0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-000054e0: 726b 7570 290a 2020 2020 6966 2064 6973  rkup).    if dis
-000054f0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00005500: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00005510: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005520: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00005530: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00005540: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00005550: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-00005560: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00005570: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00005580: 7574 0a20 2020 2069 6620 7072 6f74 6563  ut.    if protec
-00005590: 745f 636f 6e74 656e 7420 6973 206e 6f74  t_content is not
-000055a0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000055b0: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
-000055c0: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
-000055d0: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
-000055e0: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
-000055f0: 645f 6964 2069 7320 6e6f 7420 4e6f 6e65  d_id is not None
-00005600: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005610: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
-00005620: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
-00005630: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
-00005640: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
-00005650: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
-00005660: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00005670: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
-00005680: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
-00005690: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
-000056a0: 0a20 2020 2069 6620 6275 7369 6e65 7373  .    if business
-000056b0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3a0a  _connection_id:.
-000056c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000056d0: 2762 7573 696e 6573 735f 636f 6e6e 6563  'business_connec
-000056e0: 7469 6f6e 5f69 6427 5d20 3d20 6275 7369  tion_id'] = busi
-000056f0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00005700: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
-00005710: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00005720: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00005730: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-00005740: 0a64 6566 2065 6469 745f 6d65 7373 6167  .def edit_messag
-00005750: 655f 6c69 7665 5f6c 6f63 6174 696f 6e28  e_live_location(
-00005760: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
-00005770: 6c61 7469 7475 6465 2c20 6c6f 6e67 6974  latitude, longit
-00005780: 7564 652c 2063 6861 745f 6964 3d4e 6f6e  ude, chat_id=Non
-00005790: 652c 206d 6573 7361 6765 5f69 643d 4e6f  e, message_id=No
-000057a0: 6e65 2c0a 2020 2020 2020 2020 696e 6c69  ne,.        inli
-000057b0: 6e65 5f6d 6573 7361 6765 5f69 643d 4e6f  ne_message_id=No
-000057c0: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
-000057d0: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
-000057e0: 6f6e 652c 0a20 2020 2020 2020 2068 6f72  one,.        hor
-000057f0: 697a 6f6e 7461 6c5f 6163 6375 7261 6379  izontal_accuracy
-00005800: 3d4e 6f6e 652c 2068 6561 6469 6e67 3d4e  =None, heading=N
-00005810: 6f6e 652c 2070 726f 7869 6d69 7479 5f61  one, proximity_a
-00005820: 6c65 7274 5f72 6164 6975 733d 4e6f 6e65  lert_radius=None
-00005830: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00005840: 6c20 3d20 7227 6564 6974 4d65 7373 6167  l = r'editMessag
-00005850: 654c 6976 654c 6f63 6174 696f 6e27 0a20  eLiveLocation'. 
-00005860: 2020 2070 6179 6c6f 6164 203d 207b 276c     payload = {'l
-00005870: 6174 6974 7564 6527 3a20 6c61 7469 7475  atitude': latitu
-00005880: 6465 2c20 276c 6f6e 6769 7475 6465 273a  de, 'longitude':
-00005890: 206c 6f6e 6769 7475 6465 7d0a 2020 2020   longitude}.    
-000058a0: 6966 2063 6861 745f 6964 3a0a 2020 2020  if chat_id:.    
-000058b0: 2020 2020 7061 796c 6f61 645b 2763 6861      payload['cha
-000058c0: 745f 6964 275d 203d 2063 6861 745f 6964  t_id'] = chat_id
-000058d0: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
-000058e0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-000058f0: 6f61 645b 276d 6573 7361 6765 5f69 6427  oad['message_id'
-00005900: 5d20 3d20 6d65 7373 6167 655f 6964 0a20  ] = message_id. 
-00005910: 2020 2069 6620 686f 7269 7a6f 6e74 616c     if horizontal
-00005920: 5f61 6363 7572 6163 793a 0a20 2020 2020  _accuracy:.     
-00005930: 2020 2070 6179 6c6f 6164 5b27 686f 7269     payload['hori
-00005940: 7a6f 6e74 616c 5f61 6363 7572 6163 7927  zontal_accuracy'
-00005950: 5d20 3d20 686f 7269 7a6f 6e74 616c 5f61  ] = horizontal_a
-00005960: 6363 7572 6163 790a 2020 2020 6966 2068  ccuracy.    if h
-00005970: 6561 6469 6e67 3a0a 2020 2020 2020 2020  eading:.        
-00005980: 7061 796c 6f61 645b 2768 6561 6469 6e67  payload['heading
-00005990: 275d 203d 2068 6561 6469 6e67 0a20 2020  '] = heading.   
-000059a0: 2069 6620 7072 6f78 696d 6974 795f 616c   if proximity_al
-000059b0: 6572 745f 7261 6469 7573 3a0a 2020 2020  ert_radius:.    
-000059c0: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
-000059d0: 7869 6d69 7479 5f61 6c65 7274 5f72 6164  ximity_alert_rad
-000059e0: 6975 7327 5d20 3d20 7072 6f78 696d 6974  ius'] = proximit
-000059f0: 795f 616c 6572 745f 7261 6469 7573 0a20  y_alert_radius. 
-00005a00: 2020 2069 6620 696e 6c69 6e65 5f6d 6573     if inline_mes
-00005a10: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
-00005a20: 2070 6179 6c6f 6164 5b27 696e 6c69 6e65   payload['inline
-00005a30: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
-00005a40: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-00005a50: 640a 2020 2020 6966 2072 6570 6c79 5f6d  d.    if reply_m
-00005a60: 6172 6b75 703a 0a20 2020 2020 2020 2070  arkup:.        p
-00005a70: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
-00005a80: 726b 7570 275d 203d 205f 636f 6e76 6572  rkup'] = _conver
-00005a90: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
-00005aa0: 6172 6b75 7029 0a20 2020 2069 6620 7469  arkup).    if ti
-00005ab0: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-00005ac0: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
-00005ad0: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-00005ae0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-00005af0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00005b00: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00005b10: 6179 6c6f 6164 290a 0a0a 6465 6620 7374  ayload)...def st
-00005b20: 6f70 5f6d 6573 7361 6765 5f6c 6976 655f  op_message_live_
-00005b30: 6c6f 6361 7469 6f6e 280a 2020 2020 2020  location(.      
-00005b40: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
-00005b50: 3d4e 6f6e 652c 206d 6573 7361 6765 5f69  =None, message_i
-00005b60: 643d 4e6f 6e65 2c0a 2020 2020 2020 2020  d=None,.        
-00005b70: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-00005b80: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-00005b90: 726b 7570 3d4e 6f6e 652c 2074 696d 656f  rkup=None, timeo
-00005ba0: 7574 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ut=None):.    me
-00005bb0: 7468 6f64 5f75 726c 203d 2072 2773 746f  thod_url = r'sto
-00005bc0: 704d 6573 7361 6765 4c69 7665 4c6f 6361  pMessageLiveLoca
-00005bd0: 7469 6f6e 270a 2020 2020 7061 796c 6f61  tion'.    payloa
-00005be0: 6420 3d20 7b7d 0a20 2020 2069 6620 6368  d = {}.    if ch
-00005bf0: 6174 5f69 643a 0a20 2020 2020 2020 2070  at_id:.        p
-00005c00: 6179 6c6f 6164 5b27 6368 6174 5f69 6427  ayload['chat_id'
-00005c10: 5d20 3d20 6368 6174 5f69 640a 2020 2020  ] = chat_id.    
-00005c20: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
-00005c30: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005c40: 6d65 7373 6167 655f 6964 275d 203d 206d  message_id'] = m
-00005c50: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-00005c60: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-00005c70: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00005c80: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
-00005c90: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
-00005ca0: 655f 6d65 7373 6167 655f 6964 0a20 2020  e_message_id.   
-00005cb0: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
-00005cc0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005cd0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
-00005ce0: 5d20 3d20 5f63 6f6e 7665 7274 5f6d 6172  ] = _convert_mar
-00005cf0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-00005d00: 290a 2020 2020 6966 2074 696d 656f 7574  ).    if timeout
-00005d10: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005d20: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-00005d30: 696d 656f 7574 0a20 2020 2072 6574 7572  imeout.    retur
-00005d40: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00005d50: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00005d60: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00005d70: 6429 0a0a 0a64 6566 2073 656e 645f 7665  d)...def send_ve
-00005d80: 6e75 6528 0a20 2020 2020 2020 2074 6f6b  nue(.        tok
-00005d90: 656e 2c20 6368 6174 5f69 642c 206c 6174  en, chat_id, lat
-00005da0: 6974 7564 652c 206c 6f6e 6769 7475 6465  itude, longitude
-00005db0: 2c20 7469 746c 652c 2061 6464 7265 7373  , title, address
-00005dc0: 2c0a 2020 2020 2020 2020 666f 7572 7371  ,.        foursq
-00005dd0: 7561 7265 5f69 643d 4e6f 6e65 2c20 666f  uare_id=None, fo
-00005de0: 7572 7371 7561 7265 5f74 7970 653d 4e6f  ursquare_type=No
-00005df0: 6e65 2c20 6469 7361 626c 655f 6e6f 7469  ne, disable_noti
-00005e00: 6669 6361 7469 6f6e 3d4e 6f6e 652c 0a20  fication=None,. 
-00005e10: 2020 2020 2020 2072 6570 6c79 5f6d 6172         reply_mar
-00005e20: 6b75 703d 4e6f 6e65 2c20 7469 6d65 6f75  kup=None, timeou
-00005e30: 743d 4e6f 6e65 2c20 676f 6f67 6c65 5f70  t=None, google_p
-00005e40: 6c61 6365 5f69 643d 4e6f 6e65 2c0a 2020  lace_id=None,.  
-00005e50: 2020 2020 2020 676f 6f67 6c65 5f70 6c61        google_pla
-00005e60: 6365 5f74 7970 653d 4e6f 6e65 2c20 7072  ce_type=None, pr
-00005e70: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
-00005e80: 6e65 2c20 6d65 7373 6167 655f 7468 7265  ne, message_thre
-00005e90: 6164 5f69 643d 4e6f 6e65 2c20 7265 706c  ad_id=None, repl
-00005ea0: 795f 7061 7261 6d65 7465 7273 3d4e 6f6e  y_parameters=Non
-00005eb0: 652c 0a20 2020 2020 2020 2062 7573 696e  e,.        busin
-00005ec0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00005ed0: 643d 4e6f 6e65 293a 0a20 2020 206d 6574  d=None):.    met
-00005ee0: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
-00005ef0: 5665 6e75 6527 0a20 2020 2070 6179 6c6f  Venue'.    paylo
-00005f00: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00005f10: 2063 6861 745f 6964 2c20 276c 6174 6974   chat_id, 'latit
-00005f20: 7564 6527 3a20 6c61 7469 7475 6465 2c20  ude': latitude, 
-00005f30: 276c 6f6e 6769 7475 6465 273a 206c 6f6e  'longitude': lon
-00005f40: 6769 7475 6465 2c20 2774 6974 6c65 273a  gitude, 'title':
-00005f50: 2074 6974 6c65 2c20 2761 6464 7265 7373   title, 'address
-00005f60: 273a 2061 6464 7265 7373 7d0a 2020 2020  ': address}.    
-00005f70: 6966 2066 6f75 7273 7175 6172 655f 6964  if foursquare_id
-00005f80: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005f90: 645b 2766 6f75 7273 7175 6172 655f 6964  d['foursquare_id
-00005fa0: 275d 203d 2066 6f75 7273 7175 6172 655f  '] = foursquare_
-00005fb0: 6964 0a20 2020 2069 6620 666f 7572 7371  id.    if foursq
-00005fc0: 7561 7265 5f74 7970 653a 0a20 2020 2020  uare_type:.     
-00005fd0: 2020 2070 6179 6c6f 6164 5b27 666f 7572     payload['four
-00005fe0: 7371 7561 7265 5f74 7970 6527 5d20 3d20  square_type'] = 
-00005ff0: 666f 7572 7371 7561 7265 5f74 7970 650a  foursquare_type.
-00006000: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
-00006010: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
-00006020: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00006030: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
-00006040: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
-00006050: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
-00006060: 6963 6174 696f 6e0a 2020 2020 6966 2072  ication.    if r
-00006070: 6570 6c79 5f6d 6172 6b75 703a 0a20 2020  eply_markup:.   
-00006080: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
-00006090: 706c 795f 6d61 726b 7570 275d 203d 205f  ply_markup'] = _
-000060a0: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
-000060b0: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
-000060c0: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
-000060d0: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
-000060e0: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
-000060f0: 740a 2020 2020 6966 2067 6f6f 676c 655f  t.    if google_
-00006100: 706c 6163 655f 6964 3a0a 2020 2020 2020  place_id:.      
-00006110: 2020 7061 796c 6f61 645b 2767 6f6f 676c    payload['googl
-00006120: 655f 706c 6163 655f 6964 275d 203d 2067  e_place_id'] = g
-00006130: 6f6f 676c 655f 706c 6163 655f 6964 0a20  oogle_place_id. 
-00006140: 2020 2069 6620 676f 6f67 6c65 5f70 6c61     if google_pla
-00006150: 6365 5f74 7970 653a 0a20 2020 2020 2020  ce_type:.       
-00006160: 2070 6179 6c6f 6164 5b27 676f 6f67 6c65   payload['google
-00006170: 5f70 6c61 6365 5f74 7970 6527 5d20 3d20  _place_type'] = 
-00006180: 676f 6f67 6c65 5f70 6c61 6365 5f74 7970  google_place_typ
-00006190: 650a 2020 2020 6966 2070 726f 7465 6374  e.    if protect
-000061a0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
-000061b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000061c0: 796c 6f61 645b 2770 726f 7465 6374 5f63  yload['protect_c
-000061d0: 6f6e 7465 6e74 275d 203d 2070 726f 7465  ontent'] = prote
-000061e0: 6374 5f63 6f6e 7465 6e74 0a20 2020 2069  ct_content.    i
-000061f0: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
-00006200: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
-00006210: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006220: 5b27 6d65 7373 6167 655f 7468 7265 6164  ['message_thread
-00006230: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
-00006240: 7468 7265 6164 5f69 640a 2020 2020 6966  thread_id.    if
-00006250: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
-00006260: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00006270: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00006280: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00006290: 275d 203d 2072 6570 6c79 5f70 6172 616d  '] = reply_param
-000062a0: 6574 6572 732e 746f 5f6a 736f 6e28 290a  eters.to_json().
-000062b0: 2020 2020 6966 2062 7573 696e 6573 735f      if business_
-000062c0: 636f 6e6e 6563 7469 6f6e 5f69 643a 0a20  connection_id:. 
-000062d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000062e0: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-000062f0: 696f 6e5f 6964 275d 203d 2062 7573 696e  ion_id'] = busin
-00006300: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00006310: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
-00006320: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00006330: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00006340: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00006350: 6465 6620 7365 6e64 5f63 6f6e 7461 6374  def send_contact
-00006360: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
-00006370: 2063 6861 745f 6964 2c20 7068 6f6e 655f   chat_id, phone_
-00006380: 6e75 6d62 6572 2c20 6669 7273 745f 6e61  number, first_na
-00006390: 6d65 2c20 6c61 7374 5f6e 616d 653d 4e6f  me, last_name=No
-000063a0: 6e65 2c20 7663 6172 643d 4e6f 6e65 2c0a  ne, vcard=None,.
-000063b0: 2020 2020 2020 2020 6469 7361 626c 655f          disable_
-000063c0: 6e6f 7469 6669 6361 7469 6f6e 3d4e 6f6e  notification=Non
-000063d0: 652c 2072 6570 6c79 5f6d 6172 6b75 703d  e, reply_markup=
-000063e0: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-000063f0: 6e65 2c0a 2020 2020 2020 2020 7072 6f74  ne,.        prot
-00006400: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
-00006410: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
-00006420: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
-00006430: 7061 7261 6d65 7465 7273 3d4e 6f6e 652c  parameters=None,
-00006440: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00006450: 7469 6f6e 5f69 643d 4e6f 6e65 293a 0a20  tion_id=None):. 
-00006460: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00006470: 7227 7365 6e64 436f 6e74 6163 7427 0a20  r'sendContact'. 
-00006480: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-00006490: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-000064a0: 2c20 2770 686f 6e65 5f6e 756d 6265 7227  , 'phone_number'
-000064b0: 3a20 7068 6f6e 655f 6e75 6d62 6572 2c20  : phone_number, 
-000064c0: 2766 6972 7374 5f6e 616d 6527 3a20 6669  'first_name': fi
-000064d0: 7273 745f 6e61 6d65 7d0a 2020 2020 6966  rst_name}.    if
-000064e0: 206c 6173 745f 6e61 6d65 3a0a 2020 2020   last_name:.    
-000064f0: 2020 2020 7061 796c 6f61 645b 276c 6173      payload['las
-00006500: 745f 6e61 6d65 275d 203d 206c 6173 745f  t_name'] = last_
-00006510: 6e61 6d65 0a20 2020 2069 6620 7663 6172  name.    if vcar
-00006520: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00006530: 6164 5b27 7663 6172 6427 5d20 3d20 7663  ad['vcard'] = vc
-00006540: 6172 640a 2020 2020 6966 2064 6973 6162  ard.    if disab
-00006550: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
-00006560: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00006570: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
-00006580: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00006590: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
-000065a0: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
-000065b0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-000065c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000065d0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
-000065e0: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
-000065f0: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-00006600: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-00006610: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006620: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00006630: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
-00006640: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-00006650: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00006660: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
-00006670: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
-00006680: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-00006690: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-000066a0: 7265 6164 5f69 6420 6973 206e 6f74 204e  read_id is not N
-000066b0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-000066c0: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
-000066d0: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
-000066e0: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
-000066f0: 2020 6966 2072 6570 6c79 5f70 6172 616d    if reply_param
-00006700: 6574 6572 7320 6973 206e 6f74 204e 6f6e  eters is not Non
-00006710: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00006720: 6164 5b27 7265 706c 795f 7061 7261 6d65  ad['reply_parame
-00006730: 7465 7273 275d 203d 2072 6570 6c79 5f70  ters'] = reply_p
-00006740: 6172 616d 6574 6572 732e 746f 5f6a 736f  arameters.to_jso
-00006750: 6e28 290a 2020 2020 6966 2062 7573 696e  n().    if busin
-00006760: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00006770: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00006780: 6164 5b27 6275 7369 6e65 7373 5f63 6f6e  ad['business_con
-00006790: 6e65 6374 696f 6e5f 6964 275d 203d 2062  nection_id'] = b
-000067a0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-000067b0: 6f6e 5f69 640a 0a20 2020 2072 6574 7572  on_id..    retur
-000067c0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-000067d0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-000067e0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-000067f0: 6429 0a0a 0a64 6566 2073 656e 645f 6368  d)...def send_ch
-00006800: 6174 5f61 6374 696f 6e28 746f 6b65 6e2c  at_action(token,
-00006810: 2063 6861 745f 6964 2c20 6163 7469 6f6e   chat_id, action
-00006820: 2c20 7469 6d65 6f75 743d 4e6f 6e65 2c20  , timeout=None, 
-00006830: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00006840: 643d 4e6f 6e65 2c20 6275 7369 6e65 7373  d=None, business
-00006850: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
-00006860: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
-00006870: 5f75 726c 203d 2072 2773 656e 6443 6861  _url = r'sendCha
-00006880: 7441 6374 696f 6e27 0a20 2020 2070 6179  tAction'.    pay
-00006890: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-000068a0: 273a 2063 6861 745f 6964 2c20 2761 6374  ': chat_id, 'act
-000068b0: 696f 6e27 3a20 6163 7469 6f6e 7d0a 2020  ion': action}.  
-000068c0: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-000068d0: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-000068e0: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-000068f0: 7574 0a20 2020 2069 6620 6d65 7373 6167  ut.    if messag
-00006900: 655f 7468 7265 6164 5f69 6420 6973 206e  e_thread_id is n
-00006910: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00006920: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
-00006930: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
-00006940: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00006950: 640a 2020 2020 6966 2062 7573 696e 6573  d.    if busines
-00006960: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
-00006970: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006980: 5b27 6275 7369 6e65 7373 5f63 6f6e 6e65  ['business_conne
-00006990: 6374 696f 6e5f 6964 275d 203d 2062 7573  ction_id'] = bus
-000069a0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-000069b0: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
-000069c0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-000069d0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-000069e0: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
-000069f0: 0a0a 6465 6620 7365 6e64 5f76 6964 656f  ..def send_video
-00006a00: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-00006a10: 2064 6174 612c 2064 7572 6174 696f 6e3d   data, duration=
-00006a20: 4e6f 6e65 2c20 6361 7074 696f 6e3d 4e6f  None, caption=No
-00006a30: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
-00006a40: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
-00006a50: 2020 2020 2020 7061 7273 655f 6d6f 6465        parse_mode
-00006a60: 3d4e 6f6e 652c 2073 7570 706f 7274 735f  =None, supports_
-00006a70: 7374 7265 616d 696e 673d 4e6f 6e65 2c20  streaming=None, 
-00006a80: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00006a90: 7469 6f6e 3d4e 6f6e 652c 2074 696d 656f  tion=None, timeo
-00006aa0: 7574 3d4e 6f6e 652c 0a20 2020 2020 2020  ut=None,.       
-00006ab0: 2020 2020 2020 2020 7468 756d 626e 6169          thumbnai
-00006ac0: 6c3d 4e6f 6e65 2c20 7769 6474 683d 4e6f  l=None, width=No
-00006ad0: 6e65 2c20 6865 6967 6874 3d4e 6f6e 652c  ne, height=None,
-00006ae0: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
-00006af0: 733d 4e6f 6e65 2c20 7072 6f74 6563 745f  s=None, protect_
-00006b00: 636f 6e74 656e 743d 4e6f 6e65 2c0a 2020  content=None,.  
-00006b10: 2020 2020 2020 2020 2020 2020 206d 6573               mes
-00006b20: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
-00006b30: 6f6e 652c 2068 6173 5f73 706f 696c 6572  one, has_spoiler
-00006b40: 3d4e 6f6e 652c 2072 6570 6c79 5f70 6172  =None, reply_par
-00006b50: 616d 6574 6572 733d 4e6f 6e65 2c20 6275  ameters=None, bu
-00006b60: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-00006b70: 6e5f 6964 3d4e 6f6e 6529 3a0a 2020 2020  n_id=None):.    
-00006b80: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-00006b90: 656e 6456 6964 656f 270a 2020 2020 7061  endVideo'.    pa
-00006ba0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00006bb0: 6427 3a20 6368 6174 5f69 647d 0a20 2020  d': chat_id}.   
-00006bc0: 2066 696c 6573 203d 204e 6f6e 650a 2020   files = None.  
-00006bd0: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00006be0: 5f73 7472 696e 6728 6461 7461 293a 0a20  _string(data):. 
-00006bf0: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-00006c00: 2776 6964 656f 273a 2064 6174 617d 0a20  'video': data}. 
-00006c10: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00006c20: 2070 6179 6c6f 6164 5b27 7669 6465 6f27   payload['video'
-00006c30: 5d20 3d20 6461 7461 0a20 2020 2069 6620  ] = data.    if 
-00006c40: 6475 7261 7469 6f6e 3a0a 2020 2020 2020  duration:.      
-00006c50: 2020 7061 796c 6f61 645b 2764 7572 6174    payload['durat
-00006c60: 696f 6e27 5d20 3d20 6475 7261 7469 6f6e  ion'] = duration
-00006c70: 0a20 2020 2069 6620 6361 7074 696f 6e3a  .    if caption:
-00006c80: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006c90: 5b27 6361 7074 696f 6e27 5d20 3d20 6361  ['caption'] = ca
-00006ca0: 7074 696f 6e0a 2020 2020 6966 2072 6570  ption.    if rep
-00006cb0: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-00006cc0: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-00006cd0: 795f 6d61 726b 7570 275d 203d 205f 636f  y_markup'] = _co
-00006ce0: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
-00006cf0: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
-00006d00: 6620 7061 7273 655f 6d6f 6465 3a0a 2020  f parse_mode:.  
-00006d10: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-00006d20: 6172 7365 5f6d 6f64 6527 5d20 3d20 7061  arse_mode'] = pa
-00006d30: 7273 655f 6d6f 6465 0a20 2020 2069 6620  rse_mode.    if 
-00006d40: 7375 7070 6f72 7473 5f73 7472 6561 6d69  supports_streami
-00006d50: 6e67 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ng is not None:.
-00006d60: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00006d70: 2773 7570 706f 7274 735f 7374 7265 616d  'supports_stream
-00006d80: 696e 6727 5d20 3d20 7375 7070 6f72 7473  ing'] = supports
-00006d90: 5f73 7472 6561 6d69 6e67 0a20 2020 2069  _streaming.    i
-00006da0: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-00006db0: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-00006dc0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00006dd0: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
-00006de0: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
-00006df0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00006e00: 6f6e 0a20 2020 2069 6620 7469 6d65 6f75  on.    if timeou
-00006e10: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00006e20: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
-00006e30: 7469 6d65 6f75 740a 2020 2020 6966 2074  timeout.    if t
-00006e40: 6875 6d62 6e61 696c 3a0a 2020 2020 2020  humbnail:.      
-00006e50: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00006e60: 5f73 7472 696e 6728 7468 756d 626e 6169  _string(thumbnai
-00006e70: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
-00006e80: 6966 2066 696c 6573 3a0a 2020 2020 2020  if files:.      
-00006e90: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
-00006ea0: 2774 6875 6d62 6e61 696c 275d 203d 2074  'thumbnail'] = t
-00006eb0: 6875 6d62 6e61 696c 0a20 2020 2020 2020  humbnail.       
-00006ec0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00006ed0: 2020 2020 2020 2020 2020 2066 696c 6573             files
-00006ee0: 203d 207b 2774 6875 6d62 6e61 696c 273a   = {'thumbnail':
-00006ef0: 2074 6875 6d62 6e61 696c 7d0a 2020 2020   thumbnail}.    
-00006f00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00006f10: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00006f20: 6875 6d62 6e61 696c 275d 203d 2074 6875  humbnail'] = thu
-00006f30: 6d62 6e61 696c 0a20 2020 2069 6620 7769  mbnail.    if wi
-00006f40: 6474 683a 0a20 2020 2020 2020 2070 6179  dth:.        pay
-00006f50: 6c6f 6164 5b27 7769 6474 6827 5d20 3d20  load['width'] = 
-00006f60: 7769 6474 680a 2020 2020 6966 2068 6569  width.    if hei
-00006f70: 6768 743a 0a20 2020 2020 2020 2070 6179  ght:.        pay
-00006f80: 6c6f 6164 5b27 6865 6967 6874 275d 203d  load['height'] =
-00006f90: 2068 6569 6768 740a 2020 2020 6966 2063   height.    if c
-00006fa0: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
-00006fb0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00006fc0: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
-00006fd0: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
-00006fe0: 7328 7479 7065 732e 4d65 7373 6167 6545  s(types.MessageE
-00006ff0: 6e74 6974 792e 746f 5f6c 6973 745f 6f66  ntity.to_list_of
-00007000: 5f64 6963 7473 2863 6170 7469 6f6e 5f65  _dicts(caption_e
-00007010: 6e74 6974 6965 7329 290a 2020 2020 6966  ntities)).    if
-00007020: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00007030: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00007040: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-00007050: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
-00007060: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00007070: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
-00007080: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
-00007090: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-000070a0: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
-000070b0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-000070c0: 6164 5f69 640a 2020 2020 6966 2068 6173  ad_id.    if has
-000070d0: 5f73 706f 696c 6572 2069 7320 6e6f 7420  _spoiler is not 
-000070e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000070f0: 796c 6f61 645b 2768 6173 5f73 706f 696c  yload['has_spoil
-00007100: 6572 275d 203d 2068 6173 5f73 706f 696c  er'] = has_spoil
-00007110: 6572 0a20 2020 2069 6620 7265 706c 795f  er.    if reply_
-00007120: 7061 7261 6d65 7465 7273 2069 7320 6e6f  parameters is no
-00007130: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00007140: 7061 796c 6f61 645b 2772 6570 6c79 5f70  payload['reply_p
-00007150: 6172 616d 6574 6572 7327 5d20 3d20 7265  arameters'] = re
-00007160: 706c 795f 7061 7261 6d65 7465 7273 2e74  ply_parameters.t
-00007170: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
-00007180: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-00007190: 696f 6e5f 6964 3a0a 2020 2020 2020 2020  ion_id:.        
-000071a0: 7061 796c 6f61 645b 2762 7573 696e 6573  payload['busines
-000071b0: 735f 636f 6e6e 6563 7469 6f6e 5f69 6427  s_connection_id'
-000071c0: 5d20 3d20 6275 7369 6e65 7373 5f63 6f6e  ] = business_con
-000071d0: 6e65 6374 696f 6e5f 6964 0a0a 2020 2020  nection_id..    
-000071e0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-000071f0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00007200: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00007210: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
-00007220: 6c65 732c 206d 6574 686f 643d 2770 6f73  les, method='pos
-00007230: 7427 290a 0a0a 6465 6620 7365 6e64 5f61  t')...def send_a
-00007240: 6e69 6d61 7469 6f6e 280a 2020 2020 2020  nimation(.      
-00007250: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
-00007260: 2c20 6461 7461 2c20 6475 7261 7469 6f6e  , data, duration
-00007270: 3d4e 6f6e 652c 2063 6170 7469 6f6e 3d4e  =None, caption=N
-00007280: 6f6e 652c 2072 6570 6c79 5f6d 6172 6b75  one, reply_marku
-00007290: 703d 4e6f 6e65 2c0a 2020 2020 2020 2020  p=None,.        
-000072a0: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
-000072b0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-000072c0: 6174 696f 6e3d 4e6f 6e65 2c20 7469 6d65  ation=None, time
-000072d0: 6f75 743d 4e6f 6e65 2c20 7468 756d 626e  out=None, thumbn
-000072e0: 6169 6c3d 4e6f 6e65 2c20 6361 7074 696f  ail=None, captio
-000072f0: 6e5f 656e 7469 7469 6573 3d4e 6f6e 652c  n_entities=None,
-00007300: 0a20 2020 2020 2020 2070 726f 7465 6374  .        protect
-00007310: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 2077  _content=None, w
-00007320: 6964 7468 3d4e 6f6e 652c 2068 6569 6768  idth=None, heigh
-00007330: 743d 4e6f 6e65 2c20 6d65 7373 6167 655f  t=None, message_
-00007340: 7468 7265 6164 5f69 643d 4e6f 6e65 2c20  thread_id=None, 
-00007350: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00007360: 3d4e 6f6e 652c 0a20 2020 2020 2020 2068  =None,.        h
-00007370: 6173 5f73 706f 696c 6572 3d4e 6f6e 652c  as_spoiler=None,
-00007380: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00007390: 7469 6f6e 5f69 643d 4e6f 6e65 293a 0a20  tion_id=None):. 
-000073a0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000073b0: 7227 7365 6e64 416e 696d 6174 696f 6e27  r'sendAnimation'
-000073c0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-000073d0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-000073e0: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
-000073f0: 4e6f 6e65 0a20 2020 2069 6620 6e6f 7420  None.    if not 
-00007400: 7574 696c 2e69 735f 7374 7269 6e67 2864  util.is_string(d
-00007410: 6174 6129 3a0a 2020 2020 2020 2020 6669  ata):.        fi
-00007420: 6c65 7320 3d20 7b27 616e 696d 6174 696f  les = {'animatio
-00007430: 6e27 3a20 6461 7461 7d0a 2020 2020 656c  n': data}.    el
-00007440: 7365 3a0a 2020 2020 2020 2020 7061 796c  se:.        payl
-00007450: 6f61 645b 2761 6e69 6d61 7469 6f6e 275d  oad['animation']
-00007460: 203d 2064 6174 610a 2020 2020 6966 2064   = data.    if d
-00007470: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
-00007480: 2070 6179 6c6f 6164 5b27 6475 7261 7469   payload['durati
-00007490: 6f6e 275d 203d 2064 7572 6174 696f 6e0a  on'] = duration.
-000074a0: 2020 2020 6966 2063 6170 7469 6f6e 3a0a      if caption:.
-000074b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000074c0: 2763 6170 7469 6f6e 275d 203d 2063 6170  'caption'] = cap
-000074d0: 7469 6f6e 0a20 2020 2069 6620 7265 706c  tion.    if repl
-000074e0: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-000074f0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-00007500: 5f6d 6172 6b75 7027 5d20 3d20 5f63 6f6e  _markup'] = _con
-00007510: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
-00007520: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
-00007530: 2070 6172 7365 5f6d 6f64 653a 0a20 2020   parse_mode:.   
-00007540: 2020 2020 2070 6179 6c6f 6164 5b27 7061       payload['pa
-00007550: 7273 655f 6d6f 6465 275d 203d 2070 6172  rse_mode'] = par
-00007560: 7365 5f6d 6f64 650a 2020 2020 6966 2064  se_mode.    if d
-00007570: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00007580: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
-00007590: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000075a0: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
-000075b0: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
-000075c0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0a  le_notification.
-000075d0: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-000075e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000075f0: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
-00007600: 656f 7574 0a20 2020 2069 6620 7468 756d  eout.    if thum
-00007610: 626e 6169 6c3a 0a20 2020 2020 2020 2069  bnail:.        i
-00007620: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
-00007630: 7269 6e67 2874 6875 6d62 6e61 696c 293a  ring(thumbnail):
-00007640: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00007650: 6669 6c65 733a 0a20 2020 2020 2020 2020  files:.         
-00007660: 2020 2020 2020 2066 696c 6573 5b27 7468         files['th
-00007670: 756d 626e 6169 6c27 5d20 3d20 7468 756d  umbnail'] = thum
-00007680: 626e 6169 6c0a 2020 2020 2020 2020 2020  bnail.          
-00007690: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000076a0: 2020 2020 2020 2020 6669 6c65 7320 3d20          files = 
-000076b0: 7b27 7468 756d 626e 6169 6c27 3a20 7468  {'thumbnail': th
-000076c0: 756d 626e 6169 6c7d 0a20 2020 2020 2020  umbnail}.       
-000076d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000076e0: 2020 2070 6179 6c6f 6164 5b27 7468 756d     payload['thum
-000076f0: 626e 6169 6c27 5d20 3d20 7468 756d 626e  bnail'] = thumbn
-00007700: 6169 6c0a 2020 2020 6966 2063 6170 7469  ail.    if capti
-00007710: 6f6e 5f65 6e74 6974 6965 733a 0a20 2020  on_entities:.   
-00007720: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
-00007730: 7074 696f 6e5f 656e 7469 7469 6573 275d  ption_entities']
-00007740: 203d 206a 736f 6e2e 6475 6d70 7328 7479   = json.dumps(ty
-00007750: 7065 732e 4d65 7373 6167 6545 6e74 6974  pes.MessageEntit
-00007760: 792e 746f 5f6c 6973 745f 6f66 5f64 6963  y.to_list_of_dic
-00007770: 7473 2863 6170 7469 6f6e 5f65 6e74 6974  ts(caption_entit
-00007780: 6965 7329 290a 2020 2020 6966 2070 726f  ies)).    if pro
-00007790: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-000077a0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000077b0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
-000077c0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
-000077d0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-000077e0: 2020 2069 6620 7769 6474 683a 0a20 2020     if width:.   
-000077f0: 2020 2020 2070 6179 6c6f 6164 5b27 7769       payload['wi
-00007800: 6474 6827 5d20 3d20 7769 6474 680a 2020  dth'] = width.  
-00007810: 2020 6966 2068 6569 6768 743a 0a20 2020    if height:.   
-00007820: 2020 2020 2070 6179 6c6f 6164 5b27 6865       payload['he
-00007830: 6967 6874 275d 203d 2068 6569 6768 740a  ight'] = height.
-00007840: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
-00007850: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
-00007860: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
-00007870: 6765 5f74 6872 6561 645f 6964 275d 203d  ge_thread_id'] =
-00007880: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00007890: 6964 0a20 2020 2069 6620 6861 735f 7370  id.    if has_sp
-000078a0: 6f69 6c65 7220 6973 206e 6f74 204e 6f6e  oiler is not Non
-000078b0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000078c0: 6164 5b27 6861 735f 7370 6f69 6c65 7227  ad['has_spoiler'
-000078d0: 5d20 3d20 6861 735f 7370 6f69 6c65 720a  ] = has_spoiler.
-000078e0: 2020 2020 6966 2072 6570 6c79 5f70 6172      if reply_par
-000078f0: 616d 6574 6572 7320 6973 206e 6f74 204e  ameters is not N
-00007900: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00007910: 6c6f 6164 5b27 7265 706c 795f 7061 7261  load['reply_para
-00007920: 6d65 7465 7273 275d 203d 2072 6570 6c79  meters'] = reply
-00007930: 5f70 6172 616d 6574 6572 732e 746f 5f6a  _parameters.to_j
-00007940: 736f 6e28 290a 2020 2020 6966 2062 7573  son().    if bus
-00007950: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00007960: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00007970: 6c6f 6164 5b27 6275 7369 6e65 7373 5f63  load['business_c
-00007980: 6f6e 6e65 6374 696f 6e5f 6964 275d 203d  onnection_id'] =
-00007990: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-000079a0: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
-000079b0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-000079c0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000079d0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-000079e0: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-000079f0: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-00007a00: 0a0a 6465 6620 7365 6e64 5f76 6f69 6365  ..def send_voice
-00007a10: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-00007a20: 2076 6f69 6365 2c20 6361 7074 696f 6e3d   voice, caption=
-00007a30: 4e6f 6e65 2c20 6475 7261 7469 6f6e 3d4e  None, duration=N
-00007a40: 6f6e 652c 2072 6570 6c79 5f6d 6172 6b75  one, reply_marku
-00007a50: 703d 4e6f 6e65 2c0a 2020 2020 2020 2020  p=None,.        
-00007a60: 2020 2020 2020 2070 6172 7365 5f6d 6f64         parse_mod
-00007a70: 653d 4e6f 6e65 2c20 6469 7361 626c 655f  e=None, disable_
-00007a80: 6e6f 7469 6669 6361 7469 6f6e 3d4e 6f6e  notification=Non
-00007a90: 652c 2074 696d 656f 7574 3d4e 6f6e 652c  e, timeout=None,
-00007aa0: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
-00007ab0: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
-00007ac0: 2020 2020 2020 2070 726f 7465 6374 5f63         protect_c
-00007ad0: 6f6e 7465 6e74 3d4e 6f6e 652c 206d 6573  ontent=None, mes
-00007ae0: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
-00007af0: 6f6e 652c 2072 6570 6c79 5f70 6172 616d  one, reply_param
-00007b00: 6574 6572 733d 4e6f 6e65 2c20 6275 7369  eters=None, busi
-00007b10: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00007b20: 6964 3d4e 6f6e 6529 3a0a 2020 2020 6d65  id=None):.    me
-00007b30: 7468 6f64 5f75 726c 203d 2072 2773 656e  thod_url = r'sen
-00007b40: 6456 6f69 6365 270a 2020 2020 7061 796c  dVoice'.    payl
-00007b50: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-00007b60: 3a20 6368 6174 5f69 647d 0a20 2020 2066  : chat_id}.    f
-00007b70: 696c 6573 203d 204e 6f6e 650a 2020 2020  iles = None.    
-00007b80: 6966 206e 6f74 2075 7469 6c2e 6973 5f73  if not util.is_s
-00007b90: 7472 696e 6728 766f 6963 6529 3a0a 2020  tring(voice):.  
-00007ba0: 2020 2020 2020 6669 6c65 7320 3d20 7b27        files = {'
-00007bb0: 766f 6963 6527 3a20 766f 6963 657d 0a20  voice': voice}. 
-00007bc0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00007bd0: 2070 6179 6c6f 6164 5b27 766f 6963 6527   payload['voice'
-00007be0: 5d20 3d20 766f 6963 650a 2020 2020 6966  ] = voice.    if
-00007bf0: 2063 6170 7469 6f6e 3a0a 2020 2020 2020   caption:.      
-00007c00: 2020 7061 796c 6f61 645b 2763 6170 7469    payload['capti
-00007c10: 6f6e 275d 203d 2063 6170 7469 6f6e 0a20  on'] = caption. 
-00007c20: 2020 2069 6620 6475 7261 7469 6f6e 3a0a     if duration:.
-00007c30: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00007c40: 2764 7572 6174 696f 6e27 5d20 3d20 6475  'duration'] = du
-00007c50: 7261 7469 6f6e 0a20 2020 2069 6620 7265  ration.    if re
-00007c60: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-00007c70: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
-00007c80: 6c79 5f6d 6172 6b75 7027 5d20 3d20 5f63  ly_markup'] = _c
-00007c90: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-00007ca0: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-00007cb0: 6966 2070 6172 7365 5f6d 6f64 653a 0a20  if parse_mode:. 
-00007cc0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00007cd0: 7061 7273 655f 6d6f 6465 275d 203d 2070  parse_mode'] = p
-00007ce0: 6172 7365 5f6d 6f64 650a 2020 2020 6966  arse_mode.    if
-00007cf0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00007d00: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00007d10: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00007d20: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
-00007d30: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
-00007d40: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00007d50: 6e0a 2020 2020 6966 2074 696d 656f 7574  n.    if timeout
-00007d60: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007d70: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-00007d80: 696d 656f 7574 0a20 2020 2069 6620 6361  imeout.    if ca
-00007d90: 7074 696f 6e5f 656e 7469 7469 6573 3a0a  ption_entities:.
-00007da0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00007db0: 2763 6170 7469 6f6e 5f65 6e74 6974 6965  'caption_entitie
-00007dc0: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
-00007dd0: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
-00007de0: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
-00007df0: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
-00007e00: 7469 7469 6573 2929 0a20 2020 2069 6620  tities)).    if 
-00007e10: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-00007e20: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00007e30: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
-00007e40: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
-00007e50: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-00007e60: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-00007e70: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
-00007e80: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
-00007e90: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
-00007ea0: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00007eb0: 645f 6964 0a20 2020 2069 6620 7265 706c  d_id.    if repl
-00007ec0: 795f 7061 7261 6d65 7465 7273 2069 7320  y_parameters is 
-00007ed0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00007ee0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-00007ef0: 5f70 6172 616d 6574 6572 7327 5d20 3d20  _parameters'] = 
-00007f00: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
-00007f10: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
-00007f20: 6620 6275 7369 6e65 7373 5f63 6f6e 6e65  f business_conne
-00007f30: 6374 696f 6e5f 6964 3a0a 2020 2020 2020  ction_id:.      
-00007f40: 2020 7061 796c 6f61 645b 2762 7573 696e    payload['busin
-00007f50: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
-00007f60: 6427 5d20 3d20 6275 7369 6e65 7373 5f63  d'] = business_c
-00007f70: 6f6e 6e65 6374 696f 6e5f 6964 0a20 2020  onnection_id.   
-00007f80: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00007f90: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00007fa0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00007fb0: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
-00007fc0: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
-00007fd0: 7374 2729 0a0a 0a64 6566 2073 656e 645f  st')...def send_
-00007fe0: 7669 6465 6f5f 6e6f 7465 2874 6f6b 656e  video_note(token
-00007ff0: 2c20 6368 6174 5f69 642c 2064 6174 612c  , chat_id, data,
-00008000: 2064 7572 6174 696f 6e3d 4e6f 6e65 2c20   duration=None, 
-00008010: 6c65 6e67 7468 3d4e 6f6e 652c 2072 6570  length=None, rep
-00008020: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c0a  ly_markup=None,.
-00008030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008040: 2020 2020 6469 7361 626c 655f 6e6f 7469      disable_noti
-00008050: 6669 6361 7469 6f6e 3d4e 6f6e 652c 2074  fication=None, t
-00008060: 696d 656f 7574 3d4e 6f6e 652c 2074 6875  imeout=None, thu
-00008070: 6d62 6e61 696c 3d4e 6f6e 652c 2070 726f  mbnail=None, pro
-00008080: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-00008090: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-000080a0: 2020 2020 2020 206d 6573 7361 6765 5f74         message_t
-000080b0: 6872 6561 645f 6964 3d4e 6f6e 652c 2072  hread_id=None, r
-000080c0: 6570 6c79 5f70 6172 616d 6574 6572 733d  eply_parameters=
-000080d0: 4e6f 6e65 2c20 6275 7369 6e65 7373 5f63  None, business_c
-000080e0: 6f6e 6e65 6374 696f 6e5f 6964 3d4e 6f6e  onnection_id=Non
-000080f0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00008100: 726c 203d 2072 2773 656e 6456 6964 656f  rl = r'sendVideo
-00008110: 4e6f 7465 270a 2020 2020 7061 796c 6f61  Note'.    payloa
-00008120: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-00008130: 6368 6174 5f69 647d 0a20 2020 2066 696c  chat_id}.    fil
-00008140: 6573 203d 204e 6f6e 650a 2020 2020 6966  es = None.    if
-00008150: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
-00008160: 696e 6728 6461 7461 293a 0a20 2020 2020  ing(data):.     
-00008170: 2020 2066 696c 6573 203d 207b 2776 6964     files = {'vid
-00008180: 656f 5f6e 6f74 6527 3a20 6461 7461 7d0a  eo_note': data}.
-00008190: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000081a0: 2020 7061 796c 6f61 645b 2776 6964 656f    payload['video
-000081b0: 5f6e 6f74 6527 5d20 3d20 6461 7461 0a20  _note'] = data. 
-000081c0: 2020 2069 6620 6475 7261 7469 6f6e 3a0a     if duration:.
-000081d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000081e0: 2764 7572 6174 696f 6e27 5d20 3d20 6475  'duration'] = du
-000081f0: 7261 7469 6f6e 0a20 2020 2069 6620 6c65  ration.    if le
-00008200: 6e67 7468 2061 6e64 2028 7374 7228 6c65  ngth and (str(le
-00008210: 6e67 7468 292e 6973 6469 6769 7428 2920  ngth).isdigit() 
-00008220: 616e 6420 696e 7428 6c65 6e67 7468 2920  and int(length) 
-00008230: 3c3d 2036 3339 293a 0a20 2020 2020 2020  <= 639):.       
-00008240: 2070 6179 6c6f 6164 5b27 6c65 6e67 7468   payload['length
-00008250: 275d 203d 206c 656e 6774 680a 2020 2020  '] = length.    
-00008260: 656c 7365 3a0a 2020 2020 2020 2020 7061  else:.        pa
-00008270: 796c 6f61 645b 276c 656e 6774 6827 5d20  yload['length'] 
-00008280: 3d20 3633 3920 2023 2073 6565 6d73 206c  = 639  # seems l
-00008290: 696b 6520 6974 2069 7320 4d41 5820 6c65  ike it is MAX le
-000082a0: 6e67 7468 2073 697a 650a 2020 2020 6966  ngth size.    if
-000082b0: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-000082c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000082d0: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
-000082e0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-000082f0: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-00008300: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
-00008310: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
-00008320: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00008330: 7061 796c 6f61 645b 2764 6973 6162 6c65  payload['disable
-00008340: 5f6e 6f74 6966 6963 6174 696f 6e27 5d20  _notification'] 
-00008350: 3d20 6469 7361 626c 655f 6e6f 7469 6669  = disable_notifi
-00008360: 6361 7469 6f6e 0a20 2020 2069 6620 7469  cation.    if ti
-00008370: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-00008380: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
-00008390: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-000083a0: 6966 2074 6875 6d62 6e61 696c 3a0a 2020  if thumbnail:.  
-000083b0: 2020 2020 2020 6966 206e 6f74 2075 7469        if not uti
-000083c0: 6c2e 6973 5f73 7472 696e 6728 7468 756d  l.is_string(thum
-000083d0: 626e 6169 6c29 3a0a 2020 2020 2020 2020  bnail):.        
-000083e0: 2020 2020 6966 2066 696c 6573 3a0a 2020      if files:.  
-000083f0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00008400: 6c65 735b 2774 6875 6d62 6e61 696c 275d  les['thumbnail']
-00008410: 203d 2074 6875 6d62 6e61 696c 0a20 2020   = thumbnail.   
-00008420: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00008430: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00008440: 696c 6573 203d 207b 2774 6875 6d62 6e61  iles = {'thumbna
-00008450: 696c 273a 2074 6875 6d62 6e61 696c 7d0a  il': thumbnail}.
-00008460: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00008470: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
-00008480: 645b 2774 6875 6d62 6e61 696c 275d 203d  d['thumbnail'] =
-00008490: 2074 6875 6d62 6e61 696c 0a20 2020 2069   thumbnail.    i
-000084a0: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
-000084b0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-000084c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000084d0: 7072 6f74 6563 745f 636f 6e74 656e 7427  protect_content'
-000084e0: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
-000084f0: 656e 740a 2020 2020 6966 206d 6573 7361  ent.    if messa
-00008500: 6765 5f74 6872 6561 645f 6964 3a0a 2020  ge_thread_id:.  
-00008510: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
-00008520: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00008530: 275d 203d 206d 6573 7361 6765 5f74 6872  '] = message_thr
-00008540: 6561 645f 6964 0a20 2020 2069 6620 7265  ead_id.    if re
-00008550: 706c 795f 7061 7261 6d65 7465 7273 2069  ply_parameters i
-00008560: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00008570: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
-00008580: 6c79 5f70 6172 616d 6574 6572 7327 5d20  ly_parameters'] 
-00008590: 3d20 7265 706c 795f 7061 7261 6d65 7465  = reply_paramete
-000085a0: 7273 2e74 6f5f 6a73 6f6e 2829 0a20 2020  rs.to_json().   
-000085b0: 2069 6620 6275 7369 6e65 7373 5f63 6f6e   if business_con
-000085c0: 6e65 6374 696f 6e5f 6964 3a0a 2020 2020  nection_id:.    
-000085d0: 2020 2020 7061 796c 6f61 645b 2762 7573      payload['bus
-000085e0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-000085f0: 5f69 6427 5d20 3d20 6275 7369 6e65 7373  _id'] = business
-00008600: 5f63 6f6e 6e65 6374 696f 6e5f 6964 0a20  _connection_id. 
-00008610: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00008620: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00008630: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00008640: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
-00008650: 3d66 696c 6573 2c20 6d65 7468 6f64 3d27  =files, method='
-00008660: 706f 7374 2729 0a0a 0a64 6566 2073 656e  post')...def sen
-00008670: 645f 6175 6469 6f28 746f 6b65 6e2c 2063  d_audio(token, c
-00008680: 6861 745f 6964 2c20 6175 6469 6f2c 2063  hat_id, audio, c
-00008690: 6170 7469 6f6e 3d4e 6f6e 652c 2064 7572  aption=None, dur
-000086a0: 6174 696f 6e3d 4e6f 6e65 2c20 7065 7266  ation=None, perf
-000086b0: 6f72 6d65 723d 4e6f 6e65 2c20 7469 746c  ormer=None, titl
-000086c0: 653d 4e6f 6e65 2c0a 2020 2020 2020 2020  e=None,.        
-000086d0: 2020 2020 2020 2072 6570 6c79 5f6d 6172         reply_mar
-000086e0: 6b75 703d 4e6f 6e65 2c20 7061 7273 655f  kup=None, parse_
-000086f0: 6d6f 6465 3d4e 6f6e 652c 2064 6973 6162  mode=None, disab
-00008700: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00008710: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-00008720: 6e65 2c20 7468 756d 626e 6169 6c3d 4e6f  ne, thumbnail=No
-00008730: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00008740: 2020 2063 6170 7469 6f6e 5f65 6e74 6974     caption_entit
-00008750: 6965 733d 4e6f 6e65 2c20 7072 6f74 6563  ies=None, protec
-00008760: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
-00008770: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00008780: 643d 4e6f 6e65 2c20 7265 706c 795f 7061  d=None, reply_pa
-00008790: 7261 6d65 7465 7273 3d4e 6f6e 652c 0a20  rameters=None,. 
-000087a0: 2020 2020 2020 2020 2020 2020 2020 6275                bu
-000087b0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
-000087c0: 6e5f 6964 3d4e 6f6e 6529 3a0a 2020 2020  n_id=None):.    
-000087d0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-000087e0: 656e 6441 7564 696f 270a 2020 2020 7061  endAudio'.    pa
-000087f0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00008800: 6427 3a20 6368 6174 5f69 647d 0a20 2020  d': chat_id}.   
-00008810: 2066 696c 6573 203d 204e 6f6e 650a 2020   files = None.  
-00008820: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00008830: 5f73 7472 696e 6728 6175 6469 6f29 3a0a  _string(audio):.
-00008840: 2020 2020 2020 2020 6669 6c65 7320 3d20          files = 
-00008850: 7b27 6175 6469 6f27 3a20 6175 6469 6f7d  {'audio': audio}
-00008860: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00008870: 2020 2070 6179 6c6f 6164 5b27 6175 6469     payload['audi
-00008880: 6f27 5d20 3d20 6175 6469 6f0a 2020 2020  o'] = audio.    
-00008890: 6966 2063 6170 7469 6f6e 3a0a 2020 2020  if caption:.    
-000088a0: 2020 2020 7061 796c 6f61 645b 2763 6170      payload['cap
-000088b0: 7469 6f6e 275d 203d 2063 6170 7469 6f6e  tion'] = caption
-000088c0: 0a20 2020 2069 6620 6475 7261 7469 6f6e  .    if duration
-000088d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000088e0: 645b 2764 7572 6174 696f 6e27 5d20 3d20  d['duration'] = 
-000088f0: 6475 7261 7469 6f6e 0a20 2020 2069 6620  duration.    if 
-00008900: 7065 7266 6f72 6d65 723a 0a20 2020 2020  performer:.     
-00008910: 2020 2070 6179 6c6f 6164 5b27 7065 7266     payload['perf
-00008920: 6f72 6d65 7227 5d20 3d20 7065 7266 6f72  ormer'] = perfor
-00008930: 6d65 720a 2020 2020 6966 2074 6974 6c65  mer.    if title
-00008940: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008950: 645b 2774 6974 6c65 275d 203d 2074 6974  d['title'] = tit
-00008960: 6c65 0a20 2020 2069 6620 7265 706c 795f  le.    if reply_
-00008970: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-00008980: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-00008990: 6172 6b75 7027 5d20 3d20 5f63 6f6e 7665  arkup'] = _conve
-000089a0: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
-000089b0: 6d61 726b 7570 290a 2020 2020 6966 2070  markup).    if p
-000089c0: 6172 7365 5f6d 6f64 653a 0a20 2020 2020  arse_mode:.     
-000089d0: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
-000089e0: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
-000089f0: 5f6d 6f64 650a 2020 2020 6966 2064 6973  _mode.    if dis
-00008a00: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00008a10: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00008a20: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00008a30: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00008a40: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00008a50: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00008a60: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-00008a70: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00008a80: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00008a90: 7574 0a20 2020 2069 6620 7468 756d 626e  ut.    if thumbn
-00008aa0: 6169 6c3a 0a20 2020 2020 2020 2069 6620  ail:.        if 
-00008ab0: 6e6f 7420 7574 696c 2e69 735f 7374 7269  not util.is_stri
-00008ac0: 6e67 2874 6875 6d62 6e61 696c 293a 0a20  ng(thumbnail):. 
-00008ad0: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
-00008ae0: 6c65 733a 0a20 2020 2020 2020 2020 2020  les:.           
-00008af0: 2020 2020 2066 696c 6573 5b27 7468 756d       files['thum
-00008b00: 626e 6169 6c27 5d20 3d20 7468 756d 626e  bnail'] = thumbn
-00008b10: 6169 6c0a 2020 2020 2020 2020 2020 2020  ail.            
-00008b20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00008b30: 2020 2020 2020 6669 6c65 7320 3d20 7b27        files = {'
-00008b40: 7468 756d 626e 6169 6c27 3a20 7468 756d  thumbnail': thum
-00008b50: 626e 6169 6c7d 0a20 2020 2020 2020 2065  bnail}.        e
-00008b60: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00008b70: 2070 6179 6c6f 6164 5b27 7468 756d 626e   payload['thumbn
-00008b80: 6169 6c27 5d20 3d20 7468 756d 626e 6169  ail'] = thumbnai
-00008b90: 6c0a 2020 2020 6966 2063 6170 7469 6f6e  l.    if caption
-00008ba0: 5f65 6e74 6974 6965 733a 0a20 2020 2020  _entities:.     
-00008bb0: 2020 2070 6179 6c6f 6164 5b27 6361 7074     payload['capt
-00008bc0: 696f 6e5f 656e 7469 7469 6573 275d 203d  ion_entities'] =
-00008bd0: 206a 736f 6e2e 6475 6d70 7328 7479 7065   json.dumps(type
-00008be0: 732e 4d65 7373 6167 6545 6e74 6974 792e  s.MessageEntity.
-00008bf0: 746f 5f6c 6973 745f 6f66 5f64 6963 7473  to_list_of_dicts
-00008c00: 2863 6170 7469 6f6e 5f65 6e74 6974 6965  (caption_entitie
-00008c10: 7329 290a 2020 2020 6966 2070 726f 7465  s)).    if prote
-00008c20: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-00008c30: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00008c40: 7061 796c 6f61 645b 2770 726f 7465 6374  payload['protect
-00008c50: 5f63 6f6e 7465 6e74 275d 203d 2070 726f  _content'] = pro
-00008c60: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-00008c70: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-00008c80: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-00008c90: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-00008ca0: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-00008cb0: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-00008cc0: 2020 2020 6966 2072 6570 6c79 5f70 6172      if reply_par
-00008cd0: 616d 6574 6572 7320 6973 206e 6f74 204e  ameters is not N
-00008ce0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00008cf0: 6c6f 6164 5b27 7265 706c 795f 7061 7261  load['reply_para
-00008d00: 6d65 7465 7273 275d 203d 2072 6570 6c79  meters'] = reply
-00008d10: 5f70 6172 616d 6574 6572 732e 746f 5f6a  _parameters.to_j
-00008d20: 736f 6e28 290a 2020 2020 6966 2062 7573  son().    if bus
-00008d30: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00008d40: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00008d50: 6c6f 6164 5b27 6275 7369 6e65 7373 5f63  load['business_c
-00008d60: 6f6e 6e65 6374 696f 6e5f 6964 275d 203d  onnection_id'] =
-00008d70: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-00008d80: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
-00008d90: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00008da0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00008db0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00008dc0: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00008dd0: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-00008de0: 0a0a 6465 6620 7365 6e64 5f64 6174 6128  ..def send_data(
-00008df0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00008e00: 6461 7461 2c20 6461 7461 5f74 7970 652c  data, data_type,
-00008e10: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
-00008e20: 6e65 2c20 7061 7273 655f 6d6f 6465 3d4e  ne, parse_mode=N
-00008e30: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00008e40: 2020 2064 6973 6162 6c65 5f6e 6f74 6966     disable_notif
-00008e50: 6963 6174 696f 6e3d 4e6f 6e65 2c20 7469  ication=None, ti
-00008e60: 6d65 6f75 743d 4e6f 6e65 2c20 6361 7074  meout=None, capt
-00008e70: 696f 6e3d 4e6f 6e65 2c20 7468 756d 626e  ion=None, thumbn
-00008e80: 6169 6c3d 4e6f 6e65 2c20 6361 7074 696f  ail=None, captio
-00008e90: 6e5f 656e 7469 7469 6573 3d4e 6f6e 652c  n_entities=None,
-00008ea0: 0a20 2020 2020 2020 2020 2020 2020 2064  .              d
-00008eb0: 6973 6162 6c65 5f63 6f6e 7465 6e74 5f74  isable_content_t
-00008ec0: 7970 655f 6465 7465 6374 696f 6e3d 4e6f  ype_detection=No
-00008ed0: 6e65 2c20 7669 7369 626c 655f 6669 6c65  ne, visible_file
-00008ee0: 5f6e 616d 653d 4e6f 6e65 2c0a 2020 2020  _name=None,.    
-00008ef0: 2020 2020 2020 2020 2020 7072 6f74 6563            protec
-00008f00: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
-00008f10: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00008f20: 643d 4e6f 6e65 2c20 656d 6f6a 693d 4e6f  d=None, emoji=No
-00008f30: 6e65 2c20 7265 706c 795f 7061 7261 6d65  ne, reply_parame
-00008f40: 7465 7273 3d4e 6f6e 652c 0a20 2020 2020  ters=None,.     
-00008f50: 2020 2020 2020 2020 2062 7573 696e 6573           busines
-00008f60: 735f 636f 6e6e 6563 7469 6f6e 5f69 643d  s_connection_id=
-00008f70: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-00008f80: 645f 7572 6c20 3d20 6765 745f 6d65 7468  d_url = get_meth
-00008f90: 6f64 5f62 795f 7479 7065 2864 6174 615f  od_by_type(data_
-00008fa0: 7479 7065 290a 2020 2020 7061 796c 6f61  type).    payloa
-00008fb0: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-00008fc0: 6368 6174 5f69 647d 0a20 2020 2066 696c  chat_id}.    fil
-00008fd0: 6573 203d 204e 6f6e 650a 2020 2020 6966  es = None.    if
-00008fe0: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
-00008ff0: 696e 6728 6461 7461 293a 0a20 2020 2020  ing(data):.     
-00009000: 2020 2066 696c 655f 6461 7461 203d 2064     file_data = d
-00009010: 6174 610a 2020 2020 2020 2020 6966 2076  ata.        if v
-00009020: 6973 6962 6c65 5f66 696c 655f 6e61 6d65  isible_file_name
-00009030: 3a0a 2020 2020 2020 2020 2020 2020 6669  :.            fi
-00009040: 6c65 5f64 6174 6120 3d20 2876 6973 6962  le_data = (visib
-00009050: 6c65 5f66 696c 655f 6e61 6d65 2c20 6461  le_file_name, da
-00009060: 7461 290a 2020 2020 2020 2020 6669 6c65  ta).        file
-00009070: 7320 3d20 7b64 6174 615f 7479 7065 3a20  s = {data_type: 
-00009080: 6669 6c65 5f64 6174 617d 0a20 2020 2065  file_data}.    e
-00009090: 6c73 653a 0a20 2020 2020 2020 2070 6179  lse:.        pay
-000090a0: 6c6f 6164 5b64 6174 615f 7479 7065 5d20  load[data_type] 
-000090b0: 3d20 6461 7461 0a20 2020 2069 6620 7265  = data.    if re
-000090c0: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-000090d0: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
-000090e0: 6c79 5f6d 6172 6b75 7027 5d20 3d20 5f63  ly_markup'] = _c
-000090f0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-00009100: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-00009110: 6966 2070 6172 7365 5f6d 6f64 6520 616e  if parse_mode an
-00009120: 6420 6461 7461 5f74 7970 6520 3d3d 2027  d data_type == '
-00009130: 646f 6375 6d65 6e74 273a 0a20 2020 2020  document':.     
-00009140: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
-00009150: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
-00009160: 5f6d 6f64 650a 2020 2020 6966 2064 6973  _mode.    if dis
-00009170: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00009180: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00009190: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000091a0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-000091b0: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-000091c0: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-000091d0: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-000091e0: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-000091f0: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00009200: 7574 0a20 2020 2069 6620 6361 7074 696f  ut.    if captio
-00009210: 6e3a 0a20 2020 2020 2020 2070 6179 6c6f  n:.        paylo
-00009220: 6164 5b27 6361 7074 696f 6e27 5d20 3d20  ad['caption'] = 
-00009230: 6361 7074 696f 6e0a 2020 2020 6966 2074  caption.    if t
-00009240: 6875 6d62 6e61 696c 3a0a 2020 2020 2020  humbnail:.      
-00009250: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00009260: 5f73 7472 696e 6728 7468 756d 626e 6169  _string(thumbnai
-00009270: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
-00009280: 6966 2066 696c 6573 3a0a 2020 2020 2020  if files:.      
-00009290: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
-000092a0: 2774 6875 6d62 6e61 696c 275d 203d 2074  'thumbnail'] = t
-000092b0: 6875 6d62 6e61 696c 0a20 2020 2020 2020  humbnail.       
-000092c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000092d0: 2020 2020 2020 2020 2020 2066 696c 6573             files
-000092e0: 203d 207b 2774 6875 6d62 6e61 696c 273a   = {'thumbnail':
-000092f0: 2074 6875 6d62 6e61 696c 7d0a 2020 2020   thumbnail}.    
-00009300: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00009310: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00009320: 6875 6d62 6e61 696c 275d 203d 2074 6875  humbnail'] = thu
-00009330: 6d62 6e61 696c 0a20 2020 2069 6620 6361  mbnail.    if ca
-00009340: 7074 696f 6e5f 656e 7469 7469 6573 3a0a  ption_entities:.
-00009350: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009360: 2763 6170 7469 6f6e 5f65 6e74 6974 6965  'caption_entitie
-00009370: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
-00009380: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
-00009390: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
-000093a0: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
-000093b0: 7469 7469 6573 2929 0a20 2020 2069 6620  tities)).    if 
-000093c0: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-000093d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000093e0: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
-000093f0: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
-00009400: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-00009410: 740a 2020 2020 6966 206d 6574 686f 645f  t.    if method_
-00009420: 7572 6c20 3d3d 2027 7365 6e64 446f 6375  url == 'sendDocu
-00009430: 6d65 6e74 2720 616e 6420 6469 7361 626c  ment' and disabl
-00009440: 655f 636f 6e74 656e 745f 7479 7065 5f64  e_content_type_d
-00009450: 6574 6563 7469 6f6e 2069 7320 6e6f 7420  etection is not 
-00009460: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00009470: 796c 6f61 645b 2764 6973 6162 6c65 5f63  yload['disable_c
-00009480: 6f6e 7465 6e74 5f74 7970 655f 6465 7465  ontent_type_dete
-00009490: 6374 696f 6e27 5d20 3d20 6469 7361 626c  ction'] = disabl
-000094a0: 655f 636f 6e74 656e 745f 7479 7065 5f64  e_content_type_d
-000094b0: 6574 6563 7469 6f6e 0a20 2020 2069 6620  etection.    if 
-000094c0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-000094d0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-000094e0: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
-000094f0: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
-00009500: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
-00009510: 6966 2065 6d6f 6a69 3a0a 2020 2020 2020  if emoji:.      
-00009520: 2020 7061 796c 6f61 645b 2765 6d6f 6a69    payload['emoji
-00009530: 275d 203d 2065 6d6f 6a69 0a20 2020 2069  '] = emoji.    i
-00009540: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
-00009550: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
-00009560: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009570: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
-00009580: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
-00009590: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
-000095a0: 0a20 2020 2069 6620 6275 7369 6e65 7373  .    if business
-000095b0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3a0a  _connection_id:.
-000095c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000095d0: 2762 7573 696e 6573 735f 636f 6e6e 6563  'business_connec
-000095e0: 7469 6f6e 5f69 6427 5d20 3d20 6275 7369  tion_id'] = busi
-000095f0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
-00009600: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
-00009610: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00009620: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00009630: 6172 616d 733d 7061 796c 6f61 642c 2066  arams=payload, f
-00009640: 696c 6573 3d66 696c 6573 2c20 6d65 7468  iles=files, meth
-00009650: 6f64 3d27 706f 7374 2729 0a0a 0a64 6566  od='post')...def
-00009660: 2067 6574 5f6d 6574 686f 645f 6279 5f74   get_method_by_t
-00009670: 7970 6528 6461 7461 5f74 7970 6529 3a0a  ype(data_type):.
-00009680: 2020 2020 6966 2064 6174 615f 7479 7065      if data_type
-00009690: 203d 3d20 2764 6f63 756d 656e 7427 3a0a   == 'document':.
-000096a0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-000096b0: 2773 656e 6444 6f63 756d 656e 7427 0a20  'sendDocument'. 
-000096c0: 2020 2069 6620 6461 7461 5f74 7970 6520     if data_type 
-000096d0: 3d3d 2027 7374 6963 6b65 7227 3a0a 2020  == 'sticker':.  
-000096e0: 2020 2020 2020 7265 7475 726e 2072 2773        return r's
-000096f0: 656e 6453 7469 636b 6572 270a 0a0a 6465  endSticker'...de
-00009700: 6620 6261 6e5f 6368 6174 5f6d 656d 6265  f ban_chat_membe
-00009710: 7228 746f 6b65 6e2c 2063 6861 745f 6964  r(token, chat_id
-00009720: 2c20 7573 6572 5f69 642c 2075 6e74 696c  , user_id, until
-00009730: 5f64 6174 653d 4e6f 6e65 2c20 7265 766f  _date=None, revo
-00009740: 6b65 5f6d 6573 7361 6765 733d 4e6f 6e65  ke_messages=None
-00009750: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00009760: 6c20 3d20 2762 616e 4368 6174 4d65 6d62  l = 'banChatMemb
-00009770: 6572 270a 2020 2020 7061 796c 6f61 6420  er'.    payload 
-00009780: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-00009790: 6174 5f69 642c 2027 7573 6572 5f69 6427  at_id, 'user_id'
-000097a0: 3a20 7573 6572 5f69 647d 0a20 2020 2069  : user_id}.    i
-000097b0: 6620 6973 696e 7374 616e 6365 2875 6e74  f isinstance(unt
-000097c0: 696c 5f64 6174 652c 2064 6174 6574 696d  il_date, datetim
-000097d0: 6529 3a0a 2020 2020 2020 2020 7061 796c  e):.        payl
-000097e0: 6f61 645b 2775 6e74 696c 5f64 6174 6527  oad['until_date'
-000097f0: 5d20 3d20 756e 7469 6c5f 6461 7465 2e74  ] = until_date.t
-00009800: 696d 6573 7461 6d70 2829 0a20 2020 2065  imestamp().    e
-00009810: 6c73 653a 0a20 2020 2020 2020 2070 6179  lse:.        pay
-00009820: 6c6f 6164 5b27 756e 7469 6c5f 6461 7465  load['until_date
-00009830: 275d 203d 2075 6e74 696c 5f64 6174 650a  '] = until_date.
-00009840: 2020 2020 6966 2072 6576 6f6b 655f 6d65      if revoke_me
-00009850: 7373 6167 6573 2069 7320 6e6f 7420 4e6f  ssages is not No
-00009860: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00009870: 6f61 645b 2772 6576 6f6b 655f 6d65 7373  oad['revoke_mess
-00009880: 6167 6573 275d 203d 2072 6576 6f6b 655f  ages'] = revoke_
-00009890: 6d65 7373 6167 6573 0a20 2020 2072 6574  messages.    ret
-000098a0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-000098b0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-000098c0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-000098d0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-000098e0: 7427 290a 0a0a 6465 6620 756e 6261 6e5f  t')...def unban_
-000098f0: 6368 6174 5f6d 656d 6265 7228 746f 6b65  chat_member(toke
-00009900: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
-00009910: 5f69 642c 206f 6e6c 795f 6966 5f62 616e  _id, only_if_ban
-00009920: 6e65 6429 3a0a 2020 2020 6d65 7468 6f64  ned):.    method
-00009930: 5f75 726c 203d 2027 756e 6261 6e43 6861  _url = 'unbanCha
-00009940: 744d 656d 6265 7227 0a20 2020 2070 6179  tMember'.    pay
-00009950: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00009960: 273a 2063 6861 745f 6964 2c20 2775 7365  ': chat_id, 'use
-00009970: 725f 6964 273a 2075 7365 725f 6964 7d0a  r_id': user_id}.
-00009980: 2020 2020 6966 206f 6e6c 795f 6966 5f62      if only_if_b
-00009990: 616e 6e65 6420 6973 206e 6f74 204e 6f6e  anned is not Non
-000099a0: 653a 2020 2320 4e6f 6e65 202f 2054 7275  e:  # None / Tru
-000099b0: 6520 2f20 4661 6c73 650a 2020 2020 2020  e / False.      
-000099c0: 2020 7061 796c 6f61 645b 276f 6e6c 795f    payload['only_
-000099d0: 6966 5f62 616e 6e65 6427 5d20 3d20 6f6e  if_banned'] = on
-000099e0: 6c79 5f69 665f 6261 6e6e 6564 0a20 2020  ly_if_banned.   
-000099f0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00009a00: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00009a10: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00009a20: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-00009a30: 2770 6f73 7427 290a 0a0a 6465 6620 7265  'post')...def re
-00009a40: 7374 7269 6374 5f63 6861 745f 6d65 6d62  strict_chat_memb
-00009a50: 6572 280a 2020 2020 2020 2020 746f 6b65  er(.        toke
-00009a60: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
-00009a70: 5f69 642c 2070 6572 6d69 7373 696f 6e73  _id, permissions
-00009a80: 2c20 756e 7469 6c5f 6461 7465 3d4e 6f6e  , until_date=Non
-00009a90: 652c 0a20 2020 2020 2020 2075 7365 5f69  e,.        use_i
-00009aa0: 6e64 6570 656e 6465 6e74 5f63 6861 745f  ndependent_chat_
-00009ab0: 7065 726d 6973 7369 6f6e 733d 4e6f 6e65  permissions=None
-00009ac0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00009ad0: 6c20 3d20 2772 6573 7472 6963 7443 6861  l = 'restrictCha
-00009ae0: 744d 656d 6265 7227 0a20 2020 2070 6179  tMember'.    pay
-00009af0: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00009b00: 273a 2063 6861 745f 6964 2c20 2775 7365  ': chat_id, 'use
-00009b10: 725f 6964 273a 2075 7365 725f 6964 2c20  r_id': user_id, 
-00009b20: 2770 6572 6d69 7373 696f 6e73 273a 2070  'permissions': p
-00009b30: 6572 6d69 7373 696f 6e73 2e74 6f5f 6a73  ermissions.to_js
-00009b40: 6f6e 2829 7d0a 0a20 2020 2069 6620 7573  on()}..    if us
-00009b50: 655f 696e 6465 7065 6e64 656e 745f 6368  e_independent_ch
-00009b60: 6174 5f70 6572 6d69 7373 696f 6e73 2069  at_permissions i
-00009b70: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00009b80: 2020 2020 7061 796c 6f61 645b 2775 7365      payload['use
-00009b90: 5f69 6e64 6570 656e 6465 6e74 5f63 6861  _independent_cha
-00009ba0: 745f 7065 726d 6973 7369 6f6e 7327 5d20  t_permissions'] 
-00009bb0: 3d20 7573 655f 696e 6465 7065 6e64 656e  = use_independen
-00009bc0: 745f 6368 6174 5f70 6572 6d69 7373 696f  t_chat_permissio
-00009bd0: 6e73 0a20 2020 2069 6620 756e 7469 6c5f  ns.    if until_
-00009be0: 6461 7465 2069 7320 6e6f 7420 4e6f 6e65  date is not None
-00009bf0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-00009c00: 6e73 7461 6e63 6528 756e 7469 6c5f 6461  nstance(until_da
-00009c10: 7465 2c20 6461 7465 7469 6d65 293a 0a20  te, datetime):. 
-00009c20: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
-00009c30: 6164 5b27 756e 7469 6c5f 6461 7465 275d  ad['until_date']
-00009c40: 203d 2075 6e74 696c 5f64 6174 652e 7469   = until_date.ti
-00009c50: 6d65 7374 616d 7028 290a 2020 2020 2020  mestamp().      
-00009c60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00009c70: 2020 2020 7061 796c 6f61 645b 2775 6e74      payload['unt
-00009c80: 696c 5f64 6174 6527 5d20 3d20 756e 7469  il_date'] = unti
-00009c90: 6c5f 6461 7465 0a0a 2020 2020 7265 7475  l_date..    retu
-00009ca0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00009cb0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00009cc0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00009cd0: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
-00009ce0: 2729 0a0a 0a64 6566 2070 726f 6d6f 7465  ')...def promote
-00009cf0: 5f63 6861 745f 6d65 6d62 6572 280a 2020  _chat_member(.  
-00009d00: 2020 2020 2020 746f 6b65 6e2c 2063 6861        token, cha
-00009d10: 745f 6964 2c20 7573 6572 5f69 642c 2063  t_id, user_id, c
-00009d20: 616e 5f63 6861 6e67 655f 696e 666f 3d4e  an_change_info=N
-00009d30: 6f6e 652c 2063 616e 5f70 6f73 745f 6d65  one, can_post_me
-00009d40: 7373 6167 6573 3d4e 6f6e 652c 0a20 2020  ssages=None,.   
-00009d50: 2020 2020 2063 616e 5f65 6469 745f 6d65       can_edit_me
-00009d60: 7373 6167 6573 3d4e 6f6e 652c 2063 616e  ssages=None, can
-00009d70: 5f64 656c 6574 655f 6d65 7373 6167 6573  _delete_messages
-00009d80: 3d4e 6f6e 652c 2063 616e 5f69 6e76 6974  =None, can_invit
-00009d90: 655f 7573 6572 733d 4e6f 6e65 2c0a 2020  e_users=None,.  
-00009da0: 2020 2020 2020 6361 6e5f 7265 7374 7269        can_restri
-00009db0: 6374 5f6d 656d 6265 7273 3d4e 6f6e 652c  ct_members=None,
-00009dc0: 2063 616e 5f70 696e 5f6d 6573 7361 6765   can_pin_message
-00009dd0: 733d 4e6f 6e65 2c20 6361 6e5f 7072 6f6d  s=None, can_prom
-00009de0: 6f74 655f 6d65 6d62 6572 733d 4e6f 6e65  ote_members=None
-00009df0: 2c0a 2020 2020 2020 2020 6973 5f61 6e6f  ,.        is_ano
-00009e00: 6e79 6d6f 7573 3d4e 6f6e 652c 2063 616e  nymous=None, can
-00009e10: 5f6d 616e 6167 655f 6368 6174 3d4e 6f6e  _manage_chat=Non
-00009e20: 652c 2063 616e 5f6d 616e 6167 655f 7669  e, can_manage_vi
-00009e30: 6465 6f5f 6368 6174 733d 4e6f 6e65 2c0a  deo_chats=None,.
-00009e40: 2020 2020 2020 2020 6361 6e5f 6d61 6e61          can_mana
-00009e50: 6765 5f74 6f70 6963 733d 4e6f 6e65 2c20  ge_topics=None, 
-00009e60: 6361 6e5f 706f 7374 5f73 746f 7269 6573  can_post_stories
-00009e70: 3d4e 6f6e 652c 2063 616e 5f65 6469 745f  =None, can_edit_
-00009e80: 7374 6f72 6965 733d 4e6f 6e65 2c0a 2020  stories=None,.  
-00009e90: 2020 2020 2020 6361 6e5f 6465 6c65 7465        can_delete
-00009ea0: 5f73 746f 7269 6573 3d4e 6f6e 6529 3a0a  _stories=None):.
-00009eb0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00009ec0: 2027 7072 6f6d 6f74 6543 6861 744d 656d   'promoteChatMem
-00009ed0: 6265 7227 0a20 2020 2070 6179 6c6f 6164  ber'.    payload
-00009ee0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-00009ef0: 6861 745f 6964 2c20 2775 7365 725f 6964  hat_id, 'user_id
-00009f00: 273a 2075 7365 725f 6964 7d0a 2020 2020  ': user_id}.    
-00009f10: 6966 2063 616e 5f63 6861 6e67 655f 696e  if can_change_in
-00009f20: 666f 2069 7320 6e6f 7420 4e6f 6e65 3a0a  fo is not None:.
-00009f30: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009f40: 2763 616e 5f63 6861 6e67 655f 696e 666f  'can_change_info
-00009f50: 275d 203d 2063 616e 5f63 6861 6e67 655f  '] = can_change_
-00009f60: 696e 666f 0a20 2020 2069 6620 6361 6e5f  info.    if can_
-00009f70: 706f 7374 5f6d 6573 7361 6765 7320 6973  post_messages is
-00009f80: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00009f90: 2020 2070 6179 6c6f 6164 5b27 6361 6e5f     payload['can_
-00009fa0: 706f 7374 5f6d 6573 7361 6765 7327 5d20  post_messages'] 
-00009fb0: 3d20 6361 6e5f 706f 7374 5f6d 6573 7361  = can_post_messa
-00009fc0: 6765 730a 2020 2020 6966 2063 616e 5f65  ges.    if can_e
-00009fd0: 6469 745f 6d65 7373 6167 6573 2069 7320  dit_messages is 
-00009fe0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00009ff0: 2020 7061 796c 6f61 645b 2763 616e 5f65    payload['can_e
-0000a000: 6469 745f 6d65 7373 6167 6573 275d 203d  dit_messages'] =
-0000a010: 2063 616e 5f65 6469 745f 6d65 7373 6167   can_edit_messag
-0000a020: 6573 0a20 2020 2069 6620 6361 6e5f 6465  es.    if can_de
-0000a030: 6c65 7465 5f6d 6573 7361 6765 7320 6973  lete_messages is
-0000a040: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000a050: 2020 2070 6179 6c6f 6164 5b27 6361 6e5f     payload['can_
-0000a060: 6465 6c65 7465 5f6d 6573 7361 6765 7327  delete_messages'
-0000a070: 5d20 3d20 6361 6e5f 6465 6c65 7465 5f6d  ] = can_delete_m
-0000a080: 6573 7361 6765 730a 2020 2020 6966 2063  essages.    if c
-0000a090: 616e 5f69 6e76 6974 655f 7573 6572 7320  an_invite_users 
-0000a0a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000a0b0: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
-0000a0c0: 6e5f 696e 7669 7465 5f75 7365 7273 275d  n_invite_users']
-0000a0d0: 203d 2063 616e 5f69 6e76 6974 655f 7573   = can_invite_us
-0000a0e0: 6572 730a 2020 2020 6966 2063 616e 5f72  ers.    if can_r
-0000a0f0: 6573 7472 6963 745f 6d65 6d62 6572 7320  estrict_members 
-0000a100: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000a110: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
-0000a120: 6e5f 7265 7374 7269 6374 5f6d 656d 6265  n_restrict_membe
-0000a130: 7273 275d 203d 2063 616e 5f72 6573 7472  rs'] = can_restr
-0000a140: 6963 745f 6d65 6d62 6572 730a 2020 2020  ict_members.    
-0000a150: 6966 2063 616e 5f70 696e 5f6d 6573 7361  if can_pin_messa
-0000a160: 6765 7320 6973 206e 6f74 204e 6f6e 653a  ges is not None:
-0000a170: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000a180: 5b27 6361 6e5f 7069 6e5f 6d65 7373 6167  ['can_pin_messag
-0000a190: 6573 275d 203d 2063 616e 5f70 696e 5f6d  es'] = can_pin_m
-0000a1a0: 6573 7361 6765 730a 2020 2020 6966 2063  essages.    if c
-0000a1b0: 616e 5f70 726f 6d6f 7465 5f6d 656d 6265  an_promote_membe
-0000a1c0: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
-0000a1d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000a1e0: 2763 616e 5f70 726f 6d6f 7465 5f6d 656d  'can_promote_mem
-0000a1f0: 6265 7273 275d 203d 2063 616e 5f70 726f  bers'] = can_pro
-0000a200: 6d6f 7465 5f6d 656d 6265 7273 0a20 2020  mote_members.   
-0000a210: 2069 6620 6973 5f61 6e6f 6e79 6d6f 7573   if is_anonymous
-0000a220: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000a230: 2020 2020 2020 7061 796c 6f61 645b 2769        payload['i
-0000a240: 735f 616e 6f6e 796d 6f75 7327 5d20 3d20  s_anonymous'] = 
-0000a250: 6973 5f61 6e6f 6e79 6d6f 7573 0a20 2020  is_anonymous.   
-0000a260: 2069 6620 6361 6e5f 6d61 6e61 6765 5f63   if can_manage_c
-0000a270: 6861 7420 6973 206e 6f74 204e 6f6e 653a  hat is not None:
-0000a280: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000a290: 5b27 6361 6e5f 6d61 6e61 6765 5f63 6861  ['can_manage_cha
-0000a2a0: 7427 5d20 3d20 6361 6e5f 6d61 6e61 6765  t'] = can_manage
-0000a2b0: 5f63 6861 740a 2020 2020 6966 2063 616e  _chat.    if can
-0000a2c0: 5f6d 616e 6167 655f 7669 6465 6f5f 6368  _manage_video_ch
-0000a2d0: 6174 7320 6973 206e 6f74 204e 6f6e 653a  ats is not None:
-0000a2e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000a2f0: 5b27 6361 6e5f 6d61 6e61 6765 5f76 6964  ['can_manage_vid
-0000a300: 656f 5f63 6861 7473 275d 203d 2063 616e  eo_chats'] = can
-0000a310: 5f6d 616e 6167 655f 7669 6465 6f5f 6368  _manage_video_ch
-0000a320: 6174 730a 2020 2020 6966 2063 616e 5f6d  ats.    if can_m
-0000a330: 616e 6167 655f 746f 7069 6373 2069 7320  anage_topics is 
-0000a340: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a350: 2020 7061 796c 6f61 645b 2763 616e 5f6d    payload['can_m
-0000a360: 616e 6167 655f 746f 7069 6373 275d 203d  anage_topics'] =
-0000a370: 2063 616e 5f6d 616e 6167 655f 746f 7069   can_manage_topi
-0000a380: 6373 0a20 2020 2069 6620 6361 6e5f 706f  cs.    if can_po
-0000a390: 7374 5f73 746f 7269 6573 2069 7320 6e6f  st_stories is no
-0000a3a0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a3b0: 7061 796c 6f61 645b 2763 616e 5f70 6f73  payload['can_pos
-0000a3c0: 745f 7374 6f72 6965 7327 5d20 3d20 6361  t_stories'] = ca
-0000a3d0: 6e5f 706f 7374 5f73 746f 7269 6573 0a20  n_post_stories. 
-0000a3e0: 2020 2069 6620 6361 6e5f 6564 6974 5f73     if can_edit_s
-0000a3f0: 746f 7269 6573 2069 7320 6e6f 7420 4e6f  tories is not No
-0000a400: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000a410: 6f61 645b 2763 616e 5f65 6469 745f 7374  oad['can_edit_st
-0000a420: 6f72 6965 7327 5d20 3d20 6361 6e5f 6564  ories'] = can_ed
-0000a430: 6974 5f73 746f 7269 6573 0a20 2020 2069  it_stories.    i
-0000a440: 6620 6361 6e5f 6465 6c65 7465 5f73 746f  f can_delete_sto
-0000a450: 7269 6573 2069 7320 6e6f 7420 4e6f 6e65  ries is not None
-0000a460: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000a470: 645b 2763 616e 5f64 656c 6574 655f 7374  d['can_delete_st
-0000a480: 6f72 6965 7327 5d20 3d20 6361 6e5f 6465  ories'] = can_de
-0000a490: 6c65 7465 5f73 746f 7269 6573 0a20 2020  lete_stories.   
-0000a4a0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000a4b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000a4c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000a4d0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000a4e0: 2770 6f73 7427 290a 0a0a 6465 6620 7365  'post')...def se
-0000a4f0: 745f 6368 6174 5f61 646d 696e 6973 7472  t_chat_administr
-0000a500: 6174 6f72 5f63 7573 746f 6d5f 7469 746c  ator_custom_titl
-0000a510: 6528 746f 6b65 6e2c 2063 6861 745f 6964  e(token, chat_id
-0000a520: 2c20 7573 6572 5f69 642c 2063 7573 746f  , user_id, custo
-0000a530: 6d5f 7469 746c 6529 3a0a 2020 2020 6d65  m_title):.    me
-0000a540: 7468 6f64 5f75 726c 203d 2027 7365 7443  thod_url = 'setC
-0000a550: 6861 7441 646d 696e 6973 7472 6174 6f72  hatAdministrator
-0000a560: 4375 7374 6f6d 5469 746c 6527 0a20 2020  CustomTitle'.   
-0000a570: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
-0000a580: 2020 2020 2027 6368 6174 5f69 6427 3a20       'chat_id': 
-0000a590: 6368 6174 5f69 642c 2027 7573 6572 5f69  chat_id, 'user_i
-0000a5a0: 6427 3a20 7573 6572 5f69 642c 2027 6375  d': user_id, 'cu
-0000a5b0: 7374 6f6d 5f74 6974 6c65 273a 2063 7573  stom_title': cus
-0000a5c0: 746f 6d5f 7469 746c 650a 2020 2020 7d0a  tom_title.    }.
-0000a5d0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000a5e0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000a5f0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000a600: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000a610: 6f64 3d27 706f 7374 2729 0a0a 0a64 6566  od='post')...def
-0000a620: 2062 616e 5f63 6861 745f 7365 6e64 6572   ban_chat_sender
-0000a630: 5f63 6861 7428 746f 6b65 6e2c 2063 6861  _chat(token, cha
-0000a640: 745f 6964 2c20 7365 6e64 6572 5f63 6861  t_id, sender_cha
-0000a650: 745f 6964 293a 0a20 2020 206d 6574 686f  t_id):.    metho
-0000a660: 645f 7572 6c20 3d20 2762 616e 4368 6174  d_url = 'banChat
-0000a670: 5365 6e64 6572 4368 6174 270a 2020 2020  SenderChat'.    
-0000a680: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-0000a690: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
-0000a6a0: 7365 6e64 6572 5f63 6861 745f 6964 273a  sender_chat_id':
-0000a6b0: 2073 656e 6465 725f 6368 6174 5f69 647d   sender_chat_id}
-0000a6c0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-0000a6d0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
-0000a6e0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000a6f0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
-0000a700: 686f 643d 2770 6f73 7427 290a 0a0a 6465  hod='post')...de
-0000a710: 6620 756e 6261 6e5f 6368 6174 5f73 656e  f unban_chat_sen
-0000a720: 6465 725f 6368 6174 2874 6f6b 656e 2c20  der_chat(token, 
-0000a730: 6368 6174 5f69 642c 2073 656e 6465 725f  chat_id, sender_
-0000a740: 6368 6174 5f69 6429 3a0a 2020 2020 6d65  chat_id):.    me
-0000a750: 7468 6f64 5f75 726c 203d 2027 756e 6261  thod_url = 'unba
-0000a760: 6e43 6861 7453 656e 6465 7243 6861 7427  nChatSenderChat'
-0000a770: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000a780: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-0000a790: 6964 2c20 2773 656e 6465 725f 6368 6174  id, 'sender_chat
-0000a7a0: 5f69 6427 3a20 7365 6e64 6572 5f63 6861  _id': sender_cha
-0000a7b0: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
-0000a7c0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000a7d0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000a7e0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000a7f0: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-0000a800: 0a0a 0a64 6566 2073 6574 5f63 6861 745f  ...def set_chat_
-0000a810: 7065 726d 6973 7369 6f6e 7328 746f 6b65  permissions(toke
-0000a820: 6e2c 2063 6861 745f 6964 2c20 7065 726d  n, chat_id, perm
-0000a830: 6973 7369 6f6e 732c 2075 7365 5f69 6e64  issions, use_ind
-0000a840: 6570 656e 6465 6e74 5f63 6861 745f 7065  ependent_chat_pe
-0000a850: 726d 6973 7369 6f6e 733d 4e6f 6e65 293a  rmissions=None):
-0000a860: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000a870: 3d20 2773 6574 4368 6174 5065 726d 6973  = 'setChatPermis
-0000a880: 7369 6f6e 7327 0a20 2020 2070 6179 6c6f  sions'.    paylo
-0000a890: 6164 203d 207b 0a20 2020 2020 2020 2027  ad = {.        '
-0000a8a0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-0000a8b0: 642c 0a20 2020 2020 2020 2027 7065 726d  d,.        'perm
-0000a8c0: 6973 7369 6f6e 7327 3a20 7065 726d 6973  issions': permis
-0000a8d0: 7369 6f6e 732e 746f 5f6a 736f 6e28 290a  sions.to_json().
-0000a8e0: 2020 2020 7d0a 2020 2020 6966 2075 7365      }.    if use
-0000a8f0: 5f69 6e64 6570 656e 6465 6e74 5f63 6861  _independent_cha
-0000a900: 745f 7065 726d 6973 7369 6f6e 7320 6973  t_permissions is
-0000a910: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000a920: 2020 2070 6179 6c6f 6164 5b27 7573 655f     payload['use_
-0000a930: 696e 6465 7065 6e64 656e 745f 6368 6174  independent_chat
-0000a940: 5f70 6572 6d69 7373 696f 6e73 275d 203d  _permissions'] =
-0000a950: 2075 7365 5f69 6e64 6570 656e 6465 6e74   use_independent
-0000a960: 5f63 6861 745f 7065 726d 6973 7369 6f6e  _chat_permission
-0000a970: 730a 2020 2020 7265 7475 726e 205f 6d61  s.    return _ma
-0000a980: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000a990: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000a9a0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000a9b0: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000a9c0: 6566 2063 7265 6174 655f 6368 6174 5f69  ef create_chat_i
-0000a9d0: 6e76 6974 655f 6c69 6e6b 2874 6f6b 656e  nvite_link(token
-0000a9e0: 2c20 6368 6174 5f69 642c 206e 616d 652c  , chat_id, name,
-0000a9f0: 2065 7870 6972 655f 6461 7465 2c20 6d65   expire_date, me
-0000aa00: 6d62 6572 5f6c 696d 6974 2c20 6372 6561  mber_limit, crea
-0000aa10: 7465 735f 6a6f 696e 5f72 6571 7565 7374  tes_join_request
-0000aa20: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000aa30: 6c20 3d20 2763 7265 6174 6543 6861 7449  l = 'createChatI
-0000aa40: 6e76 6974 654c 696e 6b27 0a20 2020 2070  nviteLink'.    p
-0000aa50: 6179 6c6f 6164 203d 207b 0a20 2020 2020  ayload = {.     
-0000aa60: 2020 2027 6368 6174 5f69 6427 3a20 6368     'chat_id': ch
-0000aa70: 6174 5f69 640a 2020 2020 7d0a 0a20 2020  at_id.    }..   
-0000aa80: 2069 6620 6578 7069 7265 5f64 6174 6520   if expire_date 
-0000aa90: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000aaa0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0000aab0: 6365 2865 7870 6972 655f 6461 7465 2c20  ce(expire_date, 
-0000aac0: 6461 7465 7469 6d65 293a 0a20 2020 2020  datetime):.     
-0000aad0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000aae0: 6578 7069 7265 5f64 6174 6527 5d20 3d20  expire_date'] = 
-0000aaf0: 6578 7069 7265 5f64 6174 652e 7469 6d65  expire_date.time
-0000ab00: 7374 616d 7028 290a 2020 2020 2020 2020  stamp().        
-0000ab10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000ab20: 2020 7061 796c 6f61 645b 2765 7870 6972    payload['expir
-0000ab30: 655f 6461 7465 275d 203d 2065 7870 6972  e_date'] = expir
-0000ab40: 655f 6461 7465 0a20 2020 2069 6620 6d65  e_date.    if me
-0000ab50: 6d62 6572 5f6c 696d 6974 3a0a 2020 2020  mber_limit:.    
-0000ab60: 2020 2020 7061 796c 6f61 645b 276d 656d      payload['mem
-0000ab70: 6265 725f 6c69 6d69 7427 5d20 3d20 6d65  ber_limit'] = me
-0000ab80: 6d62 6572 5f6c 696d 6974 0a20 2020 2069  mber_limit.    i
-0000ab90: 6620 6372 6561 7465 735f 6a6f 696e 5f72  f creates_join_r
-0000aba0: 6571 7565 7374 2069 7320 6e6f 7420 4e6f  equest is not No
-0000abb0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000abc0: 6f61 645b 2763 7265 6174 6573 5f6a 6f69  oad['creates_joi
-0000abd0: 6e5f 7265 7175 6573 7427 5d20 3d20 6372  n_request'] = cr
-0000abe0: 6561 7465 735f 6a6f 696e 5f72 6571 7565  eates_join_reque
-0000abf0: 7374 0a20 2020 2069 6620 6e61 6d65 3a0a  st.    if name:.
-0000ac00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000ac10: 276e 616d 6527 5d20 3d20 6e61 6d65 0a0a  'name'] = name..
-0000ac20: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000ac30: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000ac40: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000ac50: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000ac60: 6f64 3d27 706f 7374 2729 0a0a 0a64 6566  od='post')...def
-0000ac70: 2065 6469 745f 6368 6174 5f69 6e76 6974   edit_chat_invit
-0000ac80: 655f 6c69 6e6b 2874 6f6b 656e 2c20 6368  e_link(token, ch
-0000ac90: 6174 5f69 642c 2069 6e76 6974 655f 6c69  at_id, invite_li
-0000aca0: 6e6b 2c20 6e61 6d65 2c20 6578 7069 7265  nk, name, expire
-0000acb0: 5f64 6174 652c 206d 656d 6265 725f 6c69  _date, member_li
-0000acc0: 6d69 742c 2063 7265 6174 6573 5f6a 6f69  mit, creates_joi
-0000acd0: 6e5f 7265 7175 6573 7429 3a0a 2020 2020  n_request):.    
-0000ace0: 6d65 7468 6f64 5f75 726c 203d 2027 6564  method_url = 'ed
-0000acf0: 6974 4368 6174 496e 7669 7465 4c69 6e6b  itChatInviteLink
-0000ad00: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000ad10: 7b0a 2020 2020 2020 2020 2763 6861 745f  {.        'chat_
-0000ad20: 6964 273a 2063 6861 745f 6964 2c0a 2020  id': chat_id,.  
-0000ad30: 2020 2020 2020 2769 6e76 6974 655f 6c69        'invite_li
-0000ad40: 6e6b 273a 2069 6e76 6974 655f 6c69 6e6b  nk': invite_link
-0000ad50: 0a20 2020 207d 0a0a 2020 2020 6966 2065  .    }..    if e
-0000ad60: 7870 6972 655f 6461 7465 2069 7320 6e6f  xpire_date is no
-0000ad70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000ad80: 6966 2069 7369 6e73 7461 6e63 6528 6578  if isinstance(ex
-0000ad90: 7069 7265 5f64 6174 652c 2064 6174 6574  pire_date, datet
-0000ada0: 696d 6529 3a0a 2020 2020 2020 2020 2020  ime):.          
-0000adb0: 2020 7061 796c 6f61 645b 2765 7870 6972    payload['expir
-0000adc0: 655f 6461 7465 275d 203d 2065 7870 6972  e_date'] = expir
-0000add0: 655f 6461 7465 2e74 696d 6573 7461 6d70  e_date.timestamp
-0000ade0: 2829 0a20 2020 2020 2020 2065 6c73 653a  ().        else:
-0000adf0: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
-0000ae00: 6c6f 6164 5b27 6578 7069 7265 5f64 6174  load['expire_dat
-0000ae10: 6527 5d20 3d20 6578 7069 7265 5f64 6174  e'] = expire_dat
-0000ae20: 650a 0a20 2020 2069 6620 6d65 6d62 6572  e..    if member
-0000ae30: 5f6c 696d 6974 2069 7320 6e6f 7420 4e6f  _limit is not No
-0000ae40: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000ae50: 6f61 645b 276d 656d 6265 725f 6c69 6d69  oad['member_limi
-0000ae60: 7427 5d20 3d20 6d65 6d62 6572 5f6c 696d  t'] = member_lim
-0000ae70: 6974 0a20 2020 2069 6620 6e61 6d65 3a0a  it.    if name:.
-0000ae80: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000ae90: 276e 616d 6527 5d20 3d20 6e61 6d65 0a20  'name'] = name. 
-0000aea0: 2020 2069 6620 6372 6561 7465 735f 6a6f     if creates_jo
-0000aeb0: 696e 5f72 6571 7565 7374 2069 7320 6e6f  in_request is no
-0000aec0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000aed0: 7061 796c 6f61 645b 2763 7265 6174 6573  payload['creates
-0000aee0: 5f6a 6f69 6e5f 7265 7175 6573 7427 5d20  _join_request'] 
-0000aef0: 3d20 6372 6561 7465 735f 6a6f 696e 5f72  = creates_join_r
-0000af00: 6571 7565 7374 0a0a 2020 2020 7265 7475  equest..    retu
-0000af10: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-0000af20: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000af30: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000af40: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
-0000af50: 2729 0a0a 0a64 6566 2072 6576 6f6b 655f  ')...def revoke_
-0000af60: 6368 6174 5f69 6e76 6974 655f 6c69 6e6b  chat_invite_link
-0000af70: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-0000af80: 2069 6e76 6974 655f 6c69 6e6b 293a 0a20   invite_link):. 
-0000af90: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000afa0: 2772 6576 6f6b 6543 6861 7449 6e76 6974  'revokeChatInvit
-0000afb0: 654c 696e 6b27 0a20 2020 2070 6179 6c6f  eLink'.    paylo
-0000afc0: 6164 203d 207b 0a20 2020 2020 2020 2027  ad = {.        '
-0000afd0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-0000afe0: 642c 0a20 2020 2020 2020 2027 696e 7669  d,.        'invi
-0000aff0: 7465 5f6c 696e 6b27 3a20 696e 7669 7465  te_link': invite
-0000b000: 5f6c 696e 6b0a 2020 2020 7d0a 2020 2020  _link.    }.    
-0000b010: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-0000b020: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000b030: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000b040: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
-0000b050: 706f 7374 2729 0a0a 0a64 6566 2065 7870  post')...def exp
-0000b060: 6f72 745f 6368 6174 5f69 6e76 6974 655f  ort_chat_invite_
-0000b070: 6c69 6e6b 2874 6f6b 656e 2c20 6368 6174  link(token, chat
-0000b080: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-0000b090: 5f75 726c 203d 2027 6578 706f 7274 4368  _url = 'exportCh
-0000b0a0: 6174 496e 7669 7465 4c69 6e6b 270a 2020  atInviteLink'.  
-0000b0b0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-0000b0c0: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
-0000b0d0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-0000b0e0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
-0000b0f0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000b100: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
-0000b110: 686f 643d 2770 6f73 7427 290a 0a0a 6465  hod='post')...de
-0000b120: 6620 6170 7072 6f76 655f 6368 6174 5f6a  f approve_chat_j
-0000b130: 6f69 6e5f 7265 7175 6573 7428 746f 6b65  oin_request(toke
-0000b140: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
-0000b150: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-0000b160: 5f75 726c 203d 2027 6170 7072 6f76 6543  _url = 'approveC
-0000b170: 6861 744a 6f69 6e52 6571 7565 7374 270a  hatJoinRequest'.
-0000b180: 2020 2020 7061 796c 6f61 6420 3d20 7b0a      payload = {.
-0000b190: 2020 2020 2020 2020 2763 6861 745f 6964          'chat_id
-0000b1a0: 273a 2063 6861 745f 6964 2c0a 2020 2020  ': chat_id,.    
-0000b1b0: 2020 2020 2775 7365 725f 6964 273a 2075      'user_id': u
-0000b1c0: 7365 725f 6964 0a20 2020 207d 0a20 2020  ser_id.    }.   
-0000b1d0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000b1e0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b1f0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b200: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b210: 2770 6f73 7427 290a 0a0a 6465 6620 6465  'post')...def de
-0000b220: 636c 696e 655f 6368 6174 5f6a 6f69 6e5f  cline_chat_join_
-0000b230: 7265 7175 6573 7428 746f 6b65 6e2c 2063  request(token, c
-0000b240: 6861 745f 6964 2c20 7573 6572 5f69 6429  hat_id, user_id)
-0000b250: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000b260: 203d 2027 6465 636c 696e 6543 6861 744a   = 'declineChatJ
-0000b270: 6f69 6e52 6571 7565 7374 270a 2020 2020  oinRequest'.    
-0000b280: 7061 796c 6f61 6420 3d20 7b0a 2020 2020  payload = {.    
-0000b290: 2020 2020 2763 6861 745f 6964 273a 2063      'chat_id': c
-0000b2a0: 6861 745f 6964 2c0a 2020 2020 2020 2020  hat_id,.        
-0000b2b0: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
-0000b2c0: 6964 0a20 2020 207d 0a20 2020 2072 6574  id.    }.    ret
-0000b2d0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000b2e0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000b2f0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000b300: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-0000b310: 7427 290a 0a0a 6465 6620 7365 745f 6368  t')...def set_ch
-0000b320: 6174 5f70 686f 746f 2874 6f6b 656e 2c20  at_photo(token, 
-0000b330: 6368 6174 5f69 642c 2070 686f 746f 293a  chat_id, photo):
-0000b340: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000b350: 3d20 2773 6574 4368 6174 5068 6f74 6f27  = 'setChatPhoto'
-0000b360: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000b370: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-0000b380: 6964 7d0a 2020 2020 6669 6c65 7320 3d20  id}.    files = 
-0000b390: 4e6f 6e65 0a20 2020 2069 6620 7574 696c  None.    if util
-0000b3a0: 2e69 735f 7374 7269 6e67 2870 686f 746f  .is_string(photo
-0000b3b0: 293a 0a20 2020 2020 2020 2070 6179 6c6f  ):.        paylo
-0000b3c0: 6164 5b27 7068 6f74 6f27 5d20 3d20 7068  ad['photo'] = ph
-0000b3d0: 6f74 6f0a 2020 2020 656c 6966 2075 7469  oto.    elif uti
-0000b3e0: 6c2e 6973 5f70 696c 5f69 6d61 6765 2870  l.is_pil_image(p
-0000b3f0: 686f 746f 293a 0a20 2020 2020 2020 2066  hoto):.        f
-0000b400: 696c 6573 203d 207b 2770 686f 746f 273a  iles = {'photo':
-0000b410: 2075 7469 6c2e 7069 6c5f 696d 6167 655f   util.pil_image_
-0000b420: 746f 5f66 696c 6528 7068 6f74 6f29 7d0a  to_file(photo)}.
-0000b430: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000b440: 2020 6669 6c65 7320 3d20 7b27 7068 6f74    files = {'phot
-0000b450: 6f27 3a20 7068 6f74 6f7d 0a20 2020 2072  o': photo}.    r
-0000b460: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000b470: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000b480: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000b490: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-0000b4a0: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
-0000b4b0: 2729 0a0a 0a64 6566 2064 656c 6574 655f  ')...def delete_
-0000b4c0: 6368 6174 5f70 686f 746f 2874 6f6b 656e  chat_photo(token
-0000b4d0: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
-0000b4e0: 6d65 7468 6f64 5f75 726c 203d 2027 6465  method_url = 'de
-0000b4f0: 6c65 7465 4368 6174 5068 6f74 6f27 0a20  leteChatPhoto'. 
-0000b500: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-0000b510: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-0000b520: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-0000b530: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000b540: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000b550: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000b560: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000b570: 6566 2073 6574 5f63 6861 745f 7469 746c  ef set_chat_titl
-0000b580: 6528 746f 6b65 6e2c 2063 6861 745f 6964  e(token, chat_id
-0000b590: 2c20 7469 746c 6529 3a0a 2020 2020 6d65  , title):.    me
-0000b5a0: 7468 6f64 5f75 726c 203d 2027 7365 7443  thod_url = 'setC
-0000b5b0: 6861 7454 6974 6c65 270a 2020 2020 7061  hatTitle'.    pa
-0000b5c0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-0000b5d0: 6427 3a20 6368 6174 5f69 642c 2027 7469  d': chat_id, 'ti
-0000b5e0: 746c 6527 3a20 7469 746c 657d 0a20 2020  tle': title}.   
-0000b5f0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000b600: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b610: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b620: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b630: 2770 6f73 7427 290a 0a0a 6465 6620 7365  'post')...def se
-0000b640: 745f 6d79 5f64 6573 6372 6970 7469 6f6e  t_my_description
-0000b650: 2874 6f6b 656e 2c20 6465 7363 7269 7074  (token, descript
-0000b660: 696f 6e3d 4e6f 6e65 2c20 6c61 6e67 7561  ion=None, langua
-0000b670: 6765 5f63 6f64 653d 4e6f 6e65 293a 0a20  ge_code=None):. 
-0000b680: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000b690: 7227 7365 744d 7944 6573 6372 6970 7469  r'setMyDescripti
-0000b6a0: 6f6e 270a 2020 2020 7061 796c 6f61 6420  on'.    payload 
-0000b6b0: 3d20 7b7d 0a20 2020 2069 6620 6465 7363  = {}.    if desc
-0000b6c0: 7269 7074 696f 6e20 6973 206e 6f74 204e  ription is not N
-0000b6d0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000b6e0: 6c6f 6164 5b27 6465 7363 7269 7074 696f  load['descriptio
-0000b6f0: 6e27 5d20 3d20 6465 7363 7269 7074 696f  n'] = descriptio
-0000b700: 6e0a 2020 2020 6966 206c 616e 6775 6167  n.    if languag
-0000b710: 655f 636f 6465 2069 7320 6e6f 7420 4e6f  e_code is not No
-0000b720: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000b730: 6f61 645b 276c 616e 6775 6167 655f 636f  oad['language_co
-0000b740: 6465 275d 203d 206c 616e 6775 6167 655f  de'] = language_
-0000b750: 636f 6465 0a20 2020 2072 6574 7572 6e20  code.    return 
-0000b760: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000b770: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000b780: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000b790: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-0000b7a0: 0a0a 6465 6620 6765 745f 6d79 5f64 6573  ..def get_my_des
-0000b7b0: 6372 6970 7469 6f6e 2874 6f6b 656e 2c20  cription(token, 
-0000b7c0: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
-0000b7d0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-0000b7e0: 7572 6c20 3d20 7227 6765 744d 7944 6573  url = r'getMyDes
-0000b7f0: 6372 6970 7469 6f6e 270a 2020 2020 7061  cription'.    pa
-0000b800: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-0000b810: 6620 6c61 6e67 7561 6765 5f63 6f64 653a  f language_code:
-0000b820: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000b830: 5b27 6c61 6e67 7561 6765 5f63 6f64 6527  ['language_code'
-0000b840: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000b850: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-0000b860: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000b870: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000b880: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-0000b890: 6465 6620 7365 745f 6d79 5f73 686f 7274  def set_my_short
-0000b8a0: 5f64 6573 6372 6970 7469 6f6e 2874 6f6b  _description(tok
-0000b8b0: 656e 2c20 7368 6f72 745f 6465 7363 7269  en, short_descri
-0000b8c0: 7074 696f 6e3d 4e6f 6e65 2c20 6c61 6e67  ption=None, lang
-0000b8d0: 7561 6765 5f63 6f64 653d 4e6f 6e65 293a  uage_code=None):
-0000b8e0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000b8f0: 3d20 7227 7365 744d 7953 686f 7274 4465  = r'setMyShortDe
-0000b900: 7363 7269 7074 696f 6e27 0a20 2020 2070  scription'.    p
-0000b910: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
-0000b920: 6966 2073 686f 7274 5f64 6573 6372 6970  if short_descrip
-0000b930: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-0000b940: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000b950: 645b 2773 686f 7274 5f64 6573 6372 6970  d['short_descrip
-0000b960: 7469 6f6e 275d 203d 2073 686f 7274 5f64  tion'] = short_d
-0000b970: 6573 6372 6970 7469 6f6e 0a20 2020 2069  escription.    i
-0000b980: 6620 6c61 6e67 7561 6765 5f63 6f64 6520  f language_code 
-0000b990: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000b9a0: 2020 2020 2070 6179 6c6f 6164 5b27 6c61       payload['la
-0000b9b0: 6e67 7561 6765 5f63 6f64 6527 5d20 3d20  nguage_code'] = 
-0000b9c0: 6c61 6e67 7561 6765 5f63 6f64 650a 2020  language_code.  
-0000b9d0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000b9e0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000b9f0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000ba00: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-0000ba10: 3d27 706f 7374 2729 0a0a 0a64 6566 2067  ='post')...def g
-0000ba20: 6574 5f6d 795f 7368 6f72 745f 6465 7363  et_my_short_desc
-0000ba30: 7269 7074 696f 6e28 746f 6b65 6e2c 206c  ription(token, l
-0000ba40: 616e 6775 6167 655f 636f 6465 3d4e 6f6e  anguage_code=Non
-0000ba50: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-0000ba60: 726c 203d 2072 2767 6574 4d79 5368 6f72  rl = r'getMyShor
-0000ba70: 7444 6573 6372 6970 7469 6f6e 270a 2020  tDescription'.  
-0000ba80: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
-0000ba90: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
-0000baa0: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
-0000bab0: 6c6f 6164 5b27 6c61 6e67 7561 6765 5f63  load['language_c
-0000bac0: 6f64 6527 5d20 3d20 6c61 6e67 7561 6765  ode'] = language
-0000bad0: 5f63 6f64 650a 2020 2020 7265 7475 726e  _code.    return
-0000bae0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000baf0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000bb00: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000bb10: 290a 0a0a 6465 6620 6765 745f 6d79 5f63  )...def get_my_c
-0000bb20: 6f6d 6d61 6e64 7328 746f 6b65 6e2c 2073  ommands(token, s
-0000bb30: 636f 7065 3d4e 6f6e 652c 206c 616e 6775  cope=None, langu
-0000bb40: 6167 655f 636f 6465 3d4e 6f6e 6529 3a0a  age_code=None):.
-0000bb50: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000bb60: 2072 2767 6574 4d79 436f 6d6d 616e 6473   r'getMyCommands
-0000bb70: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000bb80: 7b7d 0a20 2020 2069 6620 7363 6f70 653a  {}.    if scope:
-0000bb90: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000bba0: 5b27 7363 6f70 6527 5d20 3d20 7363 6f70  ['scope'] = scop
-0000bbb0: 652e 746f 5f6a 736f 6e28 290a 2020 2020  e.to_json().    
-0000bbc0: 6966 206c 616e 6775 6167 655f 636f 6465  if language_code
-0000bbd0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000bbe0: 645b 276c 616e 6775 6167 655f 636f 6465  d['language_code
-0000bbf0: 275d 203d 206c 616e 6775 6167 655f 636f  '] = language_co
-0000bc00: 6465 0a20 2020 2072 6574 7572 6e20 5f6d  de.    return _m
-0000bc10: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000bc20: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000bc30: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-0000bc40: 0a64 6566 2073 6574 5f6d 795f 6e61 6d65  .def set_my_name
-0000bc50: 2874 6f6b 656e 2c20 6e61 6d65 3d4e 6f6e  (token, name=Non
-0000bc60: 652c 206c 616e 6775 6167 655f 636f 6465  e, language_code
-0000bc70: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000bc80: 6f64 5f75 726c 203d 2072 2773 6574 4d79  od_url = r'setMy
-0000bc90: 4e61 6d65 270a 2020 2020 7061 796c 6f61  Name'.    payloa
-0000bca0: 6420 3d20 7b7d 0a20 2020 2069 6620 6e61  d = {}.    if na
-0000bcb0: 6d65 2069 7320 6e6f 7420 4e6f 6e65 3a0a  me is not None:.
-0000bcc0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000bcd0: 276e 616d 6527 5d20 3d20 6e61 6d65 0a20  'name'] = name. 
-0000bce0: 2020 2069 6620 6c61 6e67 7561 6765 5f63     if language_c
-0000bcf0: 6f64 6520 6973 206e 6f74 204e 6f6e 653a  ode is not None:
-0000bd00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000bd10: 5b27 6c61 6e67 7561 6765 5f63 6f64 6527  ['language_code'
-0000bd20: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000bd30: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-0000bd40: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000bd50: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000bd60: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000bd70: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000bd80: 6566 2067 6574 5f6d 795f 6e61 6d65 2874  ef get_my_name(t
-0000bd90: 6f6b 656e 2c20 6c61 6e67 7561 6765 5f63  oken, language_c
-0000bda0: 6f64 653d 4e6f 6e65 293a 0a20 2020 206d  ode=None):.    m
-0000bdb0: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
-0000bdc0: 744d 794e 616d 6527 0a20 2020 2070 6179  tMyName'.    pay
-0000bdd0: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-0000bde0: 206c 616e 6775 6167 655f 636f 6465 2069   language_code i
-0000bdf0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000be00: 2020 2020 7061 796c 6f61 645b 276c 616e      payload['lan
-0000be10: 6775 6167 655f 636f 6465 275d 203d 206c  guage_code'] = l
-0000be20: 616e 6775 6167 655f 636f 6465 0a20 2020  anguage_code.   
-0000be30: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000be40: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000be50: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000be60: 7061 796c 6f61 6429 0a0a 0a64 6566 2073  payload)...def s
-0000be70: 6574 5f63 6861 745f 6d65 6e75 5f62 7574  et_chat_menu_but
-0000be80: 746f 6e28 746f 6b65 6e2c 2063 6861 745f  ton(token, chat_
-0000be90: 6964 3d4e 6f6e 652c 206d 656e 755f 6275  id=None, menu_bu
-0000bea0: 7474 6f6e 3d4e 6f6e 6529 3a0a 2020 2020  tton=None):.    
-0000beb0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-0000bec0: 6574 4368 6174 4d65 6e75 4275 7474 6f6e  etChatMenuButton
-0000bed0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000bee0: 7b7d 0a20 2020 2069 6620 6368 6174 5f69  {}.    if chat_i
-0000bef0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000bf00: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
-0000bf10: 6368 6174 5f69 640a 2020 2020 6966 206d  chat_id.    if m
-0000bf20: 656e 755f 6275 7474 6f6e 3a0a 2020 2020  enu_button:.    
-0000bf30: 2020 2020 7061 796c 6f61 645b 276d 656e      payload['men
-0000bf40: 755f 6275 7474 6f6e 275d 203d 206d 656e  u_button'] = men
-0000bf50: 755f 6275 7474 6f6e 2e74 6f5f 6a73 6f6e  u_button.to_json
-0000bf60: 2829 0a20 2020 2072 6574 7572 6e20 5f6d  ().    return _m
-0000bf70: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000bf80: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000bf90: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000bfa0: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-0000bfb0: 6465 6620 6765 745f 6368 6174 5f6d 656e  def get_chat_men
-0000bfc0: 755f 6275 7474 6f6e 2874 6f6b 656e 2c20  u_button(token, 
-0000bfd0: 6368 6174 5f69 643d 4e6f 6e65 293a 0a20  chat_id=None):. 
-0000bfe0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000bff0: 7227 6765 7443 6861 744d 656e 7542 7574  r'getChatMenuBut
-0000c000: 746f 6e27 0a20 2020 2070 6179 6c6f 6164  ton'.    payload
-0000c010: 203d 207b 7d0a 2020 2020 6966 2063 6861   = {}.    if cha
-0000c020: 745f 6964 3a0a 2020 2020 2020 2020 7061  t_id:.        pa
-0000c030: 796c 6f61 645b 2763 6861 745f 6964 275d  yload['chat_id']
-0000c040: 203d 2063 6861 745f 6964 0a20 2020 2072   = chat_id.    r
-0000c050: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000c060: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000c070: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000c080: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
-0000c090: 6f73 7427 290a 0a0a 6465 6620 7365 745f  ost')...def set_
-0000c0a0: 6d79 5f64 6566 6175 6c74 5f61 646d 696e  my_default_admin
-0000c0b0: 6973 7472 6174 6f72 5f72 6967 6874 7328  istrator_rights(
-0000c0c0: 746f 6b65 6e2c 2072 6967 6874 733d 4e6f  token, rights=No
-0000c0d0: 6e65 2c20 666f 725f 6368 616e 6e65 6c73  ne, for_channels
-0000c0e0: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000c0f0: 6f64 5f75 726c 203d 2072 2773 6574 4d79  od_url = r'setMy
-0000c100: 4465 6661 756c 7441 646d 696e 6973 7472  DefaultAdministr
-0000c110: 6174 6f72 5269 6768 7473 270a 2020 2020  atorRights'.    
-0000c120: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
-0000c130: 2069 6620 7269 6768 7473 3a0a 2020 2020   if rights:.    
-0000c140: 2020 2020 7061 796c 6f61 645b 2772 6967      payload['rig
-0000c150: 6874 7327 5d20 3d20 7269 6768 7473 2e74  hts'] = rights.t
-0000c160: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
-0000c170: 666f 725f 6368 616e 6e65 6c73 2069 7320  for_channels is 
-0000c180: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000c190: 2020 7061 796c 6f61 645b 2766 6f72 5f63    payload['for_c
-0000c1a0: 6861 6e6e 656c 7327 5d20 3d20 666f 725f  hannels'] = for_
-0000c1b0: 6368 616e 6e65 6c73 0a20 2020 2072 6574  channels.    ret
-0000c1c0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000c1d0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000c1e0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000c1f0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-0000c200: 7427 290a 0a0a 6465 6620 6765 745f 6d79  t')...def get_my
-0000c210: 5f64 6566 6175 6c74 5f61 646d 696e 6973  _default_adminis
-0000c220: 7472 6174 6f72 5f72 6967 6874 7328 746f  trator_rights(to
-0000c230: 6b65 6e2c 2066 6f72 5f63 6861 6e6e 656c  ken, for_channel
-0000c240: 733d 4e6f 6e65 293a 0a20 2020 206d 6574  s=None):.    met
-0000c250: 686f 645f 7572 6c20 3d20 7227 6765 744d  hod_url = r'getM
-0000c260: 7944 6566 6175 6c74 4164 6d69 6e69 7374  yDefaultAdminist
-0000c270: 7261 746f 7252 6967 6874 7327 0a20 2020  ratorRights'.   
-0000c280: 2070 6179 6c6f 6164 203d 207b 7d0a 2020   payload = {}.  
-0000c290: 2020 6966 2066 6f72 5f63 6861 6e6e 656c    if for_channel
-0000c2a0: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
-0000c2b0: 6164 5b27 666f 725f 6368 616e 6e65 6c73  ad['for_channels
-0000c2c0: 275d 203d 2066 6f72 5f63 6861 6e6e 656c  '] = for_channel
-0000c2d0: 730a 2020 2020 7265 7475 726e 205f 6d61  s.    return _ma
-0000c2e0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000c2f0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000c300: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000c310: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000c320: 6566 2073 6574 5f6d 795f 636f 6d6d 616e  ef set_my_comman
-0000c330: 6473 2874 6f6b 656e 2c20 636f 6d6d 616e  ds(token, comman
-0000c340: 6473 2c20 7363 6f70 653d 4e6f 6e65 2c20  ds, scope=None, 
-0000c350: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
-0000c360: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-0000c370: 7572 6c20 3d20 7227 7365 744d 7943 6f6d  url = r'setMyCom
-0000c380: 6d61 6e64 7327 0a20 2020 2070 6179 6c6f  mands'.    paylo
-0000c390: 6164 203d 207b 2763 6f6d 6d61 6e64 7327  ad = {'commands'
-0000c3a0: 3a20 5f63 6f6e 7665 7274 5f6c 6973 745f  : _convert_list_
-0000c3b0: 6a73 6f6e 5f73 6572 6961 6c69 7a61 626c  json_serializabl
-0000c3c0: 6528 636f 6d6d 616e 6473 297d 0a20 2020  e(commands)}.   
-0000c3d0: 2069 6620 7363 6f70 653a 0a20 2020 2020   if scope:.     
-0000c3e0: 2020 2070 6179 6c6f 6164 5b27 7363 6f70     payload['scop
-0000c3f0: 6527 5d20 3d20 7363 6f70 652e 746f 5f6a  e'] = scope.to_j
-0000c400: 736f 6e28 290a 2020 2020 6966 206c 616e  son().    if lan
-0000c410: 6775 6167 655f 636f 6465 3a0a 2020 2020  guage_code:.    
-0000c420: 2020 2020 7061 796c 6f61 645b 276c 616e      payload['lan
-0000c430: 6775 6167 655f 636f 6465 275d 203d 206c  guage_code'] = l
-0000c440: 616e 6775 6167 655f 636f 6465 0a20 2020  anguage_code.   
-0000c450: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000c460: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000c470: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000c480: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000c490: 2770 6f73 7427 290a 0a0a 6465 6620 6765  'post')...def ge
-0000c4a0: 745f 6275 7369 6e65 7373 5f63 6f6e 6e65  t_business_conne
-0000c4b0: 6374 696f 6e28 746f 6b65 6e2c 2062 7573  ction(token, bus
-0000c4c0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-0000c4d0: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-0000c4e0: 5f75 726c 203d 2027 6765 7442 7573 696e  _url = 'getBusin
-0000c4f0: 6573 7343 6f6e 6e65 6374 696f 6e27 0a20  essConnection'. 
-0000c500: 2020 2070 6179 6c6f 6164 203d 207b 2762     payload = {'b
-0000c510: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
-0000c520: 6f6e 5f69 6427 3a20 6275 7369 6e65 7373  on_id': business
-0000c530: 5f63 6f6e 6e65 6374 696f 6e5f 6964 7d0a  _connection_id}.
-0000c540: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000c550: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000c560: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000c570: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000c580: 6f64 3d27 706f 7374 2729 0a0a 0a64 6566  od='post')...def
-0000c590: 2064 656c 6574 655f 6d79 5f63 6f6d 6d61   delete_my_comma
-0000c5a0: 6e64 7328 746f 6b65 6e2c 2073 636f 7065  nds(token, scope
-0000c5b0: 3d4e 6f6e 652c 206c 616e 6775 6167 655f  =None, language_
-0000c5c0: 636f 6465 3d4e 6f6e 6529 3a0a 2020 2020  code=None):.    
-0000c5d0: 6d65 7468 6f64 5f75 726c 203d 2072 2764  method_url = r'd
-0000c5e0: 656c 6574 654d 7943 6f6d 6d61 6e64 7327  eleteMyCommands'
-0000c5f0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000c600: 7d0a 2020 2020 6966 2073 636f 7065 3a0a  }.    if scope:.
-0000c610: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000c620: 2773 636f 7065 275d 203d 2073 636f 7065  'scope'] = scope
-0000c630: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
-0000c640: 6620 6c61 6e67 7561 6765 5f63 6f64 653a  f language_code:
-0000c650: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c660: 5b27 6c61 6e67 7561 6765 5f63 6f64 6527  ['language_code'
-0000c670: 5d20 3d20 6c61 6e67 7561 6765 5f63 6f64  ] = language_cod
-0000c680: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-0000c690: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000c6a0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000c6b0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000c6c0: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000c6d0: 6566 2073 6574 5f63 6861 745f 6465 7363  ef set_chat_desc
-0000c6e0: 7269 7074 696f 6e28 746f 6b65 6e2c 2063  ription(token, c
-0000c6f0: 6861 745f 6964 2c20 6465 7363 7269 7074  hat_id, descript
-0000c700: 696f 6e29 3a0a 2020 2020 6d65 7468 6f64  ion):.    method
-0000c710: 5f75 726c 203d 2027 7365 7443 6861 7444  _url = 'setChatD
-0000c720: 6573 6372 6970 7469 6f6e 270a 2020 2020  escription'.    
-0000c730: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-0000c740: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
-0000c750: 2020 2069 6620 6465 7363 7269 7074 696f     if descriptio
-0000c760: 6e20 6973 206e 6f74 204e 6f6e 653a 2020  n is not None:  
-0000c770: 2320 416c 6c6f 7720 656d 7074 7920 7374  # Allow empty st
-0000c780: 7269 6e67 730a 2020 2020 2020 2020 7061  rings.        pa
-0000c790: 796c 6f61 645b 2764 6573 6372 6970 7469  yload['descripti
-0000c7a0: 6f6e 275d 203d 2064 6573 6372 6970 7469  on'] = descripti
-0000c7b0: 6f6e 0a20 2020 2072 6574 7572 6e20 5f6d  on.    return _m
-0000c7c0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000c7d0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000c7e0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000c7f0: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-0000c800: 6465 6620 7069 6e5f 6368 6174 5f6d 6573  def pin_chat_mes
-0000c810: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
-0000c820: 5f69 642c 206d 6573 7361 6765 5f69 642c  _id, message_id,
-0000c830: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-0000c840: 6174 696f 6e3d 4e6f 6e65 293a 0a20 2020  ation=None):.   
-0000c850: 206d 6574 686f 645f 7572 6c20 3d20 2770   method_url = 'p
-0000c860: 696e 4368 6174 4d65 7373 6167 6527 0a20  inChatMessage'. 
-0000c870: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-0000c880: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-0000c890: 2c20 276d 6573 7361 6765 5f69 6427 3a20  , 'message_id': 
-0000c8a0: 6d65 7373 6167 655f 6964 7d0a 2020 2020  message_id}.    
-0000c8b0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-0000c8c0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-0000c8d0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000c8e0: 6c6f 6164 5b27 6469 7361 626c 655f 6e6f  load['disable_no
-0000c8f0: 7469 6669 6361 7469 6f6e 275d 203d 2064  tification'] = d
-0000c900: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000c910: 696f 6e0a 2020 2020 7265 7475 726e 205f  ion.    return _
-0000c920: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-0000c930: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000c940: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000c950: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-0000c960: 0a64 6566 2075 6e70 696e 5f63 6861 745f  .def unpin_chat_
-0000c970: 6d65 7373 6167 6528 746f 6b65 6e2c 2063  message(token, c
-0000c980: 6861 745f 6964 2c20 6d65 7373 6167 655f  hat_id, message_
-0000c990: 6964 293a 0a20 2020 206d 6574 686f 645f  id):.    method_
-0000c9a0: 7572 6c20 3d20 2775 6e70 696e 4368 6174  url = 'unpinChat
-0000c9b0: 4d65 7373 6167 6527 0a20 2020 2070 6179  Message'.    pay
-0000c9c0: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-0000c9d0: 273a 2063 6861 745f 6964 7d0a 2020 2020  ': chat_id}.    
-0000c9e0: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
-0000c9f0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000ca00: 6d65 7373 6167 655f 6964 275d 203d 206d  message_id'] = m
-0000ca10: 6573 7361 6765 5f69 640a 2020 2020 7265  essage_id.    re
-0000ca20: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-0000ca30: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000ca40: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000ca50: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-0000ca60: 7374 2729 0a0a 0a64 6566 2075 6e70 696e  st')...def unpin
-0000ca70: 5f61 6c6c 5f63 6861 745f 6d65 7373 6167  _all_chat_messag
-0000ca80: 6573 2874 6f6b 656e 2c20 6368 6174 5f69  es(token, chat_i
-0000ca90: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000caa0: 726c 203d 2027 756e 7069 6e41 6c6c 4368  rl = 'unpinAllCh
-0000cab0: 6174 4d65 7373 6167 6573 270a 2020 2020  atMessages'.    
-0000cac0: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-0000cad0: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
-0000cae0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000caf0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000cb00: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000cb10: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000cb20: 643d 2770 6f73 7427 290a 0a0a 2320 5570  d='post')...# Up
-0000cb30: 6461 7469 6e67 206d 6573 7361 6765 730a  dating messages.
-0000cb40: 0a64 6566 2065 6469 745f 6d65 7373 6167  .def edit_messag
-0000cb50: 655f 7465 7874 2874 6f6b 656e 2c20 7465  e_text(token, te
-0000cb60: 7874 2c20 6368 6174 5f69 643d 4e6f 6e65  xt, chat_id=None
-0000cb70: 2c20 6d65 7373 6167 655f 6964 3d4e 6f6e  , message_id=Non
-0000cb80: 652c 2069 6e6c 696e 655f 6d65 7373 6167  e, inline_messag
-0000cb90: 655f 6964 3d4e 6f6e 652c 2070 6172 7365  e_id=None, parse
-0000cba0: 5f6d 6f64 653d 4e6f 6e65 2c0a 2020 2020  _mode=None,.    
-0000cbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cbc0: 2020 656e 7469 7469 6573 3d4e 6f6e 652c    entities=None,
-0000cbd0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
-0000cbe0: 6e65 2c20 6c69 6e6b 5f70 7265 7669 6577  ne, link_preview
-0000cbf0: 5f6f 7074 696f 6e73 3d4e 6f6e 6529 3a0a  _options=None):.
-0000cc00: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000cc10: 2072 2765 6469 744d 6573 7361 6765 5465   r'editMessageTe
-0000cc20: 7874 270a 2020 2020 7061 796c 6f61 6420  xt'.    payload 
-0000cc30: 3d20 7b27 7465 7874 273a 2074 6578 747d  = {'text': text}
-0000cc40: 0a20 2020 2069 6620 6368 6174 5f69 643a  .    if chat_id:
-0000cc50: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000cc60: 5b27 6368 6174 5f69 6427 5d20 3d20 6368  ['chat_id'] = ch
-0000cc70: 6174 5f69 640a 2020 2020 6966 206d 6573  at_id.    if mes
-0000cc80: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
-0000cc90: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
-0000cca0: 655f 6964 275d 203d 206d 6573 7361 6765  e_id'] = message
-0000ccb0: 5f69 640a 2020 2020 6966 2069 6e6c 696e  _id.    if inlin
-0000ccc0: 655f 6d65 7373 6167 655f 6964 3a0a 2020  e_message_id:.  
-0000ccd0: 2020 2020 2020 7061 796c 6f61 645b 2769        payload['i
-0000cce0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-0000ccf0: 275d 203d 2069 6e6c 696e 655f 6d65 7373  '] = inline_mess
-0000cd00: 6167 655f 6964 0a20 2020 2069 6620 7061  age_id.    if pa
-0000cd10: 7273 655f 6d6f 6465 3a0a 2020 2020 2020  rse_mode:.      
-0000cd20: 2020 7061 796c 6f61 645b 2770 6172 7365    payload['parse
-0000cd30: 5f6d 6f64 6527 5d20 3d20 7061 7273 655f  _mode'] = parse_
-0000cd40: 6d6f 6465 0a20 2020 2069 6620 656e 7469  mode.    if enti
-0000cd50: 7469 6573 3a0a 2020 2020 2020 2020 7061  ties:.        pa
-0000cd60: 796c 6f61 645b 2765 6e74 6974 6965 7327  yload['entities'
-0000cd70: 5d20 3d20 6a73 6f6e 2e64 756d 7073 2874  ] = json.dumps(t
-0000cd80: 7970 6573 2e4d 6573 7361 6765 456e 7469  ypes.MessageEnti
-0000cd90: 7479 2e74 6f5f 6c69 7374 5f6f 665f 6469  ty.to_list_of_di
-0000cda0: 6374 7328 656e 7469 7469 6573 2929 0a20  cts(entities)). 
-0000cdb0: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-0000cdc0: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
-0000cdd0: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
-0000cde0: 7027 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p'] = _convert_m
-0000cdf0: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
-0000ce00: 7570 290a 2020 2020 6966 206c 696e 6b5f  up).    if link_
-0000ce10: 7072 6576 6965 775f 6f70 7469 6f6e 7320  preview_options 
-0000ce20: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000ce30: 2020 2020 2070 6179 6c6f 6164 5b27 6c69       payload['li
-0000ce40: 6e6b 5f70 7265 7669 6577 5f6f 7074 696f  nk_preview_optio
-0000ce50: 6e73 275d 203d 206c 696e 6b5f 7072 6576  ns'] = link_prev
-0000ce60: 6965 775f 6f70 7469 6f6e 732e 746f 5f6a  iew_options.to_j
-0000ce70: 736f 6e28 290a 2020 2020 7265 7475 726e  son().    return
-0000ce80: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000ce90: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000cea0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000ceb0: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-0000cec0: 0a0a 0a64 6566 2065 6469 745f 6d65 7373  ...def edit_mess
-0000ced0: 6167 655f 6361 7074 696f 6e28 746f 6b65  age_caption(toke
-0000cee0: 6e2c 2063 6170 7469 6f6e 2c20 6368 6174  n, caption, chat
-0000cef0: 5f69 643d 4e6f 6e65 2c20 6d65 7373 6167  _id=None, messag
-0000cf00: 655f 6964 3d4e 6f6e 652c 2069 6e6c 696e  e_id=None, inlin
-0000cf10: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
-0000cf20: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-0000cf30: 2020 2020 2020 2020 2020 2020 7061 7273              pars
-0000cf40: 655f 6d6f 6465 3d4e 6f6e 652c 2063 6170  e_mode=None, cap
-0000cf50: 7469 6f6e 5f65 6e74 6974 6965 733d 4e6f  tion_entities=No
-0000cf60: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
-0000cf70: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000cf80: 6f64 5f75 726c 203d 2072 2765 6469 744d  od_url = r'editM
-0000cf90: 6573 7361 6765 4361 7074 696f 6e27 0a20  essageCaption'. 
-0000cfa0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-0000cfb0: 6170 7469 6f6e 273a 2063 6170 7469 6f6e  aption': caption
-0000cfc0: 7d0a 2020 2020 6966 2063 6861 745f 6964  }.    if chat_id
-0000cfd0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000cfe0: 645b 2763 6861 745f 6964 275d 203d 2063  d['chat_id'] = c
-0000cff0: 6861 745f 6964 0a20 2020 2069 6620 6d65  hat_id.    if me
-0000d000: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000d010: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
-0000d020: 6765 5f69 6427 5d20 3d20 6d65 7373 6167  ge_id'] = messag
-0000d030: 655f 6964 0a20 2020 2069 6620 696e 6c69  e_id.    if inli
-0000d040: 6e65 5f6d 6573 7361 6765 5f69 643a 0a20  ne_message_id:. 
-0000d050: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000d060: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000d070: 6427 5d20 3d20 696e 6c69 6e65 5f6d 6573  d'] = inline_mes
-0000d080: 7361 6765 5f69 640a 2020 2020 6966 2070  sage_id.    if p
-0000d090: 6172 7365 5f6d 6f64 653a 0a20 2020 2020  arse_mode:.     
-0000d0a0: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
-0000d0b0: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
-0000d0c0: 5f6d 6f64 650a 2020 2020 6966 2063 6170  _mode.    if cap
-0000d0d0: 7469 6f6e 5f65 6e74 6974 6965 733a 0a20  tion_entities:. 
-0000d0e0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000d0f0: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-0000d100: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
-0000d110: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
-0000d120: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
-0000d130: 6963 7473 2863 6170 7469 6f6e 5f65 6e74  icts(caption_ent
-0000d140: 6974 6965 7329 290a 2020 2020 6966 2072  ities)).    if r
-0000d150: 6570 6c79 5f6d 6172 6b75 703a 0a20 2020  eply_markup:.   
-0000d160: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
-0000d170: 706c 795f 6d61 726b 7570 275d 203d 205f  ply_markup'] = _
-0000d180: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
-0000d190: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
-0000d1a0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000d1b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000d1c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000d1d0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000d1e0: 2770 6f73 7427 290a 0a0a 6465 6620 6564  'post')...def ed
-0000d1f0: 6974 5f6d 6573 7361 6765 5f6d 6564 6961  it_message_media
-0000d200: 2874 6f6b 656e 2c20 6d65 6469 612c 2063  (token, media, c
-0000d210: 6861 745f 6964 3d4e 6f6e 652c 206d 6573  hat_id=None, mes
-0000d220: 7361 6765 5f69 643d 4e6f 6e65 2c20 696e  sage_id=None, in
-0000d230: 6c69 6e65 5f6d 6573 7361 6765 5f69 643d  line_message_id=
-0000d240: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
-0000d250: 7570 3d4e 6f6e 6529 3a0a 2020 2020 6d65  up=None):.    me
-0000d260: 7468 6f64 5f75 726c 203d 2072 2765 6469  thod_url = r'edi
-0000d270: 744d 6573 7361 6765 4d65 6469 6127 0a20  tMessageMedia'. 
-0000d280: 2020 206d 6564 6961 5f6a 736f 6e2c 2066     media_json, f
-0000d290: 696c 6520 3d20 636f 6e76 6572 745f 696e  ile = convert_in
-0000d2a0: 7075 745f 6d65 6469 6128 6d65 6469 6129  put_media(media)
-0000d2b0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000d2c0: 276d 6564 6961 273a 206d 6564 6961 5f6a  'media': media_j
-0000d2d0: 736f 6e7d 0a20 2020 2069 6620 6368 6174  son}.    if chat
-0000d2e0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000d2f0: 6c6f 6164 5b27 6368 6174 5f69 6427 5d20  load['chat_id'] 
-0000d300: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
-0000d310: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
-0000d320: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-0000d330: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
-0000d340: 7361 6765 5f69 640a 2020 2020 6966 2069  sage_id.    if i
-0000d350: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-0000d360: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000d370: 645b 2769 6e6c 696e 655f 6d65 7373 6167  d['inline_messag
-0000d380: 655f 6964 275d 203d 2069 6e6c 696e 655f  e_id'] = inline_
-0000d390: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-0000d3a0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-0000d3b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000d3c0: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
-0000d3d0: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
-0000d3e0: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-0000d3f0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000d400: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000d410: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000d420: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
-0000d430: 733d 6669 6c65 2c20 6d65 7468 6f64 3d27  s=file, method='
-0000d440: 706f 7374 2720 6966 2066 696c 6520 656c  post' if file el
-0000d450: 7365 2027 6765 7427 290a 0a0a 6465 6620  se 'get')...def 
-0000d460: 6564 6974 5f6d 6573 7361 6765 5f72 6570  edit_message_rep
-0000d470: 6c79 5f6d 6172 6b75 7028 746f 6b65 6e2c  ly_markup(token,
-0000d480: 2063 6861 745f 6964 3d4e 6f6e 652c 206d   chat_id=None, m
-0000d490: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
-0000d4a0: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000d4b0: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-0000d4c0: 726b 7570 3d4e 6f6e 6529 3a0a 2020 2020  rkup=None):.    
-0000d4d0: 6d65 7468 6f64 5f75 726c 203d 2072 2765  method_url = r'e
-0000d4e0: 6469 744d 6573 7361 6765 5265 706c 794d  ditMessageReplyM
-0000d4f0: 6172 6b75 7027 0a20 2020 2070 6179 6c6f  arkup'.    paylo
-0000d500: 6164 203d 207b 7d0a 2020 2020 6966 2063  ad = {}.    if c
-0000d510: 6861 745f 6964 3a0a 2020 2020 2020 2020  hat_id:.        
-0000d520: 7061 796c 6f61 645b 2763 6861 745f 6964  payload['chat_id
-0000d530: 275d 203d 2063 6861 745f 6964 0a20 2020  '] = chat_id.   
-0000d540: 2069 6620 6d65 7373 6167 655f 6964 3a0a   if message_id:.
-0000d550: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000d560: 276d 6573 7361 6765 5f69 6427 5d20 3d20  'message_id'] = 
-0000d570: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-0000d580: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
-0000d590: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000d5a0: 6c6f 6164 5b27 696e 6c69 6e65 5f6d 6573  load['inline_mes
-0000d5b0: 7361 6765 5f69 6427 5d20 3d20 696e 6c69  sage_id'] = inli
-0000d5c0: 6e65 5f6d 6573 7361 6765 5f69 640a 2020  ne_message_id.  
-0000d5d0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-0000d5e0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-0000d5f0: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
-0000d600: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
-0000d610: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
-0000d620: 7029 0a20 2020 2072 6574 7572 6e20 5f6d  p).    return _m
-0000d630: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000d640: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000d650: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000d660: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-0000d670: 6465 6620 6465 6c65 7465 5f6d 6573 7361  def delete_messa
-0000d680: 6765 2874 6f6b 656e 2c20 6368 6174 5f69  ge(token, chat_i
-0000d690: 642c 206d 6573 7361 6765 5f69 642c 2074  d, message_id, t
-0000d6a0: 696d 656f 7574 3d4e 6f6e 6529 3a0a 2020  imeout=None):.  
-0000d6b0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000d6c0: 2764 656c 6574 654d 6573 7361 6765 270a  'deleteMessage'.
-0000d6d0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-0000d6e0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-0000d6f0: 642c 2027 6d65 7373 6167 655f 6964 273a  d, 'message_id':
-0000d700: 206d 6573 7361 6765 5f69 647d 0a20 2020   message_id}.   
-0000d710: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
-0000d720: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
-0000d730: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
-0000d740: 740a 2020 2020 7265 7475 726e 205f 6d61  t.    return _ma
-0000d750: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000d760: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000d770: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000d780: 7468 6f64 3d27 706f 7374 2729 0a0a 0a23  thod='post')...#
-0000d790: 2047 616d 650a 0a64 6566 2073 656e 645f   Game..def send_
-0000d7a0: 6761 6d65 280a 2020 2020 2020 2020 746f  game(.        to
-0000d7b0: 6b65 6e2c 2063 6861 745f 6964 2c20 6761  ken, chat_id, ga
-0000d7c0: 6d65 5f73 686f 7274 5f6e 616d 652c 0a20  me_short_name,. 
-0000d7d0: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
-0000d7e0: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
-0000d7f0: 2c20 7265 706c 795f 6d61 726b 7570 3d4e  , reply_markup=N
-0000d800: 6f6e 652c 2074 696d 656f 7574 3d4e 6f6e  one, timeout=Non
-0000d810: 652c 0a20 2020 2020 2020 2070 726f 7465  e,.        prote
-0000d820: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-0000d830: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-0000d840: 6964 3d4e 6f6e 652c 2072 6570 6c79 5f70  id=None, reply_p
-0000d850: 6172 616d 6574 6572 733d 4e6f 6e65 2c20  arameters=None, 
-0000d860: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
-0000d870: 696f 6e5f 6964 3d4e 6f6e 6529 3a0a 2020  ion_id=None):.  
-0000d880: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000d890: 2773 656e 6447 616d 6527 0a20 2020 2070  'sendGame'.    p
-0000d8a0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-0000d8b0: 6964 273a 2063 6861 745f 6964 2c20 2767  id': chat_id, 'g
-0000d8c0: 616d 655f 7368 6f72 745f 6e61 6d65 273a  ame_short_name':
-0000d8d0: 2067 616d 655f 7368 6f72 745f 6e61 6d65   game_short_name
-0000d8e0: 7d0a 2020 2020 6966 2064 6973 6162 6c65  }.    if disable
-0000d8f0: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
-0000d900: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000d910: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
-0000d920: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-0000d930: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
-0000d940: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
-0000d950: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-0000d960: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000d970: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
-0000d980: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-0000d990: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-0000d9a0: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
-0000d9b0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000d9c0: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
-0000d9d0: 6f75 740a 2020 2020 6966 2070 726f 7465  out.    if prote
-0000d9e0: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-0000d9f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000da00: 7061 796c 6f61 645b 2770 726f 7465 6374  payload['protect
-0000da10: 5f63 6f6e 7465 6e74 275d 203d 2070 726f  _content'] = pro
-0000da20: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-0000da30: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-0000da40: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-0000da50: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-0000da60: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-0000da70: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-0000da80: 2020 2020 6966 2072 6570 6c79 5f70 6172      if reply_par
-0000da90: 616d 6574 6572 7320 6973 206e 6f74 204e  ameters is not N
-0000daa0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000dab0: 6c6f 6164 5b27 7265 706c 795f 7061 7261  load['reply_para
-0000dac0: 6d65 7465 7273 275d 203d 2072 6570 6c79  meters'] = reply
-0000dad0: 5f70 6172 616d 6574 6572 732e 746f 5f6a  _parameters.to_j
-0000dae0: 736f 6e28 290a 2020 2020 6966 2062 7573  son().    if bus
-0000daf0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-0000db00: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000db10: 6c6f 6164 5b27 6275 7369 6e65 7373 5f63  load['business_c
-0000db20: 6f6e 6e65 6374 696f 6e5f 6964 275d 203d  onnection_id'] =
-0000db30: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
-0000db40: 7469 6f6e 5f69 640a 2020 2020 7265 7475  tion_id.    retu
-0000db50: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-0000db60: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000db70: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000db80: 6164 290a 0a0a 2320 6874 7470 733a 2f2f  ad)...# https://
-0000db90: 636f 7265 2e74 656c 6567 7261 6d2e 6f72  core.telegram.or
-0000dba0: 672f 626f 7473 2f61 7069 2373 6574 6761  g/bots/api#setga
-0000dbb0: 6d65 7363 6f72 650a 6465 6620 7365 745f  mescore.def set_
-0000dbc0: 6761 6d65 5f73 636f 7265 2874 6f6b 656e  game_score(token
-0000dbd0: 2c20 7573 6572 5f69 642c 2073 636f 7265  , user_id, score
-0000dbe0: 2c20 666f 7263 653d 4e6f 6e65 2c20 6469  , force=None, di
-0000dbf0: 7361 626c 655f 6564 6974 5f6d 6573 7361  sable_edit_messa
-0000dc00: 6765 3d4e 6f6e 652c 2063 6861 745f 6964  ge=None, chat_id
-0000dc10: 3d4e 6f6e 652c 206d 6573 7361 6765 5f69  =None, message_i
-0000dc20: 643d 4e6f 6e65 2c0a 2020 2020 2020 2020  d=None,.        
-0000dc30: 2020 2020 2020 2020 2020 2069 6e6c 696e             inlin
-0000dc40: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
-0000dc50: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
-0000dc60: 5573 6520 7468 6973 206d 6574 686f 6420  Use this method 
-0000dc70: 746f 2073 6574 2074 6865 2073 636f 7265  to set the score
-0000dc80: 206f 6620 7468 6520 7370 6563 6966 6965   of the specifie
-0000dc90: 6420 7573 6572 2069 6e20 6120 6761 6d65  d user in a game
-0000dca0: 2e20 4f6e 2073 7563 6365 7373 2c20 6966  . On success, if
-0000dcb0: 2074 6865 206d 6573 7361 6765 2077 6173   the message was
-0000dcc0: 2073 656e 7420 6279 2074 6865 2062 6f74   sent by the bot
-0000dcd0: 2c20 7265 7475 726e 7320 7468 6520 6564  , returns the ed
-0000dce0: 6974 6564 204d 6573 7361 6765 2c20 6f74  ited Message, ot
-0000dcf0: 6865 7277 6973 6520 7265 7475 726e 7320  herwise returns 
-0000dd00: 5472 7565 2e20 5265 7475 726e 7320 616e  True. Returns an
-0000dd10: 2065 7272 6f72 2c20 6966 2074 6865 206e   error, if the n
-0000dd20: 6577 2073 636f 7265 2069 7320 6e6f 7420  ew score is not 
-0000dd30: 6772 6561 7465 7220 7468 616e 2074 6865  greater than the
-0000dd40: 2075 7365 7227 7320 6375 7272 656e 7420   user's current 
-0000dd50: 7363 6f72 6520 696e 2074 6865 2063 6861  score in the cha
-0000dd60: 742e 0a20 2020 203a 7061 7261 6d20 746f  t..    :param to
-0000dd70: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
-0000dd80: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
-0000dd90: 2074 6f20 6669 6c6c 2074 6869 7329 0a20   to fill this). 
-0000dda0: 2020 203a 7061 7261 6d20 7573 6572 5f69     :param user_i
-0000ddb0: 643a 2055 7365 7220 6964 656e 7469 6669  d: User identifi
-0000ddc0: 6572 0a20 2020 203a 7061 7261 6d20 7363  er.    :param sc
-0000ddd0: 6f72 653a 204e 6577 2073 636f 7265 2c20  ore: New score, 
-0000dde0: 6d75 7374 2062 6520 6e6f 6e2d 6e65 6761  must be non-nega
-0000ddf0: 7469 7665 0a20 2020 203a 7061 7261 6d20  tive.    :param 
-0000de00: 666f 7263 653a 2028 4f70 7469 6f6e 616c  force: (Optional
-0000de10: 2920 5061 7373 2054 7275 652c 2069 6620  ) Pass True, if 
-0000de20: 7468 6520 6869 6768 2073 636f 7265 2069  the high score i
-0000de30: 7320 616c 6c6f 7765 6420 746f 2064 6563  s allowed to dec
-0000de40: 7265 6173 652e 2054 6869 7320 6361 6e20  rease. This can 
-0000de50: 6265 2075 7365 6675 6c20 7768 656e 2066  be useful when f
-0000de60: 6978 696e 6720 6d69 7374 616b 6573 206f  ixing mistakes o
-0000de70: 7220 6261 6e6e 696e 6720 6368 6561 7465  r banning cheate
-0000de80: 7273 0a20 2020 203a 7061 7261 6d20 6469  rs.    :param di
-0000de90: 7361 626c 655f 6564 6974 5f6d 6573 7361  sable_edit_messa
-0000dea0: 6765 3a20 284f 7074 696f 6e61 6c29 2050  ge: (Optional) P
-0000deb0: 6173 7320 5472 7565 2c20 6966 2074 6865  ass True, if the
-0000dec0: 2067 616d 6520 6d65 7373 6167 6520 7368   game message sh
-0000ded0: 6f75 6c64 206e 6f74 2062 6520 6175 746f  ould not be auto
-0000dee0: 6d61 7469 6361 6c6c 7920 6564 6974 6564  matically edited
-0000def0: 2074 6f20 696e 636c 7564 6520 7468 6520   to include the 
-0000df00: 6375 7272 656e 7420 7363 6f72 6562 6f61  current scoreboa
-0000df10: 7264 0a20 2020 203a 7061 7261 6d20 6368  rd.    :param ch
-0000df20: 6174 5f69 643a 2028 4f70 7469 6f6e 616c  at_id: (Optional
-0000df30: 2c20 7265 7175 6972 6564 2069 6620 696e  , required if in
-0000df40: 6c69 6e65 5f6d 6573 7361 6765 5f69 6420  line_message_id 
-0000df50: 6973 206e 6f74 2073 7065 6369 6669 6564  is not specified
-0000df60: 2920 556e 6971 7565 2069 6465 6e74 6966  ) Unique identif
-0000df70: 6965 7220 666f 7220 7468 6520 7461 7267  ier for the targ
-0000df80: 6574 2063 6861 7420 286f 7220 7573 6572  et chat (or user
-0000df90: 6e61 6d65 206f 6620 7468 6520 7461 7267  name of the targ
-0000dfa0: 6574 2063 6861 6e6e 656c 2069 6e20 7468  et channel in th
-0000dfb0: 6520 666f 726d 6174 2040 6368 616e 6e65  e format @channe
-0000dfc0: 6c75 7365 726e 616d 6529 0a20 2020 203a  lusername).    :
-0000dfd0: 7061 7261 6d20 6d65 7373 6167 655f 6964  param message_id
-0000dfe0: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
-0000dff0: 7569 7265 6420 6966 2069 6e6c 696e 655f  uired if inline_
-0000e000: 6d65 7373 6167 655f 6964 2069 7320 6e6f  message_id is no
-0000e010: 7420 7370 6563 6966 6965 6429 2055 6e69  t specified) Uni
-0000e020: 7175 6520 6964 656e 7469 6669 6572 206f  que identifier o
-0000e030: 6620 7468 6520 7365 6e74 206d 6573 7361  f the sent messa
-0000e040: 6765 0a20 2020 203a 7061 7261 6d20 696e  ge.    :param in
-0000e050: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
-0000e060: 2028 4f70 7469 6f6e 616c 2c20 7265 7175   (Optional, requ
-0000e070: 6972 6564 2069 6620 6368 6174 5f69 6420  ired if chat_id 
-0000e080: 616e 6420 6d65 7373 6167 655f 6964 2061  and message_id a
-0000e090: 7265 206e 6f74 2073 7065 6369 6669 6564  re not specified
-0000e0a0: 2920 4964 656e 7469 6669 6572 206f 6620  ) Identifier of 
-0000e0b0: 7468 6520 696e 6c69 6e65 206d 6573 7361  the inline messa
-0000e0c0: 6765 0a20 2020 203a 7265 7475 726e 3a0a  ge.    :return:.
-0000e0d0: 2020 2020 2222 220a 2020 2020 6d65 7468      """.    meth
-0000e0e0: 6f64 5f75 726c 203d 2072 2773 6574 4761  od_url = r'setGa
-0000e0f0: 6d65 5363 6f72 6527 0a20 2020 2070 6179  meScore'.    pay
-0000e100: 6c6f 6164 203d 207b 2775 7365 725f 6964  load = {'user_id
-0000e110: 273a 2075 7365 725f 6964 2c20 2773 636f  ': user_id, 'sco
-0000e120: 7265 273a 2073 636f 7265 7d0a 2020 2020  re': score}.    
-0000e130: 6966 2066 6f72 6365 2069 7320 6e6f 7420  if force is not 
-0000e140: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000e150: 796c 6f61 645b 2766 6f72 6365 275d 203d  yload['force'] =
-0000e160: 2066 6f72 6365 0a20 2020 2069 6620 6368   force.    if ch
-0000e170: 6174 5f69 643a 0a20 2020 2020 2020 2070  at_id:.        p
-0000e180: 6179 6c6f 6164 5b27 6368 6174 5f69 6427  ayload['chat_id'
-0000e190: 5d20 3d20 6368 6174 5f69 640a 2020 2020  ] = chat_id.    
-0000e1a0: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
-0000e1b0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000e1c0: 6d65 7373 6167 655f 6964 275d 203d 206d  message_id'] = m
-0000e1d0: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-0000e1e0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-0000e1f0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-0000e200: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
-0000e210: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
-0000e220: 655f 6d65 7373 6167 655f 6964 0a20 2020  e_message_id.   
-0000e230: 2069 6620 6469 7361 626c 655f 6564 6974   if disable_edit
-0000e240: 5f6d 6573 7361 6765 2069 7320 6e6f 7420  _message is not 
-0000e250: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000e260: 796c 6f61 645b 2764 6973 6162 6c65 5f65  yload['disable_e
-0000e270: 6469 745f 6d65 7373 6167 6527 5d20 3d20  dit_message'] = 
-0000e280: 6469 7361 626c 655f 6564 6974 5f6d 6573  disable_edit_mes
-0000e290: 7361 6765 0a20 2020 2072 6574 7572 6e20  sage.    return 
-0000e2a0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000e2b0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000e2c0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-0000e2d0: 0a0a 0a23 2068 7474 7073 3a2f 2f63 6f72  ...# https://cor
-0000e2e0: 652e 7465 6c65 6772 616d 2e6f 7267 2f62  e.telegram.org/b
-0000e2f0: 6f74 732f 6170 6923 6765 7467 616d 6568  ots/api#getgameh
-0000e300: 6967 6873 636f 7265 730a 6465 6620 6765  ighscores.def ge
-0000e310: 745f 6761 6d65 5f68 6967 685f 7363 6f72  t_game_high_scor
-0000e320: 6573 2874 6f6b 656e 2c20 7573 6572 5f69  es(token, user_i
-0000e330: 642c 2063 6861 745f 6964 3d4e 6f6e 652c  d, chat_id=None,
-0000e340: 206d 6573 7361 6765 5f69 643d 4e6f 6e65   message_id=None
-0000e350: 2c20 696e 6c69 6e65 5f6d 6573 7361 6765  , inline_message
-0000e360: 5f69 643d 4e6f 6e65 293a 0a20 2020 2022  _id=None):.    "
-0000e370: 2222 0a20 2020 2055 7365 2074 6869 7320  "".    Use this 
-0000e380: 6d65 7468 6f64 2074 6f20 6765 7420 6461  method to get da
-0000e390: 7461 2066 6f72 2068 6967 6820 7363 6f72  ta for high scor
-0000e3a0: 6520 7461 626c 6573 2e20 5769 6c6c 2072  e tables. Will r
-0000e3b0: 6574 7572 6e20 7468 6520 7363 6f72 6520  eturn the score 
-0000e3c0: 6f66 2074 6865 2073 7065 6369 6669 6564  of the specified
-0000e3d0: 2075 7365 7220 616e 6420 7365 7665 7261   user and severa
-0000e3e0: 6c20 6f66 2068 6973 206e 6569 6768 626f  l of his neighbo
-0000e3f0: 7273 2069 6e20 6120 6761 6d65 2e20 4f6e  rs in a game. On
-0000e400: 2073 7563 6365 7373 2c20 7265 7475 726e   success, return
-0000e410: 7320 616e 2041 7272 6179 206f 6620 4761  s an Array of Ga
-0000e420: 6d65 4869 6768 5363 6f72 6520 6f62 6a65  meHighScore obje
-0000e430: 6374 732e 0a20 2020 2054 6869 7320 6d65  cts..    This me
-0000e440: 7468 6f64 2077 696c 6c20 6375 7272 656e  thod will curren
-0000e450: 746c 7920 7265 7475 726e 2073 636f 7265  tly return score
-0000e460: 7320 666f 7220 7468 6520 7461 7267 6574  s for the target
-0000e470: 2075 7365 722c 2070 6c75 7320 7477 6f20   user, plus two 
-0000e480: 6f66 2068 6973 2063 6c6f 7365 7374 206e  of his closest n
-0000e490: 6569 6768 626f 7273 206f 6e20 6561 6368  eighbors on each
-0000e4a0: 2073 6964 652e 2057 696c 6c20 616c 736f   side. Will also
-0000e4b0: 2072 6574 7572 6e20 7468 6520 746f 7020   return the top 
-0000e4c0: 7468 7265 6520 7573 6572 7320 6966 2074  three users if t
-0000e4d0: 6865 2075 7365 7220 616e 6420 6869 7320  he user and his 
-0000e4e0: 6e65 6967 6862 6f72 7320 6172 6520 6e6f  neighbors are no
-0000e4f0: 7420 616d 6f6e 6720 7468 656d 2e20 506c  t among them. Pl
-0000e500: 6561 7365 206e 6f74 6520 7468 6174 2074  ease note that t
-0000e510: 6869 7320 6265 6861 7669 6f72 2069 7320  his behavior is 
-0000e520: 7375 626a 6563 7420 746f 2063 6861 6e67  subject to chang
-0000e530: 652e 0a20 2020 203a 7061 7261 6d20 746f  e..    :param to
-0000e540: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
-0000e550: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
-0000e560: 2074 6f20 6669 6c6c 2074 6869 7329 0a20   to fill this). 
-0000e570: 2020 203a 7061 7261 6d20 7573 6572 5f69     :param user_i
-0000e580: 643a 2054 6172 6765 7420 7573 6572 2069  d: Target user i
-0000e590: 640a 2020 2020 3a70 6172 616d 2063 6861  d.    :param cha
-0000e5a0: 745f 6964 3a20 284f 7074 696f 6e61 6c2c  t_id: (Optional,
-0000e5b0: 2072 6571 7569 7265 6420 6966 2069 6e6c   required if inl
-0000e5c0: 696e 655f 6d65 7373 6167 655f 6964 2069  ine_message_id i
-0000e5d0: 7320 6e6f 7420 7370 6563 6966 6965 6429  s not specified)
-0000e5e0: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
-0000e5f0: 6572 2066 6f72 2074 6865 2074 6172 6765  er for the targe
-0000e600: 7420 6368 6174 2028 6f72 2075 7365 726e  t chat (or usern
-0000e610: 616d 6520 6f66 2074 6865 2074 6172 6765  ame of the targe
-0000e620: 7420 6368 616e 6e65 6c20 696e 2074 6865  t channel in the
-0000e630: 2066 6f72 6d61 7420 4063 6861 6e6e 656c   format @channel
-0000e640: 7573 6572 6e61 6d65 290a 2020 2020 3a70  username).    :p
-0000e650: 6172 616d 206d 6573 7361 6765 5f69 643a  aram message_id:
-0000e660: 2028 4f70 7469 6f6e 616c 2c20 7265 7175   (Optional, requ
-0000e670: 6972 6564 2069 6620 696e 6c69 6e65 5f6d  ired if inline_m
-0000e680: 6573 7361 6765 5f69 6420 6973 206e 6f74  essage_id is not
-0000e690: 2073 7065 6369 6669 6564 2920 556e 6971   specified) Uniq
-0000e6a0: 7565 2069 6465 6e74 6966 6965 7220 6f66  ue identifier of
-0000e6b0: 2074 6865 2073 656e 7420 6d65 7373 6167   the sent messag
-0000e6c0: 650a 2020 2020 3a70 6172 616d 2069 6e6c  e.    :param inl
-0000e6d0: 696e 655f 6d65 7373 6167 655f 6964 3a20  ine_message_id: 
-0000e6e0: 284f 7074 696f 6e61 6c2c 2072 6571 7569  (Optional, requi
-0000e6f0: 7265 6420 6966 2063 6861 745f 6964 2061  red if chat_id a
-0000e700: 6e64 206d 6573 7361 6765 5f69 6420 6172  nd message_id ar
-0000e710: 6520 6e6f 7420 7370 6563 6966 6965 6429  e not specified)
-0000e720: 2049 6465 6e74 6966 6965 7220 6f66 2074   Identifier of t
-0000e730: 6865 2069 6e6c 696e 6520 6d65 7373 6167  he inline messag
-0000e740: 650a 2020 2020 3a72 6574 7572 6e3a 0a20  e.    :return:. 
-0000e750: 2020 2022 2222 0a20 2020 206d 6574 686f     """.    metho
-0000e760: 645f 7572 6c20 3d20 7227 6765 7447 616d  d_url = r'getGam
-0000e770: 6548 6967 6853 636f 7265 7327 0a20 2020  eHighScores'.   
-0000e780: 2070 6179 6c6f 6164 203d 207b 2775 7365   payload = {'use
-0000e790: 725f 6964 273a 2075 7365 725f 6964 7d0a  r_id': user_id}.
-0000e7a0: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
-0000e7b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000e7c0: 2763 6861 745f 6964 275d 203d 2063 6861  'chat_id'] = cha
-0000e7d0: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
-0000e7e0: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000e7f0: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
-0000e800: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
-0000e810: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
-0000e820: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
-0000e830: 2020 2020 2070 6179 6c6f 6164 5b27 696e       payload['in
-0000e840: 6c69 6e65 5f6d 6573 7361 6765 5f69 6427  line_message_id'
-0000e850: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
-0000e860: 6765 5f69 640a 2020 2020 7265 7475 726e  ge_id.    return
-0000e870: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000e880: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000e890: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000e8a0: 290a 0a0a 2320 5061 796d 656e 7473 2028  )...# Payments (
-0000e8b0: 6874 7470 733a 2f2f 636f 7265 2e74 656c  https://core.tel
-0000e8c0: 6567 7261 6d2e 6f72 672f 626f 7473 2f61  egram.org/bots/a
-0000e8d0: 7069 2370 6179 6d65 6e74 7329 0a0a 6465  pi#payments)..de
-0000e8e0: 6620 7365 6e64 5f69 6e76 6f69 6365 280a  f send_invoice(.
-0000e8f0: 2020 2020 2020 2020 746f 6b65 6e2c 2063          token, c
-0000e900: 6861 745f 6964 2c20 7469 746c 652c 2064  hat_id, title, d
-0000e910: 6573 6372 6970 7469 6f6e 2c20 696e 766f  escription, invo
-0000e920: 6963 655f 7061 796c 6f61 642c 2070 726f  ice_payload, pro
-0000e930: 7669 6465 725f 746f 6b65 6e2c 2063 7572  vider_token, cur
-0000e940: 7265 6e63 792c 2070 7269 6365 732c 0a20  rency, prices,. 
-0000e950: 2020 2020 2020 2073 7461 7274 5f70 6172         start_par
-0000e960: 616d 6574 6572 3d4e 6f6e 652c 2070 686f  ameter=None, pho
-0000e970: 746f 5f75 726c 3d4e 6f6e 652c 2070 686f  to_url=None, pho
-0000e980: 746f 5f73 697a 653d 4e6f 6e65 2c20 7068  to_size=None, ph
-0000e990: 6f74 6f5f 7769 6474 683d 4e6f 6e65 2c20  oto_width=None, 
-0000e9a0: 7068 6f74 6f5f 6865 6967 6874 3d4e 6f6e  photo_height=Non
-0000e9b0: 652c 0a20 2020 2020 2020 206e 6565 645f  e,.        need_
-0000e9c0: 6e61 6d65 3d4e 6f6e 652c 206e 6565 645f  name=None, need_
-0000e9d0: 7068 6f6e 655f 6e75 6d62 6572 3d4e 6f6e  phone_number=Non
-0000e9e0: 652c 206e 6565 645f 656d 6169 6c3d 4e6f  e, need_email=No
-0000e9f0: 6e65 2c20 6e65 6564 5f73 6869 7070 696e  ne, need_shippin
-0000ea00: 675f 6164 6472 6573 733d 4e6f 6e65 2c0a  g_address=None,.
-0000ea10: 2020 2020 2020 2020 7365 6e64 5f70 686f          send_pho
-0000ea20: 6e65 5f6e 756d 6265 725f 746f 5f70 726f  ne_number_to_pro
-0000ea30: 7669 6465 723d 4e6f 6e65 2c20 7365 6e64  vider=None, send
-0000ea40: 5f65 6d61 696c 5f74 6f5f 7072 6f76 6964  _email_to_provid
-0000ea50: 6572 3d4e 6f6e 652c 2069 735f 666c 6578  er=None, is_flex
-0000ea60: 6962 6c65 3d4e 6f6e 652c 0a20 2020 2020  ible=None,.     
-0000ea70: 2020 2064 6973 6162 6c65 5f6e 6f74 6966     disable_notif
-0000ea80: 6963 6174 696f 6e3d 4e6f 6e65 2c20 7265  ication=None, re
-0000ea90: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-0000eaa0: 2070 726f 7669 6465 725f 6461 7461 3d4e   provider_data=N
-0000eab0: 6f6e 652c 0a20 2020 2020 2020 2074 696d  one,.        tim
-0000eac0: 656f 7574 3d4e 6f6e 652c 206d 6178 5f74  eout=None, max_t
-0000ead0: 6970 5f61 6d6f 756e 743d 4e6f 6e65 2c20  ip_amount=None, 
-0000eae0: 7375 6767 6573 7465 645f 7469 705f 616d  suggested_tip_am
-0000eaf0: 6f75 6e74 733d 4e6f 6e65 2c0a 2020 2020  ounts=None,.    
-0000eb00: 2020 2020 7072 6f74 6563 745f 636f 6e74      protect_cont
-0000eb10: 656e 743d 4e6f 6e65 2c20 6d65 7373 6167  ent=None, messag
-0000eb20: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
-0000eb30: 2c20 7265 706c 795f 7061 7261 6d65 7465  , reply_paramete
-0000eb40: 7273 3d4e 6f6e 6529 3a0a 2020 2020 2222  rs=None):.    ""
-0000eb50: 220a 2020 2020 5573 6520 7468 6973 206d  ".    Use this m
-0000eb60: 6574 686f 6420 746f 2073 656e 6420 696e  ethod to send in
-0000eb70: 766f 6963 6573 2e20 4f6e 2073 7563 6365  voices. On succe
-0000eb80: 7373 2c20 7468 6520 7365 6e74 204d 6573  ss, the sent Mes
-0000eb90: 7361 6765 2069 7320 7265 7475 726e 6564  sage is returned
-0000eba0: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
-0000ebb0: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
-0000ebc0: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
-0000ebd0: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
-0000ebe0: 2020 3a70 6172 616d 2063 6861 745f 6964    :param chat_id
-0000ebf0: 3a20 556e 6971 7565 2069 6465 6e74 6966  : Unique identif
-0000ec00: 6965 7220 666f 7220 7468 6520 7461 7267  ier for the targ
-0000ec10: 6574 2070 7269 7661 7465 2063 6861 740a  et private chat.
-0000ec20: 2020 2020 3a70 6172 616d 2074 6974 6c65      :param title
-0000ec30: 3a20 5072 6f64 7563 7420 6e61 6d65 0a20  : Product name. 
-0000ec40: 2020 203a 7061 7261 6d20 6465 7363 7269     :param descri
-0000ec50: 7074 696f 6e3a 2050 726f 6475 6374 2064  ption: Product d
-0000ec60: 6573 6372 6970 7469 6f6e 0a20 2020 203a  escription.    :
-0000ec70: 7061 7261 6d20 696e 766f 6963 655f 7061  param invoice_pa
-0000ec80: 796c 6f61 643a 2042 6f74 2d64 6566 696e  yload: Bot-defin
-0000ec90: 6564 2069 6e76 6f69 6365 2070 6179 6c6f  ed invoice paylo
-0000eca0: 6164 2c20 312d 3132 3820 6279 7465 732e  ad, 1-128 bytes.
-0000ecb0: 2054 6869 7320 7769 6c6c 206e 6f74 2062   This will not b
-0000ecc0: 6520 6469 7370 6c61 7965 6420 746f 2074  e displayed to t
-0000ecd0: 6865 2075 7365 722c 2075 7365 2066 6f72  he user, use for
-0000ece0: 2079 6f75 7220 696e 7465 726e 616c 2070   your internal p
-0000ecf0: 726f 6365 7373 6573 2e0a 2020 2020 3a70  rocesses..    :p
-0000ed00: 6172 616d 2070 726f 7669 6465 725f 746f  aram provider_to
-0000ed10: 6b65 6e3a 2050 6179 6d65 6e74 7320 7072  ken: Payments pr
-0000ed20: 6f76 6964 6572 2074 6f6b 656e 2c20 6f62  ovider token, ob
-0000ed30: 7461 696e 6564 2076 6961 2040 426f 7466  tained via @Botf
-0000ed40: 6174 6865 720a 2020 2020 3a70 6172 616d  ather.    :param
-0000ed50: 2063 7572 7265 6e63 793a 2054 6872 6565   currency: Three
-0000ed60: 2d6c 6574 7465 7220 4953 4f20 3432 3137  -letter ISO 4217
-0000ed70: 2063 7572 7265 6e63 7920 636f 6465 2c20   currency code, 
-0000ed80: 7365 6520 6874 7470 733a 2f2f 636f 7265  see https://core
-0000ed90: 2e74 656c 6567 7261 6d2e 6f72 672f 626f  .telegram.org/bo
-0000eda0: 7473 2f70 6179 6d65 6e74 7323 7375 7070  ts/payments#supp
-0000edb0: 6f72 7465 642d 6375 7272 656e 6369 6573  orted-currencies
-0000edc0: 0a20 2020 203a 7061 7261 6d20 7072 6963  .    :param pric
-0000edd0: 6573 3a20 5072 6963 6520 6272 6561 6b64  es: Price breakd
-0000ede0: 6f77 6e2c 2061 206c 6973 7420 6f66 2063  own, a list of c
-0000edf0: 6f6d 706f 6e65 6e74 7320 2865 2e67 2e20  omponents (e.g. 
-0000ee00: 7072 6f64 7563 7420 7072 6963 652c 2074  product price, t
-0000ee10: 6178 2c20 6469 7363 6f75 6e74 2c20 6465  ax, discount, de
-0000ee20: 6c69 7665 7279 2063 6f73 742c 2064 656c  livery cost, del
-0000ee30: 6976 6572 7920 7461 782c 2062 6f6e 7573  ivery tax, bonus
-0000ee40: 2c20 6574 632e 290a 2020 2020 3a70 6172  , etc.).    :par
-0000ee50: 616d 2073 7461 7274 5f70 6172 616d 6574  am start_paramet
-0000ee60: 6572 3a20 556e 6971 7565 2064 6565 702d  er: Unique deep-
-0000ee70: 6c69 6e6b 696e 6720 7061 7261 6d65 7465  linking paramete
-0000ee80: 7220 7468 6174 2063 616e 2062 6520 7573  r that can be us
-0000ee90: 6564 2074 6f20 6765 6e65 7261 7465 2074  ed to generate t
-0000eea0: 6869 7320 696e 766f 6963 6520 7768 656e  his invoice when
-0000eeb0: 2075 7365 6420 6173 2061 2073 7461 7274   used as a start
-0000eec0: 2070 6172 616d 6574 6572 0a20 2020 203a   parameter.    :
-0000eed0: 7061 7261 6d20 7068 6f74 6f5f 7572 6c3a  param photo_url:
-0000eee0: 2055 524c 206f 6620 7468 6520 7072 6f64   URL of the prod
-0000eef0: 7563 7420 7068 6f74 6f20 666f 7220 7468  uct photo for th
-0000ef00: 6520 696e 766f 6963 652e 2043 616e 2062  e invoice. Can b
-0000ef10: 6520 6120 7068 6f74 6f20 6f66 2074 6865  e a photo of the
-0000ef20: 2067 6f6f 6473 206f 7220 6120 6d61 726b   goods or a mark
-0000ef30: 6574 696e 6720 696d 6167 6520 666f 7220  eting image for 
-0000ef40: 6120 7365 7276 6963 652e 2050 656f 706c  a service. Peopl
-0000ef50: 6520 6c69 6b65 2069 7420 6265 7474 6572  e like it better
-0000ef60: 2077 6865 6e20 7468 6579 2073 6565 2077   when they see w
-0000ef70: 6861 7420 7468 6579 2061 7265 2070 6179  hat they are pay
-0000ef80: 696e 6720 666f 722e 0a20 2020 203a 7061  ing for..    :pa
-0000ef90: 7261 6d20 7068 6f74 6f5f 7369 7a65 3a20  ram photo_size: 
-0000efa0: 5068 6f74 6f20 7369 7a65 0a20 2020 203a  Photo size.    :
-0000efb0: 7061 7261 6d20 7068 6f74 6f5f 7769 6474  param photo_widt
-0000efc0: 683a 2050 686f 746f 2077 6964 7468 0a20  h: Photo width. 
-0000efd0: 2020 203a 7061 7261 6d20 7068 6f74 6f5f     :param photo_
-0000efe0: 6865 6967 6874 3a20 5068 6f74 6f20 6865  height: Photo he
-0000eff0: 6967 6874 0a20 2020 203a 7061 7261 6d20  ight.    :param 
-0000f000: 6e65 6564 5f6e 616d 653a 2050 6173 7320  need_name: Pass 
-0000f010: 5472 7565 2c20 6966 2079 6f75 2072 6571  True, if you req
-0000f020: 7569 7265 2074 6865 2075 7365 7227 7320  uire the user's 
-0000f030: 6675 6c6c 206e 616d 6520 746f 2063 6f6d  full name to com
-0000f040: 706c 6574 6520 7468 6520 6f72 6465 720a  plete the order.
-0000f050: 2020 2020 3a70 6172 616d 206e 6565 645f      :param need_
-0000f060: 7068 6f6e 655f 6e75 6d62 6572 3a20 5061  phone_number: Pa
-0000f070: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
-0000f080: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
-0000f090: 2773 2070 686f 6e65 206e 756d 6265 7220  's phone number 
-0000f0a0: 746f 2063 6f6d 706c 6574 6520 7468 6520  to complete the 
-0000f0b0: 6f72 6465 720a 2020 2020 3a70 6172 616d  order.    :param
-0000f0c0: 206e 6565 645f 656d 6169 6c3a 2050 6173   need_email: Pas
-0000f0d0: 7320 5472 7565 2c20 6966 2079 6f75 2072  s True, if you r
-0000f0e0: 6571 7569 7265 2074 6865 2075 7365 7227  equire the user'
-0000f0f0: 7320 656d 6169 6c20 746f 2063 6f6d 706c  s email to compl
-0000f100: 6574 6520 7468 6520 6f72 6465 720a 2020  ete the order.  
-0000f110: 2020 3a70 6172 616d 206e 6565 645f 7368    :param need_sh
-0000f120: 6970 7069 6e67 5f61 6464 7265 7373 3a20  ipping_address: 
-0000f130: 5061 7373 2054 7275 652c 2069 6620 796f  Pass True, if yo
-0000f140: 7520 7265 7175 6972 6520 7468 6520 7573  u require the us
-0000f150: 6572 2773 2073 6869 7070 696e 6720 6164  er's shipping ad
-0000f160: 6472 6573 7320 746f 2063 6f6d 706c 6574  dress to complet
-0000f170: 6520 7468 6520 6f72 6465 720a 2020 2020  e the order.    
-0000f180: 3a70 6172 616d 2069 735f 666c 6578 6962  :param is_flexib
-0000f190: 6c65 3a20 5061 7373 2054 7275 652c 2069  le: Pass True, i
-0000f1a0: 6620 7468 6520 6669 6e61 6c20 7072 6963  f the final pric
-0000f1b0: 6520 6465 7065 6e64 7320 6f6e 2074 6865  e depends on the
-0000f1c0: 2073 6869 7070 696e 6720 6d65 7468 6f64   shipping method
-0000f1d0: 0a20 2020 203a 7061 7261 6d20 7365 6e64  .    :param send
-0000f1e0: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-0000f1f0: 5f70 726f 7669 6465 723a 2050 6173 7320  _provider: Pass 
-0000f200: 5472 7565 2c20 6966 2075 7365 7227 7320  True, if user's 
-0000f210: 7068 6f6e 6520 6e75 6d62 6572 2073 686f  phone number sho
-0000f220: 756c 6420 6265 2073 656e 7420 746f 2070  uld be sent to p
-0000f230: 726f 7669 6465 720a 2020 2020 3a70 6172  rovider.    :par
-0000f240: 616d 2073 656e 645f 656d 6169 6c5f 746f  am send_email_to
-0000f250: 5f70 726f 7669 6465 723a 2050 6173 7320  _provider: Pass 
-0000f260: 5472 7565 2c20 6966 2075 7365 7227 7320  True, if user's 
-0000f270: 656d 6169 6c20 6164 6472 6573 7320 7368  email address sh
-0000f280: 6f75 6c64 2062 6520 7365 6e74 2074 6f20  ould be sent to 
-0000f290: 7072 6f76 6964 6572 0a20 2020 203a 7061  provider.    :pa
-0000f2a0: 7261 6d20 6469 7361 626c 655f 6e6f 7469  ram disable_noti
-0000f2b0: 6669 6361 7469 6f6e 3a20 5365 6e64 7320  fication: Sends 
-0000f2c0: 7468 6520 6d65 7373 6167 6520 7369 6c65  the message sile
-0000f2d0: 6e74 6c79 2e20 5573 6572 7320 7769 6c6c  ntly. Users will
-0000f2e0: 2072 6563 6569 7665 2061 206e 6f74 6966   receive a notif
-0000f2f0: 6963 6174 696f 6e20 7769 7468 206e 6f20  ication with no 
-0000f300: 736f 756e 642e 0a20 2020 203a 7061 7261  sound..    :para
-0000f310: 6d20 7265 706c 795f 6d61 726b 7570 3a20  m reply_markup: 
-0000f320: 4120 4a53 4f4e 2d73 6572 6961 6c69 7a65  A JSON-serialize
-0000f330: 6420 6f62 6a65 6374 2066 6f72 2061 6e20  d object for an 
-0000f340: 696e 6c69 6e65 206b 6579 626f 6172 642e  inline keyboard.
-0000f350: 2049 6620 656d 7074 792c 206f 6e65 2027   If empty, one '
-0000f360: 5061 7920 746f 7461 6c20 7072 6963 6527  Pay total price'
-0000f370: 2062 7574 746f 6e20 7769 6c6c 2062 6520   button will be 
-0000f380: 7368 6f77 6e2e 2049 6620 6e6f 7420 656d  shown. If not em
-0000f390: 7074 792c 2074 6865 2066 6972 7374 2062  pty, the first b
-0000f3a0: 7574 746f 6e20 6d75 7374 2062 6520 6120  utton must be a 
-0000f3b0: 5061 7920 6275 7474 6f6e 0a20 2020 203a  Pay button.    :
-0000f3c0: 7061 7261 6d20 7072 6f76 6964 6572 5f64  param provider_d
-0000f3d0: 6174 613a 2041 204a 534f 4e2d 7365 7269  ata: A JSON-seri
-0000f3e0: 616c 697a 6564 2064 6174 6120 6162 6f75  alized data abou
-0000f3f0: 7420 7468 6520 696e 766f 6963 652c 2077  t the invoice, w
-0000f400: 6869 6368 2077 696c 6c20 6265 2073 6861  hich will be sha
-0000f410: 7265 6420 7769 7468 2074 6865 2070 6179  red with the pay
-0000f420: 6d65 6e74 2070 726f 7669 6465 722e 2041  ment provider. A
-0000f430: 2064 6574 6169 6c65 6420 6465 7363 7269   detailed descri
-0000f440: 7074 696f 6e20 6f66 2072 6571 7569 7265  ption of require
-0000f450: 6420 6669 656c 6473 2073 686f 756c 6420  d fields should 
-0000f460: 6265 2070 726f 7669 6465 6420 6279 2074  be provided by t
-0000f470: 6865 2070 6179 6d65 6e74 2070 726f 7669  he payment provi
-0000f480: 6465 722e 0a20 2020 203a 7061 7261 6d20  der..    :param 
-0000f490: 7469 6d65 6f75 743a 0a20 2020 203a 7061  timeout:.    :pa
-0000f4a0: 7261 6d20 6d61 785f 7469 705f 616d 6f75  ram max_tip_amou
-0000f4b0: 6e74 3a20 5468 6520 6d61 7869 6d75 6d20  nt: The maximum 
-0000f4c0: 6163 6365 7074 6564 2061 6d6f 756e 7420  accepted amount 
-0000f4d0: 666f 7220 7469 7073 2069 6e20 7468 6520  for tips in the 
-0000f4e0: 736d 616c 6c65 7374 2075 6e69 7473 206f  smallest units o
-0000f4f0: 6620 7468 6520 6375 7272 656e 6379 0a20  f the currency. 
-0000f500: 2020 203a 7061 7261 6d20 7375 6767 6573     :param sugges
-0000f510: 7465 645f 7469 705f 616d 6f75 6e74 733a  ted_tip_amounts:
-0000f520: 2041 204a 534f 4e2d 7365 7269 616c 697a   A JSON-serializ
-0000f530: 6564 2061 7272 6179 206f 6620 7375 6767  ed array of sugg
-0000f540: 6573 7465 6420 616d 6f75 6e74 7320 6f66  ested amounts of
-0000f550: 2074 6970 7320 696e 2074 6865 2073 6d61   tips in the sma
-0000f560: 6c6c 6573 7420 756e 6974 7320 6f66 2074  llest units of t
-0000f570: 6865 2063 7572 7265 6e63 792e 0a20 2020  he currency..   
-0000f580: 2020 2020 2041 7420 6d6f 7374 2034 2073       At most 4 s
-0000f590: 7567 6765 7374 6564 2074 6970 2061 6d6f  uggested tip amo
-0000f5a0: 756e 7473 2063 616e 2062 6520 7370 6563  unts can be spec
-0000f5b0: 6966 6965 642e 2054 6865 2073 7567 6765  ified. The sugge
-0000f5c0: 7374 6564 2074 6970 2061 6d6f 756e 7473  sted tip amounts
-0000f5d0: 206d 7573 7420 6265 2070 6f73 6974 6976   must be positiv
-0000f5e0: 652c 2070 6173 7365 6420 696e 2061 2073  e, passed in a s
-0000f5f0: 7472 6963 746c 7920 696e 6372 6561 7365  trictly increase
-0000f600: 6420 6f72 6465 7220 616e 6420 6d75 7374  d order and must
-0000f610: 206e 6f74 2065 7863 6565 6420 6d61 785f   not exceed max_
-0000f620: 7469 705f 616d 6f75 6e74 2e0a 2020 2020  tip_amount..    
-0000f630: 3a70 6172 616d 2070 726f 7465 6374 5f63  :param protect_c
-0000f640: 6f6e 7465 6e74 3a20 5072 6f74 6563 7473  ontent: Protects
-0000f650: 2074 6865 2063 6f6e 7465 6e74 7320 6f66   the contents of
-0000f660: 2074 6865 2073 656e 7420 6d65 7373 6167   the sent messag
-0000f670: 6520 6672 6f6d 2066 6f72 7761 7264 696e  e from forwardin
-0000f680: 6720 616e 6420 7361 7669 6e67 0a20 2020  g and saving.   
-0000f690: 203a 7061 7261 6d20 6d65 7373 6167 655f   :param message_
-0000f6a0: 7468 7265 6164 5f69 643a 2055 6e69 7175  thread_id: Uniqu
-0000f6b0: 6520 6964 656e 7469 6669 6572 2066 6f72  e identifier for
-0000f6c0: 2074 6865 2074 6172 6765 7420 6d65 7373   the target mess
-0000f6d0: 6167 6520 7468 7265 6164 2028 746f 7069  age thread (topi
-0000f6e0: 6329 206f 6620 7468 6520 666f 7275 6d3b  c) of the forum;
-0000f6f0: 2066 6f72 2066 6f72 756d 2073 7570 6572   for forum super
-0000f700: 6772 6f75 7073 206f 6e6c 790a 2020 2020  groups only.    
-0000f710: 3a72 6574 7572 6e3a 0a20 2020 2022 2222  :return:.    """
-0000f720: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000f730: 3d20 7227 7365 6e64 496e 766f 6963 6527  = r'sendInvoice'
-0000f740: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000f750: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-0000f760: 6964 2c20 2774 6974 6c65 273a 2074 6974  id, 'title': tit
-0000f770: 6c65 2c20 2764 6573 6372 6970 7469 6f6e  le, 'description
-0000f780: 273a 2064 6573 6372 6970 7469 6f6e 2c20  ': description, 
-0000f790: 2770 6179 6c6f 6164 273a 2069 6e76 6f69  'payload': invoi
-0000f7a0: 6365 5f70 6179 6c6f 6164 2c0a 2020 2020  ce_payload,.    
-0000f7b0: 2020 2020 2020 2020 2020 2027 7072 6f76             'prov
-0000f7c0: 6964 6572 5f74 6f6b 656e 273a 2070 726f  ider_token': pro
-0000f7d0: 7669 6465 725f 746f 6b65 6e2c 2027 6375  vider_token, 'cu
-0000f7e0: 7272 656e 6379 273a 2063 7572 7265 6e63  rrency': currenc
-0000f7f0: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
-0000f800: 2020 2770 7269 6365 7327 3a20 5f63 6f6e    'prices': _con
-0000f810: 7665 7274 5f6c 6973 745f 6a73 6f6e 5f73  vert_list_json_s
-0000f820: 6572 6961 6c69 7a61 626c 6528 7072 6963  erializable(pric
-0000f830: 6573 297d 0a20 2020 2069 6620 7374 6172  es)}.    if star
-0000f840: 745f 7061 7261 6d65 7465 723a 0a20 2020  t_parameter:.   
-0000f850: 2020 2020 2070 6179 6c6f 6164 5b27 7374       payload['st
-0000f860: 6172 745f 7061 7261 6d65 7465 7227 5d20  art_parameter'] 
-0000f870: 3d20 7374 6172 745f 7061 7261 6d65 7465  = start_paramete
-0000f880: 720a 2020 2020 6966 2070 686f 746f 5f75  r.    if photo_u
-0000f890: 726c 3a0a 2020 2020 2020 2020 7061 796c  rl:.        payl
-0000f8a0: 6f61 645b 2770 686f 746f 5f75 726c 275d  oad['photo_url']
-0000f8b0: 203d 2070 686f 746f 5f75 726c 0a20 2020   = photo_url.   
-0000f8c0: 2069 6620 7068 6f74 6f5f 7369 7a65 3a0a   if photo_size:.
-0000f8d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000f8e0: 2770 686f 746f 5f73 697a 6527 5d20 3d20  'photo_size'] = 
-0000f8f0: 7068 6f74 6f5f 7369 7a65 0a20 2020 2069  photo_size.    i
-0000f900: 6620 7068 6f74 6f5f 7769 6474 683a 0a20  f photo_width:. 
-0000f910: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000f920: 7068 6f74 6f5f 7769 6474 6827 5d20 3d20  photo_width'] = 
-0000f930: 7068 6f74 6f5f 7769 6474 680a 2020 2020  photo_width.    
-0000f940: 6966 2070 686f 746f 5f68 6569 6768 743a  if photo_height:
-0000f950: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000f960: 5b27 7068 6f74 6f5f 6865 6967 6874 275d  ['photo_height']
-0000f970: 203d 2070 686f 746f 5f68 6569 6768 740a   = photo_height.
-0000f980: 2020 2020 6966 206e 6565 645f 6e61 6d65      if need_name
-0000f990: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000f9a0: 2020 2020 2020 7061 796c 6f61 645b 276e        payload['n
-0000f9b0: 6565 645f 6e61 6d65 275d 203d 206e 6565  eed_name'] = nee
-0000f9c0: 645f 6e61 6d65 0a20 2020 2069 6620 6e65  d_name.    if ne
-0000f9d0: 6564 5f70 686f 6e65 5f6e 756d 6265 7220  ed_phone_number 
-0000f9e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000f9f0: 2020 2020 2070 6179 6c6f 6164 5b27 6e65       payload['ne
-0000fa00: 6564 5f70 686f 6e65 5f6e 756d 6265 7227  ed_phone_number'
-0000fa10: 5d20 3d20 6e65 6564 5f70 686f 6e65 5f6e  ] = need_phone_n
-0000fa20: 756d 6265 720a 2020 2020 6966 206e 6565  umber.    if nee
-0000fa30: 645f 656d 6169 6c20 6973 206e 6f74 204e  d_email is not N
-0000fa40: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000fa50: 6c6f 6164 5b27 6e65 6564 5f65 6d61 696c  load['need_email
-0000fa60: 275d 203d 206e 6565 645f 656d 6169 6c0a  '] = need_email.
-0000fa70: 2020 2020 6966 206e 6565 645f 7368 6970      if need_ship
-0000fa80: 7069 6e67 5f61 6464 7265 7373 2069 7320  ping_address is 
-0000fa90: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000faa0: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
-0000fab0: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
-0000fac0: 275d 203d 206e 6565 645f 7368 6970 7069  '] = need_shippi
-0000fad0: 6e67 5f61 6464 7265 7373 0a20 2020 2069  ng_address.    i
-0000fae0: 6620 7365 6e64 5f70 686f 6e65 5f6e 756d  f send_phone_num
-0000faf0: 6265 725f 746f 5f70 726f 7669 6465 7220  ber_to_provider 
-0000fb00: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000fb10: 2020 2020 2070 6179 6c6f 6164 5b27 7365       payload['se
-0000fb20: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
-0000fb30: 746f 5f70 726f 7669 6465 7227 5d20 3d20  to_provider'] = 
-0000fb40: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
-0000fb50: 725f 746f 5f70 726f 7669 6465 720a 2020  r_to_provider.  
-0000fb60: 2020 6966 2073 656e 645f 656d 6169 6c5f    if send_email_
-0000fb70: 746f 5f70 726f 7669 6465 7220 6973 206e  to_provider is n
-0000fb80: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000fb90: 2070 6179 6c6f 6164 5b27 7365 6e64 5f65   payload['send_e
-0000fba0: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
-0000fbb0: 275d 203d 2073 656e 645f 656d 6169 6c5f  '] = send_email_
-0000fbc0: 746f 5f70 726f 7669 6465 720a 2020 2020  to_provider.    
-0000fbd0: 6966 2069 735f 666c 6578 6962 6c65 2069  if is_flexible i
-0000fbe0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000fbf0: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
-0000fc00: 666c 6578 6962 6c65 275d 203d 2069 735f  flexible'] = is_
-0000fc10: 666c 6578 6962 6c65 0a20 2020 2069 6620  flexible.    if 
-0000fc20: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-0000fc30: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-0000fc40: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000fc50: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
-0000fc60: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
-0000fc70: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-0000fc80: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-0000fc90: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-0000fca0: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-0000fcb0: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
-0000fcc0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-0000fcd0: 726b 7570 290a 2020 2020 6966 2070 726f  rkup).    if pro
-0000fce0: 7669 6465 725f 6461 7461 3a0a 2020 2020  vider_data:.    
-0000fcf0: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
-0000fd00: 7669 6465 725f 6461 7461 275d 203d 2070  vider_data'] = p
-0000fd10: 726f 7669 6465 725f 6461 7461 0a20 2020  rovider_data.   
-0000fd20: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
-0000fd30: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
-0000fd40: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
-0000fd50: 740a 2020 2020 6966 206d 6178 5f74 6970  t.    if max_tip
-0000fd60: 5f61 6d6f 756e 7420 6973 206e 6f74 204e  _amount is not N
-0000fd70: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000fd80: 6c6f 6164 5b27 6d61 785f 7469 705f 616d  load['max_tip_am
-0000fd90: 6f75 6e74 275d 203d 206d 6178 5f74 6970  ount'] = max_tip
-0000fda0: 5f61 6d6f 756e 740a 2020 2020 6966 2073  _amount.    if s
-0000fdb0: 7567 6765 7374 6564 5f74 6970 5f61 6d6f  uggested_tip_amo
-0000fdc0: 756e 7473 2069 7320 6e6f 7420 4e6f 6e65  unts is not None
-0000fdd0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000fde0: 645b 2773 7567 6765 7374 6564 5f74 6970  d['suggested_tip
-0000fdf0: 5f61 6d6f 756e 7473 275d 203d 206a 736f  _amounts'] = jso
-0000fe00: 6e2e 6475 6d70 7328 7375 6767 6573 7465  n.dumps(suggeste
-0000fe10: 645f 7469 705f 616d 6f75 6e74 7329 0a20  d_tip_amounts). 
-0000fe20: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
-0000fe30: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
-0000fe40: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-0000fe50: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
-0000fe60: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
-0000fe70: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
-0000fe80: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-0000fe90: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000fea0: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
-0000feb0: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
-0000fec0: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
-0000fed0: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
-0000fee0: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
-0000fef0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000ff00: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
-0000ff10: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
-0000ff20: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
-0000ff30: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-0000ff40: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
-0000ff50: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000ff60: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
-0000ff70: 6566 2061 6e73 7765 725f 7368 6970 7069  ef answer_shippi
-0000ff80: 6e67 5f71 7565 7279 2874 6f6b 656e 2c20  ng_query(token, 
-0000ff90: 7368 6970 7069 6e67 5f71 7565 7279 5f69  shipping_query_i
-0000ffa0: 642c 206f 6b2c 2073 6869 7070 696e 675f  d, ok, shipping_
-0000ffb0: 6f70 7469 6f6e 733d 4e6f 6e65 2c20 6572  options=None, er
-0000ffc0: 726f 725f 6d65 7373 6167 653d 4e6f 6e65  ror_message=None
-0000ffd0: 293a 0a20 2020 2022 2222 0a20 2020 2049  ):.    """.    I
-0000ffe0: 6620 796f 7520 7365 6e74 2061 6e20 696e  f you sent an in
-0000fff0: 766f 6963 6520 7265 7175 6573 7469 6e67  voice requesting
-00010000: 2061 2073 6869 7070 696e 6720 6164 6472   a shipping addr
-00010010: 6573 7320 616e 6420 7468 6520 7061 7261  ess and the para
-00010020: 6d65 7465 7220 6973 5f66 6c65 7869 626c  meter is_flexibl
-00010030: 6520 7761 7320 7370 6563 6966 6965 642c  e was specified,
-00010040: 2074 6865 2042 6f74 2041 5049 2077 696c   the Bot API wil
-00010050: 6c20 7365 6e64 2061 6e20 5570 6461 7465  l send an Update
-00010060: 2077 6974 6820 6120 7368 6970 7069 6e67   with a shipping
-00010070: 5f71 7565 7279 2066 6965 6c64 2074 6f20  _query field to 
-00010080: 7468 6520 626f 742e 2055 7365 2074 6869  the bot. Use thi
-00010090: 7320 6d65 7468 6f64 2074 6f20 7265 706c  s method to repl
-000100a0: 7920 746f 2073 6869 7070 696e 6720 7175  y to shipping qu
-000100b0: 6572 6965 732e 204f 6e20 7375 6363 6573  eries. On succes
-000100c0: 732c 2054 7275 6520 6973 2072 6574 7572  s, True is retur
-000100d0: 6e65 642e 0a20 2020 203a 7061 7261 6d20  ned..    :param 
-000100e0: 746f 6b65 6e3a 2042 6f74 2773 2074 6f6b  token: Bot's tok
-000100f0: 656e 2028 796f 7520 646f 6e27 7420 6e65  en (you don't ne
-00010100: 6564 2074 6f20 6669 6c6c 2074 6869 7329  ed to fill this)
-00010110: 0a20 2020 203a 7061 7261 6d20 7368 6970  .    :param ship
-00010120: 7069 6e67 5f71 7565 7279 5f69 643a 2055  ping_query_id: U
-00010130: 6e69 7175 6520 6964 656e 7469 6669 6572  nique identifier
-00010140: 2066 6f72 2074 6865 2071 7565 7279 2074   for the query t
-00010150: 6f20 6265 2061 6e73 7765 7265 640a 2020  o be answered.  
-00010160: 2020 3a70 6172 616d 206f 6b3a 2053 7065    :param ok: Spe
-00010170: 6369 6679 2054 7275 6520 6966 2064 656c  cify True if del
-00010180: 6976 6572 7920 746f 2074 6865 2073 7065  ivery to the spe
-00010190: 6369 6669 6564 2061 6464 7265 7373 2069  cified address i
-000101a0: 7320 706f 7373 6962 6c65 2061 6e64 2046  s possible and F
-000101b0: 616c 7365 2069 6620 7468 6572 6520 6172  alse if there ar
-000101c0: 6520 616e 7920 7072 6f62 6c65 6d73 2028  e any problems (
-000101d0: 666f 7220 6578 616d 706c 652c 2069 6620  for example, if 
-000101e0: 6465 6c69 7665 7279 2074 6f20 7468 6520  delivery to the 
-000101f0: 7370 6563 6966 6965 6420 6164 6472 6573  specified addres
-00010200: 7320 6973 206e 6f74 2070 6f73 7369 626c  s is not possibl
-00010210: 6529 0a20 2020 203a 7061 7261 6d20 7368  e).    :param sh
-00010220: 6970 7069 6e67 5f6f 7074 696f 6e73 3a20  ipping_options: 
-00010230: 5265 7175 6972 6564 2069 6620 6f6b 2069  Required if ok i
-00010240: 7320 5472 7565 2e20 4120 4a53 4f4e 2d73  s True. A JSON-s
-00010250: 6572 6961 6c69 7a65 6420 6172 7261 7920  erialized array 
-00010260: 6f66 2061 7661 696c 6162 6c65 2073 6869  of available shi
-00010270: 7070 696e 6720 6f70 7469 6f6e 732e 0a20  pping options.. 
-00010280: 2020 203a 7061 7261 6d20 6572 726f 725f     :param error_
-00010290: 6d65 7373 6167 653a 2052 6571 7569 7265  message: Require
-000102a0: 6420 6966 206f 6b20 6973 2046 616c 7365  d if ok is False
-000102b0: 2e20 4572 726f 7220 6d65 7373 6167 6520  . Error message 
-000102c0: 696e 2068 756d 616e 2072 6561 6461 626c  in human readabl
-000102d0: 6520 666f 726d 2074 6861 7420 6578 706c  e form that expl
-000102e0: 6169 6e73 2077 6879 2069 7420 6973 2069  ains why it is i
-000102f0: 6d70 6f73 7369 626c 6520 746f 2063 6f6d  mpossible to com
-00010300: 706c 6574 6520 7468 6520 6f72 6465 7220  plete the order 
-00010310: 2865 2e67 2e20 2253 6f72 7279 2c20 6465  (e.g. "Sorry, de
-00010320: 6c69 7665 7279 2074 6f20 796f 7572 2064  livery to your d
-00010330: 6573 6972 6564 2061 6464 7265 7373 2069  esired address i
-00010340: 7320 756e 6176 6169 6c61 626c 6527 292e  s unavailable').
-00010350: 2054 656c 6567 7261 6d20 7769 6c6c 2064   Telegram will d
-00010360: 6973 706c 6179 2074 6869 7320 6d65 7373  isplay this mess
-00010370: 6167 6520 746f 2074 6865 2075 7365 722e  age to the user.
-00010380: 0a20 2020 203a 7265 7475 726e 3a0a 2020  .    :return:.  
-00010390: 2020 2222 220a 2020 2020 6d65 7468 6f64    """.    method
-000103a0: 5f75 726c 203d 2027 616e 7377 6572 5368  _url = 'answerSh
-000103b0: 6970 7069 6e67 5175 6572 7927 0a20 2020  ippingQuery'.   
-000103c0: 2070 6179 6c6f 6164 203d 207b 2773 6869   payload = {'shi
-000103d0: 7070 696e 675f 7175 6572 795f 6964 273a  pping_query_id':
-000103e0: 2073 6869 7070 696e 675f 7175 6572 795f   shipping_query_
-000103f0: 6964 2c20 276f 6b27 3a20 6f6b 7d0a 2020  id, 'ok': ok}.  
-00010400: 2020 6966 2073 6869 7070 696e 675f 6f70    if shipping_op
-00010410: 7469 6f6e 733a 0a20 2020 2020 2020 2070  tions:.        p
-00010420: 6179 6c6f 6164 5b27 7368 6970 7069 6e67  ayload['shipping
-00010430: 5f6f 7074 696f 6e73 275d 203d 205f 636f  _options'] = _co
-00010440: 6e76 6572 745f 6c69 7374 5f6a 736f 6e5f  nvert_list_json_
-00010450: 7365 7269 616c 697a 6162 6c65 2873 6869  serializable(shi
-00010460: 7070 696e 675f 6f70 7469 6f6e 7329 0a20  pping_options). 
-00010470: 2020 2069 6620 6572 726f 725f 6d65 7373     if error_mess
-00010480: 6167 653a 0a20 2020 2020 2020 2070 6179  age:.        pay
-00010490: 6c6f 6164 5b27 6572 726f 725f 6d65 7373  load['error_mess
-000104a0: 6167 6527 5d20 3d20 6572 726f 725f 6d65  age'] = error_me
-000104b0: 7373 6167 650a 2020 2020 7265 7475 726e  ssage.    return
-000104c0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-000104d0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000104e0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000104f0: 290a 0a0a 6465 6620 616e 7377 6572 5f70  )...def answer_p
-00010500: 7265 5f63 6865 636b 6f75 745f 7175 6572  re_checkout_quer
-00010510: 7928 746f 6b65 6e2c 2070 7265 5f63 6865  y(token, pre_che
-00010520: 636b 6f75 745f 7175 6572 795f 6964 2c20  ckout_query_id, 
-00010530: 6f6b 2c20 6572 726f 725f 6d65 7373 6167  ok, error_messag
-00010540: 653d 4e6f 6e65 293a 0a20 2020 2022 2222  e=None):.    """
-00010550: 0a20 2020 204f 6e63 6520 7468 6520 7573  .    Once the us
-00010560: 6572 2068 6173 2063 6f6e 6669 726d 6564  er has confirmed
-00010570: 2074 6865 6972 2070 6179 6d65 6e74 2061   their payment a
-00010580: 6e64 2073 6869 7070 696e 6720 6465 7461  nd shipping deta
-00010590: 696c 732c 2074 6865 2042 6f74 2041 5049  ils, the Bot API
-000105a0: 2073 656e 6473 2074 6865 2066 696e 616c   sends the final
-000105b0: 2063 6f6e 6669 726d 6174 696f 6e20 696e   confirmation in
-000105c0: 2074 6865 2066 6f72 6d20 6f66 2061 6e20   the form of an 
-000105d0: 5570 6461 7465 2077 6974 6820 7468 6520  Update with the 
-000105e0: 6669 656c 6420 7072 655f 6368 6563 6b6f  field pre_checko
-000105f0: 7574 5f71 7565 7279 2e20 5573 6520 7468  ut_query. Use th
-00010600: 6973 206d 6574 686f 6420 746f 2072 6573  is method to res
-00010610: 706f 6e64 2074 6f20 7375 6368 2070 7265  pond to such pre
-00010620: 2d63 6865 636b 6f75 7420 7175 6572 6965  -checkout querie
-00010630: 732e 204f 6e20 7375 6363 6573 732c 2054  s. On success, T
-00010640: 7275 6520 6973 2072 6574 7572 6e65 642e  rue is returned.
-00010650: 204e 6f74 653a 2054 6865 2042 6f74 2041   Note: The Bot A
-00010660: 5049 206d 7573 7420 7265 6365 6976 6520  PI must receive 
-00010670: 616e 2061 6e73 7765 7220 7769 7468 696e  an answer within
-00010680: 2031 3020 7365 636f 6e64 7320 6166 7465   10 seconds afte
-00010690: 7220 7468 6520 7072 652d 6368 6563 6b6f  r the pre-checko
-000106a0: 7574 2071 7565 7279 2077 6173 2073 656e  ut query was sen
-000106b0: 742e 0a20 2020 203a 7061 7261 6d20 746f  t..    :param to
-000106c0: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
-000106d0: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
-000106e0: 2074 6f20 6669 6c6c 2074 6869 7329 0a20   to fill this). 
-000106f0: 2020 203a 7061 7261 6d20 7072 655f 6368     :param pre_ch
-00010700: 6563 6b6f 7574 5f71 7565 7279 5f69 643a  eckout_query_id:
-00010710: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
-00010720: 6572 2066 6f72 2074 6865 2071 7565 7279  er for the query
-00010730: 2074 6f20 6265 2061 6e73 7765 7265 640a   to be answered.
-00010740: 2020 2020 3a70 6172 616d 206f 6b3a 2053      :param ok: S
-00010750: 7065 6369 6679 2054 7275 6520 6966 2065  pecify True if e
-00010760: 7665 7279 7468 696e 6720 6973 2061 6c72  verything is alr
-00010770: 6967 6874 2028 676f 6f64 7320 6172 6520  ight (goods are 
-00010780: 6176 6169 6c61 626c 652c 2065 7463 2e29  available, etc.)
-00010790: 2061 6e64 2074 6865 2062 6f74 2069 7320   and the bot is 
-000107a0: 7265 6164 7920 746f 2070 726f 6365 6564  ready to proceed
-000107b0: 2077 6974 6820 7468 6520 6f72 6465 722e   with the order.
-000107c0: 2055 7365 2046 616c 7365 2069 6620 7468   Use False if th
-000107d0: 6572 6520 6172 6520 616e 7920 7072 6f62  ere are any prob
-000107e0: 6c65 6d73 2e0a 2020 2020 3a70 6172 616d  lems..    :param
-000107f0: 2065 7272 6f72 5f6d 6573 7361 6765 3a20   error_message: 
-00010800: 5265 7175 6972 6564 2069 6620 6f6b 2069  Required if ok i
-00010810: 7320 4661 6c73 652e 2045 7272 6f72 206d  s False. Error m
-00010820: 6573 7361 6765 2069 6e20 6875 6d61 6e20  essage in human 
-00010830: 7265 6164 6162 6c65 2066 6f72 6d20 7468  readable form th
-00010840: 6174 2065 7870 6c61 696e 7320 7468 6520  at explains the 
-00010850: 7265 6173 6f6e 2066 6f72 2066 6169 6c75  reason for failu
-00010860: 7265 2074 6f20 7072 6f63 6565 6420 7769  re to proceed wi
-00010870: 7468 2074 6865 2063 6865 636b 6f75 7420  th the checkout 
-00010880: 2865 2e67 2e20 2253 6f72 7279 2c20 736f  (e.g. "Sorry, so
-00010890: 6d65 626f 6479 206a 7573 7420 626f 7567  mebody just boug
-000108a0: 6874 2074 6865 206c 6173 7420 6f66 206f  ht the last of o
-000108b0: 7572 2061 6d61 7a69 6e67 2062 6c61 636b  ur amazing black
-000108c0: 2054 2d73 6869 7274 7320 7768 696c 6520   T-shirts while 
-000108d0: 796f 7520 7765 7265 2062 7573 7920 6669  you were busy fi
-000108e0: 6c6c 696e 6720 6f75 7420 796f 7572 2070  lling out your p
-000108f0: 6179 6d65 6e74 2064 6574 6169 6c73 2e20  ayment details. 
-00010900: 506c 6561 7365 2063 686f 6f73 6520 6120  Please choose a 
-00010910: 6469 6666 6572 656e 7420 636f 6c6f 7220  different color 
-00010920: 6f72 2067 6172 6d65 6e74 2122 292e 2054  or garment!"). T
-00010930: 656c 6567 7261 6d20 7769 6c6c 2064 6973  elegram will dis
-00010940: 706c 6179 2074 6869 7320 6d65 7373 6167  play this messag
-00010950: 6520 746f 2074 6865 2075 7365 722e 0a20  e to the user.. 
-00010960: 2020 203a 7265 7475 726e 3a0a 2020 2020     :return:.    
-00010970: 2222 220a 2020 2020 6d65 7468 6f64 5f75  """.    method_u
-00010980: 726c 203d 2027 616e 7377 6572 5072 6543  rl = 'answerPreC
-00010990: 6865 636b 6f75 7451 7565 7279 270a 2020  heckoutQuery'.  
-000109a0: 2020 7061 796c 6f61 6420 3d20 7b27 7072    payload = {'pr
-000109b0: 655f 6368 6563 6b6f 7574 5f71 7565 7279  e_checkout_query
-000109c0: 5f69 6427 3a20 7072 655f 6368 6563 6b6f  _id': pre_checko
-000109d0: 7574 5f71 7565 7279 5f69 642c 2027 6f6b  ut_query_id, 'ok
-000109e0: 273a 206f 6b7d 0a20 2020 2069 6620 6572  ': ok}.    if er
-000109f0: 726f 725f 6d65 7373 6167 653a 0a20 2020  ror_message:.   
-00010a00: 2020 2020 2070 6179 6c6f 6164 5b27 6572       payload['er
-00010a10: 726f 725f 6d65 7373 6167 6527 5d20 3d20  ror_message'] = 
-00010a20: 6572 726f 725f 6d65 7373 6167 650a 2020  error_message.  
-00010a30: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00010a40: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00010a50: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00010a60: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00010a70: 756e 7069 6e5f 616c 6c5f 6765 6e65 7261  unpin_all_genera
-00010a80: 6c5f 666f 7275 6d5f 746f 7069 635f 6d65  l_forum_topic_me
-00010a90: 7373 6167 6573 2874 6f6b 656e 2c20 6368  ssages(token, ch
-00010aa0: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
-00010ab0: 6f64 5f75 726c 203d 2027 756e 7069 6e41  od_url = 'unpinA
-00010ac0: 6c6c 4765 6e65 7261 6c46 6f72 756d 546f  llGeneralForumTo
-00010ad0: 7069 634d 6573 7361 6765 7327 0a20 2020  picMessages'.   
-00010ae0: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00010af0: 745f 6964 273a 2063 6861 745f 6964 7d0a  t_id': chat_id}.
-00010b00: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00010b10: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00010b20: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00010b30: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-00010b40: 6f64 3d27 706f 7374 2729 0a0a 0a23 2049  od='post')...# I
-00010b50: 6e6c 696e 6551 7565 7279 0a0a 6465 6620  nlineQuery..def 
-00010b60: 616e 7377 6572 5f63 616c 6c62 6163 6b5f  answer_callback_
-00010b70: 7175 6572 7928 746f 6b65 6e2c 2063 616c  query(token, cal
-00010b80: 6c62 6163 6b5f 7175 6572 795f 6964 2c20  lback_query_id, 
-00010b90: 7465 7874 3d4e 6f6e 652c 2073 686f 775f  text=None, show_
-00010ba0: 616c 6572 743d 4e6f 6e65 2c20 7572 6c3d  alert=None, url=
-00010bb0: 4e6f 6e65 2c20 6361 6368 655f 7469 6d65  None, cache_time
-00010bc0: 3d4e 6f6e 6529 3a0a 2020 2020 2222 220a  =None):.    """.
-00010bd0: 2020 2020 5573 6520 7468 6973 206d 6574      Use this met
-00010be0: 686f 6420 746f 2073 656e 6420 616e 7377  hod to send answ
-00010bf0: 6572 7320 746f 2063 616c 6c62 6163 6b20  ers to callback 
-00010c00: 7175 6572 6965 7320 7365 6e74 2066 726f  queries sent fro
-00010c10: 6d20 696e 6c69 6e65 206b 6579 626f 6172  m inline keyboar
-00010c20: 6473 2e20 5468 6520 616e 7377 6572 2077  ds. The answer w
-00010c30: 696c 6c20 6265 2064 6973 706c 6179 6564  ill be displayed
-00010c40: 2074 6f20 7468 6520 7573 6572 2061 7320   to the user as 
-00010c50: 6120 6e6f 7469 6669 6361 7469 6f6e 2061  a notification a
-00010c60: 7420 7468 6520 746f 7020 6f66 2074 6865  t the top of the
-00010c70: 2063 6861 7420 7363 7265 656e 206f 7220   chat screen or 
-00010c80: 6173 2061 6e20 616c 6572 742e 204f 6e20  as an alert. On 
-00010c90: 7375 6363 6573 732c 2054 7275 6520 6973  success, True is
-00010ca0: 2072 6574 7572 6e65 642e 0a20 2020 2041   returned..    A
-00010cb0: 6c74 6572 6e61 7469 7665 6c79 2c20 7468  lternatively, th
-00010cc0: 6520 7573 6572 2063 616e 2062 6520 7265  e user can be re
-00010cd0: 6469 7265 6374 6564 2074 6f20 7468 6520  directed to the 
-00010ce0: 7370 6563 6966 6965 6420 4761 6d65 2055  specified Game U
-00010cf0: 524c 2e20 466f 7220 7468 6973 206f 7074  RL. For this opt
-00010d00: 696f 6e20 746f 2077 6f72 6b2c 2079 6f75  ion to work, you
-00010d10: 206d 7573 7420 6669 7273 7420 6372 6561   must first crea
-00010d20: 7465 2061 2067 616d 6520 666f 7220 796f  te a game for yo
-00010d30: 7572 2062 6f74 2076 6961 2042 6f74 4661  ur bot via BotFa
-00010d40: 7468 6572 2061 6e64 2061 6363 6570 7420  ther and accept 
-00010d50: 7468 6520 7465 726d 732e 204f 7468 6572  the terms. Other
-00010d60: 7769 7365 2c20 796f 7520 6d61 7920 7573  wise, you may us
-00010d70: 6520 6c69 6e6b 7320 6c69 6b65 2074 656c  e links like tel
-00010d80: 6567 7261 6d2e 6d65 2f79 6f75 725f 626f  egram.me/your_bo
-00010d90: 743f 7374 6172 743d 5858 5858 2074 6861  t?start=XXXX tha
-00010da0: 7420 6f70 656e 2079 6f75 7220 626f 7420  t open your bot 
-00010db0: 7769 7468 2061 2070 6172 616d 6574 6572  with a parameter
-00010dc0: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
-00010dd0: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
-00010de0: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
-00010df0: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
-00010e00: 2020 3a70 6172 616d 2063 616c 6c62 6163    :param callbac
-00010e10: 6b5f 7175 6572 795f 6964 3a20 556e 6971  k_query_id: Uniq
-00010e20: 7565 2069 6465 6e74 6966 6965 7220 666f  ue identifier fo
-00010e30: 7220 7468 6520 7175 6572 7920 746f 2062  r the query to b
-00010e40: 6520 616e 7377 6572 6564 0a20 2020 203a  e answered.    :
-00010e50: 7061 7261 6d20 7465 7874 3a20 284f 7074  param text: (Opt
-00010e60: 696f 6e61 6c29 2054 6578 7420 6f66 2074  ional) Text of t
-00010e70: 6865 206e 6f74 6966 6963 6174 696f 6e2e  he notification.
-00010e80: 2049 6620 6e6f 7420 7370 6563 6966 6965   If not specifie
-00010e90: 642c 206e 6f74 6869 6e67 2077 696c 6c20  d, nothing will 
-00010ea0: 6265 2073 686f 776e 2074 6f20 7468 6520  be shown to the 
-00010eb0: 7573 6572 2c20 302d 3230 3020 6368 6172  user, 0-200 char
-00010ec0: 6163 7465 7273 0a20 2020 203a 7061 7261  acters.    :para
-00010ed0: 6d20 7368 6f77 5f61 6c65 7274 3a20 284f  m show_alert: (O
-00010ee0: 7074 696f 6e61 6c29 2049 6620 7472 7565  ptional) If true
-00010ef0: 2c20 616e 2061 6c65 7274 2077 696c 6c20  , an alert will 
-00010f00: 6265 2073 686f 776e 2062 7920 7468 6520  be shown by the 
-00010f10: 636c 6965 6e74 2069 6e73 7465 6164 206f  client instead o
-00010f20: 6620 6120 6e6f 7469 6669 6361 7469 6f6e  f a notification
-00010f30: 2061 7420 7468 6520 746f 7020 6f66 2074   at the top of t
-00010f40: 6865 2063 6861 7420 7363 7265 656e 2e20  he chat screen. 
-00010f50: 4465 6661 756c 7473 2074 6f20 6661 6c73  Defaults to fals
-00010f60: 652e 0a20 2020 203a 7061 7261 6d20 7572  e..    :param ur
-00010f70: 6c3a 2028 4f70 7469 6f6e 616c 2920 5552  l: (Optional) UR
-00010f80: 4c20 7468 6174 2077 696c 6c20 6265 206f  L that will be o
-00010f90: 7065 6e65 6420 6279 2074 6865 2075 7365  pened by the use
-00010fa0: 7227 7320 636c 6965 6e74 2e20 4966 2079  r's client. If y
-00010fb0: 6f75 2068 6176 6520 6372 6561 7465 6420  ou have created 
-00010fc0: 6120 4761 6d65 2061 6e64 2061 6363 6570  a Game and accep
-00010fd0: 7465 6420 7468 6520 636f 6e64 6974 696f  ted the conditio
-00010fe0: 6e73 2076 6961 2040 426f 7466 6174 6865  ns via @Botfathe
-00010ff0: 722c 2073 7065 6369 6679 2074 6865 2055  r, specify the U
-00011000: 524c 2074 6861 7420 6f70 656e 7320 796f  RL that opens yo
-00011010: 7572 2067 616d 6520 e280 9320 6e6f 7465  ur game ... note
-00011020: 2074 6861 7420 7468 6973 2077 696c 6c20   that this will 
-00011030: 6f6e 6c79 2077 6f72 6b20 6966 2074 6865  only work if the
-00011040: 2071 7565 7279 2063 6f6d 6573 2066 726f   query comes fro
-00011050: 6d20 6120 6361 6c6c 6261 636b 5f67 616d  m a callback_gam
-00011060: 6520 6275 7474 6f6e 2e0a 2020 2020 4f74  e button..    Ot
-00011070: 6865 7277 6973 652c 2079 6f75 206d 6179  herwise, you may
-00011080: 2075 7365 206c 696e 6b73 206c 696b 6520   use links like 
-00011090: 7465 6c65 6772 616d 2e6d 652f 796f 7572  telegram.me/your
-000110a0: 5f62 6f74 3f73 7461 7274 3d58 5858 5820  _bot?start=XXXX 
-000110b0: 7468 6174 206f 7065 6e20 796f 7572 2062  that open your b
-000110c0: 6f74 2077 6974 6820 6120 7061 7261 6d65  ot with a parame
-000110d0: 7465 722e 0a20 2020 203a 7061 7261 6d20  ter..    :param 
-000110e0: 6361 6368 655f 7469 6d65 3a20 284f 7074  cache_time: (Opt
-000110f0: 696f 6e61 6c29 2054 6865 206d 6178 696d  ional) The maxim
-00011100: 756d 2061 6d6f 756e 7420 6f66 2074 696d  um amount of tim
-00011110: 6520 696e 2073 6563 6f6e 6473 2074 6861  e in seconds tha
-00011120: 7420 7468 6520 7265 7375 6c74 206f 6620  t the result of 
-00011130: 7468 6520 6361 6c6c 6261 636b 2071 7565  the callback que
-00011140: 7279 206d 6179 2062 6520 6361 6368 6564  ry may be cached
-00011150: 2063 6c69 656e 742d 7369 6465 2e20 5465   client-side. Te
-00011160: 6c65 6772 616d 2061 7070 7320 7769 6c6c  legram apps will
-00011170: 2073 7570 706f 7274 2063 6163 6869 6e67   support caching
-00011180: 2073 7461 7274 696e 6720 696e 2076 6572   starting in ver
-00011190: 7369 6f6e 2033 2e31 342e 2044 6566 6175  sion 3.14. Defau
-000111a0: 6c74 7320 746f 2030 2e0a 2020 2020 3a72  lts to 0..    :r
-000111b0: 6574 7572 6e3a 0a20 2020 2022 2222 0a20  eturn:.    """. 
-000111c0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000111d0: 2761 6e73 7765 7243 616c 6c62 6163 6b51  'answerCallbackQ
-000111e0: 7565 7279 270a 2020 2020 7061 796c 6f61  uery'.    payloa
-000111f0: 6420 3d20 7b27 6361 6c6c 6261 636b 5f71  d = {'callback_q
-00011200: 7565 7279 5f69 6427 3a20 6361 6c6c 6261  uery_id': callba
-00011210: 636b 5f71 7565 7279 5f69 647d 0a20 2020  ck_query_id}.   
-00011220: 2069 6620 7465 7874 3a0a 2020 2020 2020   if text:.      
-00011230: 2020 7061 796c 6f61 645b 2774 6578 7427    payload['text'
-00011240: 5d20 3d20 7465 7874 0a20 2020 2069 6620  ] = text.    if 
-00011250: 7368 6f77 5f61 6c65 7274 2069 7320 6e6f  show_alert is no
-00011260: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00011270: 7061 796c 6f61 645b 2773 686f 775f 616c  payload['show_al
-00011280: 6572 7427 5d20 3d20 7368 6f77 5f61 6c65  ert'] = show_ale
-00011290: 7274 0a20 2020 2069 6620 7572 6c3a 0a20  rt.    if url:. 
-000112a0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000112b0: 7572 6c27 5d20 3d20 7572 6c0a 2020 2020  url'] = url.    
-000112c0: 6966 2063 6163 6865 5f74 696d 6520 6973  if cache_time is
-000112d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000112e0: 2020 2070 6179 6c6f 6164 5b27 6361 6368     payload['cach
-000112f0: 655f 7469 6d65 275d 203d 2063 6163 6865  e_time'] = cache
-00011300: 5f74 696d 650a 2020 2020 7265 7475 726e  _time.    return
-00011310: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00011320: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00011330: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00011340: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-00011350: 0a0a 0a64 6566 2067 6574 5f75 7365 725f  ...def get_user_
-00011360: 6368 6174 5f62 6f6f 7374 7328 746f 6b65  chat_boosts(toke
-00011370: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
-00011380: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-00011390: 5f75 726c 203d 2027 6765 7455 7365 7243  _url = 'getUserC
-000113a0: 6861 7442 6f6f 7374 7327 0a20 2020 2070  hatBoosts'.    p
-000113b0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-000113c0: 6964 273a 2063 6861 745f 6964 2c20 2775  id': chat_id, 'u
-000113d0: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
-000113e0: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-000113f0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00011400: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00011410: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00011420: 6465 6620 616e 7377 6572 5f69 6e6c 696e  def answer_inlin
-00011430: 655f 7175 6572 7928 746f 6b65 6e2c 2069  e_query(token, i
-00011440: 6e6c 696e 655f 7175 6572 795f 6964 2c20  nline_query_id, 
-00011450: 7265 7375 6c74 732c 2063 6163 6865 5f74  results, cache_t
-00011460: 696d 653d 4e6f 6e65 2c20 6973 5f70 6572  ime=None, is_per
-00011470: 736f 6e61 6c3d 4e6f 6e65 2c20 6e65 7874  sonal=None, next
-00011480: 5f6f 6666 7365 743d 4e6f 6e65 2c0a 2020  _offset=None,.  
-00011490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114a0: 2020 2020 2020 6275 7474 6f6e 3d4e 6f6e        button=Non
-000114b0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-000114c0: 726c 203d 2027 616e 7377 6572 496e 6c69  rl = 'answerInli
-000114d0: 6e65 5175 6572 7927 0a20 2020 2070 6179  neQuery'.    pay
-000114e0: 6c6f 6164 203d 207b 2769 6e6c 696e 655f  load = {'inline_
-000114f0: 7175 6572 795f 6964 273a 2069 6e6c 696e  query_id': inlin
-00011500: 655f 7175 6572 795f 6964 2c20 2772 6573  e_query_id, 'res
-00011510: 756c 7473 273a 205f 636f 6e76 6572 745f  ults': _convert_
-00011520: 6c69 7374 5f6a 736f 6e5f 7365 7269 616c  list_json_serial
-00011530: 697a 6162 6c65 2872 6573 756c 7473 297d  izable(results)}
-00011540: 0a20 2020 2069 6620 6361 6368 655f 7469  .    if cache_ti
-00011550: 6d65 2069 7320 6e6f 7420 4e6f 6e65 3a0a  me is not None:.
-00011560: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00011570: 2763 6163 6865 5f74 696d 6527 5d20 3d20  'cache_time'] = 
-00011580: 6361 6368 655f 7469 6d65 0a20 2020 2069  cache_time.    i
-00011590: 6620 6973 5f70 6572 736f 6e61 6c20 6973  f is_personal is
-000115a0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000115b0: 2020 2070 6179 6c6f 6164 5b27 6973 5f70     payload['is_p
-000115c0: 6572 736f 6e61 6c27 5d20 3d20 6973 5f70  ersonal'] = is_p
-000115d0: 6572 736f 6e61 6c0a 2020 2020 6966 206e  ersonal.    if n
-000115e0: 6578 745f 6f66 6673 6574 2069 7320 6e6f  ext_offset is no
-000115f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00011600: 7061 796c 6f61 645b 276e 6578 745f 6f66  payload['next_of
-00011610: 6673 6574 275d 203d 206e 6578 745f 6f66  fset'] = next_of
-00011620: 6673 6574 0a20 2020 2069 6620 6275 7474  fset.    if butt
-00011630: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
-00011640: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00011650: 2262 7574 746f 6e22 5d20 3d20 6275 7474  "button"] = butt
-00011660: 6f6e 2e74 6f5f 6a73 6f6e 2829 0a20 2020  on.to_json().   
-00011670: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00011680: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00011690: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-000116a0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-000116b0: 2770 6f73 7427 290a 0a0a 6465 6620 6765  'post')...def ge
-000116c0: 745f 7374 6963 6b65 725f 7365 7428 746f  t_sticker_set(to
-000116d0: 6b65 6e2c 206e 616d 6529 3a0a 2020 2020  ken, name):.    
-000116e0: 6d65 7468 6f64 5f75 726c 203d 2027 6765  method_url = 'ge
-000116f0: 7453 7469 636b 6572 5365 7427 0a20 2020  tStickerSet'.   
-00011700: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00011710: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00011720: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00011730: 7b27 6e61 6d65 273a 206e 616d 657d 290a  {'name': name}).
-00011740: 0a0a 6465 6620 6765 745f 6375 7374 6f6d  ..def get_custom
-00011750: 5f65 6d6f 6a69 5f73 7469 636b 6572 7328  _emoji_stickers(
-00011760: 746f 6b65 6e2c 2063 7573 746f 6d5f 656d  token, custom_em
-00011770: 6f6a 695f 6964 7329 3a0a 2020 2020 6d65  oji_ids):.    me
-00011780: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
-00011790: 4375 7374 6f6d 456d 6f6a 6953 7469 636b  CustomEmojiStick
-000117a0: 6572 7327 0a20 2020 2072 6574 7572 6e20  ers'.    return 
-000117b0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-000117c0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-000117d0: 2070 6172 616d 733d 7b27 6375 7374 6f6d   params={'custom
-000117e0: 5f65 6d6f 6a69 5f69 6473 273a 206a 736f  _emoji_ids': jso
-000117f0: 6e2e 6475 6d70 7328 6375 7374 6f6d 5f65  n.dumps(custom_e
-00011800: 6d6f 6a69 5f69 6473 297d 290a 0a0a 6465  moji_ids)})...de
-00011810: 6620 7365 745f 7374 6963 6b65 725f 6b65  f set_sticker_ke
-00011820: 7977 6f72 6473 2874 6f6b 656e 2c20 7374  ywords(token, st
-00011830: 6963 6b65 722c 206b 6579 776f 7264 733d  icker, keywords=
-00011840: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-00011850: 645f 7572 6c20 3d20 2773 6574 5374 6963  d_url = 'setStic
-00011860: 6b65 724b 6579 776f 7264 7327 0a20 2020  kerKeywords'.   
-00011870: 2070 6179 6c6f 6164 203d 207b 2773 7469   payload = {'sti
-00011880: 636b 6572 273a 2073 7469 636b 6572 7d0a  cker': sticker}.
-00011890: 2020 2020 6966 206b 6579 776f 7264 733a      if keywords:
-000118a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000118b0: 5b27 6b65 7977 6f72 6473 275d 203d 206a  ['keywords'] = j
-000118c0: 736f 6e2e 6475 6d70 7328 6b65 7977 6f72  son.dumps(keywor
-000118d0: 6473 290a 2020 2020 7265 7475 726e 205f  ds).    return _
-000118e0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-000118f0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00011900: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00011910: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-00011920: 0a64 6566 2073 6574 5f73 7469 636b 6572  .def set_sticker
-00011930: 5f6d 6173 6b5f 706f 7369 7469 6f6e 2874  _mask_position(t
-00011940: 6f6b 656e 2c20 7374 6963 6b65 722c 206d  oken, sticker, m
-00011950: 6173 6b5f 706f 7369 7469 6f6e 3d4e 6f6e  ask_position=Non
-00011960: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00011970: 726c 203d 2027 7365 7453 7469 636b 6572  rl = 'setSticker
-00011980: 4d61 736b 506f 7369 7469 6f6e 270a 2020  MaskPosition'.  
-00011990: 2020 7061 796c 6f61 6420 3d20 7b27 7374    payload = {'st
-000119a0: 6963 6b65 7227 3a20 7374 6963 6b65 727d  icker': sticker}
-000119b0: 0a20 2020 2069 6620 6d61 736b 5f70 6f73  .    if mask_pos
-000119c0: 6974 696f 6e3a 0a20 2020 2020 2020 2070  ition:.        p
-000119d0: 6179 6c6f 6164 5b27 6d61 736b 5f70 6f73  ayload['mask_pos
-000119e0: 6974 696f 6e27 5d20 3d20 6d61 736b 5f70  ition'] = mask_p
-000119f0: 6f73 6974 696f 6e2e 746f 5f6a 736f 6e28  osition.to_json(
-00011a00: 290a 2020 2020 7265 7475 726e 205f 6d61  ).    return _ma
-00011a10: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00011a20: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00011a30: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-00011a40: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-00011a50: 6566 2075 706c 6f61 645f 7374 6963 6b65  ef upload_sticke
-00011a60: 725f 6669 6c65 2874 6f6b 656e 2c20 7573  r_file(token, us
-00011a70: 6572 5f69 642c 2073 7469 636b 6572 2c20  er_id, sticker, 
-00011a80: 7374 6963 6b65 725f 666f 726d 6174 293a  sticker_format):
-00011a90: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00011aa0: 3d20 2775 706c 6f61 6453 7469 636b 6572  = 'uploadSticker
-00011ab0: 4669 6c65 270a 2020 2020 7061 796c 6f61  File'.    payloa
-00011ac0: 6420 3d20 7b27 7573 6572 5f69 6427 3a20  d = {'user_id': 
-00011ad0: 7573 6572 5f69 642c 2027 7374 6963 6b65  user_id, 'sticke
-00011ae0: 725f 666f 726d 6174 273a 2073 7469 636b  r_format': stick
-00011af0: 6572 5f66 6f72 6d61 747d 0a20 2020 2066  er_format}.    f
-00011b00: 696c 6573 203d 207b 2773 7469 636b 6572  iles = {'sticker
-00011b10: 273a 2073 7469 636b 6572 7d0a 2020 2020  ': sticker}.    
-00011b20: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-00011b30: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00011b40: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00011b50: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
-00011b60: 6c65 732c 206d 6574 686f 643d 2770 6f73  les, method='pos
-00011b70: 7427 290a 0a0a 6465 6620 7365 745f 6375  t')...def set_cu
-00011b80: 7374 6f6d 5f65 6d6f 6a69 5f73 7469 636b  stom_emoji_stick
-00011b90: 6572 5f73 6574 5f74 6875 6d62 6e61 696c  er_set_thumbnail
-00011ba0: 2874 6f6b 656e 2c20 6e61 6d65 2c20 6375  (token, name, cu
-00011bb0: 7374 6f6d 5f65 6d6f 6a69 5f69 643d 4e6f  stom_emoji_id=No
-00011bc0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00011bd0: 7572 6c20 3d20 2773 6574 4375 7374 6f6d  url = 'setCustom
-00011be0: 456d 6f6a 6953 7469 636b 6572 5365 7454  EmojiStickerSetT
-00011bf0: 6875 6d62 6e61 696c 270a 2020 2020 7061  humbnail'.    pa
-00011c00: 796c 6f61 6420 3d20 7b27 6e61 6d65 273a  yload = {'name':
-00011c10: 206e 616d 657d 0a20 2020 2069 6620 6375   name}.    if cu
-00011c20: 7374 6f6d 5f65 6d6f 6a69 5f69 6420 6973  stom_emoji_id is
-00011c30: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00011c40: 2020 2070 6179 6c6f 6164 5b27 6375 7374     payload['cust
-00011c50: 6f6d 5f65 6d6f 6a69 5f69 6427 5d20 3d20  om_emoji_id'] = 
-00011c60: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 640a  custom_emoji_id.
-00011c70: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00011c80: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00011c90: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00011ca0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-00011cb0: 6f64 3d27 706f 7374 2729 0a0a 0a64 6566  od='post')...def
-00011cc0: 2073 6574 5f73 7469 636b 6572 5f73 6574   set_sticker_set
-00011cd0: 5f74 6974 6c65 2874 6f6b 656e 2c20 6e61  _title(token, na
-00011ce0: 6d65 2c20 7469 746c 6529 3a0a 2020 2020  me, title):.    
-00011cf0: 6d65 7468 6f64 5f75 726c 203d 2027 7365  method_url = 'se
-00011d00: 7453 7469 636b 6572 5365 7454 6974 6c65  tStickerSetTitle
-00011d10: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00011d20: 7b27 6e61 6d65 273a 206e 616d 652c 2027  {'name': name, '
-00011d30: 7469 746c 6527 3a20 7469 746c 657d 0a20  title': title}. 
-00011d40: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00011d50: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00011d60: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00011d70: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-00011d80: 643d 2770 6f73 7427 290a 0a0a 6465 6620  d='post')...def 
-00011d90: 6465 6c65 7465 5f73 7469 636b 6572 5f73  delete_sticker_s
-00011da0: 6574 2874 6f6b 656e 2c20 6e61 6d65 293a  et(token, name):
-00011db0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00011dc0: 3d20 2764 656c 6574 6553 7469 636b 6572  = 'deleteSticker
-00011dd0: 5365 7427 0a20 2020 2070 6179 6c6f 6164  Set'.    payload
-00011de0: 203d 207b 276e 616d 6527 3a20 6e61 6d65   = {'name': name
-00011df0: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-00011e00: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00011e10: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00011e20: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-00011e30: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-00011e40: 6566 2073 6574 5f73 7469 636b 6572 5f65  ef set_sticker_e
-00011e50: 6d6f 6a69 5f6c 6973 7428 746f 6b65 6e2c  moji_list(token,
-00011e60: 2073 7469 636b 6572 2c20 656d 6f6a 695f   sticker, emoji_
-00011e70: 6c69 7374 293a 0a20 2020 206d 6574 686f  list):.    metho
-00011e80: 645f 7572 6c20 3d20 2773 6574 5374 6963  d_url = 'setStic
-00011e90: 6b65 7245 6d6f 6a69 4c69 7374 270a 2020  kerEmojiList'.  
-00011ea0: 2020 7061 796c 6f61 6420 3d20 7b27 7374    payload = {'st
-00011eb0: 6963 6b65 7227 3a20 7374 6963 6b65 722c  icker': sticker,
-00011ec0: 2027 656d 6f6a 695f 6c69 7374 273a 206a   'emoji_list': j
-00011ed0: 736f 6e2e 6475 6d70 7328 656d 6f6a 695f  son.dumps(emoji_
-00011ee0: 6c69 7374 297d 0a20 2020 2072 6574 7572  list)}.    retur
-00011ef0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00011f00: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00011f10: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00011f20: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
-00011f30: 290a 0a0a 6465 6620 6372 6561 7465 5f6e  )...def create_n
-00011f40: 6577 5f73 7469 636b 6572 5f73 6574 280a  ew_sticker_set(.
-00011f50: 2020 2020 2020 2020 746f 6b65 6e2c 2075          token, u
-00011f60: 7365 725f 6964 2c20 6e61 6d65 2c20 7469  ser_id, name, ti
-00011f70: 746c 652c 2073 7469 636b 6572 732c 2073  tle, stickers, s
-00011f80: 7469 636b 6572 5f74 7970 653d 4e6f 6e65  ticker_type=None
-00011f90: 2c20 6e65 6564 735f 7265 7061 696e 7469  , needs_repainti
-00011fa0: 6e67 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ng=None):.    me
-00011fb0: 7468 6f64 5f75 726c 203d 2027 6372 6561  thod_url = 'crea
-00011fc0: 7465 4e65 7753 7469 636b 6572 5365 7427  teNewStickerSet'
-00011fd0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00011fe0: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
-00011ff0: 6964 2c20 276e 616d 6527 3a20 6e61 6d65  id, 'name': name
-00012000: 2c20 2774 6974 6c65 273a 2074 6974 6c65  , 'title': title
-00012010: 7d0a 2020 2020 6966 2073 7469 636b 6572  }.    if sticker
-00012020: 5f74 7970 653a 0a20 2020 2020 2020 2070  _type:.        p
-00012030: 6179 6c6f 6164 5b27 7374 6963 6b65 725f  ayload['sticker_
-00012040: 7479 7065 275d 203d 2073 7469 636b 6572  type'] = sticker
-00012050: 5f74 7970 650a 2020 2020 6966 206e 6565  _type.    if nee
-00012060: 6473 5f72 6570 6169 6e74 696e 6720 6973  ds_repainting is
-00012070: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00012080: 2020 2070 6179 6c6f 6164 5b27 6e65 6564     payload['need
-00012090: 735f 7265 7061 696e 7469 6e67 275d 203d  s_repainting'] =
-000120a0: 206e 6565 6473 5f72 6570 6169 6e74 696e   needs_repaintin
-000120b0: 670a 0a20 2020 2066 696c 6573 203d 207b  g..    files = {
-000120c0: 7d0a 2020 2020 6c73 7420 3d20 5b5d 0a0a  }.    lst = []..
-000120d0: 2020 2020 666f 7220 7374 6963 6b65 7220      for sticker 
-000120e0: 696e 2073 7469 636b 6572 733a 0a20 2020  in stickers:.   
-000120f0: 2020 2020 206a 736f 6e5f 6469 6374 2c20       json_dict, 
-00012100: 6669 6c65 203d 2073 7469 636b 6572 2e63  file = sticker.c
-00012110: 6f6e 7665 7274 5f69 6e70 7574 5f73 7469  onvert_input_sti
-00012120: 636b 6572 2829 0a20 2020 2020 2020 206a  cker().        j
-00012130: 736f 6e5f 6469 6374 203d 2073 7469 636b  son_dict = stick
-00012140: 6572 2e74 6f5f 6469 6374 2829 0a0a 2020  er.to_dict()..  
-00012150: 2020 2020 2020 6966 2066 696c 653a 0a20        if file:. 
-00012160: 2020 2020 2020 2020 2020 206c 6973 745f             list_
-00012170: 6b65 7973 203d 206c 6973 7428 6669 6c65  keys = list(file
-00012180: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
-00012190: 2020 2020 2066 696c 6573 5b6c 6973 745f       files[list_
-000121a0: 6b65 7973 5b30 5d5d 203d 2066 696c 655b  keys[0]] = file[
-000121b0: 6c69 7374 5f6b 6579 735b 305d 5d0a 2020  list_keys[0]].  
-000121c0: 2020 2020 2020 6c73 742e 6170 7065 6e64        lst.append
-000121d0: 286a 736f 6e5f 6469 6374 290a 0a20 2020  (json_dict)..   
-000121e0: 2070 6179 6c6f 6164 5b27 7374 6963 6b65   payload['sticke
-000121f0: 7273 275d 203d 206a 736f 6e2e 6475 6d70  rs'] = json.dump
-00012200: 7328 6c73 7429 0a0a 2020 2020 7265 7475  s(lst)..    retu
-00012210: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00012220: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00012230: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00012240: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00012250: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-00012260: 0a0a 6465 6620 6164 645f 7374 6963 6b65  ..def add_sticke
-00012270: 725f 746f 5f73 6574 2874 6f6b 656e 2c20  r_to_set(token, 
-00012280: 7573 6572 5f69 642c 206e 616d 652c 2073  user_id, name, s
-00012290: 7469 636b 6572 293a 0a20 2020 206d 6574  ticker):.    met
-000122a0: 686f 645f 7572 6c20 3d20 2761 6464 5374  hod_url = 'addSt
-000122b0: 6963 6b65 7254 6f53 6574 270a 2020 2020  ickerToSet'.    
-000122c0: 6a73 6f6e 5f64 6963 742c 2066 696c 6573  json_dict, files
-000122d0: 203d 2073 7469 636b 6572 2e63 6f6e 7665   = sticker.conve
-000122e0: 7274 5f69 6e70 7574 5f73 7469 636b 6572  rt_input_sticker
-000122f0: 2829 0a20 2020 2070 6179 6c6f 6164 203d  ().    payload =
-00012300: 207b 2775 7365 725f 6964 273a 2075 7365   {'user_id': use
-00012310: 725f 6964 2c20 276e 616d 6527 3a20 6e61  r_id, 'name': na
-00012320: 6d65 2c20 2773 7469 636b 6572 273a 206a  me, 'sticker': j
-00012330: 736f 6e5f 6469 6374 7d0a 2020 2020 7265  son_dict}.    re
-00012340: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00012350: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00012360: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00012370: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00012380: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
-00012390: 290a 0a0a 6465 6620 7365 745f 7374 6963  )...def set_stic
-000123a0: 6b65 725f 706f 7369 7469 6f6e 5f69 6e5f  ker_position_in_
-000123b0: 7365 7428 746f 6b65 6e2c 2073 7469 636b  set(token, stick
-000123c0: 6572 2c20 706f 7369 7469 6f6e 293a 0a20  er, position):. 
-000123d0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000123e0: 2773 6574 5374 6963 6b65 7250 6f73 6974  'setStickerPosit
-000123f0: 696f 6e49 6e53 6574 270a 2020 2020 7061  ionInSet'.    pa
-00012400: 796c 6f61 6420 3d20 7b27 7374 6963 6b65  yload = {'sticke
-00012410: 7227 3a20 7374 6963 6b65 722c 2027 706f  r': sticker, 'po
-00012420: 7369 7469 6f6e 273a 2070 6f73 6974 696f  sition': positio
-00012430: 6e7d 0a20 2020 2072 6574 7572 6e20 5f6d  n}.    return _m
-00012440: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00012450: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012460: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-00012470: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-00012480: 6465 6620 6465 6c65 7465 5f73 7469 636b  def delete_stick
-00012490: 6572 5f66 726f 6d5f 7365 7428 746f 6b65  er_from_set(toke
-000124a0: 6e2c 2073 7469 636b 6572 293a 0a20 2020  n, sticker):.   
-000124b0: 206d 6574 686f 645f 7572 6c20 3d20 2764   method_url = 'd
-000124c0: 656c 6574 6553 7469 636b 6572 4672 6f6d  eleteStickerFrom
-000124d0: 5365 7427 0a20 2020 2070 6179 6c6f 6164  Set'.    payload
-000124e0: 203d 207b 2773 7469 636b 6572 273a 2073   = {'sticker': s
-000124f0: 7469 636b 6572 7d0a 2020 2020 7265 7475  ticker}.    retu
-00012500: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00012510: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00012520: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00012530: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
-00012540: 2729 0a0a 0a64 6566 2061 6e73 7765 725f  ')...def answer_
-00012550: 7765 625f 6170 705f 7175 6572 7928 746f  web_app_query(to
-00012560: 6b65 6e2c 2077 6562 5f61 7070 5f71 7565  ken, web_app_que
-00012570: 7279 5f69 642c 2072 6573 756c 743a 2074  ry_id, result: t
-00012580: 7970 6573 2e49 6e6c 696e 6551 7565 7279  ypes.InlineQuery
-00012590: 5265 7375 6c74 4261 7365 293a 0a20 2020  ResultBase):.   
-000125a0: 206d 6574 686f 645f 7572 6c20 3d20 2761   method_url = 'a
-000125b0: 6e73 7765 7257 6562 4170 7051 7565 7279  nswerWebAppQuery
-000125c0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-000125d0: 7b27 7765 625f 6170 705f 7175 6572 795f  {'web_app_query_
-000125e0: 6964 273a 2077 6562 5f61 7070 5f71 7565  id': web_app_que
-000125f0: 7279 5f69 642c 2027 7265 7375 6c74 273a  ry_id, 'result':
-00012600: 2072 6573 756c 742e 746f 5f6a 736f 6e28   result.to_json(
-00012610: 297d 0a20 2020 2072 6574 7572 6e20 5f6d  )}.    return _m
-00012620: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00012630: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012640: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-00012650: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-00012660: 6465 6620 6372 6561 7465 5f69 6e76 6f69  def create_invoi
-00012670: 6365 5f6c 696e 6b28 746f 6b65 6e2c 2074  ce_link(token, t
-00012680: 6974 6c65 2c20 6465 7363 7269 7074 696f  itle, descriptio
-00012690: 6e2c 2070 6179 6c6f 6164 2c20 7072 6f76  n, payload, prov
-000126a0: 6964 6572 5f74 6f6b 656e 2c0a 2020 2020  ider_token,.    
-000126b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126c0: 2020 2020 6375 7272 656e 6379 2c20 7072      currency, pr
-000126d0: 6963 6573 2c20 6d61 785f 7469 705f 616d  ices, max_tip_am
-000126e0: 6f75 6e74 3d4e 6f6e 652c 2073 7567 6765  ount=None, sugge
-000126f0: 7374 6564 5f74 6970 5f61 6d6f 756e 7473  sted_tip_amounts
-00012700: 3d4e 6f6e 652c 2070 726f 7669 6465 725f  =None, provider_
-00012710: 6461 7461 3d4e 6f6e 652c 0a20 2020 2020  data=None,.     
-00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012730: 2020 2070 686f 746f 5f75 726c 3d4e 6f6e     photo_url=Non
-00012740: 652c 2070 686f 746f 5f73 697a 653d 4e6f  e, photo_size=No
-00012750: 6e65 2c20 7068 6f74 6f5f 7769 6474 683d  ne, photo_width=
-00012760: 4e6f 6e65 2c20 7068 6f74 6f5f 6865 6967  None, photo_heig
-00012770: 6874 3d4e 6f6e 652c 206e 6565 645f 6e61  ht=None, need_na
-00012780: 6d65 3d4e 6f6e 652c 0a20 2020 2020 2020  me=None,.       
-00012790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127a0: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
-000127b0: 6572 3d4e 6f6e 652c 0a20 2020 2020 2020  er=None,.       
-000127c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127d0: 206e 6565 645f 656d 6169 6c3d 4e6f 6e65   need_email=None
-000127e0: 2c20 6e65 6564 5f73 6869 7070 696e 675f  , need_shipping_
-000127f0: 6164 6472 6573 733d 4e6f 6e65 2c20 7365  address=None, se
-00012800: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
-00012810: 746f 5f70 726f 7669 6465 723d 4e6f 6e65  to_provider=None
-00012820: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00012830: 2020 2020 2020 2020 2020 7365 6e64 5f65            send_e
-00012840: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
-00012850: 3d4e 6f6e 652c 2069 735f 666c 6578 6962  =None, is_flexib
-00012860: 6c65 3d4e 6f6e 6529 3a0a 2020 2020 6d65  le=None):.    me
-00012870: 7468 6f64 5f75 726c 203d 2072 2763 7265  thod_url = r'cre
-00012880: 6174 6549 6e76 6f69 6365 4c69 6e6b 270a  ateInvoiceLink'.
-00012890: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-000128a0: 7469 746c 6527 3a20 7469 746c 652c 2027  title': title, '
-000128b0: 6465 7363 7269 7074 696f 6e27 3a20 6465  description': de
-000128c0: 7363 7269 7074 696f 6e2c 2027 7061 796c  scription, 'payl
-000128d0: 6f61 6427 3a20 7061 796c 6f61 642c 2027  oad': payload, '
-000128e0: 7072 6f76 6964 6572 5f74 6f6b 656e 273a  provider_token':
-000128f0: 2070 726f 7669 6465 725f 746f 6b65 6e2c   provider_token,
-00012900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012910: 2763 7572 7265 6e63 7927 3a20 6375 7272  'currency': curr
-00012920: 656e 6379 2c20 2770 7269 6365 7327 3a20  ency, 'prices': 
-00012930: 5f63 6f6e 7665 7274 5f6c 6973 745f 6a73  _convert_list_js
-00012940: 6f6e 5f73 6572 6961 6c69 7a61 626c 6528  on_serializable(
-00012950: 7072 6963 6573 297d 0a20 2020 2069 6620  prices)}.    if 
-00012960: 6d61 785f 7469 705f 616d 6f75 6e74 3a0a  max_tip_amount:.
-00012970: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00012980: 276d 6178 5f74 6970 5f61 6d6f 756e 7427  'max_tip_amount'
-00012990: 5d20 3d20 6d61 785f 7469 705f 616d 6f75  ] = max_tip_amou
-000129a0: 6e74 0a20 2020 2069 6620 7375 6767 6573  nt.    if sugges
-000129b0: 7465 645f 7469 705f 616d 6f75 6e74 733a  ted_tip_amounts:
-000129c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000129d0: 5b27 7375 6767 6573 7465 645f 7469 705f  ['suggested_tip_
-000129e0: 616d 6f75 6e74 7327 5d20 3d20 6a73 6f6e  amounts'] = json
-000129f0: 2e64 756d 7073 2873 7567 6765 7374 6564  .dumps(suggested
-00012a00: 5f74 6970 5f61 6d6f 756e 7473 290a 2020  _tip_amounts).  
-00012a10: 2020 6966 2070 726f 7669 6465 725f 6461    if provider_da
-00012a20: 7461 3a0a 2020 2020 2020 2020 7061 796c  ta:.        payl
-00012a30: 6f61 645b 2770 726f 7669 6465 725f 6461  oad['provider_da
-00012a40: 7461 275d 203d 2070 726f 7669 6465 725f  ta'] = provider_
-00012a50: 6461 7461 0a20 2020 2069 6620 7068 6f74  data.    if phot
-00012a60: 6f5f 7572 6c3a 0a20 2020 2020 2020 2070  o_url:.        p
-00012a70: 6179 6c6f 6164 5b27 7068 6f74 6f5f 7572  ayload['photo_ur
-00012a80: 6c27 5d20 3d20 7068 6f74 6f5f 7572 6c0a  l'] = photo_url.
-00012a90: 2020 2020 6966 2070 686f 746f 5f73 697a      if photo_siz
-00012aa0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00012ab0: 6164 5b27 7068 6f74 6f5f 7369 7a65 275d  ad['photo_size']
-00012ac0: 203d 2070 686f 746f 5f73 697a 650a 2020   = photo_size.  
-00012ad0: 2020 6966 2070 686f 746f 5f77 6964 7468    if photo_width
-00012ae0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00012af0: 645b 2770 686f 746f 5f77 6964 7468 275d  d['photo_width']
-00012b00: 203d 2070 686f 746f 5f77 6964 7468 0a20   = photo_width. 
-00012b10: 2020 2069 6620 7068 6f74 6f5f 6865 6967     if photo_heig
-00012b20: 6874 3a0a 2020 2020 2020 2020 7061 796c  ht:.        payl
-00012b30: 6f61 645b 2770 686f 746f 5f68 6569 6768  oad['photo_heigh
-00012b40: 7427 5d20 3d20 7068 6f74 6f5f 6865 6967  t'] = photo_heig
-00012b50: 6874 0a20 2020 2069 6620 6e65 6564 5f6e  ht.    if need_n
-00012b60: 616d 6520 6973 206e 6f74 204e 6f6e 653a  ame is not None:
-00012b70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00012b80: 5b27 6e65 6564 5f6e 616d 6527 5d20 3d20  ['need_name'] = 
-00012b90: 6e65 6564 5f6e 616d 650a 2020 2020 6966  need_name.    if
-00012ba0: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
-00012bb0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-00012bc0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00012bd0: 276e 6565 645f 7068 6f6e 655f 6e75 6d62  'need_phone_numb
-00012be0: 6572 275d 203d 206e 6565 645f 7068 6f6e  er'] = need_phon
-00012bf0: 655f 6e75 6d62 6572 0a20 2020 2069 6620  e_number.    if 
-00012c00: 6e65 6564 5f65 6d61 696c 2069 7320 6e6f  need_email is no
-00012c10: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00012c20: 7061 796c 6f61 645b 276e 6565 645f 656d  payload['need_em
-00012c30: 6169 6c27 5d20 3d20 6e65 6564 5f65 6d61  ail'] = need_ema
-00012c40: 696c 0a20 2020 2069 6620 6e65 6564 5f73  il.    if need_s
-00012c50: 6869 7070 696e 675f 6164 6472 6573 7320  hipping_address 
-00012c60: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00012c70: 2020 2020 2070 6179 6c6f 6164 5b27 6e65       payload['ne
-00012c80: 6564 5f73 6869 7070 696e 675f 6164 6472  ed_shipping_addr
-00012c90: 6573 7327 5d20 3d20 6e65 6564 5f73 6869  ess'] = need_shi
-00012ca0: 7070 696e 675f 6164 6472 6573 730a 2020  pping_address.  
-00012cb0: 2020 6966 2073 656e 645f 7068 6f6e 655f    if send_phone_
-00012cc0: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
-00012cd0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-00012ce0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00012cf0: 2773 656e 645f 7068 6f6e 655f 6e75 6d62  'send_phone_numb
-00012d00: 6572 5f74 6f5f 7072 6f76 6964 6572 275d  er_to_provider']
-00012d10: 203d 2073 656e 645f 7068 6f6e 655f 6e75   = send_phone_nu
-00012d20: 6d62 6572 5f74 6f5f 7072 6f76 6964 6572  mber_to_provider
-00012d30: 0a20 2020 2069 6620 7365 6e64 5f65 6d61  .    if send_ema
-00012d40: 696c 5f74 6f5f 7072 6f76 6964 6572 2069  il_to_provider i
-00012d50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00012d60: 2020 2020 7061 796c 6f61 645b 2773 656e      payload['sen
-00012d70: 645f 656d 6169 6c5f 746f 5f70 726f 7669  d_email_to_provi
-00012d80: 6465 7227 5d20 3d20 7365 6e64 5f65 6d61  der'] = send_ema
-00012d90: 696c 5f74 6f5f 7072 6f76 6964 6572 0a20  il_to_provider. 
-00012da0: 2020 2069 6620 6973 5f66 6c65 7869 626c     if is_flexibl
-00012db0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00012dc0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00012dd0: 6973 5f66 6c65 7869 626c 6527 5d20 3d20  is_flexible'] = 
-00012de0: 6973 5f66 6c65 7869 626c 650a 2020 2020  is_flexible.    
-00012df0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-00012e00: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00012e10: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00012e20: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
-00012e30: 706f 7374 2729 0a0a 0a23 206e 6f69 6e73  post')...# noins
-00012e40: 7065 6374 696f 6e20 5079 5368 6164 6f77  pection PyShadow
-00012e50: 696e 6742 7569 6c74 696e 730a 6465 6620  ingBuiltins.def 
-00012e60: 7365 6e64 5f70 6f6c 6c28 0a20 2020 2020  send_poll(.     
-00012e70: 2020 2074 6f6b 656e 2c20 6368 6174 5f69     token, chat_i
-00012e80: 642c 0a20 2020 2020 2020 2071 7565 7374  d,.        quest
-00012e90: 696f 6e2c 206f 7074 696f 6e73 2c0a 2020  ion, options,.  
-00012ea0: 2020 2020 2020 6973 5f61 6e6f 6e79 6d6f        is_anonymo
-00012eb0: 7573 3d4e 6f6e 652c 2074 7970 653d 4e6f  us=None, type=No
-00012ec0: 6e65 2c20 616c 6c6f 7773 5f6d 756c 7469  ne, allows_multi
-00012ed0: 706c 655f 616e 7377 6572 733d 4e6f 6e65  ple_answers=None
-00012ee0: 2c20 636f 7272 6563 745f 6f70 7469 6f6e  , correct_option
-00012ef0: 5f69 643d 4e6f 6e65 2c20 6578 706c 616e  _id=None, explan
-00012f00: 6174 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ation=None,.    
-00012f10: 2020 2020 6578 706c 616e 6174 696f 6e5f      explanation_
-00012f20: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
-00012f30: 206f 7065 6e5f 7065 7269 6f64 3d4e 6f6e   open_period=Non
-00012f40: 652c 2063 6c6f 7365 5f64 6174 653d 4e6f  e, close_date=No
-00012f50: 6e65 2c20 6973 5f63 6c6f 7365 643d 4e6f  ne, is_closed=No
-00012f60: 6e65 2c20 6469 7361 626c 655f 6e6f 7469  ne, disable_noti
-00012f70: 6669 6361 7469 6f6e 3d46 616c 7365 2c0a  fication=False,.
-00012f80: 2020 2020 2020 2020 7265 706c 795f 6d61          reply_ma
-00012f90: 726b 7570 3d4e 6f6e 652c 2074 696d 656f  rkup=None, timeo
-00012fa0: 7574 3d4e 6f6e 652c 2065 7870 6c61 6e61  ut=None, explana
-00012fb0: 7469 6f6e 5f65 6e74 6974 6965 733d 4e6f  tion_entities=No
-00012fc0: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
-00012fd0: 656e 743d 4e6f 6e65 2c20 6d65 7373 6167  ent=None, messag
-00012fe0: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
-00012ff0: 2c0a 2020 2020 2020 2020 7265 706c 795f  ,.        reply_
-00013000: 7061 7261 6d65 7465 7273 3d4e 6f6e 652c  parameters=None,
-00013010: 0a20 2020 2020 2020 2062 7573 696e 6573  .        busines
-00013020: 735f 636f 6e6e 6563 7469 6f6e 5f69 643d  s_connection_id=
-00013030: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-00013040: 645f 7572 6c20 3d20 7227 7365 6e64 506f  d_url = r'sendPo
-00013050: 6c6c 270a 2020 2020 7061 796c 6f61 6420  ll'.    payload 
-00013060: 3d20 7b0a 2020 2020 2020 2020 2763 6861  = {.        'cha
-00013070: 745f 6964 273a 2073 7472 2863 6861 745f  t_id': str(chat_
-00013080: 6964 292c 0a20 2020 2020 2020 2027 7175  id),.        'qu
-00013090: 6573 7469 6f6e 273a 2071 7565 7374 696f  estion': questio
-000130a0: 6e2c 0a20 2020 2020 2020 2027 6f70 7469  n,.        'opti
-000130b0: 6f6e 7327 3a20 6a73 6f6e 2e64 756d 7073  ons': json.dumps
-000130c0: 285f 636f 6e76 6572 745f 706f 6c6c 5f6f  (_convert_poll_o
-000130d0: 7074 696f 6e73 286f 7074 696f 6e73 2929  ptions(options))
-000130e0: 7d0a 0a20 2020 2069 6620 6973 5f61 6e6f  }..    if is_ano
-000130f0: 6e79 6d6f 7573 2069 7320 6e6f 7420 4e6f  nymous is not No
-00013100: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00013110: 6f61 645b 2769 735f 616e 6f6e 796d 6f75  oad['is_anonymou
-00013120: 7327 5d20 3d20 6973 5f61 6e6f 6e79 6d6f  s'] = is_anonymo
-00013130: 7573 0a20 2020 2069 6620 7479 7065 2069  us.    if type i
-00013140: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00013150: 2020 2020 7061 796c 6f61 645b 2774 7970      payload['typ
-00013160: 6527 5d20 3d20 7479 7065 0a20 2020 2069  e'] = type.    i
-00013170: 6620 616c 6c6f 7773 5f6d 756c 7469 706c  f allows_multipl
-00013180: 655f 616e 7377 6572 7320 6973 206e 6f74  e_answers is not
-00013190: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000131a0: 6179 6c6f 6164 5b27 616c 6c6f 7773 5f6d  ayload['allows_m
-000131b0: 756c 7469 706c 655f 616e 7377 6572 7327  ultiple_answers'
-000131c0: 5d20 3d20 616c 6c6f 7773 5f6d 756c 7469  ] = allows_multi
-000131d0: 706c 655f 616e 7377 6572 730a 2020 2020  ple_answers.    
-000131e0: 6966 2063 6f72 7265 6374 5f6f 7074 696f  if correct_optio
-000131f0: 6e5f 6964 2069 7320 6e6f 7420 4e6f 6e65  n_id is not None
-00013200: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00013210: 645b 2763 6f72 7265 6374 5f6f 7074 696f  d['correct_optio
-00013220: 6e5f 6964 275d 203d 2063 6f72 7265 6374  n_id'] = correct
-00013230: 5f6f 7074 696f 6e5f 6964 0a20 2020 2069  _option_id.    i
-00013240: 6620 6578 706c 616e 6174 696f 6e20 6973  f explanation is
-00013250: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00013260: 2020 2070 6179 6c6f 6164 5b27 6578 706c     payload['expl
-00013270: 616e 6174 696f 6e27 5d20 3d20 6578 706c  anation'] = expl
-00013280: 616e 6174 696f 6e0a 2020 2020 6966 2065  anation.    if e
-00013290: 7870 6c61 6e61 7469 6f6e 5f70 6172 7365  xplanation_parse
-000132a0: 5f6d 6f64 6520 6973 206e 6f74 204e 6f6e  _mode is not Non
-000132b0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000132c0: 6164 5b27 6578 706c 616e 6174 696f 6e5f  ad['explanation_
-000132d0: 7061 7273 655f 6d6f 6465 275d 203d 2065  parse_mode'] = e
-000132e0: 7870 6c61 6e61 7469 6f6e 5f70 6172 7365  xplanation_parse
-000132f0: 5f6d 6f64 650a 2020 2020 6966 206f 7065  _mode.    if ope
-00013300: 6e5f 7065 7269 6f64 2069 7320 6e6f 7420  n_period is not 
-00013310: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00013320: 796c 6f61 645b 276f 7065 6e5f 7065 7269  yload['open_peri
-00013330: 6f64 275d 203d 206f 7065 6e5f 7065 7269  od'] = open_peri
-00013340: 6f64 0a20 2020 2069 6620 636c 6f73 655f  od.    if close_
-00013350: 6461 7465 2069 7320 6e6f 7420 4e6f 6e65  date is not None
-00013360: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-00013370: 6e73 7461 6e63 6528 636c 6f73 655f 6461  nstance(close_da
-00013380: 7465 2c20 6461 7465 7469 6d65 293a 0a20  te, datetime):. 
-00013390: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
-000133a0: 6164 5b27 636c 6f73 655f 6461 7465 275d  ad['close_date']
-000133b0: 203d 2063 6c6f 7365 5f64 6174 652e 7469   = close_date.ti
-000133c0: 6d65 7374 616d 7028 290a 2020 2020 2020  mestamp().      
-000133d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000133e0: 2020 2020 7061 796c 6f61 645b 2763 6c6f      payload['clo
-000133f0: 7365 5f64 6174 6527 5d20 3d20 636c 6f73  se_date'] = clos
-00013400: 655f 6461 7465 0a20 2020 2069 6620 6973  e_date.    if is
-00013410: 5f63 6c6f 7365 6420 6973 206e 6f74 204e  _closed is not N
-00013420: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00013430: 6c6f 6164 5b27 6973 5f63 6c6f 7365 6427  load['is_closed'
-00013440: 5d20 3d20 6973 5f63 6c6f 7365 640a 2020  ] = is_closed.  
-00013450: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
-00013460: 6966 6963 6174 696f 6e3a 0a20 2020 2020  ification:.     
-00013470: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
-00013480: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00013490: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
-000134a0: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
-000134b0: 2072 6570 6c79 5f6d 6172 6b75 7020 6973   reply_markup is
-000134c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000134d0: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-000134e0: 795f 6d61 726b 7570 275d 203d 205f 636f  y_markup'] = _co
-000134f0: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
-00013500: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
-00013510: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00013520: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
-00013530: 6f75 7427 5d20 3d20 7469 6d65 6f75 740a  out'] = timeout.
-00013540: 2020 2020 6966 2065 7870 6c61 6e61 7469      if explanati
-00013550: 6f6e 5f65 6e74 6974 6965 733a 0a20 2020  on_entities:.   
-00013560: 2020 2020 2070 6179 6c6f 6164 5b27 6578       payload['ex
-00013570: 706c 616e 6174 696f 6e5f 656e 7469 7469  planation_entiti
-00013580: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
-00013590: 7328 0a20 2020 2020 2020 2020 2020 2074  s(.            t
-000135a0: 7970 6573 2e4d 6573 7361 6765 456e 7469  ypes.MessageEnti
-000135b0: 7479 2e74 6f5f 6c69 7374 5f6f 665f 6469  ty.to_list_of_di
-000135c0: 6374 7328 6578 706c 616e 6174 696f 6e5f  cts(explanation_
-000135d0: 656e 7469 7469 6573 2929 0a20 2020 2069  entities)).    i
-000135e0: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
-000135f0: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00013600: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
-00013610: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
-00013620: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
-00013630: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00013640: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00013650: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
-00013660: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
-00013670: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
-00013680: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
-00013690: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
+00001590: 6728 2243 6f6e 6e65 6374 696f 6e20 4572  g("Connection Er
+000015a0: 726f 7220 6f6e 207b 307d 206d 6574 686f  ror on {0} metho
+000015b0: 6420 2854 7279 2023 7b31 7d29 222e 666f  d (Try #{1})".fo
+000015c0: 726d 6174 286d 6574 686f 645f 6e61 6d65  rmat(method_name
+000015d0: 2c20 6375 7272 656e 745f 7472 7929 290a  , current_try)).
+000015e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000015f0: 7469 6d65 2e73 6c65 6570 2852 4554 5259  time.sleep(RETRY
+00001600: 5f54 494d 454f 5554 290a 2020 2020 2020  _TIMEOUT).      
+00001610: 2020 2020 2020 6578 6365 7074 2054 696d        except Tim
+00001620: 656f 7574 3a0a 2020 2020 2020 2020 2020  eout:.          
+00001630: 2020 2020 2020 6c6f 6767 6572 2e64 6562        logger.deb
+00001640: 7567 2822 5469 6d65 6f75 7420 4572 726f  ug("Timeout Erro
+00001650: 7220 6f6e 207b 307d 206d 6574 686f 6420  r on {0} method 
+00001660: 2854 7279 2023 7b31 7d29 222e 666f 726d  (Try #{1})".form
+00001670: 6174 286d 6574 686f 645f 6e61 6d65 2c20  at(method_name, 
+00001680: 6375 7272 656e 745f 7472 7929 290a 2020  current_try)).  
+00001690: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+000016a0: 6d65 2e73 6c65 6570 2852 4554 5259 5f54  me.sleep(RETRY_T
+000016b0: 494d 454f 5554 290a 2020 2020 2020 2020  IMEOUT).        
+000016c0: 6966 206e 6f74 2067 6f74 5f72 6573 756c  if not got_resul
+000016d0: 743a 0a20 2020 2020 2020 2020 2020 2072  t:.            r
+000016e0: 6573 756c 7420 3d20 5f67 6574 5f72 6571  esult = _get_req
+000016f0: 5f73 6573 7369 6f6e 2829 2e72 6571 7565  _session().reque
+00001700: 7374 280a 2020 2020 2020 2020 2020 2020  st(.            
+00001710: 2020 2020 6d65 7468 6f64 2c20 7265 7175      method, requ
+00001720: 6573 745f 7572 6c2c 2070 6172 616d 733d  est_url, params=
+00001730: 7061 7261 6d73 2c20 6669 6c65 733d 6669  params, files=fi
+00001740: 6c65 732c 0a20 2020 2020 2020 2020 2020  les,.           
+00001750: 2020 2020 2074 696d 656f 7574 3d28 636f       timeout=(co
+00001760: 6e6e 6563 745f 7469 6d65 6f75 742c 2072  nnect_timeout, r
+00001770: 6561 645f 7469 6d65 6f75 7429 2c20 7072  ead_timeout), pr
+00001780: 6f78 6965 733d 7072 6f78 792c 0a20 2020  oxies=proxy,.   
+00001790: 2020 2020 2020 2020 2020 2020 2076 6572               ver
+000017a0: 6966 793d 7665 7269 6679 290a 2020 2020  ify=verify).    
+000017b0: 656c 6966 2052 4554 5259 5f4f 4e5f 4552  elif RETRY_ON_ER
+000017c0: 524f 5220 616e 6420 5245 5452 595f 454e  ROR and RETRY_EN
+000017d0: 4749 4e45 203d 3d20 323a 0a20 2020 2020  GINE == 2:.     
+000017e0: 2020 2068 7474 7020 3d20 5f67 6574 5f72     http = _get_r
+000017f0: 6571 5f73 6573 7369 6f6e 2829 0a20 2020  eq_session().   
+00001800: 2020 2020 2023 206e 6f69 6e73 7065 6374       # noinspect
+00001810: 696f 6e20 5079 556e 7265 736f 6c76 6564  ion PyUnresolved
+00001820: 5265 6665 7265 6e63 6573 0a20 2020 2020  References.     
+00001830: 2020 2072 6574 7279 5f73 7472 6174 6567     retry_strateg
+00001840: 7920 3d20 7265 7175 6573 7473 2e70 6163  y = requests.pac
+00001850: 6b61 6765 732e 7572 6c6c 6962 332e 7574  kages.urllib3.ut
+00001860: 696c 2e72 6574 7279 2e52 6574 7279 280a  il.retry.Retry(.
+00001870: 2020 2020 2020 2020 2020 2020 746f 7461              tota
+00001880: 6c3d 4d41 585f 5245 5452 4945 532c 0a20  l=MAX_RETRIES,. 
+00001890: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
+000018a0: 6564 5f6d 6574 686f 6473 3d4e 6f6e 652c  ed_methods=None,
+000018b0: 0a20 2020 2020 2020 2020 2020 2062 6163  .            bac
+000018c0: 6b6f 6666 5f66 6163 746f 723d 5245 5452  koff_factor=RETR
+000018d0: 595f 5449 4d45 4f55 542c 0a20 2020 2020  Y_TIMEOUT,.     
+000018e0: 2020 2020 2020 2062 6163 6b6f 6666 5f6d         backoff_m
+000018f0: 6178 3d52 4554 5259 5f54 494d 454f 5554  ax=RETRY_TIMEOUT
+00001900: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00001910: 2020 2061 6461 7074 6572 203d 2048 5454     adapter = HTT
+00001920: 5041 6461 7074 6572 286d 6178 5f72 6574  PAdapter(max_ret
+00001930: 7269 6573 3d72 6574 7279 5f73 7472 6174  ries=retry_strat
+00001940: 6567 7929 0a20 2020 2020 2020 2066 6f72  egy).        for
+00001950: 2070 7265 6669 7820 696e 2028 2768 7474   prefix in ('htt
+00001960: 703a 2f2f 272c 2027 6874 7470 733a 2f2f  p://', 'https://
+00001970: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00001980: 6874 7470 2e6d 6f75 6e74 2870 7265 6669  http.mount(prefi
+00001990: 782c 2061 6461 7074 6572 290a 2020 2020  x, adapter).    
+000019a0: 2020 2020 7265 7375 6c74 203d 2068 7474      result = htt
+000019b0: 702e 7265 7175 6573 7428 0a20 2020 2020  p.request(.     
+000019c0: 2020 2020 2020 206d 6574 686f 642c 2072         method, r
+000019d0: 6571 7565 7374 5f75 726c 2c20 7061 7261  equest_url, para
+000019e0: 6d73 3d70 6172 616d 732c 2066 696c 6573  ms=params, files
+000019f0: 3d66 696c 6573 2c0a 2020 2020 2020 2020  =files,.        
+00001a00: 2020 2020 7469 6d65 6f75 743d 2863 6f6e      timeout=(con
+00001a10: 6e65 6374 5f74 696d 656f 7574 2c20 7265  nect_timeout, re
+00001a20: 6164 5f74 696d 656f 7574 292c 2070 726f  ad_timeout), pro
+00001a30: 7869 6573 3d70 726f 7879 2c0a 2020 2020  xies=proxy,.    
+00001a40: 2020 2020 2020 2020 7665 7269 6679 3d76          verify=v
+00001a50: 6572 6966 7929 0a20 2020 2065 6c73 653a  erify).    else:
+00001a60: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+00001a70: 3d20 5f67 6574 5f72 6571 5f73 6573 7369  = _get_req_sessi
+00001a80: 6f6e 2829 2e72 6571 7565 7374 280a 2020  on().request(.  
+00001a90: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+00001aa0: 2c20 7265 7175 6573 745f 7572 6c2c 2070  , request_url, p
+00001ab0: 6172 616d 733d 7061 7261 6d73 2c20 6669  arams=params, fi
+00001ac0: 6c65 733d 6669 6c65 732c 0a20 2020 2020  les=files,.     
+00001ad0: 2020 2020 2020 2074 696d 656f 7574 3d28         timeout=(
+00001ae0: 636f 6e6e 6563 745f 7469 6d65 6f75 742c  connect_timeout,
+00001af0: 2072 6561 645f 7469 6d65 6f75 7429 2c20   read_timeout), 
+00001b00: 7072 6f78 6965 733d 7072 6f78 792c 0a20  proxies=proxy,. 
+00001b10: 2020 2020 2020 2020 2020 2076 6572 6966             verif
+00001b20: 793d 7665 7269 6679 290a 0a20 2020 206c  y=verify)..    l
+00001b30: 6f67 6765 722e 6465 6275 6728 2254 6865  ogger.debug("The
+00001b40: 2073 6572 7665 7220 7265 7475 726e 6564   server returned
+00001b50: 3a20 277b 307d 2722 2e66 6f72 6d61 7428  : '{0}'".format(
+00001b60: 7265 7375 6c74 2e74 6578 742e 656e 636f  result.text.enco
+00001b70: 6465 2827 7574 6638 2729 2929 0a0a 2020  de('utf8')))..  
+00001b80: 2020 6a73 6f6e 5f72 6573 756c 7420 3d20    json_result = 
+00001b90: 5f63 6865 636b 5f72 6573 756c 7428 6d65  _check_result(me
+00001ba0: 7468 6f64 5f6e 616d 652c 2072 6573 756c  thod_name, resul
+00001bb0: 7429 0a20 2020 2069 6620 6a73 6f6e 5f72  t).    if json_r
+00001bc0: 6573 756c 743a 0a20 2020 2020 2020 2072  esult:.        r
+00001bd0: 6574 7572 6e20 6a73 6f6e 5f72 6573 756c  eturn json_resul
+00001be0: 745b 2772 6573 756c 7427 5d0a 0a0a 6465  t['result']...de
+00001bf0: 6620 5f63 6865 636b 5f72 6573 756c 7428  f _check_result(
+00001c00: 6d65 7468 6f64 5f6e 616d 652c 2072 6573  method_name, res
+00001c10: 756c 7429 3a0a 2020 2020 2222 220a 2020  ult):.    """.  
+00001c20: 2020 4368 6563 6b73 2077 6865 7468 6572    Checks whether
+00001c30: 2060 7265 7375 6c74 6020 6973 2061 2076   `result` is a v
+00001c40: 616c 6964 2041 5049 2072 6573 706f 6e73  alid API respons
+00001c50: 652e 0a20 2020 2041 2072 6573 756c 7420  e..    A result 
+00001c60: 6973 2063 6f6e 7369 6465 7265 6420 696e  is considered in
+00001c70: 7661 6c69 6420 6966 3a0a 2020 2020 2020  valid if:.      
+00001c80: 2020 2d20 5468 6520 7365 7276 6572 2072    - The server r
+00001c90: 6574 7572 6e65 6420 616e 2048 5454 5020  eturned an HTTP 
+00001ca0: 7265 7370 6f6e 7365 2063 6f64 6520 6f74  response code ot
+00001cb0: 6865 7220 7468 616e 2032 3030 0a20 2020  her than 200.   
+00001cc0: 2020 2020 202d 2054 6865 2063 6f6e 7465       - The conte
+00001cd0: 6e74 206f 6620 7468 6520 7265 7375 6c74  nt of the result
+00001ce0: 2069 7320 696e 7661 6c69 6420 4a53 4f4e   is invalid JSON
+00001cf0: 2e0a 2020 2020 2020 2020 2d20 5468 6520  ..        - The 
+00001d00: 6d65 7468 6f64 2063 616c 6c20 7761 7320  method call was 
+00001d10: 756e 7375 6363 6573 7366 756c 2028 5468  unsuccessful (Th
+00001d20: 6520 4a53 4f4e 2027 6f6b 2720 6669 656c  e JSON 'ok' fiel
+00001d30: 6420 6571 7561 6c73 2046 616c 7365 290a  d equals False).
+00001d40: 0a20 2020 203a 7261 6973 6573 2041 7069  .    :raises Api
+00001d50: 4578 6365 7074 696f 6e3a 2069 6620 6f6e  Exception: if on
+00001d60: 6520 6f66 2074 6865 2061 626f 7665 206c  e of the above l
+00001d70: 6973 7465 6420 6361 7365 7320 6973 2061  isted cases is a
+00001d80: 7070 6c69 6361 626c 650a 2020 2020 3a70  pplicable.    :p
+00001d90: 6172 616d 206d 6574 686f 645f 6e61 6d65  aram method_name
+00001da0: 3a20 5468 6520 6e61 6d65 206f 6620 7468  : The name of th
+00001db0: 6520 6d65 7468 6f64 2063 616c 6c65 640a  e method called.
+00001dc0: 2020 2020 3a70 6172 616d 2072 6573 756c      :param resul
+00001dd0: 743a 2054 6865 2072 6574 7572 6e65 6420  t: The returned 
+00001de0: 7265 7375 6c74 206f 6620 7468 6520 6d65  result of the me
+00001df0: 7468 6f64 2072 6571 7565 7374 0a20 2020  thod request.   
+00001e00: 203a 7265 7475 726e 3a20 5468 6520 7265   :return: The re
+00001e10: 7375 6c74 2070 6172 7365 6420 746f 2061  sult parsed to a
+00001e20: 204a 534f 4e20 6469 6374 696f 6e61 7279   JSON dictionary
+00001e30: 2e0a 2020 2020 2222 220a 2020 2020 7472  ..    """.    tr
+00001e40: 793a 0a20 2020 2020 2020 2072 6573 756c  y:.        resul
+00001e50: 745f 6a73 6f6e 203d 2072 6573 756c 742e  t_json = result.
+00001e60: 6a73 6f6e 2829 0a20 2020 2065 7863 6570  json().    excep
+00001e70: 743a 0a20 2020 2020 2020 2069 6620 7265  t:.        if re
+00001e80: 7375 6c74 2e73 7461 7475 735f 636f 6465  sult.status_code
+00001e90: 2021 3d20 3230 303a 0a20 2020 2020 2020   != 200:.       
+00001ea0: 2020 2020 2072 6169 7365 2041 7069 4854       raise ApiHT
+00001eb0: 5450 4578 6365 7074 696f 6e28 6d65 7468  TPException(meth
+00001ec0: 6f64 5f6e 616d 652c 2072 6573 756c 7429  od_name, result)
+00001ed0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00001ee0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00001ef0: 2041 7069 496e 7661 6c69 644a 534f 4e45   ApiInvalidJSONE
+00001f00: 7863 6570 7469 6f6e 286d 6574 686f 645f  xception(method_
+00001f10: 6e61 6d65 2c20 7265 7375 6c74 290a 2020  name, result).  
+00001f20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00001f30: 6966 206e 6f74 2072 6573 756c 745f 6a73  if not result_js
+00001f40: 6f6e 5b27 6f6b 275d 3a0a 2020 2020 2020  on['ok']:.      
+00001f50: 2020 2020 2020 7261 6973 6520 4170 6954        raise ApiT
+00001f60: 656c 6567 7261 6d45 7863 6570 7469 6f6e  elegramException
+00001f70: 286d 6574 686f 645f 6e61 6d65 2c20 7265  (method_name, re
+00001f80: 7375 6c74 2c20 7265 7375 6c74 5f6a 736f  sult, result_jso
+00001f90: 6e29 0a0a 2020 2020 2020 2020 7265 7475  n)..        retu
+00001fa0: 726e 2072 6573 756c 745f 6a73 6f6e 0a0a  rn result_json..
+00001fb0: 0a64 6566 2067 6574 5f6d 6528 746f 6b65  .def get_me(toke
+00001fc0: 6e2c 2076 6572 6966 793d 5472 7565 293a  n, verify=True):
+00001fd0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00001fe0: 3d20 7227 6765 744d 6527 0a20 2020 2072  = r'getMe'.    r
+00001ff0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00002000: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00002010: 645f 7572 6c2c 2076 6572 6966 793d 7665  d_url, verify=ve
+00002020: 7269 6679 290a 0a0a 6465 6620 6c6f 675f  rify)...def log_
+00002030: 6f75 7428 746f 6b65 6e2c 2076 6572 6966  out(token, verif
+00002040: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+00002050: 686f 645f 7572 6c20 3d20 7227 6c6f 674f  hod_url = r'logO
+00002060: 7574 270a 2020 2020 7265 7475 726e 205f  ut'.    return _
+00002070: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+00002080: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00002090: 7665 7269 6679 3d76 6572 6966 7929 0a0a  verify=verify)..
+000020a0: 0a64 6566 2063 6c6f 7365 2874 6f6b 656e  .def close(token
+000020b0: 2c20 7665 7269 6679 3d54 7275 6529 3a0a  , verify=True):.
+000020c0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000020d0: 2072 2763 6c6f 7365 270a 2020 2020 7265   r'close'.    re
+000020e0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+000020f0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00002100: 5f75 726c 2c20 7665 7269 6679 3d76 6572  _url, verify=ver
+00002110: 6966 7929 0a0a 0a64 6566 2067 6574 5f66  ify)...def get_f
+00002120: 696c 6528 746f 6b65 6e2c 2066 696c 655f  ile(token, file_
+00002130: 6964 2c20 7665 7269 6679 3d54 7275 6529  id, verify=True)
+00002140: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00002150: 203d 2072 2767 6574 4669 6c65 270a 2020   = r'getFile'.  
+00002160: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00002170: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00002180: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00002190: 3d7b 2766 696c 655f 6964 273a 2066 696c  ={'file_id': fil
+000021a0: 655f 6964 7d2c 2076 6572 6966 793d 7665  e_id}, verify=ve
+000021b0: 7269 6679 290a 0a0a 6465 6620 6765 745f  rify)...def get_
+000021c0: 6669 6c65 5f75 726c 2874 6f6b 656e 2c20  file_url(token, 
+000021d0: 6669 6c65 5f69 642c 2076 6572 6966 793d  file_id, verify=
+000021e0: 5472 7565 293a 0a20 2020 2069 6620 4649  True):.    if FI
+000021f0: 4c45 5f55 524c 2069 7320 4e6f 6e65 3a0a  LE_URL is None:.
+00002200: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+00002210: 6874 7470 733a 2f2f 6170 692e 7465 6c65  https://api.tele
+00002220: 6772 616d 2e6f 7267 2f66 696c 652f 626f  gram.org/file/bo
+00002230: 747b 307d 2f7b 317d 222e 666f 726d 6174  t{0}/{1}".format
+00002240: 2874 6f6b 656e 2c20 6765 745f 6669 6c65  (token, get_file
+00002250: 2874 6f6b 656e 2c20 6669 6c65 5f69 6429  (token, file_id)
+00002260: 5b27 6669 6c65 5f70 6174 6827 5d29 0a20  ['file_path']). 
+00002270: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00002280: 2023 206e 6f69 6e73 7065 6374 696f 6e20   # noinspection 
+00002290: 5079 556e 7265 736f 6c76 6564 5265 6665  PyUnresolvedRefe
+000022a0: 7265 6e63 6573 0a20 2020 2020 2020 2072  rences.        r
+000022b0: 6574 7572 6e20 4649 4c45 5f55 524c 2e66  eturn FILE_URL.f
+000022c0: 6f72 6d61 7428 746f 6b65 6e2c 2067 6574  ormat(token, get
+000022d0: 5f66 696c 6528 746f 6b65 6e2c 2066 696c  _file(token, fil
+000022e0: 655f 6964 295b 2766 696c 655f 7061 7468  e_id)['file_path
+000022f0: 275d 2c20 7665 7269 6679 3d76 6572 6966  '], verify=verif
+00002300: 7929 0a0a 0a64 6566 2064 6f77 6e6c 6f61  y)...def downloa
+00002310: 645f 6669 6c65 2874 6f6b 656e 2c20 6669  d_file(token, fi
+00002320: 6c65 5f70 6174 682c 2076 6572 6966 793d  le_path, verify=
+00002330: 5472 7565 293a 0a20 2020 2069 6620 4649  True):.    if FI
+00002340: 4c45 5f55 524c 2069 7320 4e6f 6e65 3a0a  LE_URL is None:.
+00002350: 2020 2020 2020 2020 7572 6c20 3d20 2268          url = "h
+00002360: 7474 7073 3a2f 2f61 7069 2e74 656c 6567  ttps://api.teleg
+00002370: 7261 6d2e 6f72 672f 6669 6c65 2f62 6f74  ram.org/file/bot
+00002380: 7b30 7d2f 7b31 7d22 2e66 6f72 6d61 7428  {0}/{1}".format(
+00002390: 746f 6b65 6e2c 2066 696c 655f 7061 7468  token, file_path
+000023a0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+000023b0: 2020 2020 2320 6e6f 696e 7370 6563 7469      # noinspecti
+000023c0: 6f6e 2050 7955 6e72 6573 6f6c 7665 6452  on PyUnresolvedR
+000023d0: 6566 6572 656e 6365 730a 2020 2020 2020  eferences.      
+000023e0: 2020 7572 6c20 3d20 4649 4c45 5f55 524c    url = FILE_URL
+000023f0: 2e66 6f72 6d61 7428 746f 6b65 6e2c 2066  .format(token, f
+00002400: 696c 655f 7061 7468 290a 0a20 2020 2072  ile_path)..    r
+00002410: 6573 756c 7420 3d20 5f67 6574 5f72 6571  esult = _get_req
+00002420: 5f73 6573 7369 6f6e 2876 6572 6966 793d  _session(verify=
+00002430: 7665 7269 6679 292e 6765 7428 7572 6c2c  verify).get(url,
+00002440: 2070 726f 7869 6573 3d70 726f 7879 290a   proxies=proxy).
+00002450: 2020 2020 6966 2072 6573 756c 742e 7374      if result.st
+00002460: 6174 7573 5f63 6f64 6520 213d 2032 3030  atus_code != 200
+00002470: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+00002480: 4170 6948 5454 5045 7863 6570 7469 6f6e  ApiHTTPException
+00002490: 2827 446f 776e 6c6f 6164 2066 696c 6527  ('Download file'
+000024a0: 2c20 7265 7375 6c74 290a 0a20 2020 2072  , result)..    r
+000024b0: 6574 7572 6e20 7265 7375 6c74 2e63 6f6e  eturn result.con
+000024c0: 7465 6e74 0a0a 0a64 6566 2073 656e 645f  tent...def send_
+000024d0: 6d65 7373 6167 6528 0a20 2020 2020 2020  message(.       
+000024e0: 2074 6f6b 656e 2c20 6368 6174 5f69 642c   token, chat_id,
+000024f0: 2074 6578 742c 0a20 2020 2020 2020 2072   text,.        r
+00002500: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+00002510: 2c0a 2020 2020 2020 2020 7061 7273 655f  ,.        parse_
+00002520: 6d6f 6465 3d4e 6f6e 652c 2064 6973 6162  mode=None, disab
+00002530: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00002540: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+00002550: 6e65 2c0a 2020 2020 2020 2020 656e 7469  ne,.        enti
+00002560: 7469 6573 3d4e 6f6e 652c 2070 726f 7465  ties=None, prote
+00002570: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
+00002580: 0a20 2020 2020 2020 206d 6573 7361 6765  .        message
+00002590: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
+000025a0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+000025b0: 733d 4e6f 6e65 2c20 6c69 6e6b 5f70 7265  s=None, link_pre
+000025c0: 7669 6577 5f6f 7074 696f 6e73 3d4e 6f6e  view_options=Non
+000025d0: 652c 0a20 2020 2020 2020 2062 7573 696e  e,.        busin
+000025e0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+000025f0: 643d 4e6f 6e65 2c0a 2020 2020 2020 2020  d=None,.        
+00002600: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+00002610: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00002620: 2773 656e 644d 6573 7361 6765 270a 2020  'sendMessage'.  
+00002630: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+00002640: 6174 5f69 6427 3a20 7374 7228 6368 6174  at_id': str(chat
+00002650: 5f69 6429 2c20 2774 6578 7427 3a20 7465  _id), 'text': te
+00002660: 7874 7d0a 2020 2020 6966 206c 696e 6b5f  xt}.    if link_
+00002670: 7072 6576 6965 775f 6f70 7469 6f6e 7320  preview_options 
+00002680: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00002690: 2020 2020 2070 6179 6c6f 6164 5b27 6c69       payload['li
+000026a0: 6e6b 5f70 7265 7669 6577 5f6f 7074 696f  nk_preview_optio
+000026b0: 6e73 275d 203d 206c 696e 6b5f 7072 6576  ns'] = link_prev
+000026c0: 6965 775f 6f70 7469 6f6e 732e 746f 5f6a  iew_options.to_j
+000026d0: 736f 6e28 290a 2020 2020 6966 2072 6570  son().    if rep
+000026e0: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
+000026f0: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+00002700: 795f 6d61 726b 7570 275d 203d 205f 636f  y_markup'] = _co
+00002710: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
+00002720: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
+00002730: 6620 7061 7273 655f 6d6f 6465 3a0a 2020  f parse_mode:.  
+00002740: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00002750: 6172 7365 5f6d 6f64 6527 5d20 3d20 7061  arse_mode'] = pa
+00002760: 7273 655f 6d6f 6465 0a20 2020 2069 6620  rse_mode.    if 
+00002770: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00002780: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+00002790: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000027a0: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
+000027b0: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
+000027c0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000027d0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+000027e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000027f0: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
+00002800: 6d65 6f75 740a 2020 2020 6966 2065 6e74  meout.    if ent
+00002810: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
+00002820: 6179 6c6f 6164 5b27 656e 7469 7469 6573  ayload['entities
+00002830: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
+00002840: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
+00002850: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
+00002860: 6963 7473 2865 6e74 6974 6965 7329 290a  icts(entities)).
+00002870: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+00002880: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+00002890: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+000028a0: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
+000028b0: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
+000028c0: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
+000028d0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+000028e0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+000028f0: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+00002900: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+00002910: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
+00002920: 6966 2072 6570 6c79 5f70 6172 616d 6574  if reply_paramet
+00002930: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
+00002940: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00002950: 5b27 7265 706c 795f 7061 7261 6d65 7465  ['reply_paramete
+00002960: 7273 275d 203d 2072 6570 6c79 5f70 6172  rs'] = reply_par
+00002970: 616d 6574 6572 732e 746f 5f6a 736f 6e28  ameters.to_json(
+00002980: 290a 2020 2020 6966 2062 7573 696e 6573  ).    if busines
+00002990: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
+000029a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000029b0: 5b27 6275 7369 6e65 7373 5f63 6f6e 6e65  ['business_conne
+000029c0: 6374 696f 6e5f 6964 275d 203d 2062 7573  ction_id'] = bus
+000029d0: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+000029e0: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
+000029f0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+00002a00: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00002a10: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+00002a20: 6d65 7468 6f64 3d27 706f 7374 272c 2076  method='post', v
+00002a30: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+00002a40: 6465 6620 7365 745f 7765 6268 6f6f 6b28  def set_webhook(
+00002a50: 746f 6b65 6e2c 2075 726c 3d4e 6f6e 652c  token, url=None,
+00002a60: 2063 6572 7469 6669 6361 7465 3d4e 6f6e   certificate=Non
+00002a70: 652c 206d 6178 5f63 6f6e 6e65 6374 696f  e, max_connectio
+00002a80: 6e73 3d4e 6f6e 652c 2061 6c6c 6f77 6564  ns=None, allowed
+00002a90: 5f75 7064 6174 6573 3d4e 6f6e 652c 2069  _updates=None, i
+00002aa0: 705f 6164 6472 6573 733d 4e6f 6e65 2c0a  p_address=None,.
+00002ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ac0: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
+00002ad0: 6174 6573 3d4e 6f6e 652c 2074 696d 656f  ates=None, timeo
+00002ae0: 7574 3d4e 6f6e 652c 2073 6563 7265 745f  ut=None, secret_
+00002af0: 746f 6b65 6e3d 4e6f 6e65 2c20 7665 7269  token=None, veri
+00002b00: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+00002b10: 7468 6f64 5f75 726c 203d 2072 2773 6574  thod_url = r'set
+00002b20: 5765 6268 6f6f 6b27 0a20 2020 2070 6179  Webhook'.    pay
+00002b30: 6c6f 6164 203d 207b 0a20 2020 2020 2020  load = {.       
+00002b40: 2027 7572 6c27 3a20 7572 6c20 6966 2075   'url': url if u
+00002b50: 726c 2065 6c73 6520 2222 2c0a 2020 2020  rl else "",.    
+00002b60: 7d0a 2020 2020 6669 6c65 7320 3d20 4e6f  }.    files = No
+00002b70: 6e65 0a20 2020 2069 6620 6365 7274 6966  ne.    if certif
+00002b80: 6963 6174 653a 0a20 2020 2020 2020 2066  icate:.        f
+00002b90: 696c 6573 203d 207b 2763 6572 7469 6669  iles = {'certifi
+00002ba0: 6361 7465 273a 2063 6572 7469 6669 6361  cate': certifica
+00002bb0: 7465 7d0a 2020 2020 6966 206d 6178 5f63  te}.    if max_c
+00002bc0: 6f6e 6e65 6374 696f 6e73 3a0a 2020 2020  onnections:.    
+00002bd0: 2020 2020 7061 796c 6f61 645b 276d 6178      payload['max
+00002be0: 5f63 6f6e 6e65 6374 696f 6e73 275d 203d  _connections'] =
+00002bf0: 206d 6178 5f63 6f6e 6e65 6374 696f 6e73   max_connections
+00002c00: 0a20 2020 2069 6620 616c 6c6f 7765 645f  .    if allowed_
+00002c10: 7570 6461 7465 7320 6973 206e 6f74 204e  updates is not N
+00002c20: 6f6e 653a 2020 2320 456d 7074 7920 6c69  one:  # Empty li
+00002c30: 7374 7320 7368 6f75 6c64 2070 6173 730a  sts should pass.
+00002c40: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00002c50: 2761 6c6c 6f77 6564 5f75 7064 6174 6573  'allowed_updates
+00002c60: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
+00002c70: 616c 6c6f 7765 645f 7570 6461 7465 7329  allowed_updates)
+00002c80: 0a20 2020 2069 6620 6970 5f61 6464 7265  .    if ip_addre
+00002c90: 7373 2069 7320 6e6f 7420 4e6f 6e65 3a20  ss is not None: 
+00002ca0: 2023 2045 6d70 7479 2073 7472 696e 6720   # Empty string 
+00002cb0: 7368 6f75 6c64 2070 6173 730a 2020 2020  should pass.    
+00002cc0: 2020 2020 7061 796c 6f61 645b 2769 705f      payload['ip_
+00002cd0: 6164 6472 6573 7327 5d20 3d20 6970 5f61  address'] = ip_a
+00002ce0: 6464 7265 7373 0a20 2020 2069 6620 6472  ddress.    if dr
+00002cf0: 6f70 5f70 656e 6469 6e67 5f75 7064 6174  op_pending_updat
+00002d00: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a20  es is not None: 
+00002d10: 2023 2041 6e79 2062 6f6f 6c20 7661 6c75   # Any bool valu
+00002d20: 6520 7368 6f75 6c64 2070 6173 730a 2020  e should pass.  
+00002d30: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
+00002d40: 726f 705f 7065 6e64 696e 675f 7570 6461  rop_pending_upda
+00002d50: 7465 7327 5d20 3d20 6472 6f70 5f70 656e  tes'] = drop_pen
+00002d60: 6469 6e67 5f75 7064 6174 6573 0a20 2020  ding_updates.   
+00002d70: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
+00002d80: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
+00002d90: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
+00002da0: 740a 2020 2020 6966 2073 6563 7265 745f  t.    if secret_
+00002db0: 746f 6b65 6e3a 0a20 2020 2020 2020 2070  token:.        p
+00002dc0: 6179 6c6f 6164 5b27 7365 6372 6574 5f74  ayload['secret_t
+00002dd0: 6f6b 656e 275d 203d 2073 6563 7265 745f  oken'] = secret_
+00002de0: 746f 6b65 6e0a 2020 2020 7265 7475 726e  token.    return
+00002df0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00002e00: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00002e10: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00002e20: 2c20 6669 6c65 733d 6669 6c65 732c 2076  , files=files, v
+00002e30: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+00002e40: 6465 6620 6465 6c65 7465 5f77 6562 686f  def delete_webho
+00002e50: 6f6b 2874 6f6b 656e 2c20 6472 6f70 5f70  ok(token, drop_p
+00002e60: 656e 6469 6e67 5f75 7064 6174 6573 3d4e  ending_updates=N
+00002e70: 6f6e 652c 2074 696d 656f 7574 3d4e 6f6e  one, timeout=Non
+00002e80: 652c 2076 6572 6966 793d 5472 7565 293a  e, verify=True):
+00002e90: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00002ea0: 3d20 7227 6465 6c65 7465 5765 6268 6f6f  = r'deleteWebhoo
+00002eb0: 6b27 0a20 2020 2070 6179 6c6f 6164 203d  k'.    payload =
+00002ec0: 207b 7d0a 2020 2020 6966 2064 726f 705f   {}.    if drop_
+00002ed0: 7065 6e64 696e 675f 7570 6461 7465 7320  pending_updates 
+00002ee0: 6973 206e 6f74 204e 6f6e 653a 2020 2320  is not None:  # 
+00002ef0: 416e 7920 626f 6f6c 2076 616c 7565 2073  Any bool value s
+00002f00: 686f 756c 6420 7061 7373 0a20 2020 2020  hould pass.     
+00002f10: 2020 2070 6179 6c6f 6164 5b27 6472 6f70     payload['drop
+00002f20: 5f70 656e 6469 6e67 5f75 7064 6174 6573  _pending_updates
+00002f30: 275d 203d 2064 726f 705f 7065 6e64 696e  '] = drop_pendin
+00002f40: 675f 7570 6461 7465 730a 2020 2020 6966  g_updates.    if
+00002f50: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00002f60: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
+00002f70: 7574 275d 203d 2074 696d 656f 7574 0a20  ut'] = timeout. 
+00002f80: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+00002f90: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00002fa0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00002fb0: 733d 7061 796c 6f61 642c 2076 6572 6966  s=payload, verif
+00002fc0: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00002fd0: 6765 745f 7765 6268 6f6f 6b5f 696e 666f  get_webhook_info
+00002fe0: 2874 6f6b 656e 2c20 7469 6d65 6f75 743d  (token, timeout=
+00002ff0: 4e6f 6e65 2c20 7665 7269 6679 3d54 7275  None, verify=Tru
+00003000: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+00003010: 726c 203d 2072 2767 6574 5765 6268 6f6f  rl = r'getWebhoo
+00003020: 6b49 6e66 6f27 0a20 2020 2070 6179 6c6f  kInfo'.    paylo
+00003030: 6164 203d 207b 7d0a 2020 2020 6966 2074  ad = {}.    if t
+00003040: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00003050: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+00003060: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
+00003070: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00003080: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00003090: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+000030a0: 7061 796c 6f61 642c 2076 6572 6966 793d  payload, verify=
+000030b0: 7665 7269 6679 290a 0a0a 6465 6620 6765  verify)...def ge
+000030c0: 745f 7570 6461 7465 7328 746f 6b65 6e2c  t_updates(token,
+000030d0: 206f 6666 7365 743d 4e6f 6e65 2c20 6c69   offset=None, li
+000030e0: 6d69 743d 4e6f 6e65 2c20 7469 6d65 6f75  mit=None, timeou
+000030f0: 743d 4e6f 6e65 2c20 616c 6c6f 7765 645f  t=None, allowed_
+00003100: 7570 6461 7465 733d 4e6f 6e65 2c20 6c6f  updates=None, lo
+00003110: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
+00003120: 7574 3d4e 6f6e 652c 2076 6572 6966 793d  ut=None, verify=
+00003130: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+00003140: 645f 7572 6c20 3d20 7227 6765 7455 7064  d_url = r'getUpd
+00003150: 6174 6573 270a 2020 2020 7061 796c 6f61  ates'.    payloa
+00003160: 6420 3d20 7b7d 0a20 2020 2069 6620 6f66  d = {}.    if of
+00003170: 6673 6574 3a0a 2020 2020 2020 2020 7061  fset:.        pa
+00003180: 796c 6f61 645b 276f 6666 7365 7427 5d20  yload['offset'] 
+00003190: 3d20 6f66 6673 6574 0a20 2020 2069 6620  = offset.    if 
+000031a0: 6c69 6d69 743a 0a20 2020 2020 2020 2070  limit:.        p
+000031b0: 6179 6c6f 6164 5b27 6c69 6d69 7427 5d20  ayload['limit'] 
+000031c0: 3d20 6c69 6d69 740a 2020 2020 6966 2074  = limit.    if t
+000031d0: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+000031e0: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+000031f0: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
+00003200: 2070 6179 6c6f 6164 5b27 6c6f 6e67 5f70   payload['long_p
+00003210: 6f6c 6c69 6e67 5f74 696d 656f 7574 275d  olling_timeout']
+00003220: 203d 206c 6f6e 675f 706f 6c6c 696e 675f   = long_polling_
+00003230: 7469 6d65 6f75 7420 6966 206c 6f6e 675f  timeout if long_
+00003240: 706f 6c6c 696e 675f 7469 6d65 6f75 7420  polling_timeout 
+00003250: 656c 7365 204c 4f4e 475f 504f 4c4c 494e  else LONG_POLLIN
+00003260: 475f 5449 4d45 4f55 540a 2020 2020 6966  G_TIMEOUT.    if
+00003270: 2061 6c6c 6f77 6564 5f75 7064 6174 6573   allowed_updates
+00003280: 2069 7320 6e6f 7420 4e6f 6e65 3a20 2023   is not None:  #
+00003290: 2045 6d70 7479 206c 6973 7473 2073 686f   Empty lists sho
+000032a0: 756c 6420 7061 7373 0a20 2020 2020 2020  uld pass.       
+000032b0: 2070 6179 6c6f 6164 5b27 616c 6c6f 7765   payload['allowe
+000032c0: 645f 7570 6461 7465 7327 5d20 3d20 6a73  d_updates'] = js
+000032d0: 6f6e 2e64 756d 7073 2861 6c6c 6f77 6564  on.dumps(allowed
+000032e0: 5f75 7064 6174 6573 290a 2020 2020 7265  _updates).    re
+000032f0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00003300: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00003310: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00003320: 6c6f 6164 2c20 7665 7269 6679 3d76 6572  load, verify=ver
+00003330: 6966 7929 0a0a 0a64 6566 2067 6574 5f75  ify)...def get_u
+00003340: 7365 725f 7072 6f66 696c 655f 7068 6f74  ser_profile_phot
+00003350: 6f73 2874 6f6b 656e 2c20 7573 6572 5f69  os(token, user_i
+00003360: 642c 206f 6666 7365 743d 4e6f 6e65 2c20  d, offset=None, 
+00003370: 6c69 6d69 743d 4e6f 6e65 2c20 7665 7269  limit=None, veri
+00003380: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+00003390: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
+000033a0: 5573 6572 5072 6f66 696c 6550 686f 746f  UserProfilePhoto
+000033b0: 7327 0a20 2020 2070 6179 6c6f 6164 203d  s'.    payload =
+000033c0: 207b 2775 7365 725f 6964 273a 2075 7365   {'user_id': use
+000033d0: 725f 6964 7d0a 2020 2020 6966 206f 6666  r_id}.    if off
+000033e0: 7365 743a 0a20 2020 2020 2020 2070 6179  set:.        pay
+000033f0: 6c6f 6164 5b27 6f66 6673 6574 275d 203d  load['offset'] =
+00003400: 206f 6666 7365 740a 2020 2020 6966 206c   offset.    if l
+00003410: 696d 6974 3a0a 2020 2020 2020 2020 7061  imit:.        pa
+00003420: 796c 6f61 645b 276c 696d 6974 275d 203d  yload['limit'] =
+00003430: 206c 696d 6974 0a20 2020 2072 6574 7572   limit.    retur
+00003440: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00003450: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00003460: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00003470: 642c 2076 6572 6966 793d 7665 7269 6679  d, verify=verify
+00003480: 290a 0a0a 6465 6620 7365 745f 6d65 7373  )...def set_mess
+00003490: 6167 655f 7265 6163 7469 6f6e 2874 6f6b  age_reaction(tok
+000034a0: 656e 2c20 6368 6174 5f69 642c 206d 6573  en, chat_id, mes
+000034b0: 7361 6765 5f69 642c 2072 6561 6374 696f  sage_id, reactio
+000034c0: 6e3d 4e6f 6e65 2c20 6973 5f62 6967 3d4e  n=None, is_big=N
+000034d0: 6f6e 652c 2076 6572 6966 793d 5472 7565  one, verify=True
+000034e0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+000034f0: 6c20 3d20 7227 7365 744d 6573 7361 6765  l = r'setMessage
+00003500: 5265 6163 7469 6f6e 270a 2020 2020 7061  Reaction'.    pa
+00003510: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00003520: 6427 3a20 6368 6174 5f69 642c 2027 6d65  d': chat_id, 'me
+00003530: 7373 6167 655f 6964 273a 206d 6573 7361  ssage_id': messa
+00003540: 6765 5f69 647d 0a20 2020 2069 6620 7265  ge_id}.    if re
+00003550: 6163 7469 6f6e 3a0a 2020 2020 2020 2020  action:.        
+00003560: 7061 796c 6f61 645b 2772 6561 6374 696f  payload['reactio
+00003570: 6e27 5d20 3d20 6a73 6f6e 2e64 756d 7073  n'] = json.dumps
+00003580: 285b 722e 746f 5f64 6963 7428 2920 666f  ([r.to_dict() fo
+00003590: 7220 7220 696e 2072 6561 6374 696f 6e5d  r r in reaction]
+000035a0: 290a 2020 2020 6966 2069 735f 6269 6720  ).    if is_big 
+000035b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000035c0: 2020 2020 2070 6179 6c6f 6164 5b27 6973       payload['is
+000035d0: 5f62 6967 275d 203d 2069 735f 6269 670a  _big'] = is_big.
+000035e0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+000035f0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00003600: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00003610: 6d73 3d70 6179 6c6f 6164 2c20 7665 7269  ms=payload, veri
+00003620: 6679 3d76 6572 6966 7929 0a0a 0a64 6566  fy=verify)...def
+00003630: 2067 6574 5f63 6861 7428 746f 6b65 6e2c   get_chat(token,
+00003640: 2063 6861 745f 6964 2c20 7665 7269 6679   chat_id, verify
+00003650: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+00003660: 6f64 5f75 726c 203d 2072 2767 6574 4368  od_url = r'getCh
+00003670: 6174 270a 2020 2020 7061 796c 6f61 6420  at'.    payload 
+00003680: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00003690: 6174 5f69 647d 0a20 2020 2072 6574 7572  at_id}.    retur
+000036a0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+000036b0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+000036c0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+000036d0: 642c 2076 6572 6966 793d 7665 7269 6679  d, verify=verify
+000036e0: 290a 0a0a 6465 6620 6c65 6176 655f 6368  )...def leave_ch
+000036f0: 6174 2874 6f6b 656e 2c20 6368 6174 5f69  at(token, chat_i
+00003700: 642c 2076 6572 6966 793d 5472 7565 293a  d, verify=True):
+00003710: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00003720: 3d20 7227 6c65 6176 6543 6861 7427 0a20  = r'leaveChat'. 
+00003730: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+00003740: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+00003750: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+00003760: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00003770: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00003780: 7261 6d73 3d70 6179 6c6f 6164 2c20 7665  rams=payload, ve
+00003790: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+000037a0: 6566 2067 6574 5f63 6861 745f 6164 6d69  ef get_chat_admi
+000037b0: 6e69 7374 7261 746f 7273 2874 6f6b 656e  nistrators(token
+000037c0: 2c20 6368 6174 5f69 642c 2076 6572 6966  , chat_id, verif
+000037d0: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+000037e0: 686f 645f 7572 6c20 3d20 7227 6765 7443  hod_url = r'getC
+000037f0: 6861 7441 646d 696e 6973 7472 6174 6f72  hatAdministrator
+00003800: 7327 0a20 2020 2070 6179 6c6f 6164 203d  s'.    payload =
+00003810: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+00003820: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
+00003830: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00003840: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00003850: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00003860: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00003870: 0a0a 0a64 6566 2067 6574 5f63 6861 745f  ...def get_chat_
+00003880: 6d65 6d62 6572 5f63 6f75 6e74 2874 6f6b  member_count(tok
+00003890: 656e 2c20 6368 6174 5f69 642c 2076 6572  en, chat_id, ver
+000038a0: 6966 793d 5472 7565 293a 0a20 2020 206d  ify=True):.    m
+000038b0: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
+000038c0: 7443 6861 744d 656d 6265 7243 6f75 6e74  tChatMemberCount
+000038d0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+000038e0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+000038f0: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
+00003900: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00003910: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00003920: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00003930: 2076 6572 6966 793d 7665 7269 6679 290a   verify=verify).
+00003940: 0a0a 6465 6620 7365 745f 7374 6963 6b65  ..def set_sticke
+00003950: 725f 7365 745f 7468 756d 626e 6169 6c28  r_set_thumbnail(
+00003960: 746f 6b65 6e2c 206e 616d 652c 2075 7365  token, name, use
+00003970: 725f 6964 2c20 7468 756d 626e 6169 6c2c  r_id, thumbnail,
+00003980: 2066 6f72 6d61 742c 2076 6572 6966 793d   format, verify=
+00003990: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+000039a0: 645f 7572 6c20 3d20 7227 7365 7453 7469  d_url = r'setSti
+000039b0: 636b 6572 5365 7454 6875 6d62 6e61 696c  ckerSetThumbnail
+000039c0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+000039d0: 7b27 6e61 6d65 273a 206e 616d 652c 2027  {'name': name, '
+000039e0: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
+000039f0: 642c 2027 666f 726d 6174 273a 2066 6f72  d, 'format': for
+00003a00: 6d61 747d 0a20 2020 2066 696c 6573 203d  mat}.    files =
+00003a10: 207b 7d0a 2020 2020 6966 2074 6875 6d62   {}.    if thumb
+00003a20: 6e61 696c 3a0a 2020 2020 2020 2020 6966  nail:.        if
+00003a30: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00003a40: 7468 756d 626e 6169 6c2c 2073 7472 293a  thumbnail, str):
+00003a50: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+00003a60: 6573 5b27 7468 756d 626e 6169 6c27 5d20  es['thumbnail'] 
+00003a70: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
+00003a80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00003a90: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
+00003aa0: 6875 6d62 6e61 696c 275d 203d 2074 6875  humbnail'] = thu
+00003ab0: 6d62 6e61 696c 0a20 2020 2072 6574 7572  mbnail.    retur
+00003ac0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00003ad0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00003ae0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00003af0: 642c 2066 696c 6573 3d66 696c 6573 206f  d, files=files o
+00003b00: 7220 4e6f 6e65 2c20 7665 7269 6679 3d76  r None, verify=v
+00003b10: 6572 6966 7929 0a0a 0a64 6566 2072 6570  erify)...def rep
+00003b20: 6c61 6365 5f73 7469 636b 6572 5f69 6e5f  lace_sticker_in_
+00003b30: 7365 7428 746f 6b65 6e2c 2075 7365 725f  set(token, user_
+00003b40: 6964 2c20 6e61 6d65 2c20 6f6c 645f 7374  id, name, old_st
+00003b50: 6963 6b65 722c 2073 7469 636b 6572 2c20  icker, sticker, 
+00003b60: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+00003b70: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00003b80: 2772 6570 6c61 6365 5374 6963 6b65 7249  'replaceStickerI
+00003b90: 6e53 6574 270a 2020 2020 7061 796c 6f61  nSet'.    payloa
+00003ba0: 6420 3d20 7b27 7573 6572 5f69 6427 3a20  d = {'user_id': 
+00003bb0: 7573 6572 5f69 642c 2027 6e61 6d65 273a  user_id, 'name':
+00003bc0: 206e 616d 652c 2027 6f6c 645f 7374 6963   name, 'old_stic
+00003bd0: 6b65 7227 3a20 6f6c 645f 7374 6963 6b65  ker': old_sticke
+00003be0: 722c 2027 7374 6963 6b65 7227 3a20 7374  r, 'sticker': st
+00003bf0: 6963 6b65 722e 746f 5f6a 736f 6e28 297d  icker.to_json()}
+00003c00: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00003c10: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00003c20: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00003c30: 616d 733d 7061 796c 6f61 642c 2076 6572  ams=payload, ver
+00003c40: 6966 793d 7665 7269 6679 290a 0a0a 6465  ify=verify)...de
+00003c50: 6620 7365 745f 6368 6174 5f73 7469 636b  f set_chat_stick
+00003c60: 6572 5f73 6574 2874 6f6b 656e 2c20 6368  er_set(token, ch
+00003c70: 6174 5f69 642c 2073 7469 636b 6572 5f73  at_id, sticker_s
+00003c80: 6574 5f6e 616d 652c 2076 6572 6966 793d  et_name, verify=
+00003c90: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+00003ca0: 645f 7572 6c20 3d20 7227 7365 7443 6861  d_url = r'setCha
+00003cb0: 7453 7469 636b 6572 5365 7427 0a20 2020  tStickerSet'.   
+00003cc0: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+00003cd0: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
+00003ce0: 2773 7469 636b 6572 5f73 6574 5f6e 616d  'sticker_set_nam
+00003cf0: 6527 3a20 7374 6963 6b65 725f 7365 745f  e': sticker_set_
+00003d00: 6e61 6d65 7d0a 2020 2020 7265 7475 726e  name}.    return
+00003d10: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00003d20: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00003d30: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00003d40: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00003d50: 0a0a 0a64 6566 2064 656c 6574 655f 6368  ...def delete_ch
+00003d60: 6174 5f73 7469 636b 6572 5f73 6574 2874  at_sticker_set(t
+00003d70: 6f6b 656e 2c20 6368 6174 5f69 642c 2076  oken, chat_id, v
+00003d80: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+00003d90: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00003da0: 6465 6c65 7465 4368 6174 5374 6963 6b65  deleteChatSticke
+00003db0: 7253 6574 270a 2020 2020 7061 796c 6f61  rSet'.    payloa
+00003dc0: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+00003dd0: 6368 6174 5f69 647d 0a20 2020 2072 6574  chat_id}.    ret
+00003de0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00003df0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00003e00: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00003e10: 6f61 642c 2076 6572 6966 793d 7665 7269  oad, verify=veri
+00003e20: 6679 290a 0a0a 6465 6620 6765 745f 6368  fy)...def get_ch
+00003e30: 6174 5f6d 656d 6265 7228 746f 6b65 6e2c  at_member(token,
+00003e40: 2063 6861 745f 6964 2c20 7573 6572 5f69   chat_id, user_i
+00003e50: 642c 2076 6572 6966 793d 5472 7565 293a  d, verify=True):
+00003e60: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00003e70: 3d20 7227 6765 7443 6861 744d 656d 6265  = r'getChatMembe
+00003e80: 7227 0a20 2020 2070 6179 6c6f 6164 203d  r'.    payload =
+00003e90: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+00003ea0: 745f 6964 2c20 2775 7365 725f 6964 273a  t_id, 'user_id':
+00003eb0: 2075 7365 725f 6964 7d0a 2020 2020 7265   user_id}.    re
+00003ec0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00003ed0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00003ee0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00003ef0: 6c6f 6164 2c20 7665 7269 6679 3d76 6572  load, verify=ver
+00003f00: 6966 7929 0a0a 0a64 6566 2066 6f72 7761  ify)...def forwa
+00003f10: 7264 5f6d 6573 7361 6765 280a 2020 2020  rd_message(.    
+00003f20: 2020 2020 746f 6b65 6e2c 2063 6861 745f      token, chat_
+00003f30: 6964 2c20 6672 6f6d 5f63 6861 745f 6964  id, from_chat_id
+00003f40: 2c20 6d65 7373 6167 655f 6964 2c0a 2020  , message_id,.  
+00003f50: 2020 2020 2020 6469 7361 626c 655f 6e6f        disable_no
+00003f60: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+00003f70: 2074 696d 656f 7574 3d4e 6f6e 652c 2070   timeout=None, p
+00003f80: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00003f90: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+00003fa0: 6561 645f 6964 3d4e 6f6e 652c 2076 6572  ead_id=None, ver
+00003fb0: 6966 793d 5472 7565 293a 0a20 2020 206d  ify=True):.    m
+00003fc0: 6574 686f 645f 7572 6c20 3d20 7227 666f  ethod_url = r'fo
+00003fd0: 7277 6172 644d 6573 7361 6765 270a 2020  rwardMessage'.  
+00003fe0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+00003ff0: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
+00004000: 2027 6672 6f6d 5f63 6861 745f 6964 273a   'from_chat_id':
+00004010: 2066 726f 6d5f 6368 6174 5f69 642c 2027   from_chat_id, '
+00004020: 6d65 7373 6167 655f 6964 273a 206d 6573  message_id': mes
+00004030: 7361 6765 5f69 647d 0a20 2020 2069 6620  sage_id}.    if 
+00004040: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00004050: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+00004060: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00004070: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
+00004080: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
+00004090: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000040a0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+000040b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000040c0: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
+000040d0: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
+000040e0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+000040f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00004100: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
+00004110: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
+00004120: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00004130: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00004140: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
+00004150: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
+00004160: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
+00004170: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00004180: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
+00004190: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+000041a0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000041b0: 7261 6d73 3d70 6179 6c6f 6164 2c20 7665  rams=payload, ve
+000041c0: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+000041d0: 6566 2063 6f70 795f 6d65 7373 6167 6528  ef copy_message(
+000041e0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+000041f0: 6672 6f6d 5f63 6861 745f 6964 2c20 6d65  from_chat_id, me
+00004200: 7373 6167 655f 6964 2c20 6361 7074 696f  ssage_id, captio
+00004210: 6e3d 4e6f 6e65 2c20 7061 7273 655f 6d6f  n=None, parse_mo
+00004220: 6465 3d4e 6f6e 652c 2063 6170 7469 6f6e  de=None, caption
+00004230: 5f65 6e74 6974 6965 733d 4e6f 6e65 2c0a  _entities=None,.
+00004240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004250: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00004260: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
+00004270: 795f 6d61 726b 7570 3d4e 6f6e 652c 2074  y_markup=None, t
+00004280: 696d 656f 7574 3d4e 6f6e 652c 2070 726f  imeout=None, pro
+00004290: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
+000042a0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+000042b0: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
+000042c0: 6164 5f69 643d 4e6f 6e65 2c0a 2020 2020  ad_id=None,.    
+000042d0: 2020 2020 2020 2020 2020 2020 2072 6570               rep
+000042e0: 6c79 5f70 6172 616d 6574 6572 733d 4e6f  ly_parameters=No
+000042f0: 6e65 2c20 7665 7269 6679 3d54 7275 6529  ne, verify=True)
+00004300: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00004310: 203d 2072 2763 6f70 794d 6573 7361 6765   = r'copyMessage
+00004320: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+00004330: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+00004340: 5f69 642c 2027 6672 6f6d 5f63 6861 745f  _id, 'from_chat_
+00004350: 6964 273a 2066 726f 6d5f 6368 6174 5f69  id': from_chat_i
+00004360: 642c 2027 6d65 7373 6167 655f 6964 273a  d, 'message_id':
+00004370: 206d 6573 7361 6765 5f69 647d 0a20 2020   message_id}.   
+00004380: 2069 6620 6361 7074 696f 6e20 6973 206e   if caption is n
+00004390: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000043a0: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
+000043b0: 6e27 5d20 3d20 6361 7074 696f 6e0a 2020  n'] = caption.  
+000043c0: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
+000043d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000043e0: 5b27 7061 7273 655f 6d6f 6465 275d 203d  ['parse_mode'] =
+000043f0: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
+00004400: 6966 2063 6170 7469 6f6e 5f65 6e74 6974  if caption_entit
+00004410: 6965 7320 6973 206e 6f74 204e 6f6e 653a  ies is not None:
+00004420: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00004430: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
+00004440: 6573 275d 203d 205f 636f 6e76 6572 745f  es'] = _convert_
+00004450: 656e 7469 7465 7328 6361 7074 696f 6e5f  entites(caption_
+00004460: 656e 7469 7469 6573 290a 2020 2020 6966  entities).    if
+00004470: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00004480: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
+00004490: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+000044a0: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
+000044b0: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
+000044c0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000044d0: 6e0a 2020 2020 6966 2072 6570 6c79 5f70  n.    if reply_p
+000044e0: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
+000044f0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00004500: 6179 6c6f 6164 5b27 7265 706c 795f 7061  ayload['reply_pa
+00004510: 7261 6d65 7465 7273 275d 203d 2072 6570  rameters'] = rep
+00004520: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00004530: 5f6a 736f 6e28 290a 2020 2020 6966 2074  _json().    if t
+00004540: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00004550: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+00004560: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
+00004570: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
+00004580: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
+00004590: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000045a0: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
+000045b0: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
+000045c0: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
+000045d0: 7361 6765 5f74 6872 6561 645f 6964 2069  sage_thread_id i
+000045e0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000045f0: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+00004600: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
+00004610: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
+00004620: 645f 6964 0a20 2020 2072 6574 7572 6e20  d_id.    return 
+00004630: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00004640: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00004650: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00004660: 2076 6572 6966 793d 7665 7269 6679 290a   verify=verify).
+00004670: 0a0a 6465 6620 7365 6e64 5f64 6963 6528  ..def send_dice(
+00004680: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
+00004690: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
+000046a0: 2065 6d6f 6a69 3d4e 6f6e 652c 2064 6973   emoji=None, dis
+000046b0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000046c0: 6e3d 4e6f 6e65 2c0a 2020 2020 2020 2020  n=None,.        
+000046d0: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+000046e0: 652c 2074 696d 656f 7574 3d4e 6f6e 652c  e, timeout=None,
+000046f0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00004700: 3d4e 6f6e 652c 206d 6573 7361 6765 5f74  =None, message_t
+00004710: 6872 6561 645f 6964 3d4e 6f6e 652c 2072  hread_id=None, r
+00004720: 6570 6c79 5f70 6172 616d 6574 6572 733d  eply_parameters=
+00004730: 4e6f 6e65 2c0a 2020 2020 2020 2020 6275  None,.        bu
+00004740: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00004750: 6e5f 6964 3d4e 6f6e 652c 2076 6572 6966  n_id=None, verif
+00004760: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+00004770: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
+00004780: 4469 6365 270a 2020 2020 7061 796c 6f61  Dice'.    payloa
+00004790: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+000047a0: 6368 6174 5f69 647d 0a20 2020 2069 6620  chat_id}.    if 
+000047b0: 656d 6f6a 693a 0a20 2020 2020 2020 2070  emoji:.        p
+000047c0: 6179 6c6f 6164 5b27 656d 6f6a 6927 5d20  ayload['emoji'] 
+000047d0: 3d20 656d 6f6a 690a 2020 2020 6966 2064  = emoji.    if d
+000047e0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+000047f0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
+00004800: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00004810: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
+00004820: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
+00004830: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0a  le_notification.
+00004840: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+00004850: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
+00004860: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
+00004870: 7570 275d 203d 205f 636f 6e76 6572 745f  up'] = _convert_
+00004880: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+00004890: 6b75 7029 0a20 2020 2069 6620 7469 6d65  kup).    if time
+000048a0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+000048b0: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+000048c0: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
+000048d0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+000048e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000048f0: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00004900: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
+00004910: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+00004920: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
+00004930: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
+00004940: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+00004950: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+00004960: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00004970: 6164 5f69 640a 2020 2020 6966 2072 6570  ad_id.    if rep
+00004980: 6c79 5f70 6172 616d 6574 6572 7320 6973  ly_parameters is
+00004990: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000049a0: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+000049b0: 795f 7061 7261 6d65 7465 7273 275d 203d  y_parameters'] =
+000049c0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+000049d0: 732e 746f 5f6a 736f 6e28 290a 2020 2020  s.to_json().    
+000049e0: 6966 2062 7573 696e 6573 735f 636f 6e6e  if business_conn
+000049f0: 6563 7469 6f6e 5f69 643a 0a20 2020 2020  ection_id:.     
+00004a00: 2020 2070 6179 6c6f 6164 5b27 6275 7369     payload['busi
+00004a10: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00004a20: 6964 275d 203d 2062 7573 696e 6573 735f  id'] = business_
+00004a30: 636f 6e6e 6563 7469 6f6e 5f69 640a 2020  connection_id.  
+00004a40: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00004a50: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00004a60: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00004a70: 3d70 6179 6c6f 6164 2c20 7665 7269 6679  =payload, verify
+00004a80: 3d76 6572 6966 7929 0a0a 0a64 6566 2073  =verify)...def s
+00004a90: 656e 645f 7068 6f74 6f28 0a20 2020 2020  end_photo(.     
+00004aa0: 2020 2074 6f6b 656e 2c20 6368 6174 5f69     token, chat_i
+00004ab0: 642c 2070 686f 746f 2c0a 2020 2020 2020  d, photo,.      
+00004ac0: 2020 6361 7074 696f 6e3d 4e6f 6e65 2c20    caption=None, 
+00004ad0: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00004ae0: 652c 0a20 2020 2020 2020 2070 6172 7365  e,.        parse
+00004af0: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
+00004b00: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00004b10: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+00004b20: 6f6e 652c 0a20 2020 2020 2020 2063 6170  one,.        cap
+00004b30: 7469 6f6e 5f65 6e74 6974 6965 733d 4e6f  tion_entities=No
+00004b40: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
+00004b50: 656e 743d 4e6f 6e65 2c0a 2020 2020 2020  ent=None,.      
+00004b60: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
+00004b70: 5f69 643d 4e6f 6e65 2c20 6861 735f 7370  _id=None, has_sp
+00004b80: 6f69 6c65 723d 4e6f 6e65 2c20 7265 706c  oiler=None, repl
+00004b90: 795f 7061 7261 6d65 7465 7273 3d4e 6f6e  y_parameters=Non
+00004ba0: 652c 2062 7573 696e 6573 735f 636f 6e6e  e, business_conn
+00004bb0: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c20  ection_id=None, 
+00004bc0: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+00004bd0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00004be0: 2773 656e 6450 686f 746f 270a 2020 2020  'sendPhoto'.    
+00004bf0: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+00004c00: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
+00004c10: 2020 2066 696c 6573 203d 204e 6f6e 650a     files = None.
+00004c20: 2020 2020 6966 2075 7469 6c2e 6973 5f73      if util.is_s
+00004c30: 7472 696e 6728 7068 6f74 6f29 3a0a 2020  tring(photo):.  
+00004c40: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00004c50: 686f 746f 275d 203d 2070 686f 746f 0a20  hoto'] = photo. 
+00004c60: 2020 2065 6c69 6620 7574 696c 2e69 735f     elif util.is_
+00004c70: 7069 6c5f 696d 6167 6528 7068 6f74 6f29  pil_image(photo)
+00004c80: 3a0a 2020 2020 2020 2020 6669 6c65 7320  :.        files 
+00004c90: 3d20 7b27 7068 6f74 6f27 3a20 7574 696c  = {'photo': util
+00004ca0: 2e70 696c 5f69 6d61 6765 5f74 6f5f 6669  .pil_image_to_fi
+00004cb0: 6c65 2870 686f 746f 297d 0a20 2020 2065  le(photo)}.    e
+00004cc0: 6c73 653a 0a20 2020 2020 2020 2066 696c  lse:.        fil
+00004cd0: 6573 203d 207b 2770 686f 746f 273a 2070  es = {'photo': p
+00004ce0: 686f 746f 7d0a 2020 2020 6966 2063 6170  hoto}.    if cap
+00004cf0: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
+00004d00: 796c 6f61 645b 2763 6170 7469 6f6e 275d  yload['caption']
+00004d10: 203d 2063 6170 7469 6f6e 0a20 2020 2069   = caption.    i
+00004d20: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+00004d30: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00004d40: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
+00004d50: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+00004d60: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
+00004d70: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
+00004d80: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00004d90: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
+00004da0: 203d 2070 6172 7365 5f6d 6f64 650a 2020   = parse_mode.  
+00004db0: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+00004dc0: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+00004dd0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00004de0: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
+00004df0: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
+00004e00: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00004e10: 6174 696f 6e0a 2020 2020 6966 2074 696d  ation.    if tim
+00004e20: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+00004e30: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
+00004e40: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+00004e50: 6620 6361 7074 696f 6e5f 656e 7469 7469  f caption_entiti
+00004e60: 6573 3a0a 2020 2020 2020 2020 7061 796c  es:.        payl
+00004e70: 6f61 645b 2763 6170 7469 6f6e 5f65 6e74  oad['caption_ent
+00004e80: 6974 6965 7327 5d20 3d20 6a73 6f6e 2e64  ities'] = json.d
+00004e90: 756d 7073 2874 7970 6573 2e4d 6573 7361  umps(types.Messa
+00004ea0: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
+00004eb0: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
+00004ec0: 6e5f 656e 7469 7469 6573 2929 0a20 2020  n_entities)).   
+00004ed0: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
+00004ee0: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
+00004ef0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00004f00: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
+00004f10: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
+00004f20: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
+00004f30: 7361 6765 5f74 6872 6561 645f 6964 2069  sage_thread_id i
+00004f40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00004f50: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+00004f60: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
+00004f70: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
+00004f80: 645f 6964 0a20 2020 2069 6620 6861 735f  d_id.    if has_
+00004f90: 7370 6f69 6c65 7220 6973 206e 6f74 204e  spoiler is not N
+00004fa0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00004fb0: 6c6f 6164 5b27 6861 735f 7370 6f69 6c65  load['has_spoile
+00004fc0: 7227 5d20 3d20 6861 735f 7370 6f69 6c65  r'] = has_spoile
+00004fd0: 720a 2020 2020 6966 2072 6570 6c79 5f70  r.    if reply_p
+00004fe0: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
+00004ff0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00005000: 6179 6c6f 6164 5b27 7265 706c 795f 7061  ayload['reply_pa
+00005010: 7261 6d65 7465 7273 275d 203d 2072 6570  rameters'] = rep
+00005020: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00005030: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
+00005040: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00005050: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00005060: 6179 6c6f 6164 5b27 6275 7369 6e65 7373  ayload['business
+00005070: 5f63 6f6e 6e65 6374 696f 6e5f 6964 275d  _connection_id']
+00005080: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00005090: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+000050a0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+000050b0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+000050c0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+000050d0: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+000050e0: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
+000050f0: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00005100: 0a0a 0a64 6566 2073 656e 645f 6d65 6469  ...def send_medi
+00005110: 615f 6772 6f75 7028 0a20 2020 2020 2020  a_group(.       
+00005120: 2074 6f6b 656e 2c20 6368 6174 5f69 642c   token, chat_id,
+00005130: 206d 6564 6961 2c0a 2020 2020 2020 2020   media,.        
+00005140: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00005150: 7469 6f6e 3d4e 6f6e 652c 0a20 2020 2020  tion=None,.     
+00005160: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
+00005170: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00005180: 3d4e 6f6e 652c 206d 6573 7361 6765 5f74  =None, message_t
+00005190: 6872 6561 645f 6964 3d4e 6f6e 652c 2072  hread_id=None, r
+000051a0: 6570 6c79 5f70 6172 616d 6574 6572 733d  eply_parameters=
+000051b0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6275  None,.        bu
+000051c0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+000051d0: 6e5f 6964 3d4e 6f6e 652c 2076 6572 6966  n_id=None, verif
+000051e0: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+000051f0: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
+00005200: 4d65 6469 6147 726f 7570 270a 2020 2020  MediaGroup'.    
+00005210: 6d65 6469 615f 6a73 6f6e 2c20 6669 6c65  media_json, file
+00005220: 7320 3d20 636f 6e76 6572 745f 696e 7075  s = convert_inpu
+00005230: 745f 6d65 6469 615f 6172 7261 7928 6d65  t_media_array(me
+00005240: 6469 6129 0a20 2020 2070 6179 6c6f 6164  dia).    payload
+00005250: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00005260: 6861 745f 6964 2c20 276d 6564 6961 273a  hat_id, 'media':
+00005270: 206d 6564 6961 5f6a 736f 6e7d 0a20 2020   media_json}.   
+00005280: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00005290: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+000052a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+000052b0: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+000052c0: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+000052d0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000052e0: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
+000052f0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+00005300: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+00005310: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
+00005320: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00005330: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00005340: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00005350: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
+00005360: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+00005370: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
+00005380: 655f 7468 7265 6164 5f69 6420 6973 206e  e_thread_id is n
+00005390: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000053a0: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
+000053b0: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
+000053c0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+000053d0: 640a 2020 2020 6966 2072 6570 6c79 5f70  d.    if reply_p
+000053e0: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
+000053f0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00005400: 6179 6c6f 6164 5b27 7265 706c 795f 7061  ayload['reply_pa
+00005410: 7261 6d65 7465 7273 275d 203d 2072 6570  rameters'] = rep
+00005420: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00005430: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
+00005440: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00005450: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00005460: 6179 6c6f 6164 5b27 6275 7369 6e65 7373  ayload['business
+00005470: 5f63 6f6e 6e65 6374 696f 6e5f 6964 275d  _connection_id']
+00005480: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00005490: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+000054a0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+000054b0: 7374 280a 2020 2020 2020 2020 746f 6b65  st(.        toke
+000054c0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000054d0: 6172 616d 733d 7061 796c 6f61 642c 0a20  arams=payload,. 
+000054e0: 2020 2020 2020 206d 6574 686f 643d 2770         method='p
+000054f0: 6f73 7427 2069 6620 6669 6c65 7320 656c  ost' if files el
+00005500: 7365 2027 6765 7427 2c0a 2020 2020 2020  se 'get',.      
+00005510: 2020 6669 6c65 733d 6669 6c65 7320 6966    files=files if
+00005520: 2066 696c 6573 2065 6c73 6520 4e6f 6e65   files else None
+00005530: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00005540: 0a0a 0a64 6566 2073 656e 645f 6c6f 6361  ...def send_loca
+00005550: 7469 6f6e 280a 2020 2020 2020 2020 746f  tion(.        to
+00005560: 6b65 6e2c 2063 6861 745f 6964 2c20 6c61  ken, chat_id, la
+00005570: 7469 7475 6465 2c20 6c6f 6e67 6974 7564  titude, longitud
+00005580: 652c 0a20 2020 2020 2020 206c 6976 655f  e,.        live_
+00005590: 7065 7269 6f64 3d4e 6f6e 652c 0a20 2020  period=None,.   
+000055a0: 2020 2020 2072 6570 6c79 5f6d 6172 6b75       reply_marku
+000055b0: 703d 4e6f 6e65 2c20 6469 7361 626c 655f  p=None, disable_
+000055c0: 6e6f 7469 6669 6361 7469 6f6e 3d4e 6f6e  notification=Non
+000055d0: 652c 0a20 2020 2020 2020 2074 696d 656f  e,.        timeo
+000055e0: 7574 3d4e 6f6e 652c 2068 6f72 697a 6f6e  ut=None, horizon
+000055f0: 7461 6c5f 6163 6375 7261 6379 3d4e 6f6e  tal_accuracy=Non
+00005600: 652c 2068 6561 6469 6e67 3d4e 6f6e 652c  e, heading=None,
+00005610: 0a20 2020 2020 2020 2070 726f 7869 6d69  .        proximi
+00005620: 7479 5f61 6c65 7274 5f72 6164 6975 733d  ty_alert_radius=
+00005630: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
+00005640: 6e74 656e 743d 4e6f 6e65 2c0a 2020 2020  ntent=None,.    
+00005650: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
+00005660: 6164 5f69 643d 4e6f 6e65 2c20 7265 706c  ad_id=None, repl
+00005670: 795f 7061 7261 6d65 7465 7273 3d4e 6f6e  y_parameters=Non
+00005680: 652c 2062 7573 696e 6573 735f 636f 6e6e  e, business_conn
+00005690: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c20  ection_id=None, 
+000056a0: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+000056b0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+000056c0: 2773 656e 644c 6f63 6174 696f 6e27 0a20  'sendLocation'. 
+000056d0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+000056e0: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+000056f0: 2c20 276c 6174 6974 7564 6527 3a20 6c61  , 'latitude': la
+00005700: 7469 7475 6465 2c20 276c 6f6e 6769 7475  titude, 'longitu
+00005710: 6465 273a 206c 6f6e 6769 7475 6465 7d0a  de': longitude}.
+00005720: 2020 2020 6966 206c 6976 655f 7065 7269      if live_peri
+00005730: 6f64 3a0a 2020 2020 2020 2020 7061 796c  od:.        payl
+00005740: 6f61 645b 276c 6976 655f 7065 7269 6f64  oad['live_period
+00005750: 275d 203d 206c 6976 655f 7065 7269 6f64  '] = live_period
+00005760: 0a20 2020 2069 6620 686f 7269 7a6f 6e74  .    if horizont
+00005770: 616c 5f61 6363 7572 6163 793a 0a20 2020  al_accuracy:.   
+00005780: 2020 2020 2070 6179 6c6f 6164 5b27 686f       payload['ho
+00005790: 7269 7a6f 6e74 616c 5f61 6363 7572 6163  rizontal_accurac
+000057a0: 7927 5d20 3d20 686f 7269 7a6f 6e74 616c  y'] = horizontal
+000057b0: 5f61 6363 7572 6163 790a 2020 2020 6966  _accuracy.    if
+000057c0: 2068 6561 6469 6e67 3a0a 2020 2020 2020   heading:.      
+000057d0: 2020 7061 796c 6f61 645b 2768 6561 6469    payload['headi
+000057e0: 6e67 275d 203d 2068 6561 6469 6e67 0a20  ng'] = heading. 
+000057f0: 2020 2069 6620 7072 6f78 696d 6974 795f     if proximity_
+00005800: 616c 6572 745f 7261 6469 7573 3a0a 2020  alert_radius:.  
+00005810: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00005820: 726f 7869 6d69 7479 5f61 6c65 7274 5f72  roximity_alert_r
+00005830: 6164 6975 7327 5d20 3d20 7072 6f78 696d  adius'] = proxim
+00005840: 6974 795f 616c 6572 745f 7261 6469 7573  ity_alert_radius
+00005850: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+00005860: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
+00005870: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+00005880: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
+00005890: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+000058a0: 726b 7570 290a 2020 2020 6966 2064 6973  rkup).    if dis
+000058b0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000058c0: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
+000058d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000058e0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000058f0: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
+00005900: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
+00005910: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
+00005920: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
+00005930: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
+00005940: 7574 0a20 2020 2069 6620 7072 6f74 6563  ut.    if protec
+00005950: 745f 636f 6e74 656e 7420 6973 206e 6f74  t_content is not
+00005960: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00005970: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
+00005980: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
+00005990: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
+000059a0: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
+000059b0: 645f 6964 2069 7320 6e6f 7420 4e6f 6e65  d_id is not None
+000059c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000059d0: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+000059e0: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+000059f0: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
+00005a00: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
+00005a10: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
+00005a20: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005a30: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
+00005a40: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
+00005a50: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
+00005a60: 0a20 2020 2069 6620 6275 7369 6e65 7373  .    if business
+00005a70: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3a0a  _connection_id:.
+00005a80: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005a90: 2762 7573 696e 6573 735f 636f 6e6e 6563  'business_connec
+00005aa0: 7469 6f6e 5f69 6427 5d20 3d20 6275 7369  tion_id'] = busi
+00005ab0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00005ac0: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
+00005ad0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00005ae0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00005af0: 6172 616d 733d 7061 796c 6f61 642c 2076  arams=payload, v
+00005b00: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+00005b10: 6465 6620 6564 6974 5f6d 6573 7361 6765  def edit_message
+00005b20: 5f6c 6976 655f 6c6f 6361 7469 6f6e 280a  _live_location(.
+00005b30: 2020 2020 2020 2020 746f 6b65 6e2c 206c          token, l
+00005b40: 6174 6974 7564 652c 206c 6f6e 6769 7475  atitude, longitu
+00005b50: 6465 2c20 6368 6174 5f69 643d 4e6f 6e65  de, chat_id=None
+00005b60: 2c20 6d65 7373 6167 655f 6964 3d4e 6f6e  , message_id=Non
+00005b70: 652c 0a20 2020 2020 2020 2069 6e6c 696e  e,.        inlin
+00005b80: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+00005b90: 652c 2072 6570 6c79 5f6d 6172 6b75 703d  e, reply_markup=
+00005ba0: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+00005bb0: 6e65 2c0a 2020 2020 2020 2020 686f 7269  ne,.        hori
+00005bc0: 7a6f 6e74 616c 5f61 6363 7572 6163 793d  zontal_accuracy=
+00005bd0: 4e6f 6e65 2c20 6865 6164 696e 673d 4e6f  None, heading=No
+00005be0: 6e65 2c20 7072 6f78 696d 6974 795f 616c  ne, proximity_al
+00005bf0: 6572 745f 7261 6469 7573 3d4e 6f6e 652c  ert_radius=None,
+00005c00: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+00005c10: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00005c20: 7227 6564 6974 4d65 7373 6167 654c 6976  r'editMessageLiv
+00005c30: 654c 6f63 6174 696f 6e27 0a20 2020 2070  eLocation'.    p
+00005c40: 6179 6c6f 6164 203d 207b 276c 6174 6974  ayload = {'latit
+00005c50: 7564 6527 3a20 6c61 7469 7475 6465 2c20  ude': latitude, 
+00005c60: 276c 6f6e 6769 7475 6465 273a 206c 6f6e  'longitude': lon
+00005c70: 6769 7475 6465 7d0a 2020 2020 6966 2063  gitude}.    if c
+00005c80: 6861 745f 6964 3a0a 2020 2020 2020 2020  hat_id:.        
+00005c90: 7061 796c 6f61 645b 2763 6861 745f 6964  payload['chat_id
+00005ca0: 275d 203d 2063 6861 745f 6964 0a20 2020  '] = chat_id.   
+00005cb0: 2069 6620 6d65 7373 6167 655f 6964 3a0a   if message_id:.
+00005cc0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005cd0: 276d 6573 7361 6765 5f69 6427 5d20 3d20  'message_id'] = 
+00005ce0: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
+00005cf0: 6620 686f 7269 7a6f 6e74 616c 5f61 6363  f horizontal_acc
+00005d00: 7572 6163 793a 0a20 2020 2020 2020 2070  uracy:.        p
+00005d10: 6179 6c6f 6164 5b27 686f 7269 7a6f 6e74  ayload['horizont
+00005d20: 616c 5f61 6363 7572 6163 7927 5d20 3d20  al_accuracy'] = 
+00005d30: 686f 7269 7a6f 6e74 616c 5f61 6363 7572  horizontal_accur
+00005d40: 6163 790a 2020 2020 6966 2068 6561 6469  acy.    if headi
+00005d50: 6e67 3a0a 2020 2020 2020 2020 7061 796c  ng:.        payl
+00005d60: 6f61 645b 2768 6561 6469 6e67 275d 203d  oad['heading'] =
+00005d70: 2068 6561 6469 6e67 0a20 2020 2069 6620   heading.    if 
+00005d80: 7072 6f78 696d 6974 795f 616c 6572 745f  proximity_alert_
+00005d90: 7261 6469 7573 3a0a 2020 2020 2020 2020  radius:.        
+00005da0: 7061 796c 6f61 645b 2770 726f 7869 6d69  payload['proximi
+00005db0: 7479 5f61 6c65 7274 5f72 6164 6975 7327  ty_alert_radius'
+00005dc0: 5d20 3d20 7072 6f78 696d 6974 795f 616c  ] = proximity_al
+00005dd0: 6572 745f 7261 6469 7573 0a20 2020 2069  ert_radius.    i
+00005de0: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
+00005df0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+00005e00: 6c6f 6164 5b27 696e 6c69 6e65 5f6d 6573  load['inline_mes
+00005e10: 7361 6765 5f69 6427 5d20 3d20 696e 6c69  sage_id'] = inli
+00005e20: 6e65 5f6d 6573 7361 6765 5f69 640a 2020  ne_message_id.  
+00005e30: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00005e40: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
+00005e50: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
+00005e60: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
+00005e70: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
+00005e80: 7029 0a20 2020 2069 6620 7469 6d65 6f75  p).    if timeou
+00005e90: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
+00005ea0: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
+00005eb0: 7469 6d65 6f75 740a 2020 2020 7265 7475  timeout.    retu
+00005ec0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00005ed0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00005ee0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00005ef0: 6164 2c20 7665 7269 6679 3d76 6572 6966  ad, verify=verif
+00005f00: 7929 0a0a 0a64 6566 2073 746f 705f 6d65  y)...def stop_me
+00005f10: 7373 6167 655f 6c69 7665 5f6c 6f63 6174  ssage_live_locat
+00005f20: 696f 6e28 0a20 2020 2020 2020 2074 6f6b  ion(.        tok
+00005f30: 656e 2c20 6368 6174 5f69 643d 4e6f 6e65  en, chat_id=None
+00005f40: 2c20 6d65 7373 6167 655f 6964 3d4e 6f6e  , message_id=Non
+00005f50: 652c 0a20 2020 2020 2020 2069 6e6c 696e  e,.        inlin
+00005f60: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+00005f70: 652c 2072 6570 6c79 5f6d 6172 6b75 703d  e, reply_markup=
+00005f80: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+00005f90: 6e65 2c20 7665 7269 6679 3d54 7275 6529  ne, verify=True)
+00005fa0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00005fb0: 203d 2072 2773 746f 704d 6573 7361 6765   = r'stopMessage
+00005fc0: 4c69 7665 4c6f 6361 7469 6f6e 270a 2020  LiveLocation'.  
+00005fd0: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
+00005fe0: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
+00005ff0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00006000: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
+00006010: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
+00006020: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
+00006030: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
+00006040: 6964 275d 203d 206d 6573 7361 6765 5f69  id'] = message_i
+00006050: 640a 2020 2020 6966 2069 6e6c 696e 655f  d.    if inline_
+00006060: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+00006070: 2020 2020 7061 796c 6f61 645b 2769 6e6c      payload['inl
+00006080: 696e 655f 6d65 7373 6167 655f 6964 275d  ine_message_id']
+00006090: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
+000060a0: 655f 6964 0a20 2020 2069 6620 7265 706c  e_id.    if repl
+000060b0: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
+000060c0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
+000060d0: 5f6d 6172 6b75 7027 5d20 3d20 5f63 6f6e  _markup'] = _con
+000060e0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+000060f0: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
+00006100: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
+00006110: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
+00006120: 7574 275d 203d 2074 696d 656f 7574 0a20  ut'] = timeout. 
+00006130: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+00006140: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00006150: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00006160: 733d 7061 796c 6f61 642c 2076 6572 6966  s=payload, verif
+00006170: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00006180: 7365 6e64 5f76 656e 7565 280a 2020 2020  send_venue(.    
+00006190: 2020 2020 746f 6b65 6e2c 2063 6861 745f      token, chat_
+000061a0: 6964 2c20 6c61 7469 7475 6465 2c20 6c6f  id, latitude, lo
+000061b0: 6e67 6974 7564 652c 2074 6974 6c65 2c20  ngitude, title, 
+000061c0: 6164 6472 6573 732c 0a20 2020 2020 2020  address,.       
+000061d0: 2066 6f75 7273 7175 6172 655f 6964 3d4e   foursquare_id=N
+000061e0: 6f6e 652c 2066 6f75 7273 7175 6172 655f  one, foursquare_
+000061f0: 7479 7065 3d4e 6f6e 652c 2064 6973 6162  type=None, disab
+00006200: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00006210: 4e6f 6e65 2c0a 2020 2020 2020 2020 7265  None,.        re
+00006220: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+00006230: 2074 696d 656f 7574 3d4e 6f6e 652c 2067   timeout=None, g
+00006240: 6f6f 676c 655f 706c 6163 655f 6964 3d4e  oogle_place_id=N
+00006250: 6f6e 652c 0a20 2020 2020 2020 2067 6f6f  one,.        goo
+00006260: 676c 655f 706c 6163 655f 7479 7065 3d4e  gle_place_type=N
+00006270: 6f6e 652c 2070 726f 7465 6374 5f63 6f6e  one, protect_con
+00006280: 7465 6e74 3d4e 6f6e 652c 206d 6573 7361  tent=None, messa
+00006290: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
+000062a0: 652c 2072 6570 6c79 5f70 6172 616d 6574  e, reply_paramet
+000062b0: 6572 733d 4e6f 6e65 2c0a 2020 2020 2020  ers=None,.      
+000062c0: 2020 6275 7369 6e65 7373 5f63 6f6e 6e65    business_conne
+000062d0: 6374 696f 6e5f 6964 3d4e 6f6e 652c 2076  ction_id=None, v
+000062e0: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+000062f0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00006300: 7365 6e64 5665 6e75 6527 0a20 2020 2070  sendVenue'.    p
+00006310: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+00006320: 6964 273a 2063 6861 745f 6964 2c20 276c  id': chat_id, 'l
+00006330: 6174 6974 7564 6527 3a20 6c61 7469 7475  atitude': latitu
+00006340: 6465 2c20 276c 6f6e 6769 7475 6465 273a  de, 'longitude':
+00006350: 206c 6f6e 6769 7475 6465 2c20 2774 6974   longitude, 'tit
+00006360: 6c65 273a 2074 6974 6c65 2c20 2761 6464  le': title, 'add
+00006370: 7265 7373 273a 2061 6464 7265 7373 7d0a  ress': address}.
+00006380: 2020 2020 6966 2066 6f75 7273 7175 6172      if foursquar
+00006390: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
+000063a0: 796c 6f61 645b 2766 6f75 7273 7175 6172  yload['foursquar
+000063b0: 655f 6964 275d 203d 2066 6f75 7273 7175  e_id'] = foursqu
+000063c0: 6172 655f 6964 0a20 2020 2069 6620 666f  are_id.    if fo
+000063d0: 7572 7371 7561 7265 5f74 7970 653a 0a20  ursquare_type:. 
+000063e0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000063f0: 666f 7572 7371 7561 7265 5f74 7970 6527  foursquare_type'
+00006400: 5d20 3d20 666f 7572 7371 7561 7265 5f74  ] = foursquare_t
+00006410: 7970 650a 2020 2020 6966 2064 6973 6162  ype.    if disab
+00006420: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
+00006430: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00006440: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
+00006450: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00006460: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
+00006470: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
+00006480: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+00006490: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000064a0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+000064b0: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+000064c0: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+000064d0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+000064e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000064f0: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
+00006500: 6d65 6f75 740a 2020 2020 6966 2067 6f6f  meout.    if goo
+00006510: 676c 655f 706c 6163 655f 6964 3a0a 2020  gle_place_id:.  
+00006520: 2020 2020 2020 7061 796c 6f61 645b 2767        payload['g
+00006530: 6f6f 676c 655f 706c 6163 655f 6964 275d  oogle_place_id']
+00006540: 203d 2067 6f6f 676c 655f 706c 6163 655f   = google_place_
+00006550: 6964 0a20 2020 2069 6620 676f 6f67 6c65  id.    if google
+00006560: 5f70 6c61 6365 5f74 7970 653a 0a20 2020  _place_type:.   
+00006570: 2020 2020 2070 6179 6c6f 6164 5b27 676f       payload['go
+00006580: 6f67 6c65 5f70 6c61 6365 5f74 7970 6527  ogle_place_type'
+00006590: 5d20 3d20 676f 6f67 6c65 5f70 6c61 6365  ] = google_place
+000065a0: 5f74 7970 650a 2020 2020 6966 2070 726f  _type.    if pro
+000065b0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+000065c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000065d0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
+000065e0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
+000065f0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00006600: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00006610: 7265 6164 5f69 6420 6973 206e 6f74 204e  read_id is not N
+00006620: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00006630: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
+00006640: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
+00006650: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
+00006660: 2020 6966 2072 6570 6c79 5f70 6172 616d    if reply_param
+00006670: 6574 6572 7320 6973 206e 6f74 204e 6f6e  eters is not Non
+00006680: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00006690: 6164 5b27 7265 706c 795f 7061 7261 6d65  ad['reply_parame
+000066a0: 7465 7273 275d 203d 2072 6570 6c79 5f70  ters'] = reply_p
+000066b0: 6172 616d 6574 6572 732e 746f 5f6a 736f  arameters.to_jso
+000066c0: 6e28 290a 2020 2020 6966 2062 7573 696e  n().    if busin
+000066d0: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+000066e0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+000066f0: 6164 5b27 6275 7369 6e65 7373 5f63 6f6e  ad['business_con
+00006700: 6e65 6374 696f 6e5f 6964 275d 203d 2062  nection_id'] = b
+00006710: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00006720: 6f6e 5f69 640a 2020 2020 7265 7475 726e  on_id.    return
+00006730: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00006740: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00006750: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00006760: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00006770: 0a0a 0a64 6566 2073 656e 645f 636f 6e74  ...def send_cont
+00006780: 6163 7428 0a20 2020 2020 2020 2074 6f6b  act(.        tok
+00006790: 656e 2c20 6368 6174 5f69 642c 2070 686f  en, chat_id, pho
+000067a0: 6e65 5f6e 756d 6265 722c 2066 6972 7374  ne_number, first
+000067b0: 5f6e 616d 652c 206c 6173 745f 6e61 6d65  _name, last_name
+000067c0: 3d4e 6f6e 652c 2076 6361 7264 3d4e 6f6e  =None, vcard=Non
+000067d0: 652c 0a20 2020 2020 2020 2064 6973 6162  e,.        disab
+000067e0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+000067f0: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
+00006800: 7570 3d4e 6f6e 652c 2074 696d 656f 7574  up=None, timeout
+00006810: 3d4e 6f6e 652c 0a20 2020 2020 2020 2070  =None,.        p
+00006820: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00006830: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+00006840: 6561 645f 6964 3d4e 6f6e 652c 2072 6570  ead_id=None, rep
+00006850: 6c79 5f70 6172 616d 6574 6572 733d 4e6f  ly_parameters=No
+00006860: 6e65 2c20 6275 7369 6e65 7373 5f63 6f6e  ne, business_con
+00006870: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 652c  nection_id=None,
+00006880: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+00006890: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+000068a0: 7227 7365 6e64 436f 6e74 6163 7427 0a20  r'sendContact'. 
+000068b0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+000068c0: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+000068d0: 2c20 2770 686f 6e65 5f6e 756d 6265 7227  , 'phone_number'
+000068e0: 3a20 7068 6f6e 655f 6e75 6d62 6572 2c20  : phone_number, 
+000068f0: 2766 6972 7374 5f6e 616d 6527 3a20 6669  'first_name': fi
+00006900: 7273 745f 6e61 6d65 7d0a 2020 2020 6966  rst_name}.    if
+00006910: 206c 6173 745f 6e61 6d65 3a0a 2020 2020   last_name:.    
+00006920: 2020 2020 7061 796c 6f61 645b 276c 6173      payload['las
+00006930: 745f 6e61 6d65 275d 203d 206c 6173 745f  t_name'] = last_
+00006940: 6e61 6d65 0a20 2020 2069 6620 7663 6172  name.    if vcar
+00006950: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00006960: 6164 5b27 7663 6172 6427 5d20 3d20 7663  ad['vcard'] = vc
+00006970: 6172 640a 2020 2020 6966 2064 6973 6162  ard.    if disab
+00006980: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
+00006990: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000069a0: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
+000069b0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+000069c0: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
+000069d0: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
+000069e0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+000069f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006a00: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+00006a10: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+00006a20: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+00006a30: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00006a40: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006a50: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
+00006a60: 6d65 6f75 740a 2020 2020 6966 2070 726f  meout.    if pro
+00006a70: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+00006a80: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00006a90: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
+00006aa0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
+00006ab0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00006ac0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00006ad0: 7265 6164 5f69 6420 6973 206e 6f74 204e  read_id is not N
+00006ae0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00006af0: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
+00006b00: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
+00006b10: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
+00006b20: 2020 6966 2072 6570 6c79 5f70 6172 616d    if reply_param
+00006b30: 6574 6572 7320 6973 206e 6f74 204e 6f6e  eters is not Non
+00006b40: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00006b50: 6164 5b27 7265 706c 795f 7061 7261 6d65  ad['reply_parame
+00006b60: 7465 7273 275d 203d 2072 6570 6c79 5f70  ters'] = reply_p
+00006b70: 6172 616d 6574 6572 732e 746f 5f6a 736f  arameters.to_jso
+00006b80: 6e28 290a 2020 2020 6966 2062 7573 696e  n().    if busin
+00006b90: 6573 735f 636f 6e6e 6563 7469 6f6e 5f69  ess_connection_i
+00006ba0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+00006bb0: 6164 5b27 6275 7369 6e65 7373 5f63 6f6e  ad['business_con
+00006bc0: 6e65 6374 696f 6e5f 6964 275d 203d 2062  nection_id'] = b
+00006bd0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00006be0: 6f6e 5f69 640a 0a20 2020 2072 6574 7572  on_id..    retur
+00006bf0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00006c00: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00006c10: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00006c20: 642c 2076 6572 6966 793d 7665 7269 6679  d, verify=verify
+00006c30: 290a 0a0a 6465 6620 7365 6e64 5f63 6861  )...def send_cha
+00006c40: 745f 6163 7469 6f6e 2874 6f6b 656e 2c20  t_action(token, 
+00006c50: 6368 6174 5f69 642c 2061 6374 696f 6e2c  chat_id, action,
+00006c60: 2074 696d 656f 7574 3d4e 6f6e 652c 206d   timeout=None, m
+00006c70: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00006c80: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
+00006c90: 2020 2020 2020 2020 2020 2020 6275 7369              busi
+00006ca0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00006cb0: 6964 3d4e 6f6e 652c 2076 6572 6966 793d  id=None, verify=
+00006cc0: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+00006cd0: 645f 7572 6c20 3d20 7227 7365 6e64 4368  d_url = r'sendCh
+00006ce0: 6174 4163 7469 6f6e 270a 2020 2020 7061  atAction'.    pa
+00006cf0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00006d00: 6427 3a20 6368 6174 5f69 642c 2027 6163  d': chat_id, 'ac
+00006d10: 7469 6f6e 273a 2061 6374 696f 6e7d 0a20  tion': action}. 
+00006d20: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
+00006d30: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00006d40: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
+00006d50: 6f75 740a 2020 2020 6966 206d 6573 7361  out.    if messa
+00006d60: 6765 5f74 6872 6561 645f 6964 2069 7320  ge_thread_id is 
+00006d70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00006d80: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+00006d90: 6765 5f74 6872 6561 645f 6964 275d 203d  ge_thread_id'] =
+00006da0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00006db0: 6964 0a20 2020 2069 6620 6275 7369 6e65  id.    if busine
+00006dc0: 7373 5f63 6f6e 6e65 6374 696f 6e5f 6964  ss_connection_id
+00006dd0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00006de0: 645b 2762 7573 696e 6573 735f 636f 6e6e  d['business_conn
+00006df0: 6563 7469 6f6e 5f69 6427 5d20 3d20 6275  ection_id'] = bu
+00006e00: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00006e10: 6e5f 6964 0a20 2020 2072 6574 7572 6e20  n_id.    return 
+00006e20: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00006e30: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00006e40: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00006e50: 2076 6572 6966 793d 7665 7269 6679 290a   verify=verify).
+00006e60: 0a0a 6465 6620 7365 6e64 5f76 6964 656f  ..def send_video
+00006e70: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+00006e80: 2064 6174 612c 2064 7572 6174 696f 6e3d   data, duration=
+00006e90: 4e6f 6e65 2c20 6361 7074 696f 6e3d 4e6f  None, caption=No
+00006ea0: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
+00006eb0: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
+00006ec0: 2020 2020 2020 7061 7273 655f 6d6f 6465        parse_mode
+00006ed0: 3d4e 6f6e 652c 2073 7570 706f 7274 735f  =None, supports_
+00006ee0: 7374 7265 616d 696e 673d 4e6f 6e65 2c20  streaming=None, 
+00006ef0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00006f00: 7469 6f6e 3d4e 6f6e 652c 2074 696d 656f  tion=None, timeo
+00006f10: 7574 3d4e 6f6e 652c 0a20 2020 2020 2020  ut=None,.       
+00006f20: 2020 2020 2020 2020 7468 756d 626e 6169          thumbnai
+00006f30: 6c3d 4e6f 6e65 2c20 7769 6474 683d 4e6f  l=None, width=No
+00006f40: 6e65 2c20 6865 6967 6874 3d4e 6f6e 652c  ne, height=None,
+00006f50: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00006f60: 733d 4e6f 6e65 2c20 7072 6f74 6563 745f  s=None, protect_
+00006f70: 636f 6e74 656e 743d 4e6f 6e65 2c0a 2020  content=None,.  
+00006f80: 2020 2020 2020 2020 2020 2020 206d 6573               mes
+00006f90: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+00006fa0: 6f6e 652c 2068 6173 5f73 706f 696c 6572  one, has_spoiler
+00006fb0: 3d4e 6f6e 652c 2072 6570 6c79 5f70 6172  =None, reply_par
+00006fc0: 616d 6574 6572 733d 4e6f 6e65 2c20 6275  ameters=None, bu
+00006fd0: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00006fe0: 6e5f 6964 3d4e 6f6e 652c 0a20 2020 2020  n_id=None,.     
+00006ff0: 2020 2020 2020 2020 2020 7665 7269 6679            verify
+00007000: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+00007010: 6f64 5f75 726c 203d 2072 2773 656e 6456  od_url = r'sendV
+00007020: 6964 656f 270a 2020 2020 7061 796c 6f61  ideo'.    payloa
+00007030: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+00007040: 6368 6174 5f69 647d 0a20 2020 2066 696c  chat_id}.    fil
+00007050: 6573 203d 204e 6f6e 650a 2020 2020 6966  es = None.    if
+00007060: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
+00007070: 696e 6728 6461 7461 293a 0a20 2020 2020  ing(data):.     
+00007080: 2020 2066 696c 6573 203d 207b 2776 6964     files = {'vid
+00007090: 656f 273a 2064 6174 617d 0a20 2020 2065  eo': data}.    e
+000070a0: 6c73 653a 0a20 2020 2020 2020 2070 6179  lse:.        pay
+000070b0: 6c6f 6164 5b27 7669 6465 6f27 5d20 3d20  load['video'] = 
+000070c0: 6461 7461 0a20 2020 2069 6620 6475 7261  data.    if dura
+000070d0: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
+000070e0: 796c 6f61 645b 2764 7572 6174 696f 6e27  yload['duration'
+000070f0: 5d20 3d20 6475 7261 7469 6f6e 0a20 2020  ] = duration.   
+00007100: 2069 6620 6361 7074 696f 6e3a 0a20 2020   if caption:.   
+00007110: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
+00007120: 7074 696f 6e27 5d20 3d20 6361 7074 696f  ption'] = captio
+00007130: 6e0a 2020 2020 6966 2072 6570 6c79 5f6d  n.    if reply_m
+00007140: 6172 6b75 703a 0a20 2020 2020 2020 2070  arkup:.        p
+00007150: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+00007160: 726b 7570 275d 203d 205f 636f 6e76 6572  rkup'] = _conver
+00007170: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+00007180: 6172 6b75 7029 0a20 2020 2069 6620 7061  arkup).    if pa
+00007190: 7273 655f 6d6f 6465 3a0a 2020 2020 2020  rse_mode:.      
+000071a0: 2020 7061 796c 6f61 645b 2770 6172 7365    payload['parse
+000071b0: 5f6d 6f64 6527 5d20 3d20 7061 7273 655f  _mode'] = parse_
+000071c0: 6d6f 6465 0a20 2020 2069 6620 7375 7070  mode.    if supp
+000071d0: 6f72 7473 5f73 7472 6561 6d69 6e67 2069  orts_streaming i
+000071e0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000071f0: 2020 2020 7061 796c 6f61 645b 2773 7570      payload['sup
+00007200: 706f 7274 735f 7374 7265 616d 696e 6727  ports_streaming'
+00007210: 5d20 3d20 7375 7070 6f72 7473 5f73 7472  ] = supports_str
+00007220: 6561 6d69 6e67 0a20 2020 2069 6620 6469  eaming.    if di
+00007230: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00007240: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
+00007250: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007260: 2764 6973 6162 6c65 5f6e 6f74 6966 6963  'disable_notific
+00007270: 6174 696f 6e27 5d20 3d20 6469 7361 626c  ation'] = disabl
+00007280: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
+00007290: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
+000072a0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000072b0: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
+000072c0: 6f75 740a 2020 2020 6966 2074 6875 6d62  out.    if thumb
+000072d0: 6e61 696c 3a0a 2020 2020 2020 2020 6966  nail:.        if
+000072e0: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
+000072f0: 696e 6728 7468 756d 626e 6169 6c29 3a0a  ing(thumbnail):.
+00007300: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+00007310: 696c 6573 3a0a 2020 2020 2020 2020 2020  iles:.          
+00007320: 2020 2020 2020 6669 6c65 735b 2774 6875        files['thu
+00007330: 6d62 6e61 696c 275d 203d 2074 6875 6d62  mbnail'] = thumb
+00007340: 6e61 696c 0a20 2020 2020 2020 2020 2020  nail.           
+00007350: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00007360: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
+00007370: 2774 6875 6d62 6e61 696c 273a 2074 6875  'thumbnail': thu
+00007380: 6d62 6e61 696c 7d0a 2020 2020 2020 2020  mbnail}.        
+00007390: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000073a0: 2020 7061 796c 6f61 645b 2774 6875 6d62    payload['thumb
+000073b0: 6e61 696c 275d 203d 2074 6875 6d62 6e61  nail'] = thumbna
+000073c0: 696c 0a20 2020 2069 6620 7769 6474 683a  il.    if width:
+000073d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000073e0: 5b27 7769 6474 6827 5d20 3d20 7769 6474  ['width'] = widt
+000073f0: 680a 2020 2020 6966 2068 6569 6768 743a  h.    if height:
+00007400: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007410: 5b27 6865 6967 6874 275d 203d 2068 6569  ['height'] = hei
+00007420: 6768 740a 2020 2020 6966 2063 6170 7469  ght.    if capti
+00007430: 6f6e 5f65 6e74 6974 6965 733a 0a20 2020  on_entities:.   
+00007440: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
+00007450: 7074 696f 6e5f 656e 7469 7469 6573 275d  ption_entities']
+00007460: 203d 206a 736f 6e2e 6475 6d70 7328 7479   = json.dumps(ty
+00007470: 7065 732e 4d65 7373 6167 6545 6e74 6974  pes.MessageEntit
+00007480: 792e 746f 5f6c 6973 745f 6f66 5f64 6963  y.to_list_of_dic
+00007490: 7473 2863 6170 7469 6f6e 5f65 6e74 6974  ts(caption_entit
+000074a0: 6965 7329 290a 2020 2020 6966 2070 726f  ies)).    if pro
+000074b0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
+000074c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000074d0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
+000074e0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
+000074f0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
+00007500: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00007510: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
+00007520: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
+00007530: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
+00007540: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00007550: 640a 2020 2020 6966 2068 6173 5f73 706f  d.    if has_spo
+00007560: 696c 6572 2069 7320 6e6f 7420 4e6f 6e65  iler is not None
+00007570: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00007580: 645b 2768 6173 5f73 706f 696c 6572 275d  d['has_spoiler']
+00007590: 203d 2068 6173 5f73 706f 696c 6572 0a20   = has_spoiler. 
+000075a0: 2020 2069 6620 7265 706c 795f 7061 7261     if reply_para
+000075b0: 6d65 7465 7273 2069 7320 6e6f 7420 4e6f  meters is not No
+000075c0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+000075d0: 6f61 645b 2772 6570 6c79 5f70 6172 616d  oad['reply_param
+000075e0: 6574 6572 7327 5d20 3d20 7265 706c 795f  eters'] = reply_
+000075f0: 7061 7261 6d65 7465 7273 2e74 6f5f 6a73  parameters.to_js
+00007600: 6f6e 2829 0a20 2020 2069 6620 6275 7369  on().    if busi
+00007610: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00007620: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+00007630: 6f61 645b 2762 7573 696e 6573 735f 636f  oad['business_co
+00007640: 6e6e 6563 7469 6f6e 5f69 6427 5d20 3d20  nnection_id'] = 
+00007650: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+00007660: 696f 6e5f 6964 0a0a 2020 2020 7265 7475  ion_id..    retu
+00007670: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00007680: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00007690: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+000076a0: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
+000076b0: 206d 6574 686f 643d 2770 6f73 7427 2c20   method='post', 
+000076c0: 7665 7269 6679 3d76 6572 6966 7929 0a0a  verify=verify)..
+000076d0: 0a64 6566 2073 656e 645f 616e 696d 6174  .def send_animat
+000076e0: 696f 6e28 0a20 2020 2020 2020 2074 6f6b  ion(.        tok
+000076f0: 656e 2c20 6368 6174 5f69 642c 2064 6174  en, chat_id, dat
+00007700: 612c 2064 7572 6174 696f 6e3d 4e6f 6e65  a, duration=None
+00007710: 2c20 6361 7074 696f 6e3d 4e6f 6e65 2c20  , caption=None, 
+00007720: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00007730: 652c 0a20 2020 2020 2020 2070 6172 7365  e,.        parse
+00007740: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
+00007750: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00007760: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+00007770: 6f6e 652c 2074 6875 6d62 6e61 696c 3d4e  one, thumbnail=N
+00007780: 6f6e 652c 2063 6170 7469 6f6e 5f65 6e74  one, caption_ent
+00007790: 6974 6965 733d 4e6f 6e65 2c0a 2020 2020  ities=None,.    
+000077a0: 2020 2020 7072 6f74 6563 745f 636f 6e74      protect_cont
+000077b0: 656e 743d 4e6f 6e65 2c20 7769 6474 683d  ent=None, width=
+000077c0: 4e6f 6e65 2c20 6865 6967 6874 3d4e 6f6e  None, height=Non
+000077d0: 652c 206d 6573 7361 6765 5f74 6872 6561  e, message_threa
+000077e0: 645f 6964 3d4e 6f6e 652c 2072 6570 6c79  d_id=None, reply
+000077f0: 5f70 6172 616d 6574 6572 733d 4e6f 6e65  _parameters=None
+00007800: 2c0a 2020 2020 2020 2020 6861 735f 7370  ,.        has_sp
+00007810: 6f69 6c65 723d 4e6f 6e65 2c20 6275 7369  oiler=None, busi
+00007820: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00007830: 6964 3d4e 6f6e 652c 2076 6572 6966 793d  id=None, verify=
+00007840: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+00007850: 645f 7572 6c20 3d20 7227 7365 6e64 416e  d_url = r'sendAn
+00007860: 696d 6174 696f 6e27 0a20 2020 2070 6179  imation'.    pay
+00007870: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+00007880: 273a 2063 6861 745f 6964 7d0a 2020 2020  ': chat_id}.    
+00007890: 6669 6c65 7320 3d20 4e6f 6e65 0a20 2020  files = None.   
+000078a0: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
+000078b0: 7374 7269 6e67 2864 6174 6129 3a0a 2020  string(data):.  
+000078c0: 2020 2020 2020 6669 6c65 7320 3d20 7b27        files = {'
+000078d0: 616e 696d 6174 696f 6e27 3a20 6461 7461  animation': data
+000078e0: 7d0a 2020 2020 656c 7365 3a0a 2020 2020  }.    else:.    
+000078f0: 2020 2020 7061 796c 6f61 645b 2761 6e69      payload['ani
+00007900: 6d61 7469 6f6e 275d 203d 2064 6174 610a  mation'] = data.
+00007910: 2020 2020 6966 2064 7572 6174 696f 6e3a      if duration:
+00007920: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007930: 5b27 6475 7261 7469 6f6e 275d 203d 2064  ['duration'] = d
+00007940: 7572 6174 696f 6e0a 2020 2020 6966 2063  uration.    if c
+00007950: 6170 7469 6f6e 3a0a 2020 2020 2020 2020  aption:.        
+00007960: 7061 796c 6f61 645b 2763 6170 7469 6f6e  payload['caption
+00007970: 275d 203d 2063 6170 7469 6f6e 0a20 2020  '] = caption.   
+00007980: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
+00007990: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000079a0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
+000079b0: 5d20 3d20 5f63 6f6e 7665 7274 5f6d 6172  ] = _convert_mar
+000079c0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
+000079d0: 290a 2020 2020 6966 2070 6172 7365 5f6d  ).    if parse_m
+000079e0: 6f64 653a 0a20 2020 2020 2020 2070 6179  ode:.        pay
+000079f0: 6c6f 6164 5b27 7061 7273 655f 6d6f 6465  load['parse_mode
+00007a00: 275d 203d 2070 6172 7365 5f6d 6f64 650a  '] = parse_mode.
+00007a10: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+00007a20: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+00007a30: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00007a40: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+00007a50: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
+00007a60: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00007a70: 6963 6174 696f 6e0a 2020 2020 6966 2074  ication.    if t
+00007a80: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
+00007a90: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+00007aa0: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
+00007ab0: 2069 6620 7468 756d 626e 6169 6c3a 0a20   if thumbnail:. 
+00007ac0: 2020 2020 2020 2069 6620 6e6f 7420 7574         if not ut
+00007ad0: 696c 2e69 735f 7374 7269 6e67 2874 6875  il.is_string(thu
+00007ae0: 6d62 6e61 696c 293a 0a20 2020 2020 2020  mbnail):.       
+00007af0: 2020 2020 2069 6620 6669 6c65 733a 0a20       if files:. 
+00007b00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00007b10: 696c 6573 5b27 7468 756d 626e 6169 6c27  iles['thumbnail'
+00007b20: 5d20 3d20 7468 756d 626e 6169 6c0a 2020  ] = thumbnail.  
+00007b30: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00007b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b50: 6669 6c65 7320 3d20 7b27 7468 756d 626e  files = {'thumbn
+00007b60: 6169 6c27 3a20 7468 756d 626e 6169 6c7d  ail': thumbnail}
+00007b70: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00007b80: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+00007b90: 6164 5b27 7468 756d 626e 6169 6c27 5d20  ad['thumbnail'] 
+00007ba0: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
+00007bb0: 6966 2063 6170 7469 6f6e 5f65 6e74 6974  if caption_entit
+00007bc0: 6965 733a 0a20 2020 2020 2020 2070 6179  ies:.        pay
+00007bd0: 6c6f 6164 5b27 6361 7074 696f 6e5f 656e  load['caption_en
+00007be0: 7469 7469 6573 275d 203d 206a 736f 6e2e  tities'] = json.
+00007bf0: 6475 6d70 7328 7479 7065 732e 4d65 7373  dumps(types.Mess
+00007c00: 6167 6545 6e74 6974 792e 746f 5f6c 6973  ageEntity.to_lis
+00007c10: 745f 6f66 5f64 6963 7473 2863 6170 7469  t_of_dicts(capti
+00007c20: 6f6e 5f65 6e74 6974 6965 7329 290a 2020  on_entities)).  
+00007c30: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+00007c40: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+00007c50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00007c60: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
+00007c70: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
+00007c80: 6f6e 7465 6e74 0a20 2020 2069 6620 7769  ontent.    if wi
+00007c90: 6474 683a 0a20 2020 2020 2020 2070 6179  dth:.        pay
+00007ca0: 6c6f 6164 5b27 7769 6474 6827 5d20 3d20  load['width'] = 
+00007cb0: 7769 6474 680a 2020 2020 6966 2068 6569  width.    if hei
+00007cc0: 6768 743a 0a20 2020 2020 2020 2070 6179  ght:.        pay
+00007cd0: 6c6f 6164 5b27 6865 6967 6874 275d 203d  load['height'] =
+00007ce0: 2068 6569 6768 740a 2020 2020 6966 206d   height.    if m
+00007cf0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00007d00: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00007d10: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+00007d20: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+00007d30: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
+00007d40: 6620 6861 735f 7370 6f69 6c65 7220 6973  f has_spoiler is
+00007d50: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00007d60: 2020 2070 6179 6c6f 6164 5b27 6861 735f     payload['has_
+00007d70: 7370 6f69 6c65 7227 5d20 3d20 6861 735f  spoiler'] = has_
+00007d80: 7370 6f69 6c65 720a 2020 2020 6966 2072  spoiler.    if r
+00007d90: 6570 6c79 5f70 6172 616d 6574 6572 7320  eply_parameters 
+00007da0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00007db0: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
+00007dc0: 706c 795f 7061 7261 6d65 7465 7273 275d  ply_parameters']
+00007dd0: 203d 2072 6570 6c79 5f70 6172 616d 6574   = reply_paramet
+00007de0: 6572 732e 746f 5f6a 736f 6e28 290a 2020  ers.to_json().  
+00007df0: 2020 6966 2062 7573 696e 6573 735f 636f    if business_co
+00007e00: 6e6e 6563 7469 6f6e 5f69 643a 0a20 2020  nnection_id:.   
+00007e10: 2020 2020 2070 6179 6c6f 6164 5b27 6275       payload['bu
+00007e20: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00007e30: 6e5f 6964 275d 203d 2062 7573 696e 6573  n_id'] = busines
+00007e40: 735f 636f 6e6e 6563 7469 6f6e 5f69 640a  s_connection_id.
+00007e50: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00007e60: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00007e70: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00007e80: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
+00007e90: 733d 6669 6c65 732c 206d 6574 686f 643d  s=files, method=
+00007ea0: 2770 6f73 7427 2c20 7665 7269 6679 3d76  'post', verify=v
+00007eb0: 6572 6966 7929 0a0a 0a64 6566 2073 656e  erify)...def sen
+00007ec0: 645f 766f 6963 6528 746f 6b65 6e2c 2063  d_voice(token, c
+00007ed0: 6861 745f 6964 2c20 766f 6963 652c 2063  hat_id, voice, c
+00007ee0: 6170 7469 6f6e 3d4e 6f6e 652c 2064 7572  aption=None, dur
+00007ef0: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
+00007f00: 795f 6d61 726b 7570 3d4e 6f6e 652c 0a20  y_markup=None,. 
+00007f10: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+00007f20: 7273 655f 6d6f 6465 3d4e 6f6e 652c 2064  rse_mode=None, d
+00007f30: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00007f40: 696f 6e3d 4e6f 6e65 2c20 7469 6d65 6f75  ion=None, timeou
+00007f50: 743d 4e6f 6e65 2c20 6361 7074 696f 6e5f  t=None, caption_
+00007f60: 656e 7469 7469 6573 3d4e 6f6e 652c 0a20  entities=None,. 
+00007f70: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00007f80: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
+00007f90: 6e65 2c20 6d65 7373 6167 655f 7468 7265  ne, message_thre
+00007fa0: 6164 5f69 643d 4e6f 6e65 2c20 7265 706c  ad_id=None, repl
+00007fb0: 795f 7061 7261 6d65 7465 7273 3d4e 6f6e  y_parameters=Non
+00007fc0: 652c 2062 7573 696e 6573 735f 636f 6e6e  e, business_conn
+00007fd0: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c0a  ection_id=None,.
+00007fe0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00007ff0: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+00008000: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00008010: 7365 6e64 566f 6963 6527 0a20 2020 2070  sendVoice'.    p
+00008020: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+00008030: 6964 273a 2063 6861 745f 6964 7d0a 2020  id': chat_id}.  
+00008040: 2020 6669 6c65 7320 3d20 4e6f 6e65 0a20    files = None. 
+00008050: 2020 2069 6620 6e6f 7420 7574 696c 2e69     if not util.i
+00008060: 735f 7374 7269 6e67 2876 6f69 6365 293a  s_string(voice):
+00008070: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
+00008080: 207b 2776 6f69 6365 273a 2076 6f69 6365   {'voice': voice
+00008090: 7d0a 2020 2020 656c 7365 3a0a 2020 2020  }.    else:.    
+000080a0: 2020 2020 7061 796c 6f61 645b 2776 6f69      payload['voi
+000080b0: 6365 275d 203d 2076 6f69 6365 0a20 2020  ce'] = voice.   
+000080c0: 2069 6620 6361 7074 696f 6e3a 0a20 2020   if caption:.   
+000080d0: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
+000080e0: 7074 696f 6e27 5d20 3d20 6361 7074 696f  ption'] = captio
+000080f0: 6e0a 2020 2020 6966 2064 7572 6174 696f  n.    if duratio
+00008100: 6e3a 0a20 2020 2020 2020 2070 6179 6c6f  n:.        paylo
+00008110: 6164 5b27 6475 7261 7469 6f6e 275d 203d  ad['duration'] =
+00008120: 2064 7572 6174 696f 6e0a 2020 2020 6966   duration.    if
+00008130: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
+00008140: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008150: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
+00008160: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+00008170: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
+00008180: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
+00008190: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000081a0: 645b 2770 6172 7365 5f6d 6f64 6527 5d20  d['parse_mode'] 
+000081b0: 3d20 7061 7273 655f 6d6f 6465 0a20 2020  = parse_mode.   
+000081c0: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+000081d0: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+000081e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+000081f0: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+00008200: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+00008210: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00008220: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
+00008230: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+00008240: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+00008250: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
+00008260: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00008270: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
+00008280: 6164 5b27 6361 7074 696f 6e5f 656e 7469  ad['caption_enti
+00008290: 7469 6573 275d 203d 206a 736f 6e2e 6475  ties'] = json.du
+000082a0: 6d70 7328 7479 7065 732e 4d65 7373 6167  mps(types.Messag
+000082b0: 6545 6e74 6974 792e 746f 5f6c 6973 745f  eEntity.to_list_
+000082c0: 6f66 5f64 6963 7473 2863 6170 7469 6f6e  of_dicts(caption
+000082d0: 5f65 6e74 6974 6965 7329 290a 2020 2020  _entities)).    
+000082e0: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
+000082f0: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
+00008300: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00008310: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
+00008320: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
+00008330: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
+00008340: 6167 655f 7468 7265 6164 5f69 643a 0a20  age_thread_id:. 
+00008350: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008360: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00008370: 6427 5d20 3d20 6d65 7373 6167 655f 7468  d'] = message_th
+00008380: 7265 6164 5f69 640a 2020 2020 6966 2072  read_id.    if r
+00008390: 6570 6c79 5f70 6172 616d 6574 6572 7320  eply_parameters 
+000083a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000083b0: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
+000083c0: 706c 795f 7061 7261 6d65 7465 7273 275d  ply_parameters']
+000083d0: 203d 2072 6570 6c79 5f70 6172 616d 6574   = reply_paramet
+000083e0: 6572 732e 746f 5f6a 736f 6e28 290a 2020  ers.to_json().  
+000083f0: 2020 6966 2062 7573 696e 6573 735f 636f    if business_co
+00008400: 6e6e 6563 7469 6f6e 5f69 643a 0a20 2020  nnection_id:.   
+00008410: 2020 2020 2070 6179 6c6f 6164 5b27 6275       payload['bu
+00008420: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+00008430: 6e5f 6964 275d 203d 2062 7573 696e 6573  n_id'] = busines
+00008440: 735f 636f 6e6e 6563 7469 6f6e 5f69 640a  s_connection_id.
+00008450: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00008460: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00008470: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00008480: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
+00008490: 733d 6669 6c65 732c 206d 6574 686f 643d  s=files, method=
+000084a0: 2770 6f73 7427 2c20 7665 7269 6679 3d76  'post', verify=v
+000084b0: 6572 6966 7929 0a0a 0a64 6566 2073 656e  erify)...def sen
+000084c0: 645f 7669 6465 6f5f 6e6f 7465 2874 6f6b  d_video_note(tok
+000084d0: 656e 2c20 6368 6174 5f69 642c 2064 6174  en, chat_id, dat
+000084e0: 612c 2064 7572 6174 696f 6e3d 4e6f 6e65  a, duration=None
+000084f0: 2c20 6c65 6e67 7468 3d4e 6f6e 652c 2072  , length=None, r
+00008500: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+00008510: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00008520: 2020 2020 2020 6469 7361 626c 655f 6e6f        disable_no
+00008530: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+00008540: 2074 696d 656f 7574 3d4e 6f6e 652c 2074   timeout=None, t
+00008550: 6875 6d62 6e61 696c 3d4e 6f6e 652c 2070  humbnail=None, p
+00008560: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00008570: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00008580: 2020 2020 2020 2020 206d 6573 7361 6765           message
+00008590: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
+000085a0: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+000085b0: 733d 4e6f 6e65 2c20 6275 7369 6e65 7373  s=None, business
+000085c0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3d4e  _connection_id=N
+000085d0: 6f6e 652c 2076 6572 6966 793d 5472 7565  one, verify=True
+000085e0: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+000085f0: 6c20 3d20 7227 7365 6e64 5669 6465 6f4e  l = r'sendVideoN
+00008600: 6f74 6527 0a20 2020 2070 6179 6c6f 6164  ote'.    payload
+00008610: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00008620: 6861 745f 6964 7d0a 2020 2020 6669 6c65  hat_id}.    file
+00008630: 7320 3d20 4e6f 6e65 0a20 2020 2069 6620  s = None.    if 
+00008640: 6e6f 7420 7574 696c 2e69 735f 7374 7269  not util.is_stri
+00008650: 6e67 2864 6174 6129 3a0a 2020 2020 2020  ng(data):.      
+00008660: 2020 6669 6c65 7320 3d20 7b27 7669 6465    files = {'vide
+00008670: 6f5f 6e6f 7465 273a 2064 6174 617d 0a20  o_note': data}. 
+00008680: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00008690: 2070 6179 6c6f 6164 5b27 7669 6465 6f5f   payload['video_
+000086a0: 6e6f 7465 275d 203d 2064 6174 610a 2020  note'] = data.  
+000086b0: 2020 6966 2064 7572 6174 696f 6e3a 0a20    if duration:. 
+000086c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000086d0: 6475 7261 7469 6f6e 275d 203d 2064 7572  duration'] = dur
+000086e0: 6174 696f 6e0a 2020 2020 6966 206c 656e  ation.    if len
+000086f0: 6774 6820 616e 6420 2873 7472 286c 656e  gth and (str(len
+00008700: 6774 6829 2e69 7364 6967 6974 2829 2061  gth).isdigit() a
+00008710: 6e64 2069 6e74 286c 656e 6774 6829 203c  nd int(length) <
+00008720: 3d20 3633 3929 3a0a 2020 2020 2020 2020  = 639):.        
+00008730: 7061 796c 6f61 645b 276c 656e 6774 6827  payload['length'
+00008740: 5d20 3d20 6c65 6e67 7468 0a20 2020 2065  ] = length.    e
+00008750: 6c73 653a 0a20 2020 2020 2020 2070 6179  lse:.        pay
+00008760: 6c6f 6164 5b27 6c65 6e67 7468 275d 203d  load['length'] =
+00008770: 2036 3339 2020 2320 7365 656d 7320 6c69   639  # seems li
+00008780: 6b65 2069 7420 6973 204d 4158 206c 656e  ke it is MAX len
+00008790: 6774 6820 7369 7a65 0a20 2020 2069 6620  gth size.    if 
+000087a0: 7265 706c 795f 6d61 726b 7570 3a0a 2020  reply_markup:.  
+000087b0: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+000087c0: 6570 6c79 5f6d 6172 6b75 7027 5d20 3d20  eply_markup'] = 
+000087d0: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
+000087e0: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
+000087f0: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+00008800: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+00008810: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00008820: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
+00008830: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
+00008840: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00008850: 6174 696f 6e0a 2020 2020 6966 2074 696d  ation.    if tim
+00008860: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
+00008870: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
+00008880: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
+00008890: 6620 7468 756d 626e 6169 6c3a 0a20 2020  f thumbnail:.   
+000088a0: 2020 2020 2069 6620 6e6f 7420 7574 696c       if not util
+000088b0: 2e69 735f 7374 7269 6e67 2874 6875 6d62  .is_string(thumb
+000088c0: 6e61 696c 293a 0a20 2020 2020 2020 2020  nail):.         
+000088d0: 2020 2069 6620 6669 6c65 733a 0a20 2020     if files:.   
+000088e0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+000088f0: 6573 5b27 7468 756d 626e 6169 6c27 5d20  es['thumbnail'] 
+00008900: 3d20 7468 756d 626e 6169 6c0a 2020 2020  = thumbnail.    
+00008910: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00008920: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00008930: 6c65 7320 3d20 7b27 7468 756d 626e 6169  les = {'thumbnai
+00008940: 6c27 3a20 7468 756d 626e 6169 6c7d 0a20  l': thumbnail}. 
+00008950: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00008960: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
+00008970: 5b27 7468 756d 626e 6169 6c27 5d20 3d20  ['thumbnail'] = 
+00008980: 7468 756d 626e 6169 6c0a 2020 2020 6966  thumbnail.    if
+00008990: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+000089a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000089b0: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+000089c0: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
+000089d0: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+000089e0: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
+000089f0: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
+00008a00: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+00008a10: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+00008a20: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00008a30: 6164 5f69 640a 2020 2020 6966 2072 6570  ad_id.    if rep
+00008a40: 6c79 5f70 6172 616d 6574 6572 7320 6973  ly_parameters is
+00008a50: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00008a60: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+00008a70: 795f 7061 7261 6d65 7465 7273 275d 203d  y_parameters'] =
+00008a80: 2072 6570 6c79 5f70 6172 616d 6574 6572   reply_parameter
+00008a90: 732e 746f 5f6a 736f 6e28 290a 2020 2020  s.to_json().    
+00008aa0: 6966 2062 7573 696e 6573 735f 636f 6e6e  if business_conn
+00008ab0: 6563 7469 6f6e 5f69 643a 0a20 2020 2020  ection_id:.     
+00008ac0: 2020 2070 6179 6c6f 6164 5b27 6275 7369     payload['busi
+00008ad0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00008ae0: 6964 275d 203d 2062 7573 696e 6573 735f  id'] = business_
+00008af0: 636f 6e6e 6563 7469 6f6e 5f69 640a 2020  connection_id.  
+00008b00: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00008b10: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00008b20: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00008b30: 3d70 6179 6c6f 6164 2c20 6669 6c65 733d  =payload, files=
+00008b40: 6669 6c65 732c 206d 6574 686f 643d 2770  files, method='p
+00008b50: 6f73 7427 2c20 7665 7269 6679 3d76 6572  ost', verify=ver
+00008b60: 6966 7929 0a0a 0a64 6566 2073 656e 645f  ify)...def send_
+00008b70: 6175 6469 6f28 746f 6b65 6e2c 2063 6861  audio(token, cha
+00008b80: 745f 6964 2c20 6175 6469 6f2c 2063 6170  t_id, audio, cap
+00008b90: 7469 6f6e 3d4e 6f6e 652c 2064 7572 6174  tion=None, durat
+00008ba0: 696f 6e3d 4e6f 6e65 2c20 7065 7266 6f72  ion=None, perfor
+00008bb0: 6d65 723d 4e6f 6e65 2c20 7469 746c 653d  mer=None, title=
+00008bc0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00008bd0: 2020 2020 2072 6570 6c79 5f6d 6172 6b75       reply_marku
+00008be0: 703d 4e6f 6e65 2c20 7061 7273 655f 6d6f  p=None, parse_mo
+00008bf0: 6465 3d4e 6f6e 652c 2064 6973 6162 6c65  de=None, disable
+00008c00: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
+00008c10: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
+00008c20: 2c20 7468 756d 626e 6169 6c3d 4e6f 6e65  , thumbnail=None
+00008c30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00008c40: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00008c50: 733d 4e6f 6e65 2c20 7072 6f74 6563 745f  s=None, protect_
+00008c60: 636f 6e74 656e 743d 4e6f 6e65 2c20 6d65  content=None, me
+00008c70: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
+00008c80: 4e6f 6e65 2c20 7265 706c 795f 7061 7261  None, reply_para
+00008c90: 6d65 7465 7273 3d4e 6f6e 652c 0a20 2020  meters=None,.   
+00008ca0: 2020 2020 2020 2020 2020 2020 6275 7369              busi
+00008cb0: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00008cc0: 6964 3d4e 6f6e 652c 2076 6572 6966 793d  id=None, verify=
+00008cd0: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+00008ce0: 645f 7572 6c20 3d20 7227 7365 6e64 4175  d_url = r'sendAu
+00008cf0: 6469 6f27 0a20 2020 2070 6179 6c6f 6164  dio'.    payload
+00008d00: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00008d10: 6861 745f 6964 7d0a 2020 2020 6669 6c65  hat_id}.    file
+00008d20: 7320 3d20 4e6f 6e65 0a20 2020 2069 6620  s = None.    if 
+00008d30: 6e6f 7420 7574 696c 2e69 735f 7374 7269  not util.is_stri
+00008d40: 6e67 2861 7564 696f 293a 0a20 2020 2020  ng(audio):.     
+00008d50: 2020 2066 696c 6573 203d 207b 2761 7564     files = {'aud
+00008d60: 696f 273a 2061 7564 696f 7d0a 2020 2020  io': audio}.    
+00008d70: 656c 7365 3a0a 2020 2020 2020 2020 7061  else:.        pa
+00008d80: 796c 6f61 645b 2761 7564 696f 275d 203d  yload['audio'] =
+00008d90: 2061 7564 696f 0a20 2020 2069 6620 6361   audio.    if ca
+00008da0: 7074 696f 6e3a 0a20 2020 2020 2020 2070  ption:.        p
+00008db0: 6179 6c6f 6164 5b27 6361 7074 696f 6e27  ayload['caption'
+00008dc0: 5d20 3d20 6361 7074 696f 6e0a 2020 2020  ] = caption.    
+00008dd0: 6966 2064 7572 6174 696f 6e3a 0a20 2020  if duration:.   
+00008de0: 2020 2020 2070 6179 6c6f 6164 5b27 6475       payload['du
+00008df0: 7261 7469 6f6e 275d 203d 2064 7572 6174  ration'] = durat
+00008e00: 696f 6e0a 2020 2020 6966 2070 6572 666f  ion.    if perfo
+00008e10: 726d 6572 3a0a 2020 2020 2020 2020 7061  rmer:.        pa
+00008e20: 796c 6f61 645b 2770 6572 666f 726d 6572  yload['performer
+00008e30: 275d 203d 2070 6572 666f 726d 6572 0a20  '] = performer. 
+00008e40: 2020 2069 6620 7469 746c 653a 0a20 2020     if title:.   
+00008e50: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
+00008e60: 746c 6527 5d20 3d20 7469 746c 650a 2020  tle'] = title.  
+00008e70: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00008e80: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
+00008e90: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
+00008ea0: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
+00008eb0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
+00008ec0: 7029 0a20 2020 2069 6620 7061 7273 655f  p).    if parse_
+00008ed0: 6d6f 6465 3a0a 2020 2020 2020 2020 7061  mode:.        pa
+00008ee0: 796c 6f61 645b 2770 6172 7365 5f6d 6f64  yload['parse_mod
+00008ef0: 6527 5d20 3d20 7061 7273 655f 6d6f 6465  e'] = parse_mode
+00008f00: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+00008f10: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+00008f20: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00008f30: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
+00008f40: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
+00008f50: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+00008f60: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
+00008f70: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
+00008f80: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
+00008f90: 7427 5d20 3d20 7469 6d65 6f75 740a 2020  t'] = timeout.  
+00008fa0: 2020 6966 2074 6875 6d62 6e61 696c 3a0a    if thumbnail:.
+00008fb0: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
+00008fc0: 7469 6c2e 6973 5f73 7472 696e 6728 7468  til.is_string(th
+00008fd0: 756d 626e 6169 6c29 3a0a 2020 2020 2020  umbnail):.      
+00008fe0: 2020 2020 2020 6966 2066 696c 6573 3a0a        if files:.
+00008ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009000: 6669 6c65 735b 2774 6875 6d62 6e61 696c  files['thumbnail
+00009010: 275d 203d 2074 6875 6d62 6e61 696c 0a20  '] = thumbnail. 
+00009020: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00009030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009040: 2066 696c 6573 203d 207b 2774 6875 6d62   files = {'thumb
+00009050: 6e61 696c 273a 2074 6875 6d62 6e61 696c  nail': thumbnail
+00009060: 7d0a 2020 2020 2020 2020 656c 7365 3a0a  }.        else:.
+00009070: 2020 2020 2020 2020 2020 2020 7061 796c              payl
+00009080: 6f61 645b 2774 6875 6d62 6e61 696c 275d  oad['thumbnail']
+00009090: 203d 2074 6875 6d62 6e61 696c 0a20 2020   = thumbnail.   
+000090a0: 2069 6620 6361 7074 696f 6e5f 656e 7469   if caption_enti
+000090b0: 7469 6573 3a0a 2020 2020 2020 2020 7061  ties:.        pa
+000090c0: 796c 6f61 645b 2763 6170 7469 6f6e 5f65  yload['caption_e
+000090d0: 6e74 6974 6965 7327 5d20 3d20 6a73 6f6e  ntities'] = json
+000090e0: 2e64 756d 7073 2874 7970 6573 2e4d 6573  .dumps(types.Mes
+000090f0: 7361 6765 456e 7469 7479 2e74 6f5f 6c69  sageEntity.to_li
+00009100: 7374 5f6f 665f 6469 6374 7328 6361 7074  st_of_dicts(capt
+00009110: 696f 6e5f 656e 7469 7469 6573 2929 0a20  ion_entities)). 
+00009120: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
+00009130: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
+00009140: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00009150: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
+00009160: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
+00009170: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
+00009180: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00009190: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000091a0: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+000091b0: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+000091c0: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
+000091d0: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
+000091e0: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
+000091f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009200: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
+00009210: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
+00009220: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
+00009230: 0a20 2020 2069 6620 6275 7369 6e65 7373  .    if business
+00009240: 5f63 6f6e 6e65 6374 696f 6e5f 6964 3a0a  _connection_id:.
+00009250: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009260: 2762 7573 696e 6573 735f 636f 6e6e 6563  'business_connec
+00009270: 7469 6f6e 5f69 6427 5d20 3d20 6275 7369  tion_id'] = busi
+00009280: 6e65 7373 5f63 6f6e 6e65 6374 696f 6e5f  ness_connection_
+00009290: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
+000092a0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+000092b0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000092c0: 6172 616d 733d 7061 796c 6f61 642c 2066  arams=payload, f
+000092d0: 696c 6573 3d66 696c 6573 2c20 6d65 7468  iles=files, meth
+000092e0: 6f64 3d27 706f 7374 272c 2076 6572 6966  od='post', verif
+000092f0: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00009300: 7365 6e64 5f64 6174 6128 746f 6b65 6e2c  send_data(token,
+00009310: 2063 6861 745f 6964 2c20 6461 7461 2c20   chat_id, data, 
+00009320: 6461 7461 5f74 7970 652c 2072 6570 6c79  data_type, reply
+00009330: 5f6d 6172 6b75 703d 4e6f 6e65 2c20 7061  _markup=None, pa
+00009340: 7273 655f 6d6f 6465 3d4e 6f6e 652c 0a20  rse_mode=None,. 
+00009350: 2020 2020 2020 2020 2020 2020 2064 6973               dis
+00009360: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00009370: 6e3d 4e6f 6e65 2c20 7469 6d65 6f75 743d  n=None, timeout=
+00009380: 4e6f 6e65 2c20 6361 7074 696f 6e3d 4e6f  None, caption=No
+00009390: 6e65 2c20 7468 756d 626e 6169 6c3d 4e6f  ne, thumbnail=No
+000093a0: 6e65 2c20 6361 7074 696f 6e5f 656e 7469  ne, caption_enti
+000093b0: 7469 6573 3d4e 6f6e 652c 0a20 2020 2020  ties=None,.     
+000093c0: 2020 2020 2020 2020 2064 6973 6162 6c65           disable
+000093d0: 5f63 6f6e 7465 6e74 5f74 7970 655f 6465  _content_type_de
+000093e0: 7465 6374 696f 6e3d 4e6f 6e65 2c20 7669  tection=None, vi
+000093f0: 7369 626c 655f 6669 6c65 5f6e 616d 653d  sible_file_name=
+00009400: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00009410: 2020 2020 7072 6f74 6563 745f 636f 6e74      protect_cont
+00009420: 656e 743d 4e6f 6e65 2c20 6d65 7373 6167  ent=None, messag
+00009430: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
+00009440: 2c20 656d 6f6a 693d 4e6f 6e65 2c20 7265  , emoji=None, re
+00009450: 706c 795f 7061 7261 6d65 7465 7273 3d4e  ply_parameters=N
+00009460: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00009470: 2020 2062 7573 696e 6573 735f 636f 6e6e     business_conn
+00009480: 6563 7469 6f6e 5f69 643d 4e6f 6e65 2c20  ection_id=None, 
+00009490: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+000094a0: 2020 6d65 7468 6f64 5f75 726c 203d 2067    method_url = g
+000094b0: 6574 5f6d 6574 686f 645f 6279 5f74 7970  et_method_by_typ
+000094c0: 6528 6461 7461 5f74 7970 6529 0a20 2020  e(data_type).   
+000094d0: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+000094e0: 745f 6964 273a 2063 6861 745f 6964 7d0a  t_id': chat_id}.
+000094f0: 2020 2020 6669 6c65 7320 3d20 4e6f 6e65      files = None
+00009500: 0a20 2020 2069 6620 6e6f 7420 7574 696c  .    if not util
+00009510: 2e69 735f 7374 7269 6e67 2864 6174 6129  .is_string(data)
+00009520: 3a0a 2020 2020 2020 2020 6669 6c65 5f64  :.        file_d
+00009530: 6174 6120 3d20 6461 7461 0a20 2020 2020  ata = data.     
+00009540: 2020 2069 6620 7669 7369 626c 655f 6669     if visible_fi
+00009550: 6c65 5f6e 616d 653a 0a20 2020 2020 2020  le_name:.       
+00009560: 2020 2020 2066 696c 655f 6461 7461 203d       file_data =
+00009570: 2028 7669 7369 626c 655f 6669 6c65 5f6e   (visible_file_n
+00009580: 616d 652c 2064 6174 6129 0a20 2020 2020  ame, data).     
+00009590: 2020 2066 696c 6573 203d 207b 6461 7461     files = {data
+000095a0: 5f74 7970 653a 2066 696c 655f 6461 7461  _type: file_data
+000095b0: 7d0a 2020 2020 656c 7365 3a0a 2020 2020  }.    else:.    
+000095c0: 2020 2020 7061 796c 6f61 645b 6461 7461      payload[data
+000095d0: 5f74 7970 655d 203d 2064 6174 610a 2020  _type] = data.  
+000095e0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+000095f0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
+00009600: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
+00009610: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
+00009620: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
+00009630: 7029 0a20 2020 2069 6620 7061 7273 655f  p).    if parse_
+00009640: 6d6f 6465 2061 6e64 2064 6174 615f 7479  mode and data_ty
+00009650: 7065 203d 3d20 2764 6f63 756d 656e 7427  pe == 'document'
+00009660: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00009670: 645b 2770 6172 7365 5f6d 6f64 6527 5d20  d['parse_mode'] 
+00009680: 3d20 7061 7273 655f 6d6f 6465 0a20 2020  = parse_mode.   
+00009690: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+000096a0: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+000096b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+000096c0: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+000096d0: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+000096e0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000096f0: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
+00009700: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+00009710: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+00009720: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
+00009730: 2063 6170 7469 6f6e 3a0a 2020 2020 2020   caption:.      
+00009740: 2020 7061 796c 6f61 645b 2763 6170 7469    payload['capti
+00009750: 6f6e 275d 203d 2063 6170 7469 6f6e 0a20  on'] = caption. 
+00009760: 2020 2069 6620 7468 756d 626e 6169 6c3a     if thumbnail:
+00009770: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00009780: 7574 696c 2e69 735f 7374 7269 6e67 2874  util.is_string(t
+00009790: 6875 6d62 6e61 696c 293a 0a20 2020 2020  humbnail):.     
+000097a0: 2020 2020 2020 2069 6620 6669 6c65 733a         if files:
+000097b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000097c0: 2066 696c 6573 5b27 7468 756d 626e 6169   files['thumbnai
+000097d0: 6c27 5d20 3d20 7468 756d 626e 6169 6c0a  l'] = thumbnail.
+000097e0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000097f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009800: 2020 6669 6c65 7320 3d20 7b27 7468 756d    files = {'thum
+00009810: 626e 6169 6c27 3a20 7468 756d 626e 6169  bnail': thumbnai
+00009820: 6c7d 0a20 2020 2020 2020 2065 6c73 653a  l}.        else:
+00009830: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
+00009840: 6c6f 6164 5b27 7468 756d 626e 6169 6c27  load['thumbnail'
+00009850: 5d20 3d20 7468 756d 626e 6169 6c0a 2020  ] = thumbnail.  
+00009860: 2020 6966 2063 6170 7469 6f6e 5f65 6e74    if caption_ent
+00009870: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
+00009880: 6179 6c6f 6164 5b27 6361 7074 696f 6e5f  ayload['caption_
+00009890: 656e 7469 7469 6573 275d 203d 206a 736f  entities'] = jso
+000098a0: 6e2e 6475 6d70 7328 7479 7065 732e 4d65  n.dumps(types.Me
+000098b0: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
+000098c0: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
+000098d0: 7469 6f6e 5f65 6e74 6974 6965 7329 290a  tion_entities)).
+000098e0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+000098f0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+00009900: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00009910: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
+00009920: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
+00009930: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
+00009940: 6d65 7468 6f64 5f75 726c 203d 3d20 2773  method_url == 's
+00009950: 656e 6444 6f63 756d 656e 7427 2061 6e64  endDocument' and
+00009960: 2064 6973 6162 6c65 5f63 6f6e 7465 6e74   disable_content
+00009970: 5f74 7970 655f 6465 7465 6374 696f 6e20  _type_detection 
+00009980: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00009990: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
+000099a0: 7361 626c 655f 636f 6e74 656e 745f 7479  sable_content_ty
+000099b0: 7065 5f64 6574 6563 7469 6f6e 275d 203d  pe_detection'] =
+000099c0: 2064 6973 6162 6c65 5f63 6f6e 7465 6e74   disable_content
+000099d0: 5f74 7970 655f 6465 7465 6374 696f 6e0a  _type_detection.
+000099e0: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
+000099f0: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
+00009a00: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+00009a10: 6765 5f74 6872 6561 645f 6964 275d 203d  ge_thread_id'] =
+00009a20: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00009a30: 6964 0a20 2020 2069 6620 656d 6f6a 693a  id.    if emoji:
+00009a40: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00009a50: 5b27 656d 6f6a 6927 5d20 3d20 656d 6f6a  ['emoji'] = emoj
+00009a60: 690a 2020 2020 6966 2072 6570 6c79 5f70  i.    if reply_p
+00009a70: 6172 616d 6574 6572 7320 6973 206e 6f74  arameters is not
+00009a80: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00009a90: 6179 6c6f 6164 5b27 7265 706c 795f 7061  ayload['reply_pa
+00009aa0: 7261 6d65 7465 7273 275d 203d 2072 6570  rameters'] = rep
+00009ab0: 6c79 5f70 6172 616d 6574 6572 732e 746f  ly_parameters.to
+00009ac0: 5f6a 736f 6e28 290a 2020 2020 6966 2062  _json().    if b
+00009ad0: 7573 696e 6573 735f 636f 6e6e 6563 7469  usiness_connecti
+00009ae0: 6f6e 5f69 643a 0a20 2020 2020 2020 2070  on_id:.        p
+00009af0: 6179 6c6f 6164 5b27 6275 7369 6e65 7373  ayload['business
+00009b00: 5f63 6f6e 6e65 6374 696f 6e5f 6964 275d  _connection_id']
+00009b10: 203d 2062 7573 696e 6573 735f 636f 6e6e   = business_conn
+00009b20: 6563 7469 6f6e 5f69 640a 2020 2020 7265  ection_id.    re
+00009b30: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00009b40: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00009b50: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00009b60: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+00009b70: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
+00009b80: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00009b90: 0a0a 0a64 6566 2067 6574 5f6d 6574 686f  ...def get_metho
+00009ba0: 645f 6279 5f74 7970 6528 6461 7461 5f74  d_by_type(data_t
+00009bb0: 7970 6529 3a0a 2020 2020 6966 2064 6174  ype):.    if dat
+00009bc0: 615f 7479 7065 203d 3d20 2764 6f63 756d  a_type == 'docum
+00009bd0: 656e 7427 3a0a 2020 2020 2020 2020 7265  ent':.        re
+00009be0: 7475 726e 2072 2773 656e 6444 6f63 756d  turn r'sendDocum
+00009bf0: 656e 7427 0a20 2020 2069 6620 6461 7461  ent'.    if data
+00009c00: 5f74 7970 6520 3d3d 2027 7374 6963 6b65  _type == 'sticke
+00009c10: 7227 3a0a 2020 2020 2020 2020 7265 7475  r':.        retu
+00009c20: 726e 2072 2773 656e 6453 7469 636b 6572  rn r'sendSticker
+00009c30: 270a 0a0a 6465 6620 6261 6e5f 6368 6174  '...def ban_chat
+00009c40: 5f6d 656d 6265 7228 746f 6b65 6e2c 2063  _member(token, c
+00009c50: 6861 745f 6964 2c20 7573 6572 5f69 642c  hat_id, user_id,
+00009c60: 2075 6e74 696c 5f64 6174 653d 4e6f 6e65   until_date=None
+00009c70: 2c20 7265 766f 6b65 5f6d 6573 7361 6765  , revoke_message
+00009c80: 733d 4e6f 6e65 2c20 7665 7269 6679 3d54  s=None, verify=T
+00009c90: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+00009ca0: 5f75 726c 203d 2027 6261 6e43 6861 744d  _url = 'banChatM
+00009cb0: 656d 6265 7227 0a20 2020 2070 6179 6c6f  ember'.    paylo
+00009cc0: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+00009cd0: 2063 6861 745f 6964 2c20 2775 7365 725f   chat_id, 'user_
+00009ce0: 6964 273a 2075 7365 725f 6964 7d0a 2020  id': user_id}.  
+00009cf0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00009d00: 756e 7469 6c5f 6461 7465 2c20 6461 7465  until_date, date
+00009d10: 7469 6d65 293a 0a20 2020 2020 2020 2070  time):.        p
+00009d20: 6179 6c6f 6164 5b27 756e 7469 6c5f 6461  ayload['until_da
+00009d30: 7465 275d 203d 2075 6e74 696c 5f64 6174  te'] = until_dat
+00009d40: 652e 7469 6d65 7374 616d 7028 290a 2020  e.timestamp().  
+00009d50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00009d60: 7061 796c 6f61 645b 2775 6e74 696c 5f64  payload['until_d
+00009d70: 6174 6527 5d20 3d20 756e 7469 6c5f 6461  ate'] = until_da
+00009d80: 7465 0a20 2020 2069 6620 7265 766f 6b65  te.    if revoke
+00009d90: 5f6d 6573 7361 6765 7320 6973 206e 6f74  _messages is not
+00009da0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+00009db0: 6179 6c6f 6164 5b27 7265 766f 6b65 5f6d  ayload['revoke_m
+00009dc0: 6573 7361 6765 7327 5d20 3d20 7265 766f  essages'] = revo
+00009dd0: 6b65 5f6d 6573 7361 6765 730a 2020 2020  ke_messages.    
+00009de0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00009df0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00009e00: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00009e10: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+00009e20: 706f 7374 272c 2076 6572 6966 793d 7665  post', verify=ve
+00009e30: 7269 6679 290a 0a0a 6465 6620 756e 6261  rify)...def unba
+00009e40: 6e5f 6368 6174 5f6d 656d 6265 7228 746f  n_chat_member(to
+00009e50: 6b65 6e2c 2063 6861 745f 6964 2c20 7573  ken, chat_id, us
+00009e60: 6572 5f69 642c 206f 6e6c 795f 6966 5f62  er_id, only_if_b
+00009e70: 616e 6e65 642c 2076 6572 6966 793d 5472  anned, verify=Tr
+00009e80: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+00009e90: 7572 6c20 3d20 2775 6e62 616e 4368 6174  url = 'unbanChat
+00009ea0: 4d65 6d62 6572 270a 2020 2020 7061 796c  Member'.    payl
+00009eb0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
+00009ec0: 3a20 6368 6174 5f69 642c 2027 7573 6572  : chat_id, 'user
+00009ed0: 5f69 6427 3a20 7573 6572 5f69 647d 0a20  _id': user_id}. 
+00009ee0: 2020 2069 6620 6f6e 6c79 5f69 665f 6261     if only_if_ba
+00009ef0: 6e6e 6564 2069 7320 6e6f 7420 4e6f 6e65  nned is not None
+00009f00: 3a20 2023 204e 6f6e 6520 2f20 5472 7565  :  # None / True
+00009f10: 202f 2046 616c 7365 0a20 2020 2020 2020   / False.       
+00009f20: 2070 6179 6c6f 6164 5b27 6f6e 6c79 5f69   payload['only_i
+00009f30: 665f 6261 6e6e 6564 275d 203d 206f 6e6c  f_banned'] = onl
+00009f40: 795f 6966 5f62 616e 6e65 640a 2020 2020  y_if_banned.    
+00009f50: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00009f60: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00009f70: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00009f80: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+00009f90: 706f 7374 272c 2076 6572 6966 793d 7665  post', verify=ve
+00009fa0: 7269 6679 290a 0a0a 6465 6620 7265 7374  rify)...def rest
+00009fb0: 7269 6374 5f63 6861 745f 6d65 6d62 6572  rict_chat_member
+00009fc0: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
+00009fd0: 2063 6861 745f 6964 2c20 7573 6572 5f69   chat_id, user_i
+00009fe0: 642c 2070 6572 6d69 7373 696f 6e73 2c20  d, permissions, 
+00009ff0: 756e 7469 6c5f 6461 7465 3d4e 6f6e 652c  until_date=None,
+0000a000: 0a20 2020 2020 2020 2075 7365 5f69 6e64  .        use_ind
+0000a010: 6570 656e 6465 6e74 5f63 6861 745f 7065  ependent_chat_pe
+0000a020: 726d 6973 7369 6f6e 733d 4e6f 6e65 2c20  rmissions=None, 
+0000a030: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+0000a040: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+0000a050: 7265 7374 7269 6374 4368 6174 4d65 6d62  restrictChatMemb
+0000a060: 6572 270a 2020 2020 7061 796c 6f61 6420  er'.    payload 
+0000a070: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+0000a080: 6174 5f69 642c 2027 7573 6572 5f69 6427  at_id, 'user_id'
+0000a090: 3a20 7573 6572 5f69 642c 2027 7065 726d  : user_id, 'perm
+0000a0a0: 6973 7369 6f6e 7327 3a20 7065 726d 6973  issions': permis
+0000a0b0: 7369 6f6e 732e 746f 5f6a 736f 6e28 297d  sions.to_json()}
+0000a0c0: 0a0a 2020 2020 6966 2075 7365 5f69 6e64  ..    if use_ind
+0000a0d0: 6570 656e 6465 6e74 5f63 6861 745f 7065  ependent_chat_pe
+0000a0e0: 726d 6973 7369 6f6e 7320 6973 206e 6f74  rmissions is not
+0000a0f0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000a100: 6179 6c6f 6164 5b27 7573 655f 696e 6465  ayload['use_inde
+0000a110: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
+0000a120: 6d69 7373 696f 6e73 275d 203d 2075 7365  missions'] = use
+0000a130: 5f69 6e64 6570 656e 6465 6e74 5f63 6861  _independent_cha
+0000a140: 745f 7065 726d 6973 7369 6f6e 730a 2020  t_permissions.  
+0000a150: 2020 6966 2075 6e74 696c 5f64 6174 6520    if until_date 
+0000a160: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000a170: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0000a180: 6365 2875 6e74 696c 5f64 6174 652c 2064  ce(until_date, d
+0000a190: 6174 6574 696d 6529 3a0a 2020 2020 2020  atetime):.      
+0000a1a0: 2020 2020 2020 7061 796c 6f61 645b 2775        payload['u
+0000a1b0: 6e74 696c 5f64 6174 6527 5d20 3d20 756e  ntil_date'] = un
+0000a1c0: 7469 6c5f 6461 7465 2e74 696d 6573 7461  til_date.timesta
+0000a1d0: 6d70 2829 0a20 2020 2020 2020 2065 6c73  mp().        els
+0000a1e0: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
+0000a1f0: 6179 6c6f 6164 5b27 756e 7469 6c5f 6461  ayload['until_da
+0000a200: 7465 275d 203d 2075 6e74 696c 5f64 6174  te'] = until_dat
+0000a210: 650a 0a20 2020 2072 6574 7572 6e20 5f6d  e..    return _m
+0000a220: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000a230: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000a240: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000a250: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+0000a260: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+0000a270: 6566 2070 726f 6d6f 7465 5f63 6861 745f  ef promote_chat_
+0000a280: 6d65 6d62 6572 280a 2020 2020 2020 2020  member(.        
+0000a290: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000a2a0: 7573 6572 5f69 642c 2063 616e 5f63 6861  user_id, can_cha
+0000a2b0: 6e67 655f 696e 666f 3d4e 6f6e 652c 2063  nge_info=None, c
+0000a2c0: 616e 5f70 6f73 745f 6d65 7373 6167 6573  an_post_messages
+0000a2d0: 3d4e 6f6e 652c 0a20 2020 2020 2020 2063  =None,.        c
+0000a2e0: 616e 5f65 6469 745f 6d65 7373 6167 6573  an_edit_messages
+0000a2f0: 3d4e 6f6e 652c 2063 616e 5f64 656c 6574  =None, can_delet
+0000a300: 655f 6d65 7373 6167 6573 3d4e 6f6e 652c  e_messages=None,
+0000a310: 2063 616e 5f69 6e76 6974 655f 7573 6572   can_invite_user
+0000a320: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
+0000a330: 6361 6e5f 7265 7374 7269 6374 5f6d 656d  can_restrict_mem
+0000a340: 6265 7273 3d4e 6f6e 652c 2063 616e 5f70  bers=None, can_p
+0000a350: 696e 5f6d 6573 7361 6765 733d 4e6f 6e65  in_messages=None
+0000a360: 2c20 6361 6e5f 7072 6f6d 6f74 655f 6d65  , can_promote_me
+0000a370: 6d62 6572 733d 4e6f 6e65 2c0a 2020 2020  mbers=None,.    
+0000a380: 2020 2020 6973 5f61 6e6f 6e79 6d6f 7573      is_anonymous
+0000a390: 3d4e 6f6e 652c 2063 616e 5f6d 616e 6167  =None, can_manag
+0000a3a0: 655f 6368 6174 3d4e 6f6e 652c 2063 616e  e_chat=None, can
+0000a3b0: 5f6d 616e 6167 655f 7669 6465 6f5f 6368  _manage_video_ch
+0000a3c0: 6174 733d 4e6f 6e65 2c0a 2020 2020 2020  ats=None,.      
+0000a3d0: 2020 6361 6e5f 6d61 6e61 6765 5f74 6f70    can_manage_top
+0000a3e0: 6963 733d 4e6f 6e65 2c20 6361 6e5f 706f  ics=None, can_po
+0000a3f0: 7374 5f73 746f 7269 6573 3d4e 6f6e 652c  st_stories=None,
+0000a400: 2063 616e 5f65 6469 745f 7374 6f72 6965   can_edit_storie
+0000a410: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
+0000a420: 6361 6e5f 6465 6c65 7465 5f73 746f 7269  can_delete_stori
+0000a430: 6573 3d4e 6f6e 652c 2076 6572 6966 793d  es=None, verify=
+0000a440: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+0000a450: 645f 7572 6c20 3d20 2770 726f 6d6f 7465  d_url = 'promote
+0000a460: 4368 6174 4d65 6d62 6572 270a 2020 2020  ChatMember'.    
+0000a470: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+0000a480: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
+0000a490: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
+0000a4a0: 647d 0a20 2020 2069 6620 6361 6e5f 6368  d}.    if can_ch
+0000a4b0: 616e 6765 5f69 6e66 6f20 6973 206e 6f74  ange_info is not
+0000a4c0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000a4d0: 6179 6c6f 6164 5b27 6361 6e5f 6368 616e  ayload['can_chan
+0000a4e0: 6765 5f69 6e66 6f27 5d20 3d20 6361 6e5f  ge_info'] = can_
+0000a4f0: 6368 616e 6765 5f69 6e66 6f0a 2020 2020  change_info.    
+0000a500: 6966 2063 616e 5f70 6f73 745f 6d65 7373  if can_post_mess
+0000a510: 6167 6573 2069 7320 6e6f 7420 4e6f 6e65  ages is not None
+0000a520: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000a530: 645b 2763 616e 5f70 6f73 745f 6d65 7373  d['can_post_mess
+0000a540: 6167 6573 275d 203d 2063 616e 5f70 6f73  ages'] = can_pos
+0000a550: 745f 6d65 7373 6167 6573 0a20 2020 2069  t_messages.    i
+0000a560: 6620 6361 6e5f 6564 6974 5f6d 6573 7361  f can_edit_messa
+0000a570: 6765 7320 6973 206e 6f74 204e 6f6e 653a  ges is not None:
+0000a580: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000a590: 5b27 6361 6e5f 6564 6974 5f6d 6573 7361  ['can_edit_messa
+0000a5a0: 6765 7327 5d20 3d20 6361 6e5f 6564 6974  ges'] = can_edit
+0000a5b0: 5f6d 6573 7361 6765 730a 2020 2020 6966  _messages.    if
+0000a5c0: 2063 616e 5f64 656c 6574 655f 6d65 7373   can_delete_mess
+0000a5d0: 6167 6573 2069 7320 6e6f 7420 4e6f 6e65  ages is not None
+0000a5e0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000a5f0: 645b 2763 616e 5f64 656c 6574 655f 6d65  d['can_delete_me
+0000a600: 7373 6167 6573 275d 203d 2063 616e 5f64  ssages'] = can_d
+0000a610: 656c 6574 655f 6d65 7373 6167 6573 0a20  elete_messages. 
+0000a620: 2020 2069 6620 6361 6e5f 696e 7669 7465     if can_invite
+0000a630: 5f75 7365 7273 2069 7320 6e6f 7420 4e6f  _users is not No
+0000a640: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000a650: 6f61 645b 2763 616e 5f69 6e76 6974 655f  oad['can_invite_
+0000a660: 7573 6572 7327 5d20 3d20 6361 6e5f 696e  users'] = can_in
+0000a670: 7669 7465 5f75 7365 7273 0a20 2020 2069  vite_users.    i
+0000a680: 6620 6361 6e5f 7265 7374 7269 6374 5f6d  f can_restrict_m
+0000a690: 656d 6265 7273 2069 7320 6e6f 7420 4e6f  embers is not No
+0000a6a0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000a6b0: 6f61 645b 2763 616e 5f72 6573 7472 6963  oad['can_restric
+0000a6c0: 745f 6d65 6d62 6572 7327 5d20 3d20 6361  t_members'] = ca
+0000a6d0: 6e5f 7265 7374 7269 6374 5f6d 656d 6265  n_restrict_membe
+0000a6e0: 7273 0a20 2020 2069 6620 6361 6e5f 7069  rs.    if can_pi
+0000a6f0: 6e5f 6d65 7373 6167 6573 2069 7320 6e6f  n_messages is no
+0000a700: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000a710: 7061 796c 6f61 645b 2763 616e 5f70 696e  payload['can_pin
+0000a720: 5f6d 6573 7361 6765 7327 5d20 3d20 6361  _messages'] = ca
+0000a730: 6e5f 7069 6e5f 6d65 7373 6167 6573 0a20  n_pin_messages. 
+0000a740: 2020 2069 6620 6361 6e5f 7072 6f6d 6f74     if can_promot
+0000a750: 655f 6d65 6d62 6572 7320 6973 206e 6f74  e_members is not
+0000a760: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000a770: 6179 6c6f 6164 5b27 6361 6e5f 7072 6f6d  ayload['can_prom
+0000a780: 6f74 655f 6d65 6d62 6572 7327 5d20 3d20  ote_members'] = 
+0000a790: 6361 6e5f 7072 6f6d 6f74 655f 6d65 6d62  can_promote_memb
+0000a7a0: 6572 730a 2020 2020 6966 2069 735f 616e  ers.    if is_an
+0000a7b0: 6f6e 796d 6f75 7320 6973 206e 6f74 204e  onymous is not N
+0000a7c0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+0000a7d0: 6c6f 6164 5b27 6973 5f61 6e6f 6e79 6d6f  load['is_anonymo
+0000a7e0: 7573 275d 203d 2069 735f 616e 6f6e 796d  us'] = is_anonym
+0000a7f0: 6f75 730a 2020 2020 6966 2063 616e 5f6d  ous.    if can_m
+0000a800: 616e 6167 655f 6368 6174 2069 7320 6e6f  anage_chat is no
+0000a810: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000a820: 7061 796c 6f61 645b 2763 616e 5f6d 616e  payload['can_man
+0000a830: 6167 655f 6368 6174 275d 203d 2063 616e  age_chat'] = can
+0000a840: 5f6d 616e 6167 655f 6368 6174 0a20 2020  _manage_chat.   
+0000a850: 2069 6620 6361 6e5f 6d61 6e61 6765 5f76   if can_manage_v
+0000a860: 6964 656f 5f63 6861 7473 2069 7320 6e6f  ideo_chats is no
+0000a870: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000a880: 7061 796c 6f61 645b 2763 616e 5f6d 616e  payload['can_man
+0000a890: 6167 655f 7669 6465 6f5f 6368 6174 7327  age_video_chats'
+0000a8a0: 5d20 3d20 6361 6e5f 6d61 6e61 6765 5f76  ] = can_manage_v
+0000a8b0: 6964 656f 5f63 6861 7473 0a20 2020 2069  ideo_chats.    i
+0000a8c0: 6620 6361 6e5f 6d61 6e61 6765 5f74 6f70  f can_manage_top
+0000a8d0: 6963 7320 6973 206e 6f74 204e 6f6e 653a  ics is not None:
+0000a8e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000a8f0: 5b27 6361 6e5f 6d61 6e61 6765 5f74 6f70  ['can_manage_top
+0000a900: 6963 7327 5d20 3d20 6361 6e5f 6d61 6e61  ics'] = can_mana
+0000a910: 6765 5f74 6f70 6963 730a 2020 2020 6966  ge_topics.    if
+0000a920: 2063 616e 5f70 6f73 745f 7374 6f72 6965   can_post_storie
+0000a930: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+0000a940: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000a950: 6361 6e5f 706f 7374 5f73 746f 7269 6573  can_post_stories
+0000a960: 275d 203d 2063 616e 5f70 6f73 745f 7374  '] = can_post_st
+0000a970: 6f72 6965 730a 2020 2020 6966 2063 616e  ories.    if can
+0000a980: 5f65 6469 745f 7374 6f72 6965 7320 6973  _edit_stories is
+0000a990: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000a9a0: 2020 2070 6179 6c6f 6164 5b27 6361 6e5f     payload['can_
+0000a9b0: 6564 6974 5f73 746f 7269 6573 275d 203d  edit_stories'] =
+0000a9c0: 2063 616e 5f65 6469 745f 7374 6f72 6965   can_edit_storie
+0000a9d0: 730a 2020 2020 6966 2063 616e 5f64 656c  s.    if can_del
+0000a9e0: 6574 655f 7374 6f72 6965 7320 6973 206e  ete_stories is n
+0000a9f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0000aa00: 2070 6179 6c6f 6164 5b27 6361 6e5f 6465   payload['can_de
+0000aa10: 6c65 7465 5f73 746f 7269 6573 275d 203d  lete_stories'] =
+0000aa20: 2063 616e 5f64 656c 6574 655f 7374 6f72   can_delete_stor
+0000aa30: 6965 730a 2020 2020 7265 7475 726e 205f  ies.    return _
+0000aa40: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000aa50: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000aa60: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000aa70: 6d65 7468 6f64 3d27 706f 7374 272c 2076  method='post', v
+0000aa80: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+0000aa90: 6465 6620 7365 745f 6368 6174 5f61 646d  def set_chat_adm
+0000aaa0: 696e 6973 7472 6174 6f72 5f63 7573 746f  inistrator_custo
+0000aab0: 6d5f 7469 746c 6528 746f 6b65 6e2c 2063  m_title(token, c
+0000aac0: 6861 745f 6964 2c20 7573 6572 5f69 642c  hat_id, user_id,
+0000aad0: 2063 7573 746f 6d5f 7469 746c 652c 2076   custom_title, v
+0000aae0: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+0000aaf0: 206d 6574 686f 645f 7572 6c20 3d20 2773   method_url = 's
+0000ab00: 6574 4368 6174 4164 6d69 6e69 7374 7261  etChatAdministra
+0000ab10: 746f 7243 7573 746f 6d54 6974 6c65 270a  torCustomTitle'.
+0000ab20: 2020 2020 7061 796c 6f61 6420 3d20 7b0a      payload = {.
+0000ab30: 2020 2020 2020 2020 2763 6861 745f 6964          'chat_id
+0000ab40: 273a 2063 6861 745f 6964 2c20 2775 7365  ': chat_id, 'use
+0000ab50: 725f 6964 273a 2075 7365 725f 6964 2c20  r_id': user_id, 
+0000ab60: 2763 7573 746f 6d5f 7469 746c 6527 3a20  'custom_title': 
+0000ab70: 6375 7374 6f6d 5f74 6974 6c65 0a20 2020  custom_title.   
+0000ab80: 207d 0a20 2020 2072 6574 7572 6e20 5f6d   }.    return _m
+0000ab90: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000aba0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000abb0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000abc0: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+0000abd0: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+0000abe0: 6566 2062 616e 5f63 6861 745f 7365 6e64  ef ban_chat_send
+0000abf0: 6572 5f63 6861 7428 746f 6b65 6e2c 2063  er_chat(token, c
+0000ac00: 6861 745f 6964 2c20 7365 6e64 6572 5f63  hat_id, sender_c
+0000ac10: 6861 745f 6964 2c20 7665 7269 6679 3d54  hat_id, verify=T
+0000ac20: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+0000ac30: 5f75 726c 203d 2027 6261 6e43 6861 7453  _url = 'banChatS
+0000ac40: 656e 6465 7243 6861 7427 0a20 2020 2070  enderChat'.    p
+0000ac50: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+0000ac60: 6964 273a 2063 6861 745f 6964 2c20 2773  id': chat_id, 's
+0000ac70: 656e 6465 725f 6368 6174 5f69 6427 3a20  ender_chat_id': 
+0000ac80: 7365 6e64 6572 5f63 6861 745f 6964 7d0a  sender_chat_id}.
+0000ac90: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000aca0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000acb0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000acc0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000acd0: 6f64 3d27 706f 7374 272c 2076 6572 6966  od='post', verif
+0000ace0: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+0000acf0: 756e 6261 6e5f 6368 6174 5f73 656e 6465  unban_chat_sende
+0000ad00: 725f 6368 6174 2874 6f6b 656e 2c20 6368  r_chat(token, ch
+0000ad10: 6174 5f69 642c 2073 656e 6465 725f 6368  at_id, sender_ch
+0000ad20: 6174 5f69 642c 2076 6572 6966 793d 5472  at_id, verify=Tr
+0000ad30: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+0000ad40: 7572 6c20 3d20 2775 6e62 616e 4368 6174  url = 'unbanChat
+0000ad50: 5365 6e64 6572 4368 6174 270a 2020 2020  SenderChat'.    
+0000ad60: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+0000ad70: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
+0000ad80: 7365 6e64 6572 5f63 6861 745f 6964 273a  sender_chat_id':
+0000ad90: 2073 656e 6465 725f 6368 6174 5f69 647d   sender_chat_id}
+0000ada0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000adb0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000adc0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000add0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000ade0: 686f 643d 2770 6f73 7427 2c20 7665 7269  hod='post', veri
+0000adf0: 6679 3d76 6572 6966 7929 0a0a 0a64 6566  fy=verify)...def
+0000ae00: 2073 6574 5f63 6861 745f 7065 726d 6973   set_chat_permis
+0000ae10: 7369 6f6e 7328 746f 6b65 6e2c 2063 6861  sions(token, cha
+0000ae20: 745f 6964 2c20 7065 726d 6973 7369 6f6e  t_id, permission
+0000ae30: 732c 2075 7365 5f69 6e64 6570 656e 6465  s, use_independe
+0000ae40: 6e74 5f63 6861 745f 7065 726d 6973 7369  nt_chat_permissi
+0000ae50: 6f6e 733d 4e6f 6e65 2c20 7665 7269 6679  ons=None, verify
+0000ae60: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+0000ae70: 6f64 5f75 726c 203d 2027 7365 7443 6861  od_url = 'setCha
+0000ae80: 7450 6572 6d69 7373 696f 6e73 270a 2020  tPermissions'.  
+0000ae90: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
+0000aea0: 2020 2020 2020 2763 6861 745f 6964 273a        'chat_id':
+0000aeb0: 2063 6861 745f 6964 2c0a 2020 2020 2020   chat_id,.      
+0000aec0: 2020 2770 6572 6d69 7373 696f 6e73 273a    'permissions':
+0000aed0: 2070 6572 6d69 7373 696f 6e73 2e74 6f5f   permissions.to_
+0000aee0: 6a73 6f6e 2829 0a20 2020 207d 0a20 2020  json().    }.   
+0000aef0: 2069 6620 7573 655f 696e 6465 7065 6e64   if use_independ
+0000af00: 656e 745f 6368 6174 5f70 6572 6d69 7373  ent_chat_permiss
+0000af10: 696f 6e73 2069 7320 6e6f 7420 4e6f 6e65  ions is not None
+0000af20: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000af30: 645b 2775 7365 5f69 6e64 6570 656e 6465  d['use_independe
+0000af40: 6e74 5f63 6861 745f 7065 726d 6973 7369  nt_chat_permissi
+0000af50: 6f6e 7327 5d20 3d20 7573 655f 696e 6465  ons'] = use_inde
+0000af60: 7065 6e64 656e 745f 6368 6174 5f70 6572  pendent_chat_per
+0000af70: 6d69 7373 696f 6e73 0a20 2020 2072 6574  missions.    ret
+0000af80: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+0000af90: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000afa0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000afb0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000afc0: 7427 2c20 7665 7269 6679 3d76 6572 6966  t', verify=verif
+0000afd0: 7929 0a0a 0a64 6566 2063 7265 6174 655f  y)...def create_
+0000afe0: 6368 6174 5f69 6e76 6974 655f 6c69 6e6b  chat_invite_link
+0000aff0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+0000b000: 206e 616d 652c 2065 7870 6972 655f 6461   name, expire_da
+0000b010: 7465 2c20 6d65 6d62 6572 5f6c 696d 6974  te, member_limit
+0000b020: 2c20 6372 6561 7465 735f 6a6f 696e 5f72  , creates_join_r
+0000b030: 6571 7565 7374 2c20 7665 7269 6679 3d54  equest, verify=T
+0000b040: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+0000b050: 5f75 726c 203d 2027 6372 6561 7465 4368  _url = 'createCh
+0000b060: 6174 496e 7669 7465 4c69 6e6b 270a 2020  atInviteLink'.  
+0000b070: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
+0000b080: 2020 2020 2020 2763 6861 745f 6964 273a        'chat_id':
+0000b090: 2063 6861 745f 6964 0a20 2020 207d 0a0a   chat_id.    }..
+0000b0a0: 2020 2020 6966 2065 7870 6972 655f 6461      if expire_da
+0000b0b0: 7465 2069 7320 6e6f 7420 4e6f 6e65 3a0a  te is not None:.
+0000b0c0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0000b0d0: 7461 6e63 6528 6578 7069 7265 5f64 6174  tance(expire_dat
+0000b0e0: 652c 2064 6174 6574 696d 6529 3a0a 2020  e, datetime):.  
+0000b0f0: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
+0000b100: 645b 2765 7870 6972 655f 6461 7465 275d  d['expire_date']
+0000b110: 203d 2065 7870 6972 655f 6461 7465 2e74   = expire_date.t
+0000b120: 696d 6573 7461 6d70 2829 0a20 2020 2020  imestamp().     
+0000b130: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000b140: 2020 2020 2070 6179 6c6f 6164 5b27 6578       payload['ex
+0000b150: 7069 7265 5f64 6174 6527 5d20 3d20 6578  pire_date'] = ex
+0000b160: 7069 7265 5f64 6174 650a 2020 2020 6966  pire_date.    if
+0000b170: 206d 656d 6265 725f 6c69 6d69 743a 0a20   member_limit:. 
+0000b180: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000b190: 6d65 6d62 6572 5f6c 696d 6974 275d 203d  member_limit'] =
+0000b1a0: 206d 656d 6265 725f 6c69 6d69 740a 2020   member_limit.  
+0000b1b0: 2020 6966 2063 7265 6174 6573 5f6a 6f69    if creates_joi
+0000b1c0: 6e5f 7265 7175 6573 7420 6973 206e 6f74  n_request is not
+0000b1d0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000b1e0: 6179 6c6f 6164 5b27 6372 6561 7465 735f  ayload['creates_
+0000b1f0: 6a6f 696e 5f72 6571 7565 7374 275d 203d  join_request'] =
+0000b200: 2063 7265 6174 6573 5f6a 6f69 6e5f 7265   creates_join_re
+0000b210: 7175 6573 740a 2020 2020 6966 206e 616d  quest.    if nam
+0000b220: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000b230: 6164 5b27 6e61 6d65 275d 203d 206e 616d  ad['name'] = nam
+0000b240: 650a 0a20 2020 2072 6574 7572 6e20 5f6d  e..    return _m
+0000b250: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000b260: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000b270: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000b280: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+0000b290: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+0000b2a0: 6566 2065 6469 745f 6368 6174 5f69 6e76  ef edit_chat_inv
+0000b2b0: 6974 655f 6c69 6e6b 2874 6f6b 656e 2c20  ite_link(token, 
+0000b2c0: 6368 6174 5f69 642c 2069 6e76 6974 655f  chat_id, invite_
+0000b2d0: 6c69 6e6b 2c20 6e61 6d65 2c20 6578 7069  link, name, expi
+0000b2e0: 7265 5f64 6174 652c 206d 656d 6265 725f  re_date, member_
+0000b2f0: 6c69 6d69 742c 2063 7265 6174 6573 5f6a  limit, creates_j
+0000b300: 6f69 6e5f 7265 7175 6573 742c 0a20 2020  oin_request,.   
+0000b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b320: 2020 2020 2020 2076 6572 6966 793d 5472         verify=Tr
+0000b330: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+0000b340: 7572 6c20 3d20 2765 6469 7443 6861 7449  url = 'editChatI
+0000b350: 6e76 6974 654c 696e 6b27 0a20 2020 2070  nviteLink'.    p
+0000b360: 6179 6c6f 6164 203d 207b 0a20 2020 2020  ayload = {.     
+0000b370: 2020 2027 6368 6174 5f69 6427 3a20 6368     'chat_id': ch
+0000b380: 6174 5f69 642c 0a20 2020 2020 2020 2027  at_id,.        '
+0000b390: 696e 7669 7465 5f6c 696e 6b27 3a20 696e  invite_link': in
+0000b3a0: 7669 7465 5f6c 696e 6b0a 2020 2020 7d0a  vite_link.    }.
+0000b3b0: 0a20 2020 2069 6620 6578 7069 7265 5f64  .    if expire_d
+0000b3c0: 6174 6520 6973 206e 6f74 204e 6f6e 653a  ate is not None:
+0000b3d0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0000b3e0: 7374 616e 6365 2865 7870 6972 655f 6461  stance(expire_da
+0000b3f0: 7465 2c20 6461 7465 7469 6d65 293a 0a20  te, datetime):. 
+0000b400: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+0000b410: 6164 5b27 6578 7069 7265 5f64 6174 6527  ad['expire_date'
+0000b420: 5d20 3d20 6578 7069 7265 5f64 6174 652e  ] = expire_date.
+0000b430: 7469 6d65 7374 616d 7028 290a 2020 2020  timestamp().    
+0000b440: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000b450: 2020 2020 2020 7061 796c 6f61 645b 2765        payload['e
+0000b460: 7870 6972 655f 6461 7465 275d 203d 2065  xpire_date'] = e
+0000b470: 7870 6972 655f 6461 7465 0a0a 2020 2020  xpire_date..    
+0000b480: 6966 206d 656d 6265 725f 6c69 6d69 7420  if member_limit 
+0000b490: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000b4a0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+0000b4b0: 6d62 6572 5f6c 696d 6974 275d 203d 206d  mber_limit'] = m
+0000b4c0: 656d 6265 725f 6c69 6d69 740a 2020 2020  ember_limit.    
+0000b4d0: 6966 206e 616d 653a 0a20 2020 2020 2020  if name:.       
+0000b4e0: 2070 6179 6c6f 6164 5b27 6e61 6d65 275d   payload['name']
+0000b4f0: 203d 206e 616d 650a 2020 2020 6966 2063   = name.    if c
+0000b500: 7265 6174 6573 5f6a 6f69 6e5f 7265 7175  reates_join_requ
+0000b510: 6573 7420 6973 206e 6f74 204e 6f6e 653a  est is not None:
+0000b520: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000b530: 5b27 6372 6561 7465 735f 6a6f 696e 5f72  ['creates_join_r
+0000b540: 6571 7565 7374 275d 203d 2063 7265 6174  equest'] = creat
+0000b550: 6573 5f6a 6f69 6e5f 7265 7175 6573 740a  es_join_request.
+0000b560: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000b570: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000b580: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000b590: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000b5a0: 686f 643d 2770 6f73 7427 2c20 7665 7269  hod='post', veri
+0000b5b0: 6679 3d76 6572 6966 7929 0a0a 0a64 6566  fy=verify)...def
+0000b5c0: 2072 6576 6f6b 655f 6368 6174 5f69 6e76   revoke_chat_inv
+0000b5d0: 6974 655f 6c69 6e6b 2874 6f6b 656e 2c20  ite_link(token, 
+0000b5e0: 6368 6174 5f69 642c 2069 6e76 6974 655f  chat_id, invite_
+0000b5f0: 6c69 6e6b 2c20 7665 7269 6679 3d54 7275  link, verify=Tru
+0000b600: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+0000b610: 726c 203d 2027 7265 766f 6b65 4368 6174  rl = 'revokeChat
+0000b620: 496e 7669 7465 4c69 6e6b 270a 2020 2020  InviteLink'.    
+0000b630: 7061 796c 6f61 6420 3d20 7b0a 2020 2020  payload = {.    
+0000b640: 2020 2020 2763 6861 745f 6964 273a 2063      'chat_id': c
+0000b650: 6861 745f 6964 2c0a 2020 2020 2020 2020  hat_id,.        
+0000b660: 2769 6e76 6974 655f 6c69 6e6b 273a 2069  'invite_link': i
+0000b670: 6e76 6974 655f 6c69 6e6b 0a20 2020 207d  nvite_link.    }
+0000b680: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000b690: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000b6a0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000b6b0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000b6c0: 686f 643d 2770 6f73 7427 2c20 7665 7269  hod='post', veri
+0000b6d0: 6679 3d76 6572 6966 7929 0a0a 0a64 6566  fy=verify)...def
+0000b6e0: 2065 7870 6f72 745f 6368 6174 5f69 6e76   export_chat_inv
+0000b6f0: 6974 655f 6c69 6e6b 2874 6f6b 656e 2c20  ite_link(token, 
+0000b700: 6368 6174 5f69 642c 2076 6572 6966 793d  chat_id, verify=
+0000b710: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+0000b720: 645f 7572 6c20 3d20 2765 7870 6f72 7443  d_url = 'exportC
+0000b730: 6861 7449 6e76 6974 654c 696e 6b27 0a20  hatInviteLink'. 
+0000b740: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+0000b750: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+0000b760: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+0000b770: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000b780: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000b790: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000b7a0: 7468 6f64 3d27 706f 7374 272c 2076 6572  thod='post', ver
+0000b7b0: 6966 793d 7665 7269 6679 290a 0a0a 6465  ify=verify)...de
+0000b7c0: 6620 6170 7072 6f76 655f 6368 6174 5f6a  f approve_chat_j
+0000b7d0: 6f69 6e5f 7265 7175 6573 7428 746f 6b65  oin_request(toke
+0000b7e0: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
+0000b7f0: 5f69 642c 2076 6572 6966 793d 5472 7565  _id, verify=True
+0000b800: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+0000b810: 6c20 3d20 2761 7070 726f 7665 4368 6174  l = 'approveChat
+0000b820: 4a6f 696e 5265 7175 6573 7427 0a20 2020  JoinRequest'.   
+0000b830: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
+0000b840: 2020 2020 2027 6368 6174 5f69 6427 3a20       'chat_id': 
+0000b850: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
+0000b860: 2027 7573 6572 5f69 6427 3a20 7573 6572   'user_id': user
+0000b870: 5f69 640a 2020 2020 7d0a 2020 2020 7265  _id.    }.    re
+0000b880: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000b890: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000b8a0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000b8b0: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+0000b8c0: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+0000b8d0: 6679 290a 0a0a 6465 6620 6465 636c 696e  fy)...def declin
+0000b8e0: 655f 6368 6174 5f6a 6f69 6e5f 7265 7175  e_chat_join_requ
+0000b8f0: 6573 7428 746f 6b65 6e2c 2063 6861 745f  est(token, chat_
+0000b900: 6964 2c20 7573 6572 5f69 642c 2076 6572  id, user_id, ver
+0000b910: 6966 793d 5472 7565 293a 0a20 2020 206d  ify=True):.    m
+0000b920: 6574 686f 645f 7572 6c20 3d20 2764 6563  ethod_url = 'dec
+0000b930: 6c69 6e65 4368 6174 4a6f 696e 5265 7175  lineChatJoinRequ
+0000b940: 6573 7427 0a20 2020 2070 6179 6c6f 6164  est'.    payload
+0000b950: 203d 207b 0a20 2020 2020 2020 2027 6368   = {.        'ch
+0000b960: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
+0000b970: 0a20 2020 2020 2020 2027 7573 6572 5f69  .        'user_i
+0000b980: 6427 3a20 7573 6572 5f69 640a 2020 2020  d': user_id.    
+0000b990: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
+0000b9a0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000b9b0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000b9c0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000b9d0: 7468 6f64 3d27 706f 7374 272c 2076 6572  thod='post', ver
+0000b9e0: 6966 793d 7665 7269 6679 290a 0a0a 6465  ify=verify)...de
+0000b9f0: 6620 7365 745f 6368 6174 5f70 686f 746f  f set_chat_photo
+0000ba00: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+0000ba10: 2070 686f 746f 2c20 7665 7269 6679 3d54   photo, verify=T
+0000ba20: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+0000ba30: 5f75 726c 203d 2027 7365 7443 6861 7450  _url = 'setChatP
+0000ba40: 686f 746f 270a 2020 2020 7061 796c 6f61  hoto'.    payloa
+0000ba50: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000ba60: 6368 6174 5f69 647d 0a20 2020 2066 696c  chat_id}.    fil
+0000ba70: 6573 203d 204e 6f6e 650a 2020 2020 6966  es = None.    if
+0000ba80: 2075 7469 6c2e 6973 5f73 7472 696e 6728   util.is_string(
+0000ba90: 7068 6f74 6f29 3a0a 2020 2020 2020 2020  photo):.        
+0000baa0: 7061 796c 6f61 645b 2770 686f 746f 275d  payload['photo']
+0000bab0: 203d 2070 686f 746f 0a20 2020 2065 6c69   = photo.    eli
+0000bac0: 6620 7574 696c 2e69 735f 7069 6c5f 696d  f util.is_pil_im
+0000bad0: 6167 6528 7068 6f74 6f29 3a0a 2020 2020  age(photo):.    
+0000bae0: 2020 2020 6669 6c65 7320 3d20 7b27 7068      files = {'ph
+0000baf0: 6f74 6f27 3a20 7574 696c 2e70 696c 5f69  oto': util.pil_i
+0000bb00: 6d61 6765 5f74 6f5f 6669 6c65 2870 686f  mage_to_file(pho
+0000bb10: 746f 297d 0a20 2020 2065 6c73 653a 0a20  to)}.    else:. 
+0000bb20: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
+0000bb30: 2770 686f 746f 273a 2070 686f 746f 7d0a  'photo': photo}.
+0000bb40: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000bb50: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000bb60: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000bb70: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
+0000bb80: 733d 6669 6c65 732c 206d 6574 686f 643d  s=files, method=
+0000bb90: 2770 6f73 7427 2c20 7665 7269 6679 3d76  'post', verify=v
+0000bba0: 6572 6966 7929 0a0a 0a64 6566 2064 656c  erify)...def del
+0000bbb0: 6574 655f 6368 6174 5f70 686f 746f 2874  ete_chat_photo(t
+0000bbc0: 6f6b 656e 2c20 6368 6174 5f69 642c 2076  oken, chat_id, v
+0000bbd0: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+0000bbe0: 206d 6574 686f 645f 7572 6c20 3d20 2764   method_url = 'd
+0000bbf0: 656c 6574 6543 6861 7450 686f 746f 270a  eleteChatPhoto'.
+0000bc00: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+0000bc10: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+0000bc20: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
+0000bc30: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000bc40: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000bc50: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000bc60: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+0000bc70: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+0000bc80: 6566 2073 6574 5f63 6861 745f 7469 746c  ef set_chat_titl
+0000bc90: 6528 746f 6b65 6e2c 2063 6861 745f 6964  e(token, chat_id
+0000bca0: 2c20 7469 746c 652c 2076 6572 6966 793d  , title, verify=
+0000bcb0: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+0000bcc0: 645f 7572 6c20 3d20 2773 6574 4368 6174  d_url = 'setChat
+0000bcd0: 5469 746c 6527 0a20 2020 2070 6179 6c6f  Title'.    paylo
+0000bce0: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+0000bcf0: 2063 6861 745f 6964 2c20 2774 6974 6c65   chat_id, 'title
+0000bd00: 273a 2074 6974 6c65 7d0a 2020 2020 7265  ': title}.    re
+0000bd10: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000bd20: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000bd30: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000bd40: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+0000bd50: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+0000bd60: 6679 290a 0a0a 6465 6620 7365 745f 6d79  fy)...def set_my
+0000bd70: 5f64 6573 6372 6970 7469 6f6e 2874 6f6b  _description(tok
+0000bd80: 656e 2c20 6465 7363 7269 7074 696f 6e3d  en, description=
+0000bd90: 4e6f 6e65 2c20 6c61 6e67 7561 6765 5f63  None, language_c
+0000bda0: 6f64 653d 4e6f 6e65 2c20 7665 7269 6679  ode=None, verify
+0000bdb0: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+0000bdc0: 6f64 5f75 726c 203d 2072 2773 6574 4d79  od_url = r'setMy
+0000bdd0: 4465 7363 7269 7074 696f 6e27 0a20 2020  Description'.   
+0000bde0: 2070 6179 6c6f 6164 203d 207b 7d0a 2020   payload = {}.  
+0000bdf0: 2020 6966 2064 6573 6372 6970 7469 6f6e    if description
+0000be00: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000be10: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
+0000be20: 6573 6372 6970 7469 6f6e 275d 203d 2064  escription'] = d
+0000be30: 6573 6372 6970 7469 6f6e 0a20 2020 2069  escription.    i
+0000be40: 6620 6c61 6e67 7561 6765 5f63 6f64 6520  f language_code 
+0000be50: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000be60: 2020 2020 2070 6179 6c6f 6164 5b27 6c61       payload['la
+0000be70: 6e67 7561 6765 5f63 6f64 6527 5d20 3d20  nguage_code'] = 
+0000be80: 6c61 6e67 7561 6765 5f63 6f64 650a 2020  language_code.  
+0000be90: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+0000bea0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+0000beb0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+0000bec0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
+0000bed0: 3d27 706f 7374 272c 2076 6572 6966 793d  ='post', verify=
+0000bee0: 7665 7269 6679 290a 0a0a 6465 6620 6765  verify)...def ge
+0000bef0: 745f 6d79 5f64 6573 6372 6970 7469 6f6e  t_my_description
+0000bf00: 2874 6f6b 656e 2c20 6c61 6e67 7561 6765  (token, language
+0000bf10: 5f63 6f64 653d 4e6f 6e65 2c20 7665 7269  _code=None, veri
+0000bf20: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+0000bf30: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
+0000bf40: 4d79 4465 7363 7269 7074 696f 6e27 0a20  MyDescription'. 
+0000bf50: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
+0000bf60: 2020 2020 6966 206c 616e 6775 6167 655f      if language_
+0000bf70: 636f 6465 3a0a 2020 2020 2020 2020 7061  code:.        pa
+0000bf80: 796c 6f61 645b 276c 616e 6775 6167 655f  yload['language_
+0000bf90: 636f 6465 275d 203d 206c 616e 6775 6167  code'] = languag
+0000bfa0: 655f 636f 6465 0a20 2020 2072 6574 7572  e_code.    retur
+0000bfb0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000bfc0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000bfd0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000bfe0: 642c 2076 6572 6966 793d 7665 7269 6679  d, verify=verify
+0000bff0: 290a 0a0a 6465 6620 7365 745f 6d79 5f73  )...def set_my_s
+0000c000: 686f 7274 5f64 6573 6372 6970 7469 6f6e  hort_description
+0000c010: 2874 6f6b 656e 2c20 7368 6f72 745f 6465  (token, short_de
+0000c020: 7363 7269 7074 696f 6e3d 4e6f 6e65 2c20  scription=None, 
+0000c030: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
+0000c040: 6e65 2c20 7665 7269 6679 3d54 7275 6529  ne, verify=True)
+0000c050: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+0000c060: 203d 2072 2773 6574 4d79 5368 6f72 7444   = r'setMyShortD
+0000c070: 6573 6372 6970 7469 6f6e 270a 2020 2020  escription'.    
+0000c080: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
+0000c090: 2069 6620 7368 6f72 745f 6465 7363 7269   if short_descri
+0000c0a0: 7074 696f 6e20 6973 206e 6f74 204e 6f6e  ption is not Non
+0000c0b0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+0000c0c0: 6164 5b27 7368 6f72 745f 6465 7363 7269  ad['short_descri
+0000c0d0: 7074 696f 6e27 5d20 3d20 7368 6f72 745f  ption'] = short_
+0000c0e0: 6465 7363 7269 7074 696f 6e0a 2020 2020  description.    
+0000c0f0: 6966 206c 616e 6775 6167 655f 636f 6465  if language_code
+0000c100: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000c110: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
+0000c120: 616e 6775 6167 655f 636f 6465 275d 203d  anguage_code'] =
+0000c130: 206c 616e 6775 6167 655f 636f 6465 0a20   language_code. 
+0000c140: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000c150: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000c160: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000c170: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000c180: 643d 2770 6f73 7427 2c20 7665 7269 6679  d='post', verify
+0000c190: 3d76 6572 6966 7929 0a0a 0a64 6566 2067  =verify)...def g
+0000c1a0: 6574 5f6d 795f 7368 6f72 745f 6465 7363  et_my_short_desc
+0000c1b0: 7269 7074 696f 6e28 746f 6b65 6e2c 206c  ription(token, l
+0000c1c0: 616e 6775 6167 655f 636f 6465 3d4e 6f6e  anguage_code=Non
+0000c1d0: 652c 2076 6572 6966 793d 5472 7565 293a  e, verify=True):
+0000c1e0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000c1f0: 3d20 7227 6765 744d 7953 686f 7274 4465  = r'getMyShortDe
+0000c200: 7363 7269 7074 696f 6e27 0a20 2020 2070  scription'.    p
+0000c210: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
+0000c220: 6966 206c 616e 6775 6167 655f 636f 6465  if language_code
+0000c230: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000c240: 645b 276c 616e 6775 6167 655f 636f 6465  d['language_code
+0000c250: 275d 203d 206c 616e 6775 6167 655f 636f  '] = language_co
+0000c260: 6465 0a20 2020 2072 6574 7572 6e20 5f6d  de.    return _m
+0000c270: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000c280: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000c290: 6172 616d 733d 7061 796c 6f61 642c 2076  arams=payload, v
+0000c2a0: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+0000c2b0: 6465 6620 6765 745f 6d79 5f63 6f6d 6d61  def get_my_comma
+0000c2c0: 6e64 7328 746f 6b65 6e2c 2073 636f 7065  nds(token, scope
+0000c2d0: 3d4e 6f6e 652c 206c 616e 6775 6167 655f  =None, language_
+0000c2e0: 636f 6465 3d4e 6f6e 652c 2076 6572 6966  code=None, verif
+0000c2f0: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+0000c300: 686f 645f 7572 6c20 3d20 7227 6765 744d  hod_url = r'getM
+0000c310: 7943 6f6d 6d61 6e64 7327 0a20 2020 2070  yCommands'.    p
+0000c320: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
+0000c330: 6966 2073 636f 7065 3a0a 2020 2020 2020  if scope:.      
+0000c340: 2020 7061 796c 6f61 645b 2773 636f 7065    payload['scope
+0000c350: 275d 203d 2073 636f 7065 2e74 6f5f 6a73  '] = scope.to_js
+0000c360: 6f6e 2829 0a20 2020 2069 6620 6c61 6e67  on().    if lang
+0000c370: 7561 6765 5f63 6f64 653a 0a20 2020 2020  uage_code:.     
+0000c380: 2020 2070 6179 6c6f 6164 5b27 6c61 6e67     payload['lang
+0000c390: 7561 6765 5f63 6f64 6527 5d20 3d20 6c61  uage_code'] = la
+0000c3a0: 6e67 7561 6765 5f63 6f64 650a 2020 2020  nguage_code.    
+0000c3b0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+0000c3c0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000c3d0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000c3e0: 6179 6c6f 6164 2c20 7665 7269 6679 3d76  ayload, verify=v
+0000c3f0: 6572 6966 7929 0a0a 0a64 6566 2073 6574  erify)...def set
+0000c400: 5f6d 795f 6e61 6d65 2874 6f6b 656e 2c20  _my_name(token, 
+0000c410: 6e61 6d65 3d4e 6f6e 652c 206c 616e 6775  name=None, langu
+0000c420: 6167 655f 636f 6465 3d4e 6f6e 652c 2076  age_code=None, v
+0000c430: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+0000c440: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+0000c450: 7365 744d 794e 616d 6527 0a20 2020 2070  setMyName'.    p
+0000c460: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
+0000c470: 6966 206e 616d 6520 6973 206e 6f74 204e  if name is not N
+0000c480: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+0000c490: 6c6f 6164 5b27 6e61 6d65 275d 203d 206e  load['name'] = n
+0000c4a0: 616d 650a 2020 2020 6966 206c 616e 6775  ame.    if langu
+0000c4b0: 6167 655f 636f 6465 2069 7320 6e6f 7420  age_code is not 
+0000c4c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+0000c4d0: 796c 6f61 645b 276c 616e 6775 6167 655f  yload['language_
+0000c4e0: 636f 6465 275d 203d 206c 616e 6775 6167  code'] = languag
+0000c4f0: 655f 636f 6465 0a20 2020 2072 6574 7572  e_code.    retur
+0000c500: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000c510: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000c520: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000c530: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000c540: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+0000c550: 0a0a 0a64 6566 2067 6574 5f6d 795f 6e61  ...def get_my_na
+0000c560: 6d65 2874 6f6b 656e 2c20 6c61 6e67 7561  me(token, langua
+0000c570: 6765 5f63 6f64 653d 4e6f 6e65 2c20 7665  ge_code=None, ve
+0000c580: 7269 6679 3d54 7275 6529 3a0a 2020 2020  rify=True):.    
+0000c590: 6d65 7468 6f64 5f75 726c 203d 2072 2767  method_url = r'g
+0000c5a0: 6574 4d79 4e61 6d65 270a 2020 2020 7061  etMyName'.    pa
+0000c5b0: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
+0000c5c0: 6620 6c61 6e67 7561 6765 5f63 6f64 6520  f language_code 
+0000c5d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000c5e0: 2020 2020 2070 6179 6c6f 6164 5b27 6c61       payload['la
+0000c5f0: 6e67 7561 6765 5f63 6f64 6527 5d20 3d20  nguage_code'] = 
+0000c600: 6c61 6e67 7561 6765 5f63 6f64 650a 2020  language_code.  
+0000c610: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+0000c620: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+0000c630: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+0000c640: 3d70 6179 6c6f 6164 2c20 7665 7269 6679  =payload, verify
+0000c650: 3d76 6572 6966 7929 0a0a 0a64 6566 2073  =verify)...def s
+0000c660: 6574 5f63 6861 745f 6d65 6e75 5f62 7574  et_chat_menu_but
+0000c670: 746f 6e28 746f 6b65 6e2c 2063 6861 745f  ton(token, chat_
+0000c680: 6964 3d4e 6f6e 652c 206d 656e 755f 6275  id=None, menu_bu
+0000c690: 7474 6f6e 3d4e 6f6e 652c 2076 6572 6966  tton=None, verif
+0000c6a0: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+0000c6b0: 686f 645f 7572 6c20 3d20 7227 7365 7443  hod_url = r'setC
+0000c6c0: 6861 744d 656e 7542 7574 746f 6e27 0a20  hatMenuButton'. 
+0000c6d0: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
+0000c6e0: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
+0000c6f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000c700: 2763 6861 745f 6964 275d 203d 2063 6861  'chat_id'] = cha
+0000c710: 745f 6964 0a20 2020 2069 6620 6d65 6e75  t_id.    if menu
+0000c720: 5f62 7574 746f 6e3a 0a20 2020 2020 2020  _button:.       
+0000c730: 2070 6179 6c6f 6164 5b27 6d65 6e75 5f62   payload['menu_b
+0000c740: 7574 746f 6e27 5d20 3d20 6d65 6e75 5f62  utton'] = menu_b
+0000c750: 7574 746f 6e2e 746f 5f6a 736f 6e28 290a  utton.to_json().
+0000c760: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000c770: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000c780: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000c790: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000c7a0: 6f64 3d27 706f 7374 272c 2076 6572 6966  od='post', verif
+0000c7b0: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+0000c7c0: 6765 745f 6368 6174 5f6d 656e 755f 6275  get_chat_menu_bu
+0000c7d0: 7474 6f6e 2874 6f6b 656e 2c20 6368 6174  tton(token, chat
+0000c7e0: 5f69 643d 4e6f 6e65 2c20 7665 7269 6679  _id=None, verify
+0000c7f0: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+0000c800: 6f64 5f75 726c 203d 2072 2767 6574 4368  od_url = r'getCh
+0000c810: 6174 4d65 6e75 4275 7474 6f6e 270a 2020  atMenuButton'.  
+0000c820: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
+0000c830: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
+0000c840: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000c850: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
+0000c860: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
+0000c870: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000c880: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000c890: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000c8a0: 6d65 7468 6f64 3d27 706f 7374 272c 2076  method='post', v
+0000c8b0: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+0000c8c0: 6465 6620 7365 745f 6d79 5f64 6566 6175  def set_my_defau
+0000c8d0: 6c74 5f61 646d 696e 6973 7472 6174 6f72  lt_administrator
+0000c8e0: 5f72 6967 6874 7328 746f 6b65 6e2c 2072  _rights(token, r
+0000c8f0: 6967 6874 733d 4e6f 6e65 2c20 666f 725f  ights=None, for_
+0000c900: 6368 616e 6e65 6c73 3d4e 6f6e 652c 2076  channels=None, v
+0000c910: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+0000c920: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+0000c930: 7365 744d 7944 6566 6175 6c74 4164 6d69  setMyDefaultAdmi
+0000c940: 6e69 7374 7261 746f 7252 6967 6874 7327  nistratorRights'
+0000c950: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000c960: 7d0a 2020 2020 6966 2072 6967 6874 733a  }.    if rights:
+0000c970: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000c980: 5b27 7269 6768 7473 275d 203d 2072 6967  ['rights'] = rig
+0000c990: 6874 732e 746f 5f6a 736f 6e28 290a 2020  hts.to_json().  
+0000c9a0: 2020 6966 2066 6f72 5f63 6861 6e6e 656c    if for_channel
+0000c9b0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+0000c9c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000c9d0: 666f 725f 6368 616e 6e65 6c73 275d 203d  for_channels'] =
+0000c9e0: 2066 6f72 5f63 6861 6e6e 656c 730a 2020   for_channels.  
+0000c9f0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+0000ca00: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+0000ca10: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+0000ca20: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
+0000ca30: 3d27 706f 7374 272c 2076 6572 6966 793d  ='post', verify=
+0000ca40: 7665 7269 6679 290a 0a0a 6465 6620 6765  verify)...def ge
+0000ca50: 745f 6d79 5f64 6566 6175 6c74 5f61 646d  t_my_default_adm
+0000ca60: 696e 6973 7472 6174 6f72 5f72 6967 6874  inistrator_right
+0000ca70: 7328 746f 6b65 6e2c 2066 6f72 5f63 6861  s(token, for_cha
+0000ca80: 6e6e 656c 733d 4e6f 6e65 2c20 7665 7269  nnels=None, veri
+0000ca90: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+0000caa0: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
+0000cab0: 4d79 4465 6661 756c 7441 646d 696e 6973  MyDefaultAdminis
+0000cac0: 7472 6174 6f72 5269 6768 7473 270a 2020  tratorRights'.  
+0000cad0: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
+0000cae0: 2020 2069 6620 666f 725f 6368 616e 6e65     if for_channe
+0000caf0: 6c73 3a0a 2020 2020 2020 2020 7061 796c  ls:.        payl
+0000cb00: 6f61 645b 2766 6f72 5f63 6861 6e6e 656c  oad['for_channel
+0000cb10: 7327 5d20 3d20 666f 725f 6368 616e 6e65  s'] = for_channe
+0000cb20: 6c73 0a20 2020 2072 6574 7572 6e20 5f6d  ls.    return _m
+0000cb30: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000cb40: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000cb50: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000cb60: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+0000cb70: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+0000cb80: 6566 2073 6574 5f6d 795f 636f 6d6d 616e  ef set_my_comman
+0000cb90: 6473 2874 6f6b 656e 2c20 636f 6d6d 616e  ds(token, comman
+0000cba0: 6473 2c20 7363 6f70 653d 4e6f 6e65 2c20  ds, scope=None, 
+0000cbb0: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
+0000cbc0: 6e65 2c20 7665 7269 6679 3d54 7275 6529  ne, verify=True)
+0000cbd0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+0000cbe0: 203d 2072 2773 6574 4d79 436f 6d6d 616e   = r'setMyComman
+0000cbf0: 6473 270a 2020 2020 7061 796c 6f61 6420  ds'.    payload 
+0000cc00: 3d20 7b27 636f 6d6d 616e 6473 273a 205f  = {'commands': _
+0000cc10: 636f 6e76 6572 745f 6c69 7374 5f6a 736f  convert_list_jso
+0000cc20: 6e5f 7365 7269 616c 697a 6162 6c65 2863  n_serializable(c
+0000cc30: 6f6d 6d61 6e64 7329 7d0a 2020 2020 6966  ommands)}.    if
+0000cc40: 2073 636f 7065 3a0a 2020 2020 2020 2020   scope:.        
+0000cc50: 7061 796c 6f61 645b 2773 636f 7065 275d  payload['scope']
+0000cc60: 203d 2073 636f 7065 2e74 6f5f 6a73 6f6e   = scope.to_json
+0000cc70: 2829 0a20 2020 2069 6620 6c61 6e67 7561  ().    if langua
+0000cc80: 6765 5f63 6f64 653a 0a20 2020 2020 2020  ge_code:.       
+0000cc90: 2070 6179 6c6f 6164 5b27 6c61 6e67 7561   payload['langua
+0000cca0: 6765 5f63 6f64 6527 5d20 3d20 6c61 6e67  ge_code'] = lang
+0000ccb0: 7561 6765 5f63 6f64 650a 2020 2020 7265  uage_code.    re
+0000ccc0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000ccd0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000cce0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000ccf0: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+0000cd00: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+0000cd10: 6679 290a 0a0a 6465 6620 6765 745f 6275  fy)...def get_bu
+0000cd20: 7369 6e65 7373 5f63 6f6e 6e65 6374 696f  siness_connectio
+0000cd30: 6e28 746f 6b65 6e2c 2062 7573 696e 6573  n(token, busines
+0000cd40: 735f 636f 6e6e 6563 7469 6f6e 5f69 642c  s_connection_id,
+0000cd50: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+0000cd60: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000cd70: 2767 6574 4275 7369 6e65 7373 436f 6e6e  'getBusinessConn
+0000cd80: 6563 7469 6f6e 270a 2020 2020 7061 796c  ection'.    payl
+0000cd90: 6f61 6420 3d20 7b27 6275 7369 6e65 7373  oad = {'business
+0000cda0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 273a  _connection_id':
+0000cdb0: 2062 7573 696e 6573 735f 636f 6e6e 6563   business_connec
+0000cdc0: 7469 6f6e 5f69 647d 0a20 2020 2072 6574  tion_id}.    ret
+0000cdd0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+0000cde0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000cdf0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000ce00: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000ce10: 7427 2c20 7665 7269 6679 3d76 6572 6966  t', verify=verif
+0000ce20: 7929 0a0a 0a64 6566 2064 656c 6574 655f  y)...def delete_
+0000ce30: 6d79 5f63 6f6d 6d61 6e64 7328 746f 6b65  my_commands(toke
+0000ce40: 6e2c 2073 636f 7065 3d4e 6f6e 652c 206c  n, scope=None, l
+0000ce50: 616e 6775 6167 655f 636f 6465 3d4e 6f6e  anguage_code=Non
+0000ce60: 652c 2076 6572 6966 793d 5472 7565 293a  e, verify=True):
+0000ce70: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000ce80: 3d20 7227 6465 6c65 7465 4d79 436f 6d6d  = r'deleteMyComm
+0000ce90: 616e 6473 270a 2020 2020 7061 796c 6f61  ands'.    payloa
+0000cea0: 6420 3d20 7b7d 0a20 2020 2069 6620 7363  d = {}.    if sc
+0000ceb0: 6f70 653a 0a20 2020 2020 2020 2070 6179  ope:.        pay
+0000cec0: 6c6f 6164 5b27 7363 6f70 6527 5d20 3d20  load['scope'] = 
+0000ced0: 7363 6f70 652e 746f 5f6a 736f 6e28 290a  scope.to_json().
+0000cee0: 2020 2020 6966 206c 616e 6775 6167 655f      if language_
+0000cef0: 636f 6465 3a0a 2020 2020 2020 2020 7061  code:.        pa
+0000cf00: 796c 6f61 645b 276c 616e 6775 6167 655f  yload['language_
+0000cf10: 636f 6465 275d 203d 206c 616e 6775 6167  code'] = languag
+0000cf20: 655f 636f 6465 0a20 2020 2072 6574 7572  e_code.    retur
+0000cf30: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000cf40: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000cf50: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000cf60: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000cf70: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+0000cf80: 0a0a 0a64 6566 2073 6574 5f63 6861 745f  ...def set_chat_
+0000cf90: 6465 7363 7269 7074 696f 6e28 746f 6b65  description(toke
+0000cfa0: 6e2c 2063 6861 745f 6964 2c20 6465 7363  n, chat_id, desc
+0000cfb0: 7269 7074 696f 6e2c 2076 6572 6966 793d  ription, verify=
+0000cfc0: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+0000cfd0: 645f 7572 6c20 3d20 2773 6574 4368 6174  d_url = 'setChat
+0000cfe0: 4465 7363 7269 7074 696f 6e27 0a20 2020  Description'.   
+0000cff0: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+0000d000: 745f 6964 273a 2063 6861 745f 6964 7d0a  t_id': chat_id}.
+0000d010: 2020 2020 6966 2064 6573 6372 6970 7469      if descripti
+0000d020: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a20  on is not None: 
+0000d030: 2023 2041 6c6c 6f77 2065 6d70 7479 2073   # Allow empty s
+0000d040: 7472 696e 6773 0a20 2020 2020 2020 2070  trings.        p
+0000d050: 6179 6c6f 6164 5b27 6465 7363 7269 7074  ayload['descript
+0000d060: 696f 6e27 5d20 3d20 6465 7363 7269 7074  ion'] = descript
+0000d070: 696f 6e0a 2020 2020 7265 7475 726e 205f  ion.    return _
+0000d080: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000d090: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000d0a0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000d0b0: 6d65 7468 6f64 3d27 706f 7374 272c 2076  method='post', v
+0000d0c0: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+0000d0d0: 6465 6620 7069 6e5f 6368 6174 5f6d 6573  def pin_chat_mes
+0000d0e0: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
+0000d0f0: 5f69 642c 206d 6573 7361 6765 5f69 642c  _id, message_id,
+0000d100: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+0000d110: 6174 696f 6e3d 4e6f 6e65 2c20 7665 7269  ation=None, veri
+0000d120: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+0000d130: 7468 6f64 5f75 726c 203d 2027 7069 6e43  thod_url = 'pinC
+0000d140: 6861 744d 6573 7361 6765 270a 2020 2020  hatMessage'.    
+0000d150: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+0000d160: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
+0000d170: 6d65 7373 6167 655f 6964 273a 206d 6573  message_id': mes
+0000d180: 7361 6765 5f69 647d 0a20 2020 2069 6620  sage_id}.    if 
+0000d190: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+0000d1a0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+0000d1b0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000d1c0: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
+0000d1d0: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
+0000d1e0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+0000d1f0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000d200: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000d210: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000d220: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000d230: 686f 643d 2770 6f73 7427 2c20 7665 7269  hod='post', veri
+0000d240: 6679 3d76 6572 6966 7929 0a0a 0a64 6566  fy=verify)...def
+0000d250: 2075 6e70 696e 5f63 6861 745f 6d65 7373   unpin_chat_mess
+0000d260: 6167 6528 746f 6b65 6e2c 2063 6861 745f  age(token, chat_
+0000d270: 6964 2c20 6d65 7373 6167 655f 6964 2c20  id, message_id, 
+0000d280: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+0000d290: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+0000d2a0: 756e 7069 6e43 6861 744d 6573 7361 6765  unpinChatMessage
+0000d2b0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+0000d2c0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+0000d2d0: 5f69 647d 0a20 2020 2069 6620 6d65 7373  _id}.    if mess
+0000d2e0: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
+0000d2f0: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
+0000d300: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
+0000d310: 6964 0a20 2020 2072 6574 7572 6e20 5f6d  id.    return _m
+0000d320: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000d330: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000d340: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000d350: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+0000d360: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+0000d370: 6566 2075 6e70 696e 5f61 6c6c 5f63 6861  ef unpin_all_cha
+0000d380: 745f 6d65 7373 6167 6573 2874 6f6b 656e  t_messages(token
+0000d390: 2c20 6368 6174 5f69 642c 2076 6572 6966  , chat_id, verif
+0000d3a0: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+0000d3b0: 686f 645f 7572 6c20 3d20 2775 6e70 696e  hod_url = 'unpin
+0000d3c0: 416c 6c43 6861 744d 6573 7361 6765 7327  AllChatMessages'
+0000d3d0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000d3e0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+0000d3f0: 6964 7d0a 2020 2020 7265 7475 726e 205f  id}.    return _
+0000d400: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000d410: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000d420: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000d430: 6d65 7468 6f64 3d27 706f 7374 272c 2076  method='post', v
+0000d440: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+0000d450: 2320 5570 6461 7469 6e67 206d 6573 7361  # Updating messa
+0000d460: 6765 730a 0a64 6566 2065 6469 745f 6d65  ges..def edit_me
+0000d470: 7373 6167 655f 7465 7874 2874 6f6b 656e  ssage_text(token
+0000d480: 2c20 7465 7874 2c20 6368 6174 5f69 643d  , text, chat_id=
+0000d490: 4e6f 6e65 2c20 6d65 7373 6167 655f 6964  None, message_id
+0000d4a0: 3d4e 6f6e 652c 2069 6e6c 696e 655f 6d65  =None, inline_me
+0000d4b0: 7373 6167 655f 6964 3d4e 6f6e 652c 2070  ssage_id=None, p
+0000d4c0: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c0a  arse_mode=None,.
+0000d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4e0: 2020 2020 2020 656e 7469 7469 6573 3d4e        entities=N
+0000d4f0: 6f6e 652c 2072 6570 6c79 5f6d 6172 6b75  one, reply_marku
+0000d500: 703d 4e6f 6e65 2c20 6c69 6e6b 5f70 7265  p=None, link_pre
+0000d510: 7669 6577 5f6f 7074 696f 6e73 3d4e 6f6e  view_options=Non
+0000d520: 652c 2076 6572 6966 793d 5472 7565 293a  e, verify=True):
+0000d530: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000d540: 3d20 7227 6564 6974 4d65 7373 6167 6554  = r'editMessageT
+0000d550: 6578 7427 0a20 2020 2070 6179 6c6f 6164  ext'.    payload
+0000d560: 203d 207b 2774 6578 7427 3a20 7465 7874   = {'text': text
+0000d570: 7d0a 2020 2020 6966 2063 6861 745f 6964  }.    if chat_id
+0000d580: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000d590: 645b 2763 6861 745f 6964 275d 203d 2063  d['chat_id'] = c
+0000d5a0: 6861 745f 6964 0a20 2020 2069 6620 6d65  hat_id.    if me
+0000d5b0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
+0000d5c0: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+0000d5d0: 6765 5f69 6427 5d20 3d20 6d65 7373 6167  ge_id'] = messag
+0000d5e0: 655f 6964 0a20 2020 2069 6620 696e 6c69  e_id.    if inli
+0000d5f0: 6e65 5f6d 6573 7361 6765 5f69 643a 0a20  ne_message_id:. 
+0000d600: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000d610: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000d620: 6427 5d20 3d20 696e 6c69 6e65 5f6d 6573  d'] = inline_mes
+0000d630: 7361 6765 5f69 640a 2020 2020 6966 2070  sage_id.    if p
+0000d640: 6172 7365 5f6d 6f64 653a 0a20 2020 2020  arse_mode:.     
+0000d650: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
+0000d660: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
+0000d670: 5f6d 6f64 650a 2020 2020 6966 2065 6e74  _mode.    if ent
+0000d680: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
+0000d690: 6179 6c6f 6164 5b27 656e 7469 7469 6573  ayload['entities
+0000d6a0: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
+0000d6b0: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
+0000d6c0: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
+0000d6d0: 6963 7473 2865 6e74 6974 6965 7329 290a  icts(entities)).
+0000d6e0: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+0000d6f0: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
+0000d700: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
+0000d710: 7570 275d 203d 205f 636f 6e76 6572 745f  up'] = _convert_
+0000d720: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+0000d730: 6b75 7029 0a20 2020 2069 6620 6c69 6e6b  kup).    if link
+0000d740: 5f70 7265 7669 6577 5f6f 7074 696f 6e73  _preview_options
+0000d750: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000d760: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
+0000d770: 696e 6b5f 7072 6576 6965 775f 6f70 7469  ink_preview_opti
+0000d780: 6f6e 7327 5d20 3d20 6c69 6e6b 5f70 7265  ons'] = link_pre
+0000d790: 7669 6577 5f6f 7074 696f 6e73 2e74 6f5f  view_options.to_
+0000d7a0: 6a73 6f6e 2829 0a20 2020 2072 6574 7572  json().    retur
+0000d7b0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000d7c0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000d7d0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000d7e0: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000d7f0: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+0000d800: 0a0a 0a64 6566 2065 6469 745f 6d65 7373  ...def edit_mess
+0000d810: 6167 655f 6361 7074 696f 6e28 746f 6b65  age_caption(toke
+0000d820: 6e2c 2063 6170 7469 6f6e 2c20 6368 6174  n, caption, chat
+0000d830: 5f69 643d 4e6f 6e65 2c20 6d65 7373 6167  _id=None, messag
+0000d840: 655f 6964 3d4e 6f6e 652c 2069 6e6c 696e  e_id=None, inlin
+0000d850: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+0000d860: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0000d870: 2020 2020 2020 2020 2020 2020 7061 7273              pars
+0000d880: 655f 6d6f 6465 3d4e 6f6e 652c 2063 6170  e_mode=None, cap
+0000d890: 7469 6f6e 5f65 6e74 6974 6965 733d 4e6f  tion_entities=No
+0000d8a0: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
+0000d8b0: 3d4e 6f6e 652c 2076 6572 6966 793d 5472  =None, verify=Tr
+0000d8c0: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+0000d8d0: 7572 6c20 3d20 7227 6564 6974 4d65 7373  url = r'editMess
+0000d8e0: 6167 6543 6170 7469 6f6e 270a 2020 2020  ageCaption'.    
+0000d8f0: 7061 796c 6f61 6420 3d20 7b27 6361 7074  payload = {'capt
+0000d900: 696f 6e27 3a20 6361 7074 696f 6e7d 0a20  ion': caption}. 
+0000d910: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
+0000d920: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000d930: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
+0000d940: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
+0000d950: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
+0000d960: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
+0000d970: 6964 275d 203d 206d 6573 7361 6765 5f69  id'] = message_i
+0000d980: 640a 2020 2020 6966 2069 6e6c 696e 655f  d.    if inline_
+0000d990: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+0000d9a0: 2020 2020 7061 796c 6f61 645b 2769 6e6c      payload['inl
+0000d9b0: 696e 655f 6d65 7373 6167 655f 6964 275d  ine_message_id']
+0000d9c0: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
+0000d9d0: 655f 6964 0a20 2020 2069 6620 7061 7273  e_id.    if pars
+0000d9e0: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
+0000d9f0: 7061 796c 6f61 645b 2770 6172 7365 5f6d  payload['parse_m
+0000da00: 6f64 6527 5d20 3d20 7061 7273 655f 6d6f  ode'] = parse_mo
+0000da10: 6465 0a20 2020 2069 6620 6361 7074 696f  de.    if captio
+0000da20: 6e5f 656e 7469 7469 6573 3a0a 2020 2020  n_entities:.    
+0000da30: 2020 2020 7061 796c 6f61 645b 2763 6170      payload['cap
+0000da40: 7469 6f6e 5f65 6e74 6974 6965 7327 5d20  tion_entities'] 
+0000da50: 3d20 6a73 6f6e 2e64 756d 7073 2874 7970  = json.dumps(typ
+0000da60: 6573 2e4d 6573 7361 6765 456e 7469 7479  es.MessageEntity
+0000da70: 2e74 6f5f 6c69 7374 5f6f 665f 6469 6374  .to_list_of_dict
+0000da80: 7328 6361 7074 696f 6e5f 656e 7469 7469  s(caption_entiti
+0000da90: 6573 2929 0a20 2020 2069 6620 7265 706c  es)).    if repl
+0000daa0: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
+0000dab0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
+0000dac0: 5f6d 6172 6b75 7027 5d20 3d20 5f63 6f6e  _markup'] = _con
+0000dad0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+0000dae0: 795f 6d61 726b 7570 290a 2020 2020 7265  y_markup).    re
+0000daf0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000db00: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000db10: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000db20: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+0000db30: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+0000db40: 6679 290a 0a0a 6465 6620 6564 6974 5f6d  fy)...def edit_m
+0000db50: 6573 7361 6765 5f6d 6564 6961 2874 6f6b  essage_media(tok
+0000db60: 656e 2c20 6d65 6469 612c 2063 6861 745f  en, media, chat_
+0000db70: 6964 3d4e 6f6e 652c 206d 6573 7361 6765  id=None, message
+0000db80: 5f69 643d 4e6f 6e65 2c20 696e 6c69 6e65  _id=None, inline
+0000db90: 5f6d 6573 7361 6765 5f69 643d 4e6f 6e65  _message_id=None
+0000dba0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000dbb0: 2020 2020 2020 2020 2072 6570 6c79 5f6d           reply_m
+0000dbc0: 6172 6b75 703d 4e6f 6e65 2c20 7665 7269  arkup=None, veri
+0000dbd0: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+0000dbe0: 7468 6f64 5f75 726c 203d 2072 2765 6469  thod_url = r'edi
+0000dbf0: 744d 6573 7361 6765 4d65 6469 6127 0a20  tMessageMedia'. 
+0000dc00: 2020 206d 6564 6961 5f6a 736f 6e2c 2066     media_json, f
+0000dc10: 696c 6520 3d20 636f 6e76 6572 745f 696e  ile = convert_in
+0000dc20: 7075 745f 6d65 6469 6128 6d65 6469 6129  put_media(media)
+0000dc30: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000dc40: 276d 6564 6961 273a 206d 6564 6961 5f6a  'media': media_j
+0000dc50: 736f 6e7d 0a20 2020 2069 6620 6368 6174  son}.    if chat
+0000dc60: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
+0000dc70: 6c6f 6164 5b27 6368 6174 5f69 6427 5d20  load['chat_id'] 
+0000dc80: 3d20 6368 6174 5f69 640a 2020 2020 6966  = chat_id.    if
+0000dc90: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
+0000dca0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+0000dcb0: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
+0000dcc0: 7361 6765 5f69 640a 2020 2020 6966 2069  sage_id.    if i
+0000dcd0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000dce0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+0000dcf0: 645b 2769 6e6c 696e 655f 6d65 7373 6167  d['inline_messag
+0000dd00: 655f 6964 275d 203d 2069 6e6c 696e 655f  e_id'] = inline_
+0000dd10: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
+0000dd20: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
+0000dd30: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000dd40: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
+0000dd50: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+0000dd60: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
+0000dd70: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000dd80: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000dd90: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000dda0: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
+0000ddb0: 733d 6669 6c65 2c20 6d65 7468 6f64 3d27  s=file, method='
+0000ddc0: 706f 7374 2720 6966 2066 696c 6520 656c  post' if file el
+0000ddd0: 7365 2027 6765 7427 2c20 7665 7269 6679  se 'get', verify
+0000dde0: 3d76 6572 6966 7929 0a0a 0a64 6566 2065  =verify)...def e
+0000ddf0: 6469 745f 6d65 7373 6167 655f 7265 706c  dit_message_repl
+0000de00: 795f 6d61 726b 7570 2874 6f6b 656e 2c20  y_markup(token, 
+0000de10: 6368 6174 5f69 643d 4e6f 6e65 2c20 6d65  chat_id=None, me
+0000de20: 7373 6167 655f 6964 3d4e 6f6e 652c 2069  ssage_id=None, i
+0000de30: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000de40: 3d4e 6f6e 652c 2072 6570 6c79 5f6d 6172  =None, reply_mar
+0000de50: 6b75 703d 4e6f 6e65 2c20 7665 7269 6679  kup=None, verify
+0000de60: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+0000de70: 6f64 5f75 726c 203d 2072 2765 6469 744d  od_url = r'editM
+0000de80: 6573 7361 6765 5265 706c 794d 6172 6b75  essageReplyMarku
+0000de90: 7027 0a20 2020 2070 6179 6c6f 6164 203d  p'.    payload =
+0000dea0: 207b 7d0a 2020 2020 6966 2063 6861 745f   {}.    if chat_
+0000deb0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+0000dec0: 6f61 645b 2763 6861 745f 6964 275d 203d  oad['chat_id'] =
+0000ded0: 2063 6861 745f 6964 0a20 2020 2069 6620   chat_id.    if 
+0000dee0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+0000def0: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+0000df00: 7361 6765 5f69 6427 5d20 3d20 6d65 7373  sage_id'] = mess
+0000df10: 6167 655f 6964 0a20 2020 2069 6620 696e  age_id.    if in
+0000df20: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+0000df30: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000df40: 5b27 696e 6c69 6e65 5f6d 6573 7361 6765  ['inline_message
+0000df50: 5f69 6427 5d20 3d20 696e 6c69 6e65 5f6d  _id'] = inline_m
+0000df60: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
+0000df70: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
+0000df80: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000df90: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
+0000dfa0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+0000dfb0: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
+0000dfc0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000dfd0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000dfe0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000dff0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000e000: 643d 2770 6f73 7427 2c20 7665 7269 6679  d='post', verify
+0000e010: 3d76 6572 6966 7929 0a0a 0a64 6566 2064  =verify)...def d
+0000e020: 656c 6574 655f 6d65 7373 6167 6528 746f  elete_message(to
+0000e030: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
+0000e040: 7373 6167 655f 6964 2c20 7469 6d65 6f75  ssage_id, timeou
+0000e050: 743d 4e6f 6e65 2c20 7665 7269 6679 3d54  t=None, verify=T
+0000e060: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+0000e070: 5f75 726c 203d 2072 2764 656c 6574 654d  _url = r'deleteM
+0000e080: 6573 7361 6765 270a 2020 2020 7061 796c  essage'.    payl
+0000e090: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
+0000e0a0: 3a20 6368 6174 5f69 642c 2027 6d65 7373  : chat_id, 'mess
+0000e0b0: 6167 655f 6964 273a 206d 6573 7361 6765  age_id': message
+0000e0c0: 5f69 647d 0a20 2020 2069 6620 7469 6d65  _id}.    if time
+0000e0d0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
+0000e0e0: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+0000e0f0: 3d20 7469 6d65 6f75 740a 2020 2020 7265  = timeout.    re
+0000e100: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000e110: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000e120: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000e130: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+0000e140: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+0000e150: 6679 290a 0a0a 2320 4761 6d65 0a0a 6465  fy)...# Game..de
+0000e160: 6620 7365 6e64 5f67 616d 6528 0a20 2020  f send_game(.   
+0000e170: 2020 2020 2074 6f6b 656e 2c20 6368 6174       token, chat
+0000e180: 5f69 642c 2067 616d 655f 7368 6f72 745f  _id, game_short_
+0000e190: 6e61 6d65 2c0a 2020 2020 2020 2020 6469  name,.        di
+0000e1a0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+0000e1b0: 6f6e 3d4e 6f6e 652c 2072 6570 6c79 5f6d  on=None, reply_m
+0000e1c0: 6172 6b75 703d 4e6f 6e65 2c20 7469 6d65  arkup=None, time
+0000e1d0: 6f75 743d 4e6f 6e65 2c0a 2020 2020 2020  out=None,.      
+0000e1e0: 2020 7072 6f74 6563 745f 636f 6e74 656e    protect_conten
+0000e1f0: 743d 4e6f 6e65 2c20 6d65 7373 6167 655f  t=None, message_
+0000e200: 7468 7265 6164 5f69 643d 4e6f 6e65 2c20  thread_id=None, 
+0000e210: 7265 706c 795f 7061 7261 6d65 7465 7273  reply_parameters
+0000e220: 3d4e 6f6e 652c 2062 7573 696e 6573 735f  =None, business_
+0000e230: 636f 6e6e 6563 7469 6f6e 5f69 643d 4e6f  connection_id=No
+0000e240: 6e65 2c0a 2020 2020 2020 2020 7665 7269  ne,.        veri
+0000e250: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+0000e260: 7468 6f64 5f75 726c 203d 2072 2773 656e  thod_url = r'sen
+0000e270: 6447 616d 6527 0a20 2020 2070 6179 6c6f  dGame'.    paylo
+0000e280: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+0000e290: 2063 6861 745f 6964 2c20 2767 616d 655f   chat_id, 'game_
+0000e2a0: 7368 6f72 745f 6e61 6d65 273a 2067 616d  short_name': gam
+0000e2b0: 655f 7368 6f72 745f 6e61 6d65 7d0a 2020  e_short_name}.  
+0000e2c0: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+0000e2d0: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+0000e2e0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
+0000e2f0: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
+0000e300: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
+0000e310: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+0000e320: 6174 696f 6e0a 2020 2020 6966 2072 6570  ation.    if rep
+0000e330: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
+0000e340: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+0000e350: 795f 6d61 726b 7570 275d 203d 205f 636f  y_markup'] = _co
+0000e360: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
+0000e370: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
+0000e380: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
+0000e390: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+0000e3a0: 6f75 7427 5d20 3d20 7469 6d65 6f75 740a  out'] = timeout.
+0000e3b0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+0000e3c0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+0000e3d0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+0000e3e0: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
+0000e3f0: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
+0000e400: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
+0000e410: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+0000e420: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
+0000e430: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+0000e440: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+0000e450: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
+0000e460: 6966 2072 6570 6c79 5f70 6172 616d 6574  if reply_paramet
+0000e470: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
+0000e480: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000e490: 5b27 7265 706c 795f 7061 7261 6d65 7465  ['reply_paramete
+0000e4a0: 7273 275d 203d 2072 6570 6c79 5f70 6172  rs'] = reply_par
+0000e4b0: 616d 6574 6572 732e 746f 5f6a 736f 6e28  ameters.to_json(
+0000e4c0: 290a 2020 2020 6966 2062 7573 696e 6573  ).    if busines
+0000e4d0: 735f 636f 6e6e 6563 7469 6f6e 5f69 643a  s_connection_id:
+0000e4e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000e4f0: 5b27 6275 7369 6e65 7373 5f63 6f6e 6e65  ['business_conne
+0000e500: 6374 696f 6e5f 6964 275d 203d 2062 7573  ction_id'] = bus
+0000e510: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
+0000e520: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
+0000e530: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000e540: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000e550: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000e560: 7665 7269 6679 3d76 6572 6966 7929 0a0a  verify=verify)..
+0000e570: 0a23 2068 7474 7073 3a2f 2f63 6f72 652e  .# https://core.
+0000e580: 7465 6c65 6772 616d 2e6f 7267 2f62 6f74  telegram.org/bot
+0000e590: 732f 6170 6923 7365 7467 616d 6573 636f  s/api#setgamesco
+0000e5a0: 7265 0a64 6566 2073 6574 5f67 616d 655f  re.def set_game_
+0000e5b0: 7363 6f72 6528 746f 6b65 6e2c 2075 7365  score(token, use
+0000e5c0: 725f 6964 2c20 7363 6f72 652c 2066 6f72  r_id, score, for
+0000e5d0: 6365 3d4e 6f6e 652c 2064 6973 6162 6c65  ce=None, disable
+0000e5e0: 5f65 6469 745f 6d65 7373 6167 653d 4e6f  _edit_message=No
+0000e5f0: 6e65 2c20 6368 6174 5f69 643d 4e6f 6e65  ne, chat_id=None
+0000e600: 2c20 6d65 7373 6167 655f 6964 3d4e 6f6e  , message_id=Non
+0000e610: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0000e620: 2020 2020 2020 696e 6c69 6e65 5f6d 6573        inline_mes
+0000e630: 7361 6765 5f69 643d 4e6f 6e65 2c20 7665  sage_id=None, ve
+0000e640: 7269 6679 3d54 7275 6529 3a0a 2020 2020  rify=True):.    
+0000e650: 2222 220a 2020 2020 5573 6520 7468 6973  """.    Use this
+0000e660: 206d 6574 686f 6420 746f 2073 6574 2074   method to set t
+0000e670: 6865 2073 636f 7265 206f 6620 7468 6520  he score of the 
+0000e680: 7370 6563 6966 6965 6420 7573 6572 2069  specified user i
+0000e690: 6e20 6120 6761 6d65 2e20 4f6e 2073 7563  n a game. On suc
+0000e6a0: 6365 7373 2c20 6966 2074 6865 206d 6573  cess, if the mes
+0000e6b0: 7361 6765 2077 6173 2073 656e 7420 6279  sage was sent by
+0000e6c0: 2074 6865 2062 6f74 2c20 7265 7475 726e   the bot, return
+0000e6d0: 7320 7468 6520 6564 6974 6564 204d 6573  s the edited Mes
+0000e6e0: 7361 6765 2c20 6f74 6865 7277 6973 6520  sage, otherwise 
+0000e6f0: 7265 7475 726e 7320 5472 7565 2e20 5265  returns True. Re
+0000e700: 7475 726e 7320 616e 2065 7272 6f72 2c20  turns an error, 
+0000e710: 6966 2074 6865 206e 6577 2073 636f 7265  if the new score
+0000e720: 2069 7320 6e6f 7420 6772 6561 7465 7220   is not greater 
+0000e730: 7468 616e 2074 6865 2075 7365 7227 7320  than the user's 
+0000e740: 6375 7272 656e 7420 7363 6f72 6520 696e  current score in
+0000e750: 2074 6865 2063 6861 742e 0a20 2020 203a   the chat..    :
+0000e760: 7061 7261 6d20 746f 6b65 6e3a 2042 6f74  param token: Bot
+0000e770: 2773 2074 6f6b 656e 2028 796f 7520 646f  's token (you do
+0000e780: 6e27 7420 6e65 6564 2074 6f20 6669 6c6c  n't need to fill
+0000e790: 2074 6869 7329 0a20 2020 203a 7061 7261   this).    :para
+0000e7a0: 6d20 7573 6572 5f69 643a 2055 7365 7220  m user_id: User 
+0000e7b0: 6964 656e 7469 6669 6572 0a20 2020 203a  identifier.    :
+0000e7c0: 7061 7261 6d20 7363 6f72 653a 204e 6577  param score: New
+0000e7d0: 2073 636f 7265 2c20 6d75 7374 2062 6520   score, must be 
+0000e7e0: 6e6f 6e2d 6e65 6761 7469 7665 0a20 2020  non-negative.   
+0000e7f0: 203a 7061 7261 6d20 666f 7263 653a 2028   :param force: (
+0000e800: 4f70 7469 6f6e 616c 2920 5061 7373 2054  Optional) Pass T
+0000e810: 7275 652c 2069 6620 7468 6520 6869 6768  rue, if the high
+0000e820: 2073 636f 7265 2069 7320 616c 6c6f 7765   score is allowe
+0000e830: 6420 746f 2064 6563 7265 6173 652e 2054  d to decrease. T
+0000e840: 6869 7320 6361 6e20 6265 2075 7365 6675  his can be usefu
+0000e850: 6c20 7768 656e 2066 6978 696e 6720 6d69  l when fixing mi
+0000e860: 7374 616b 6573 206f 7220 6261 6e6e 696e  stakes or bannin
+0000e870: 6720 6368 6561 7465 7273 0a20 2020 203a  g cheaters.    :
+0000e880: 7061 7261 6d20 6469 7361 626c 655f 6564  param disable_ed
+0000e890: 6974 5f6d 6573 7361 6765 3a20 284f 7074  it_message: (Opt
+0000e8a0: 696f 6e61 6c29 2050 6173 7320 5472 7565  ional) Pass True
+0000e8b0: 2c20 6966 2074 6865 2067 616d 6520 6d65  , if the game me
+0000e8c0: 7373 6167 6520 7368 6f75 6c64 206e 6f74  ssage should not
+0000e8d0: 2062 6520 6175 746f 6d61 7469 6361 6c6c   be automaticall
+0000e8e0: 7920 6564 6974 6564 2074 6f20 696e 636c  y edited to incl
+0000e8f0: 7564 6520 7468 6520 6375 7272 656e 7420  ude the current 
+0000e900: 7363 6f72 6562 6f61 7264 0a20 2020 203a  scoreboard.    :
+0000e910: 7061 7261 6d20 6368 6174 5f69 643a 2028  param chat_id: (
+0000e920: 4f70 7469 6f6e 616c 2c20 7265 7175 6972  Optional, requir
+0000e930: 6564 2069 6620 696e 6c69 6e65 5f6d 6573  ed if inline_mes
+0000e940: 7361 6765 5f69 6420 6973 206e 6f74 2073  sage_id is not s
+0000e950: 7065 6369 6669 6564 2920 556e 6971 7565  pecified) Unique
+0000e960: 2069 6465 6e74 6966 6965 7220 666f 7220   identifier for 
+0000e970: 7468 6520 7461 7267 6574 2063 6861 7420  the target chat 
+0000e980: 286f 7220 7573 6572 6e61 6d65 206f 6620  (or username of 
+0000e990: 7468 6520 7461 7267 6574 2063 6861 6e6e  the target chann
+0000e9a0: 656c 2069 6e20 7468 6520 666f 726d 6174  el in the format
+0000e9b0: 2040 6368 616e 6e65 6c75 7365 726e 616d   @channelusernam
+0000e9c0: 6529 0a20 2020 203a 7061 7261 6d20 6d65  e).    :param me
+0000e9d0: 7373 6167 655f 6964 3a20 284f 7074 696f  ssage_id: (Optio
+0000e9e0: 6e61 6c2c 2072 6571 7569 7265 6420 6966  nal, required if
+0000e9f0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000ea00: 6964 2069 7320 6e6f 7420 7370 6563 6966  id is not specif
+0000ea10: 6965 6429 2055 6e69 7175 6520 6964 656e  ied) Unique iden
+0000ea20: 7469 6669 6572 206f 6620 7468 6520 7365  tifier of the se
+0000ea30: 6e74 206d 6573 7361 6765 0a20 2020 203a  nt message.    :
+0000ea40: 7061 7261 6d20 696e 6c69 6e65 5f6d 6573  param inline_mes
+0000ea50: 7361 6765 5f69 643a 2028 4f70 7469 6f6e  sage_id: (Option
+0000ea60: 616c 2c20 7265 7175 6972 6564 2069 6620  al, required if 
+0000ea70: 6368 6174 5f69 6420 616e 6420 6d65 7373  chat_id and mess
+0000ea80: 6167 655f 6964 2061 7265 206e 6f74 2073  age_id are not s
+0000ea90: 7065 6369 6669 6564 2920 4964 656e 7469  pecified) Identi
+0000eaa0: 6669 6572 206f 6620 7468 6520 696e 6c69  fier of the inli
+0000eab0: 6e65 206d 6573 7361 6765 0a20 2020 203a  ne message.    :
+0000eac0: 7265 7475 726e 3a0a 2020 2020 2222 220a  return:.    """.
+0000ead0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000eae0: 2072 2773 6574 4761 6d65 5363 6f72 6527   r'setGameScore'
+0000eaf0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000eb00: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
+0000eb10: 6964 2c20 2773 636f 7265 273a 2073 636f  id, 'score': sco
+0000eb20: 7265 7d0a 2020 2020 6966 2066 6f72 6365  re}.    if force
+0000eb30: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000eb40: 2020 2020 2020 7061 796c 6f61 645b 2766        payload['f
+0000eb50: 6f72 6365 275d 203d 2066 6f72 6365 0a20  orce'] = force. 
+0000eb60: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
+0000eb70: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000eb80: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
+0000eb90: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
+0000eba0: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
+0000ebb0: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
+0000ebc0: 6964 275d 203d 206d 6573 7361 6765 5f69  id'] = message_i
+0000ebd0: 640a 2020 2020 6966 2069 6e6c 696e 655f  d.    if inline_
+0000ebe0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+0000ebf0: 2020 2020 7061 796c 6f61 645b 2769 6e6c      payload['inl
+0000ec00: 696e 655f 6d65 7373 6167 655f 6964 275d  ine_message_id']
+0000ec10: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
+0000ec20: 655f 6964 0a20 2020 2069 6620 6469 7361  e_id.    if disa
+0000ec30: 626c 655f 6564 6974 5f6d 6573 7361 6765  ble_edit_message
+0000ec40: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000ec50: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
+0000ec60: 6973 6162 6c65 5f65 6469 745f 6d65 7373  isable_edit_mess
+0000ec70: 6167 6527 5d20 3d20 6469 7361 626c 655f  age'] = disable_
+0000ec80: 6564 6974 5f6d 6573 7361 6765 0a20 2020  edit_message.   
+0000ec90: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+0000eca0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000ecb0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000ecc0: 7061 796c 6f61 642c 2076 6572 6966 793d  payload, verify=
+0000ecd0: 7665 7269 6679 290a 0a0a 2320 6874 7470  verify)...# http
+0000ece0: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
+0000ecf0: 6d2e 6f72 672f 626f 7473 2f61 7069 2367  m.org/bots/api#g
+0000ed00: 6574 6761 6d65 6869 6768 7363 6f72 6573  etgamehighscores
+0000ed10: 0a64 6566 2067 6574 5f67 616d 655f 6869  .def get_game_hi
+0000ed20: 6768 5f73 636f 7265 7328 746f 6b65 6e2c  gh_scores(token,
+0000ed30: 2075 7365 725f 6964 2c20 6368 6174 5f69   user_id, chat_i
+0000ed40: 643d 4e6f 6e65 2c20 6d65 7373 6167 655f  d=None, message_
+0000ed50: 6964 3d4e 6f6e 652c 2069 6e6c 696e 655f  id=None, inline_
+0000ed60: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+0000ed70: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+0000ed80: 2020 2022 2222 0a20 2020 2055 7365 2074     """.    Use t
+0000ed90: 6869 7320 6d65 7468 6f64 2074 6f20 6765  his method to ge
+0000eda0: 7420 6461 7461 2066 6f72 2068 6967 6820  t data for high 
+0000edb0: 7363 6f72 6520 7461 626c 6573 2e20 5769  score tables. Wi
+0000edc0: 6c6c 2072 6574 7572 6e20 7468 6520 7363  ll return the sc
+0000edd0: 6f72 6520 6f66 2074 6865 2073 7065 6369  ore of the speci
+0000ede0: 6669 6564 2075 7365 7220 616e 6420 7365  fied user and se
+0000edf0: 7665 7261 6c20 6f66 2068 6973 206e 6569  veral of his nei
+0000ee00: 6768 626f 7273 2069 6e20 6120 6761 6d65  ghbors in a game
+0000ee10: 2e20 4f6e 2073 7563 6365 7373 2c20 7265  . On success, re
+0000ee20: 7475 726e 7320 616e 2041 7272 6179 206f  turns an Array o
+0000ee30: 6620 4761 6d65 4869 6768 5363 6f72 6520  f GameHighScore 
+0000ee40: 6f62 6a65 6374 732e 0a20 2020 2054 6869  objects..    Thi
+0000ee50: 7320 6d65 7468 6f64 2077 696c 6c20 6375  s method will cu
+0000ee60: 7272 656e 746c 7920 7265 7475 726e 2073  rrently return s
+0000ee70: 636f 7265 7320 666f 7220 7468 6520 7461  cores for the ta
+0000ee80: 7267 6574 2075 7365 722c 2070 6c75 7320  rget user, plus 
+0000ee90: 7477 6f20 6f66 2068 6973 2063 6c6f 7365  two of his close
+0000eea0: 7374 206e 6569 6768 626f 7273 206f 6e20  st neighbors on 
+0000eeb0: 6561 6368 2073 6964 652e 2057 696c 6c20  each side. Will 
+0000eec0: 616c 736f 2072 6574 7572 6e20 7468 6520  also return the 
+0000eed0: 746f 7020 7468 7265 6520 7573 6572 7320  top three users 
+0000eee0: 6966 2074 6865 2075 7365 7220 616e 6420  if the user and 
+0000eef0: 6869 7320 6e65 6967 6862 6f72 7320 6172  his neighbors ar
+0000ef00: 6520 6e6f 7420 616d 6f6e 6720 7468 656d  e not among them
+0000ef10: 2e20 506c 6561 7365 206e 6f74 6520 7468  . Please note th
+0000ef20: 6174 2074 6869 7320 6265 6861 7669 6f72  at this behavior
+0000ef30: 2069 7320 7375 626a 6563 7420 746f 2063   is subject to c
+0000ef40: 6861 6e67 652e 0a20 2020 203a 7061 7261  hange..    :para
+0000ef50: 6d20 746f 6b65 6e3a 2042 6f74 2773 2074  m token: Bot's t
+0000ef60: 6f6b 656e 2028 796f 7520 646f 6e27 7420  oken (you don't 
+0000ef70: 6e65 6564 2074 6f20 6669 6c6c 2074 6869  need to fill thi
+0000ef80: 7329 0a20 2020 203a 7061 7261 6d20 7573  s).    :param us
+0000ef90: 6572 5f69 643a 2054 6172 6765 7420 7573  er_id: Target us
+0000efa0: 6572 2069 640a 2020 2020 3a70 6172 616d  er id.    :param
+0000efb0: 2063 6861 745f 6964 3a20 284f 7074 696f   chat_id: (Optio
+0000efc0: 6e61 6c2c 2072 6571 7569 7265 6420 6966  nal, required if
+0000efd0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000efe0: 6964 2069 7320 6e6f 7420 7370 6563 6966  id is not specif
+0000eff0: 6965 6429 2055 6e69 7175 6520 6964 656e  ied) Unique iden
+0000f000: 7469 6669 6572 2066 6f72 2074 6865 2074  tifier for the t
+0000f010: 6172 6765 7420 6368 6174 2028 6f72 2075  arget chat (or u
+0000f020: 7365 726e 616d 6520 6f66 2074 6865 2074  sername of the t
+0000f030: 6172 6765 7420 6368 616e 6e65 6c20 696e  arget channel in
+0000f040: 2074 6865 2066 6f72 6d61 7420 4063 6861   the format @cha
+0000f050: 6e6e 656c 7573 6572 6e61 6d65 290a 2020  nnelusername).  
+0000f060: 2020 3a70 6172 616d 206d 6573 7361 6765    :param message
+0000f070: 5f69 643a 2028 4f70 7469 6f6e 616c 2c20  _id: (Optional, 
+0000f080: 7265 7175 6972 6564 2069 6620 696e 6c69  required if inli
+0000f090: 6e65 5f6d 6573 7361 6765 5f69 6420 6973  ne_message_id is
+0000f0a0: 206e 6f74 2073 7065 6369 6669 6564 2920   not specified) 
+0000f0b0: 556e 6971 7565 2069 6465 6e74 6966 6965  Unique identifie
+0000f0c0: 7220 6f66 2074 6865 2073 656e 7420 6d65  r of the sent me
+0000f0d0: 7373 6167 650a 2020 2020 3a70 6172 616d  ssage.    :param
+0000f0e0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000f0f0: 6964 3a20 284f 7074 696f 6e61 6c2c 2072  id: (Optional, r
+0000f100: 6571 7569 7265 6420 6966 2063 6861 745f  equired if chat_
+0000f110: 6964 2061 6e64 206d 6573 7361 6765 5f69  id and message_i
+0000f120: 6420 6172 6520 6e6f 7420 7370 6563 6966  d are not specif
+0000f130: 6965 6429 2049 6465 6e74 6966 6965 7220  ied) Identifier 
+0000f140: 6f66 2074 6865 2069 6e6c 696e 6520 6d65  of the inline me
+0000f150: 7373 6167 650a 2020 2020 3a72 6574 7572  ssage.    :retur
+0000f160: 6e3a 0a20 2020 2022 2222 0a20 2020 206d  n:.    """.    m
+0000f170: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
+0000f180: 7447 616d 6548 6967 6853 636f 7265 7327  tGameHighScores'
+0000f190: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000f1a0: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
+0000f1b0: 6964 7d0a 2020 2020 6966 2063 6861 745f  id}.    if chat_
+0000f1c0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
+0000f1d0: 6f61 645b 2763 6861 745f 6964 275d 203d  oad['chat_id'] =
+0000f1e0: 2063 6861 745f 6964 0a20 2020 2069 6620   chat_id.    if 
+0000f1f0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
+0000f200: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+0000f210: 7361 6765 5f69 6427 5d20 3d20 6d65 7373  sage_id'] = mess
+0000f220: 6167 655f 6964 0a20 2020 2069 6620 696e  age_id.    if in
+0000f230: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+0000f240: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000f250: 5b27 696e 6c69 6e65 5f6d 6573 7361 6765  ['inline_message
+0000f260: 5f69 6427 5d20 3d20 696e 6c69 6e65 5f6d  _id'] = inline_m
+0000f270: 6573 7361 6765 5f69 640a 2020 2020 7265  essage_id.    re
+0000f280: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000f290: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000f2a0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000f2b0: 6c6f 6164 2c20 7665 7269 6679 3d76 6572  load, verify=ver
+0000f2c0: 6966 7929 0a0a 0a23 2050 6179 6d65 6e74  ify)...# Payment
+0000f2d0: 7320 2868 7474 7073 3a2f 2f63 6f72 652e  s (https://core.
+0000f2e0: 7465 6c65 6772 616d 2e6f 7267 2f62 6f74  telegram.org/bot
+0000f2f0: 732f 6170 6923 7061 796d 656e 7473 290a  s/api#payments).
+0000f300: 0a64 6566 2073 656e 645f 696e 766f 6963  .def send_invoic
+0000f310: 6528 0a20 2020 2020 2020 2074 6f6b 656e  e(.        token
+0000f320: 2c20 6368 6174 5f69 642c 2074 6974 6c65  , chat_id, title
+0000f330: 2c20 6465 7363 7269 7074 696f 6e2c 2069  , description, i
+0000f340: 6e76 6f69 6365 5f70 6179 6c6f 6164 2c20  nvoice_payload, 
+0000f350: 7072 6f76 6964 6572 5f74 6f6b 656e 2c20  provider_token, 
+0000f360: 6375 7272 656e 6379 2c20 7072 6963 6573  currency, prices
+0000f370: 2c0a 2020 2020 2020 2020 7374 6172 745f  ,.        start_
+0000f380: 7061 7261 6d65 7465 723d 4e6f 6e65 2c20  parameter=None, 
+0000f390: 7068 6f74 6f5f 7572 6c3d 4e6f 6e65 2c20  photo_url=None, 
+0000f3a0: 7068 6f74 6f5f 7369 7a65 3d4e 6f6e 652c  photo_size=None,
+0000f3b0: 2070 686f 746f 5f77 6964 7468 3d4e 6f6e   photo_width=Non
+0000f3c0: 652c 2070 686f 746f 5f68 6569 6768 743d  e, photo_height=
+0000f3d0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6e65  None,.        ne
+0000f3e0: 6564 5f6e 616d 653d 4e6f 6e65 2c20 6e65  ed_name=None, ne
+0000f3f0: 6564 5f70 686f 6e65 5f6e 756d 6265 723d  ed_phone_number=
+0000f400: 4e6f 6e65 2c20 6e65 6564 5f65 6d61 696c  None, need_email
+0000f410: 3d4e 6f6e 652c 206e 6565 645f 7368 6970  =None, need_ship
+0000f420: 7069 6e67 5f61 6464 7265 7373 3d4e 6f6e  ping_address=Non
+0000f430: 652c 0a20 2020 2020 2020 2073 656e 645f  e,.        send_
+0000f440: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
+0000f450: 7072 6f76 6964 6572 3d4e 6f6e 652c 2073  provider=None, s
+0000f460: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
+0000f470: 7669 6465 723d 4e6f 6e65 2c20 6973 5f66  vider=None, is_f
+0000f480: 6c65 7869 626c 653d 4e6f 6e65 2c0a 2020  lexible=None,.  
+0000f490: 2020 2020 2020 6469 7361 626c 655f 6e6f        disable_no
+0000f4a0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+0000f4b0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+0000f4c0: 6e65 2c20 7072 6f76 6964 6572 5f64 6174  ne, provider_dat
+0000f4d0: 613d 4e6f 6e65 2c0a 2020 2020 2020 2020  a=None,.        
+0000f4e0: 7469 6d65 6f75 743d 4e6f 6e65 2c20 6d61  timeout=None, ma
+0000f4f0: 785f 7469 705f 616d 6f75 6e74 3d4e 6f6e  x_tip_amount=Non
+0000f500: 652c 2073 7567 6765 7374 6564 5f74 6970  e, suggested_tip
+0000f510: 5f61 6d6f 756e 7473 3d4e 6f6e 652c 0a20  _amounts=None,. 
+0000f520: 2020 2020 2020 2070 726f 7465 6374 5f63         protect_c
+0000f530: 6f6e 7465 6e74 3d4e 6f6e 652c 206d 6573  ontent=None, mes
+0000f540: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+0000f550: 6f6e 652c 2072 6570 6c79 5f70 6172 616d  one, reply_param
+0000f560: 6574 6572 733d 4e6f 6e65 2c20 7665 7269  eters=None, veri
+0000f570: 6679 3d54 7275 6529 3a0a 2020 2020 2222  fy=True):.    ""
+0000f580: 220a 2020 2020 5573 6520 7468 6973 206d  ".    Use this m
+0000f590: 6574 686f 6420 746f 2073 656e 6420 696e  ethod to send in
+0000f5a0: 766f 6963 6573 2e20 4f6e 2073 7563 6365  voices. On succe
+0000f5b0: 7373 2c20 7468 6520 7365 6e74 204d 6573  ss, the sent Mes
+0000f5c0: 7361 6765 2069 7320 7265 7475 726e 6564  sage is returned
+0000f5d0: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
+0000f5e0: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
+0000f5f0: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
+0000f600: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
+0000f610: 2020 3a70 6172 616d 2063 6861 745f 6964    :param chat_id
+0000f620: 3a20 556e 6971 7565 2069 6465 6e74 6966  : Unique identif
+0000f630: 6965 7220 666f 7220 7468 6520 7461 7267  ier for the targ
+0000f640: 6574 2070 7269 7661 7465 2063 6861 740a  et private chat.
+0000f650: 2020 2020 3a70 6172 616d 2074 6974 6c65      :param title
+0000f660: 3a20 5072 6f64 7563 7420 6e61 6d65 0a20  : Product name. 
+0000f670: 2020 203a 7061 7261 6d20 6465 7363 7269     :param descri
+0000f680: 7074 696f 6e3a 2050 726f 6475 6374 2064  ption: Product d
+0000f690: 6573 6372 6970 7469 6f6e 0a20 2020 203a  escription.    :
+0000f6a0: 7061 7261 6d20 696e 766f 6963 655f 7061  param invoice_pa
+0000f6b0: 796c 6f61 643a 2042 6f74 2d64 6566 696e  yload: Bot-defin
+0000f6c0: 6564 2069 6e76 6f69 6365 2070 6179 6c6f  ed invoice paylo
+0000f6d0: 6164 2c20 312d 3132 3820 6279 7465 732e  ad, 1-128 bytes.
+0000f6e0: 2054 6869 7320 7769 6c6c 206e 6f74 2062   This will not b
+0000f6f0: 6520 6469 7370 6c61 7965 6420 746f 2074  e displayed to t
+0000f700: 6865 2075 7365 722c 2075 7365 2066 6f72  he user, use for
+0000f710: 2079 6f75 7220 696e 7465 726e 616c 2070   your internal p
+0000f720: 726f 6365 7373 6573 2e0a 2020 2020 3a70  rocesses..    :p
+0000f730: 6172 616d 2070 726f 7669 6465 725f 746f  aram provider_to
+0000f740: 6b65 6e3a 2050 6179 6d65 6e74 7320 7072  ken: Payments pr
+0000f750: 6f76 6964 6572 2074 6f6b 656e 2c20 6f62  ovider token, ob
+0000f760: 7461 696e 6564 2076 6961 2040 426f 7466  tained via @Botf
+0000f770: 6174 6865 720a 2020 2020 3a70 6172 616d  ather.    :param
+0000f780: 2063 7572 7265 6e63 793a 2054 6872 6565   currency: Three
+0000f790: 2d6c 6574 7465 7220 4953 4f20 3432 3137  -letter ISO 4217
+0000f7a0: 2063 7572 7265 6e63 7920 636f 6465 2c20   currency code, 
+0000f7b0: 7365 6520 6874 7470 733a 2f2f 636f 7265  see https://core
+0000f7c0: 2e74 656c 6567 7261 6d2e 6f72 672f 626f  .telegram.org/bo
+0000f7d0: 7473 2f70 6179 6d65 6e74 7323 7375 7070  ts/payments#supp
+0000f7e0: 6f72 7465 642d 6375 7272 656e 6369 6573  orted-currencies
+0000f7f0: 0a20 2020 203a 7061 7261 6d20 7072 6963  .    :param pric
+0000f800: 6573 3a20 5072 6963 6520 6272 6561 6b64  es: Price breakd
+0000f810: 6f77 6e2c 2061 206c 6973 7420 6f66 2063  own, a list of c
+0000f820: 6f6d 706f 6e65 6e74 7320 2865 2e67 2e20  omponents (e.g. 
+0000f830: 7072 6f64 7563 7420 7072 6963 652c 2074  product price, t
+0000f840: 6178 2c20 6469 7363 6f75 6e74 2c20 6465  ax, discount, de
+0000f850: 6c69 7665 7279 2063 6f73 742c 2064 656c  livery cost, del
+0000f860: 6976 6572 7920 7461 782c 2062 6f6e 7573  ivery tax, bonus
+0000f870: 2c20 6574 632e 290a 2020 2020 3a70 6172  , etc.).    :par
+0000f880: 616d 2073 7461 7274 5f70 6172 616d 6574  am start_paramet
+0000f890: 6572 3a20 556e 6971 7565 2064 6565 702d  er: Unique deep-
+0000f8a0: 6c69 6e6b 696e 6720 7061 7261 6d65 7465  linking paramete
+0000f8b0: 7220 7468 6174 2063 616e 2062 6520 7573  r that can be us
+0000f8c0: 6564 2074 6f20 6765 6e65 7261 7465 2074  ed to generate t
+0000f8d0: 6869 7320 696e 766f 6963 6520 7768 656e  his invoice when
+0000f8e0: 2075 7365 6420 6173 2061 2073 7461 7274   used as a start
+0000f8f0: 2070 6172 616d 6574 6572 0a20 2020 203a   parameter.    :
+0000f900: 7061 7261 6d20 7068 6f74 6f5f 7572 6c3a  param photo_url:
+0000f910: 2055 524c 206f 6620 7468 6520 7072 6f64   URL of the prod
+0000f920: 7563 7420 7068 6f74 6f20 666f 7220 7468  uct photo for th
+0000f930: 6520 696e 766f 6963 652e 2043 616e 2062  e invoice. Can b
+0000f940: 6520 6120 7068 6f74 6f20 6f66 2074 6865  e a photo of the
+0000f950: 2067 6f6f 6473 206f 7220 6120 6d61 726b   goods or a mark
+0000f960: 6574 696e 6720 696d 6167 6520 666f 7220  eting image for 
+0000f970: 6120 7365 7276 6963 652e 2050 656f 706c  a service. Peopl
+0000f980: 6520 6c69 6b65 2069 7420 6265 7474 6572  e like it better
+0000f990: 2077 6865 6e20 7468 6579 2073 6565 2077   when they see w
+0000f9a0: 6861 7420 7468 6579 2061 7265 2070 6179  hat they are pay
+0000f9b0: 696e 6720 666f 722e 0a20 2020 203a 7061  ing for..    :pa
+0000f9c0: 7261 6d20 7068 6f74 6f5f 7369 7a65 3a20  ram photo_size: 
+0000f9d0: 5068 6f74 6f20 7369 7a65 0a20 2020 203a  Photo size.    :
+0000f9e0: 7061 7261 6d20 7068 6f74 6f5f 7769 6474  param photo_widt
+0000f9f0: 683a 2050 686f 746f 2077 6964 7468 0a20  h: Photo width. 
+0000fa00: 2020 203a 7061 7261 6d20 7068 6f74 6f5f     :param photo_
+0000fa10: 6865 6967 6874 3a20 5068 6f74 6f20 6865  height: Photo he
+0000fa20: 6967 6874 0a20 2020 203a 7061 7261 6d20  ight.    :param 
+0000fa30: 6e65 6564 5f6e 616d 653a 2050 6173 7320  need_name: Pass 
+0000fa40: 5472 7565 2c20 6966 2079 6f75 2072 6571  True, if you req
+0000fa50: 7569 7265 2074 6865 2075 7365 7227 7320  uire the user's 
+0000fa60: 6675 6c6c 206e 616d 6520 746f 2063 6f6d  full name to com
+0000fa70: 706c 6574 6520 7468 6520 6f72 6465 720a  plete the order.
+0000fa80: 2020 2020 3a70 6172 616d 206e 6565 645f      :param need_
+0000fa90: 7068 6f6e 655f 6e75 6d62 6572 3a20 5061  phone_number: Pa
+0000faa0: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
+0000fab0: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
+0000fac0: 2773 2070 686f 6e65 206e 756d 6265 7220  's phone number 
+0000fad0: 746f 2063 6f6d 706c 6574 6520 7468 6520  to complete the 
+0000fae0: 6f72 6465 720a 2020 2020 3a70 6172 616d  order.    :param
+0000faf0: 206e 6565 645f 656d 6169 6c3a 2050 6173   need_email: Pas
+0000fb00: 7320 5472 7565 2c20 6966 2079 6f75 2072  s True, if you r
+0000fb10: 6571 7569 7265 2074 6865 2075 7365 7227  equire the user'
+0000fb20: 7320 656d 6169 6c20 746f 2063 6f6d 706c  s email to compl
+0000fb30: 6574 6520 7468 6520 6f72 6465 720a 2020  ete the order.  
+0000fb40: 2020 3a70 6172 616d 206e 6565 645f 7368    :param need_sh
+0000fb50: 6970 7069 6e67 5f61 6464 7265 7373 3a20  ipping_address: 
+0000fb60: 5061 7373 2054 7275 652c 2069 6620 796f  Pass True, if yo
+0000fb70: 7520 7265 7175 6972 6520 7468 6520 7573  u require the us
+0000fb80: 6572 2773 2073 6869 7070 696e 6720 6164  er's shipping ad
+0000fb90: 6472 6573 7320 746f 2063 6f6d 706c 6574  dress to complet
+0000fba0: 6520 7468 6520 6f72 6465 720a 2020 2020  e the order.    
+0000fbb0: 3a70 6172 616d 2069 735f 666c 6578 6962  :param is_flexib
+0000fbc0: 6c65 3a20 5061 7373 2054 7275 652c 2069  le: Pass True, i
+0000fbd0: 6620 7468 6520 6669 6e61 6c20 7072 6963  f the final pric
+0000fbe0: 6520 6465 7065 6e64 7320 6f6e 2074 6865  e depends on the
+0000fbf0: 2073 6869 7070 696e 6720 6d65 7468 6f64   shipping method
+0000fc00: 0a20 2020 203a 7061 7261 6d20 7365 6e64  .    :param send
+0000fc10: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
+0000fc20: 5f70 726f 7669 6465 723a 2050 6173 7320  _provider: Pass 
+0000fc30: 5472 7565 2c20 6966 2075 7365 7227 7320  True, if user's 
+0000fc40: 7068 6f6e 6520 6e75 6d62 6572 2073 686f  phone number sho
+0000fc50: 756c 6420 6265 2073 656e 7420 746f 2070  uld be sent to p
+0000fc60: 726f 7669 6465 720a 2020 2020 3a70 6172  rovider.    :par
+0000fc70: 616d 2073 656e 645f 656d 6169 6c5f 746f  am send_email_to
+0000fc80: 5f70 726f 7669 6465 723a 2050 6173 7320  _provider: Pass 
+0000fc90: 5472 7565 2c20 6966 2075 7365 7227 7320  True, if user's 
+0000fca0: 656d 6169 6c20 6164 6472 6573 7320 7368  email address sh
+0000fcb0: 6f75 6c64 2062 6520 7365 6e74 2074 6f20  ould be sent to 
+0000fcc0: 7072 6f76 6964 6572 0a20 2020 203a 7061  provider.    :pa
+0000fcd0: 7261 6d20 6469 7361 626c 655f 6e6f 7469  ram disable_noti
+0000fce0: 6669 6361 7469 6f6e 3a20 5365 6e64 7320  fication: Sends 
+0000fcf0: 7468 6520 6d65 7373 6167 6520 7369 6c65  the message sile
+0000fd00: 6e74 6c79 2e20 5573 6572 7320 7769 6c6c  ntly. Users will
+0000fd10: 2072 6563 6569 7665 2061 206e 6f74 6966   receive a notif
+0000fd20: 6963 6174 696f 6e20 7769 7468 206e 6f20  ication with no 
+0000fd30: 736f 756e 642e 0a20 2020 203a 7061 7261  sound..    :para
+0000fd40: 6d20 7265 706c 795f 6d61 726b 7570 3a20  m reply_markup: 
+0000fd50: 4120 4a53 4f4e 2d73 6572 6961 6c69 7a65  A JSON-serialize
+0000fd60: 6420 6f62 6a65 6374 2066 6f72 2061 6e20  d object for an 
+0000fd70: 696e 6c69 6e65 206b 6579 626f 6172 642e  inline keyboard.
+0000fd80: 2049 6620 656d 7074 792c 206f 6e65 2027   If empty, one '
+0000fd90: 5061 7920 746f 7461 6c20 7072 6963 6527  Pay total price'
+0000fda0: 2062 7574 746f 6e20 7769 6c6c 2062 6520   button will be 
+0000fdb0: 7368 6f77 6e2e 2049 6620 6e6f 7420 656d  shown. If not em
+0000fdc0: 7074 792c 2074 6865 2066 6972 7374 2062  pty, the first b
+0000fdd0: 7574 746f 6e20 6d75 7374 2062 6520 6120  utton must be a 
+0000fde0: 5061 7920 6275 7474 6f6e 0a20 2020 203a  Pay button.    :
+0000fdf0: 7061 7261 6d20 7072 6f76 6964 6572 5f64  param provider_d
+0000fe00: 6174 613a 2041 204a 534f 4e2d 7365 7269  ata: A JSON-seri
+0000fe10: 616c 697a 6564 2064 6174 6120 6162 6f75  alized data abou
+0000fe20: 7420 7468 6520 696e 766f 6963 652c 2077  t the invoice, w
+0000fe30: 6869 6368 2077 696c 6c20 6265 2073 6861  hich will be sha
+0000fe40: 7265 6420 7769 7468 2074 6865 2070 6179  red with the pay
+0000fe50: 6d65 6e74 2070 726f 7669 6465 722e 2041  ment provider. A
+0000fe60: 2064 6574 6169 6c65 6420 6465 7363 7269   detailed descri
+0000fe70: 7074 696f 6e20 6f66 2072 6571 7569 7265  ption of require
+0000fe80: 6420 6669 656c 6473 2073 686f 756c 6420  d fields should 
+0000fe90: 6265 2070 726f 7669 6465 6420 6279 2074  be provided by t
+0000fea0: 6865 2070 6179 6d65 6e74 2070 726f 7669  he payment provi
+0000feb0: 6465 722e 0a20 2020 203a 7061 7261 6d20  der..    :param 
+0000fec0: 7469 6d65 6f75 743a 0a20 2020 203a 7061  timeout:.    :pa
+0000fed0: 7261 6d20 6d61 785f 7469 705f 616d 6f75  ram max_tip_amou
+0000fee0: 6e74 3a20 5468 6520 6d61 7869 6d75 6d20  nt: The maximum 
+0000fef0: 6163 6365 7074 6564 2061 6d6f 756e 7420  accepted amount 
+0000ff00: 666f 7220 7469 7073 2069 6e20 7468 6520  for tips in the 
+0000ff10: 736d 616c 6c65 7374 2075 6e69 7473 206f  smallest units o
+0000ff20: 6620 7468 6520 6375 7272 656e 6379 0a20  f the currency. 
+0000ff30: 2020 203a 7061 7261 6d20 7375 6767 6573     :param sugges
+0000ff40: 7465 645f 7469 705f 616d 6f75 6e74 733a  ted_tip_amounts:
+0000ff50: 2041 204a 534f 4e2d 7365 7269 616c 697a   A JSON-serializ
+0000ff60: 6564 2061 7272 6179 206f 6620 7375 6767  ed array of sugg
+0000ff70: 6573 7465 6420 616d 6f75 6e74 7320 6f66  ested amounts of
+0000ff80: 2074 6970 7320 696e 2074 6865 2073 6d61   tips in the sma
+0000ff90: 6c6c 6573 7420 756e 6974 7320 6f66 2074  llest units of t
+0000ffa0: 6865 2063 7572 7265 6e63 792e 0a20 2020  he currency..   
+0000ffb0: 2020 2020 2041 7420 6d6f 7374 2034 2073       At most 4 s
+0000ffc0: 7567 6765 7374 6564 2074 6970 2061 6d6f  uggested tip amo
+0000ffd0: 756e 7473 2063 616e 2062 6520 7370 6563  unts can be spec
+0000ffe0: 6966 6965 642e 2054 6865 2073 7567 6765  ified. The sugge
+0000fff0: 7374 6564 2074 6970 2061 6d6f 756e 7473  sted tip amounts
+00010000: 206d 7573 7420 6265 2070 6f73 6974 6976   must be positiv
+00010010: 652c 2070 6173 7365 6420 696e 2061 2073  e, passed in a s
+00010020: 7472 6963 746c 7920 696e 6372 6561 7365  trictly increase
+00010030: 6420 6f72 6465 7220 616e 6420 6d75 7374  d order and must
+00010040: 206e 6f74 2065 7863 6565 6420 6d61 785f   not exceed max_
+00010050: 7469 705f 616d 6f75 6e74 2e0a 2020 2020  tip_amount..    
+00010060: 3a70 6172 616d 2070 726f 7465 6374 5f63  :param protect_c
+00010070: 6f6e 7465 6e74 3a20 5072 6f74 6563 7473  ontent: Protects
+00010080: 2074 6865 2063 6f6e 7465 6e74 7320 6f66   the contents of
+00010090: 2074 6865 2073 656e 7420 6d65 7373 6167   the sent messag
+000100a0: 6520 6672 6f6d 2066 6f72 7761 7264 696e  e from forwardin
+000100b0: 6720 616e 6420 7361 7669 6e67 0a20 2020  g and saving.   
+000100c0: 203a 7061 7261 6d20 6d65 7373 6167 655f   :param message_
+000100d0: 7468 7265 6164 5f69 643a 2055 6e69 7175  thread_id: Uniqu
+000100e0: 6520 6964 656e 7469 6669 6572 2066 6f72  e identifier for
+000100f0: 2074 6865 2074 6172 6765 7420 6d65 7373   the target mess
+00010100: 6167 6520 7468 7265 6164 2028 746f 7069  age thread (topi
+00010110: 6329 206f 6620 7468 6520 666f 7275 6d3b  c) of the forum;
+00010120: 2066 6f72 2066 6f72 756d 2073 7570 6572   for forum super
+00010130: 6772 6f75 7073 206f 6e6c 790a 2020 2020  groups only.    
+00010140: 3a72 6574 7572 6e3a 0a20 2020 2022 2222  :return:.    """
+00010150: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00010160: 3d20 7227 7365 6e64 496e 766f 6963 6527  = r'sendInvoice'
+00010170: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00010180: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+00010190: 6964 2c20 2774 6974 6c65 273a 2074 6974  id, 'title': tit
+000101a0: 6c65 2c20 2764 6573 6372 6970 7469 6f6e  le, 'description
+000101b0: 273a 2064 6573 6372 6970 7469 6f6e 2c20  ': description, 
+000101c0: 2770 6179 6c6f 6164 273a 2069 6e76 6f69  'payload': invoi
+000101d0: 6365 5f70 6179 6c6f 6164 2c0a 2020 2020  ce_payload,.    
+000101e0: 2020 2020 2020 2020 2020 2027 7072 6f76             'prov
+000101f0: 6964 6572 5f74 6f6b 656e 273a 2070 726f  ider_token': pro
+00010200: 7669 6465 725f 746f 6b65 6e2c 2027 6375  vider_token, 'cu
+00010210: 7272 656e 6379 273a 2063 7572 7265 6e63  rrency': currenc
+00010220: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
+00010230: 2020 2770 7269 6365 7327 3a20 5f63 6f6e    'prices': _con
+00010240: 7665 7274 5f6c 6973 745f 6a73 6f6e 5f73  vert_list_json_s
+00010250: 6572 6961 6c69 7a61 626c 6528 7072 6963  erializable(pric
+00010260: 6573 297d 0a20 2020 2069 6620 7374 6172  es)}.    if star
+00010270: 745f 7061 7261 6d65 7465 723a 0a20 2020  t_parameter:.   
+00010280: 2020 2020 2070 6179 6c6f 6164 5b27 7374       payload['st
+00010290: 6172 745f 7061 7261 6d65 7465 7227 5d20  art_parameter'] 
+000102a0: 3d20 7374 6172 745f 7061 7261 6d65 7465  = start_paramete
+000102b0: 720a 2020 2020 6966 2070 686f 746f 5f75  r.    if photo_u
+000102c0: 726c 3a0a 2020 2020 2020 2020 7061 796c  rl:.        payl
+000102d0: 6f61 645b 2770 686f 746f 5f75 726c 275d  oad['photo_url']
+000102e0: 203d 2070 686f 746f 5f75 726c 0a20 2020   = photo_url.   
+000102f0: 2069 6620 7068 6f74 6f5f 7369 7a65 3a0a   if photo_size:.
+00010300: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00010310: 2770 686f 746f 5f73 697a 6527 5d20 3d20  'photo_size'] = 
+00010320: 7068 6f74 6f5f 7369 7a65 0a20 2020 2069  photo_size.    i
+00010330: 6620 7068 6f74 6f5f 7769 6474 683a 0a20  f photo_width:. 
+00010340: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00010350: 7068 6f74 6f5f 7769 6474 6827 5d20 3d20  photo_width'] = 
+00010360: 7068 6f74 6f5f 7769 6474 680a 2020 2020  photo_width.    
+00010370: 6966 2070 686f 746f 5f68 6569 6768 743a  if photo_height:
+00010380: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00010390: 5b27 7068 6f74 6f5f 6865 6967 6874 275d  ['photo_height']
+000103a0: 203d 2070 686f 746f 5f68 6569 6768 740a   = photo_height.
+000103b0: 2020 2020 6966 206e 6565 645f 6e61 6d65      if need_name
+000103c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000103d0: 2020 2020 2020 7061 796c 6f61 645b 276e        payload['n
+000103e0: 6565 645f 6e61 6d65 275d 203d 206e 6565  eed_name'] = nee
+000103f0: 645f 6e61 6d65 0a20 2020 2069 6620 6e65  d_name.    if ne
+00010400: 6564 5f70 686f 6e65 5f6e 756d 6265 7220  ed_phone_number 
+00010410: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00010420: 2020 2020 2070 6179 6c6f 6164 5b27 6e65       payload['ne
+00010430: 6564 5f70 686f 6e65 5f6e 756d 6265 7227  ed_phone_number'
+00010440: 5d20 3d20 6e65 6564 5f70 686f 6e65 5f6e  ] = need_phone_n
+00010450: 756d 6265 720a 2020 2020 6966 206e 6565  umber.    if nee
+00010460: 645f 656d 6169 6c20 6973 206e 6f74 204e  d_email is not N
+00010470: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00010480: 6c6f 6164 5b27 6e65 6564 5f65 6d61 696c  load['need_email
+00010490: 275d 203d 206e 6565 645f 656d 6169 6c0a  '] = need_email.
+000104a0: 2020 2020 6966 206e 6565 645f 7368 6970      if need_ship
+000104b0: 7069 6e67 5f61 6464 7265 7373 2069 7320  ping_address is 
+000104c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000104d0: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
+000104e0: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
+000104f0: 275d 203d 206e 6565 645f 7368 6970 7069  '] = need_shippi
+00010500: 6e67 5f61 6464 7265 7373 0a20 2020 2069  ng_address.    i
+00010510: 6620 7365 6e64 5f70 686f 6e65 5f6e 756d  f send_phone_num
+00010520: 6265 725f 746f 5f70 726f 7669 6465 7220  ber_to_provider 
+00010530: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00010540: 2020 2020 2070 6179 6c6f 6164 5b27 7365       payload['se
+00010550: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
+00010560: 746f 5f70 726f 7669 6465 7227 5d20 3d20  to_provider'] = 
+00010570: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
+00010580: 725f 746f 5f70 726f 7669 6465 720a 2020  r_to_provider.  
+00010590: 2020 6966 2073 656e 645f 656d 6169 6c5f    if send_email_
+000105a0: 746f 5f70 726f 7669 6465 7220 6973 206e  to_provider is n
+000105b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000105c0: 2070 6179 6c6f 6164 5b27 7365 6e64 5f65   payload['send_e
+000105d0: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
+000105e0: 275d 203d 2073 656e 645f 656d 6169 6c5f  '] = send_email_
+000105f0: 746f 5f70 726f 7669 6465 720a 2020 2020  to_provider.    
+00010600: 6966 2069 735f 666c 6578 6962 6c65 2069  if is_flexible i
+00010610: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00010620: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
+00010630: 666c 6578 6962 6c65 275d 203d 2069 735f  flexible'] = is_
+00010640: 666c 6578 6962 6c65 0a20 2020 2069 6620  flexible.    if 
+00010650: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00010660: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+00010670: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00010680: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
+00010690: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
+000106a0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000106b0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+000106c0: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
+000106d0: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+000106e0: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
+000106f0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+00010700: 726b 7570 290a 2020 2020 6966 2070 726f  rkup).    if pro
+00010710: 7669 6465 725f 6461 7461 3a0a 2020 2020  vider_data:.    
+00010720: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
+00010730: 7669 6465 725f 6461 7461 275d 203d 2070  vider_data'] = p
+00010740: 726f 7669 6465 725f 6461 7461 0a20 2020  rovider_data.   
+00010750: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
+00010760: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
+00010770: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
+00010780: 740a 2020 2020 6966 206d 6178 5f74 6970  t.    if max_tip
+00010790: 5f61 6d6f 756e 7420 6973 206e 6f74 204e  _amount is not N
+000107a0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+000107b0: 6c6f 6164 5b27 6d61 785f 7469 705f 616d  load['max_tip_am
+000107c0: 6f75 6e74 275d 203d 206d 6178 5f74 6970  ount'] = max_tip
+000107d0: 5f61 6d6f 756e 740a 2020 2020 6966 2073  _amount.    if s
+000107e0: 7567 6765 7374 6564 5f74 6970 5f61 6d6f  uggested_tip_amo
+000107f0: 756e 7473 2069 7320 6e6f 7420 4e6f 6e65  unts is not None
+00010800: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+00010810: 645b 2773 7567 6765 7374 6564 5f74 6970  d['suggested_tip
+00010820: 5f61 6d6f 756e 7473 275d 203d 206a 736f  _amounts'] = jso
+00010830: 6e2e 6475 6d70 7328 7375 6767 6573 7465  n.dumps(suggeste
+00010840: 645f 7469 705f 616d 6f75 6e74 7329 0a20  d_tip_amounts). 
+00010850: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
+00010860: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
+00010870: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00010880: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
+00010890: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
+000108a0: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
+000108b0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000108c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
+000108d0: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+000108e0: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+000108f0: 5f74 6872 6561 645f 6964 0a20 2020 2069  _thread_id.    i
+00010900: 6620 7265 706c 795f 7061 7261 6d65 7465  f reply_paramete
+00010910: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
+00010920: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00010930: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
+00010940: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
+00010950: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
+00010960: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00010970: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00010980: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00010990: 616d 733d 7061 796c 6f61 642c 2076 6572  ams=payload, ver
+000109a0: 6966 793d 7665 7269 6679 290a 0a0a 6465  ify=verify)...de
+000109b0: 6620 616e 7377 6572 5f73 6869 7070 696e  f answer_shippin
+000109c0: 675f 7175 6572 7928 746f 6b65 6e2c 2073  g_query(token, s
+000109d0: 6869 7070 696e 675f 7175 6572 795f 6964  hipping_query_id
+000109e0: 2c20 6f6b 2c20 7368 6970 7069 6e67 5f6f  , ok, shipping_o
+000109f0: 7074 696f 6e73 3d4e 6f6e 652c 2065 7272  ptions=None, err
+00010a00: 6f72 5f6d 6573 7361 6765 3d4e 6f6e 652c  or_message=None,
+00010a10: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+00010a20: 2020 2022 2222 0a20 2020 2049 6620 796f     """.    If yo
+00010a30: 7520 7365 6e74 2061 6e20 696e 766f 6963  u sent an invoic
+00010a40: 6520 7265 7175 6573 7469 6e67 2061 2073  e requesting a s
+00010a50: 6869 7070 696e 6720 6164 6472 6573 7320  hipping address 
+00010a60: 616e 6420 7468 6520 7061 7261 6d65 7465  and the paramete
+00010a70: 7220 6973 5f66 6c65 7869 626c 6520 7761  r is_flexible wa
+00010a80: 7320 7370 6563 6966 6965 642c 2074 6865  s specified, the
+00010a90: 2042 6f74 2041 5049 2077 696c 6c20 7365   Bot API will se
+00010aa0: 6e64 2061 6e20 5570 6461 7465 2077 6974  nd an Update wit
+00010ab0: 6820 6120 7368 6970 7069 6e67 5f71 7565  h a shipping_que
+00010ac0: 7279 2066 6965 6c64 2074 6f20 7468 6520  ry field to the 
+00010ad0: 626f 742e 2055 7365 2074 6869 7320 6d65  bot. Use this me
+00010ae0: 7468 6f64 2074 6f20 7265 706c 7920 746f  thod to reply to
+00010af0: 2073 6869 7070 696e 6720 7175 6572 6965   shipping querie
+00010b00: 732e 204f 6e20 7375 6363 6573 732c 2054  s. On success, T
+00010b10: 7275 6520 6973 2072 6574 7572 6e65 642e  rue is returned.
+00010b20: 0a20 2020 203a 7061 7261 6d20 746f 6b65  .    :param toke
+00010b30: 6e3a 2042 6f74 2773 2074 6f6b 656e 2028  n: Bot's token (
+00010b40: 796f 7520 646f 6e27 7420 6e65 6564 2074  you don't need t
+00010b50: 6f20 6669 6c6c 2074 6869 7329 0a20 2020  o fill this).   
+00010b60: 203a 7061 7261 6d20 7368 6970 7069 6e67   :param shipping
+00010b70: 5f71 7565 7279 5f69 643a 2055 6e69 7175  _query_id: Uniqu
+00010b80: 6520 6964 656e 7469 6669 6572 2066 6f72  e identifier for
+00010b90: 2074 6865 2071 7565 7279 2074 6f20 6265   the query to be
+00010ba0: 2061 6e73 7765 7265 640a 2020 2020 3a70   answered.    :p
+00010bb0: 6172 616d 206f 6b3a 2053 7065 6369 6679  aram ok: Specify
+00010bc0: 2054 7275 6520 6966 2064 656c 6976 6572   True if deliver
+00010bd0: 7920 746f 2074 6865 2073 7065 6369 6669  y to the specifi
+00010be0: 6564 2061 6464 7265 7373 2069 7320 706f  ed address is po
+00010bf0: 7373 6962 6c65 2061 6e64 2046 616c 7365  ssible and False
+00010c00: 2069 6620 7468 6572 6520 6172 6520 616e   if there are an
+00010c10: 7920 7072 6f62 6c65 6d73 2028 666f 7220  y problems (for 
+00010c20: 6578 616d 706c 652c 2069 6620 6465 6c69  example, if deli
+00010c30: 7665 7279 2074 6f20 7468 6520 7370 6563  very to the spec
+00010c40: 6966 6965 6420 6164 6472 6573 7320 6973  ified address is
+00010c50: 206e 6f74 2070 6f73 7369 626c 6529 0a20   not possible). 
+00010c60: 2020 203a 7061 7261 6d20 7368 6970 7069     :param shippi
+00010c70: 6e67 5f6f 7074 696f 6e73 3a20 5265 7175  ng_options: Requ
+00010c80: 6972 6564 2069 6620 6f6b 2069 7320 5472  ired if ok is Tr
+00010c90: 7565 2e20 4120 4a53 4f4e 2d73 6572 6961  ue. A JSON-seria
+00010ca0: 6c69 7a65 6420 6172 7261 7920 6f66 2061  lized array of a
+00010cb0: 7661 696c 6162 6c65 2073 6869 7070 696e  vailable shippin
+00010cc0: 6720 6f70 7469 6f6e 732e 0a20 2020 203a  g options..    :
+00010cd0: 7061 7261 6d20 6572 726f 725f 6d65 7373  param error_mess
+00010ce0: 6167 653a 2052 6571 7569 7265 6420 6966  age: Required if
+00010cf0: 206f 6b20 6973 2046 616c 7365 2e20 4572   ok is False. Er
+00010d00: 726f 7220 6d65 7373 6167 6520 696e 2068  ror message in h
+00010d10: 756d 616e 2072 6561 6461 626c 6520 666f  uman readable fo
+00010d20: 726d 2074 6861 7420 6578 706c 6169 6e73  rm that explains
+00010d30: 2077 6879 2069 7420 6973 2069 6d70 6f73   why it is impos
+00010d40: 7369 626c 6520 746f 2063 6f6d 706c 6574  sible to complet
+00010d50: 6520 7468 6520 6f72 6465 7220 2865 2e67  e the order (e.g
+00010d60: 2e20 2253 6f72 7279 2c20 6465 6c69 7665  . "Sorry, delive
+00010d70: 7279 2074 6f20 796f 7572 2064 6573 6972  ry to your desir
+00010d80: 6564 2061 6464 7265 7373 2069 7320 756e  ed address is un
+00010d90: 6176 6169 6c61 626c 6527 292e 2054 656c  available'). Tel
+00010da0: 6567 7261 6d20 7769 6c6c 2064 6973 706c  egram will displ
+00010db0: 6179 2074 6869 7320 6d65 7373 6167 6520  ay this message 
+00010dc0: 746f 2074 6865 2075 7365 722e 0a20 2020  to the user..   
+00010dd0: 203a 7265 7475 726e 3a0a 2020 2020 2222   :return:.    ""
+00010de0: 220a 2020 2020 6d65 7468 6f64 5f75 726c  ".    method_url
+00010df0: 203d 2027 616e 7377 6572 5368 6970 7069   = 'answerShippi
+00010e00: 6e67 5175 6572 7927 0a20 2020 2070 6179  ngQuery'.    pay
+00010e10: 6c6f 6164 203d 207b 2773 6869 7070 696e  load = {'shippin
+00010e20: 675f 7175 6572 795f 6964 273a 2073 6869  g_query_id': shi
+00010e30: 7070 696e 675f 7175 6572 795f 6964 2c20  pping_query_id, 
+00010e40: 276f 6b27 3a20 6f6b 7d0a 2020 2020 6966  'ok': ok}.    if
+00010e50: 2073 6869 7070 696e 675f 6f70 7469 6f6e   shipping_option
+00010e60: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
+00010e70: 6164 5b27 7368 6970 7069 6e67 5f6f 7074  ad['shipping_opt
+00010e80: 696f 6e73 275d 203d 205f 636f 6e76 6572  ions'] = _conver
+00010e90: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
+00010ea0: 616c 697a 6162 6c65 2873 6869 7070 696e  alizable(shippin
+00010eb0: 675f 6f70 7469 6f6e 7329 0a20 2020 2069  g_options).    i
+00010ec0: 6620 6572 726f 725f 6d65 7373 6167 653a  f error_message:
+00010ed0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00010ee0: 5b27 6572 726f 725f 6d65 7373 6167 6527  ['error_message'
+00010ef0: 5d20 3d20 6572 726f 725f 6d65 7373 6167  ] = error_messag
+00010f00: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
+00010f10: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00010f20: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00010f30: 7261 6d73 3d70 6179 6c6f 6164 2c20 7665  rams=payload, ve
+00010f40: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+00010f50: 6566 2061 6e73 7765 725f 7072 655f 6368  ef answer_pre_ch
+00010f60: 6563 6b6f 7574 5f71 7565 7279 2874 6f6b  eckout_query(tok
+00010f70: 656e 2c20 7072 655f 6368 6563 6b6f 7574  en, pre_checkout
+00010f80: 5f71 7565 7279 5f69 642c 206f 6b2c 2065  _query_id, ok, e
+00010f90: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
+00010fa0: 652c 2076 6572 6966 793d 5472 7565 293a  e, verify=True):
+00010fb0: 0a20 2020 2022 2222 0a20 2020 204f 6e63  .    """.    Onc
+00010fc0: 6520 7468 6520 7573 6572 2068 6173 2063  e the user has c
+00010fd0: 6f6e 6669 726d 6564 2074 6865 6972 2070  onfirmed their p
+00010fe0: 6179 6d65 6e74 2061 6e64 2073 6869 7070  ayment and shipp
+00010ff0: 696e 6720 6465 7461 696c 732c 2074 6865  ing details, the
+00011000: 2042 6f74 2041 5049 2073 656e 6473 2074   Bot API sends t
+00011010: 6865 2066 696e 616c 2063 6f6e 6669 726d  he final confirm
+00011020: 6174 696f 6e20 696e 2074 6865 2066 6f72  ation in the for
+00011030: 6d20 6f66 2061 6e20 5570 6461 7465 2077  m of an Update w
+00011040: 6974 6820 7468 6520 6669 656c 6420 7072  ith the field pr
+00011050: 655f 6368 6563 6b6f 7574 5f71 7565 7279  e_checkout_query
+00011060: 2e20 5573 6520 7468 6973 206d 6574 686f  . Use this metho
+00011070: 6420 746f 2072 6573 706f 6e64 2074 6f20  d to respond to 
+00011080: 7375 6368 2070 7265 2d63 6865 636b 6f75  such pre-checkou
+00011090: 7420 7175 6572 6965 732e 204f 6e20 7375  t queries. On su
+000110a0: 6363 6573 732c 2054 7275 6520 6973 2072  ccess, True is r
+000110b0: 6574 7572 6e65 642e 204e 6f74 653a 2054  eturned. Note: T
+000110c0: 6865 2042 6f74 2041 5049 206d 7573 7420  he Bot API must 
+000110d0: 7265 6365 6976 6520 616e 2061 6e73 7765  receive an answe
+000110e0: 7220 7769 7468 696e 2031 3020 7365 636f  r within 10 seco
+000110f0: 6e64 7320 6166 7465 7220 7468 6520 7072  nds after the pr
+00011100: 652d 6368 6563 6b6f 7574 2071 7565 7279  e-checkout query
+00011110: 2077 6173 2073 656e 742e 0a20 2020 203a   was sent..    :
+00011120: 7061 7261 6d20 746f 6b65 6e3a 2042 6f74  param token: Bot
+00011130: 2773 2074 6f6b 656e 2028 796f 7520 646f  's token (you do
+00011140: 6e27 7420 6e65 6564 2074 6f20 6669 6c6c  n't need to fill
+00011150: 2074 6869 7329 0a20 2020 203a 7061 7261   this).    :para
+00011160: 6d20 7072 655f 6368 6563 6b6f 7574 5f71  m pre_checkout_q
+00011170: 7565 7279 5f69 643a 2055 6e69 7175 6520  uery_id: Unique 
+00011180: 6964 656e 7469 6669 6572 2066 6f72 2074  identifier for t
+00011190: 6865 2071 7565 7279 2074 6f20 6265 2061  he query to be a
+000111a0: 6e73 7765 7265 640a 2020 2020 3a70 6172  nswered.    :par
+000111b0: 616d 206f 6b3a 2053 7065 6369 6679 2054  am ok: Specify T
+000111c0: 7275 6520 6966 2065 7665 7279 7468 696e  rue if everythin
+000111d0: 6720 6973 2061 6c72 6967 6874 2028 676f  g is alright (go
+000111e0: 6f64 7320 6172 6520 6176 6169 6c61 626c  ods are availabl
+000111f0: 652c 2065 7463 2e29 2061 6e64 2074 6865  e, etc.) and the
+00011200: 2062 6f74 2069 7320 7265 6164 7920 746f   bot is ready to
+00011210: 2070 726f 6365 6564 2077 6974 6820 7468   proceed with th
+00011220: 6520 6f72 6465 722e 2055 7365 2046 616c  e order. Use Fal
+00011230: 7365 2069 6620 7468 6572 6520 6172 6520  se if there are 
+00011240: 616e 7920 7072 6f62 6c65 6d73 2e0a 2020  any problems..  
+00011250: 2020 3a70 6172 616d 2065 7272 6f72 5f6d    :param error_m
+00011260: 6573 7361 6765 3a20 5265 7175 6972 6564  essage: Required
+00011270: 2069 6620 6f6b 2069 7320 4661 6c73 652e   if ok is False.
+00011280: 2045 7272 6f72 206d 6573 7361 6765 2069   Error message i
+00011290: 6e20 6875 6d61 6e20 7265 6164 6162 6c65  n human readable
+000112a0: 2066 6f72 6d20 7468 6174 2065 7870 6c61   form that expla
+000112b0: 696e 7320 7468 6520 7265 6173 6f6e 2066  ins the reason f
+000112c0: 6f72 2066 6169 6c75 7265 2074 6f20 7072  or failure to pr
+000112d0: 6f63 6565 6420 7769 7468 2074 6865 2063  oceed with the c
+000112e0: 6865 636b 6f75 7420 2865 2e67 2e20 2253  heckout (e.g. "S
+000112f0: 6f72 7279 2c20 736f 6d65 626f 6479 206a  orry, somebody j
+00011300: 7573 7420 626f 7567 6874 2074 6865 206c  ust bought the l
+00011310: 6173 7420 6f66 206f 7572 2061 6d61 7a69  ast of our amazi
+00011320: 6e67 2062 6c61 636b 2054 2d73 6869 7274  ng black T-shirt
+00011330: 7320 7768 696c 6520 796f 7520 7765 7265  s while you were
+00011340: 2062 7573 7920 6669 6c6c 696e 6720 6f75   busy filling ou
+00011350: 7420 796f 7572 2070 6179 6d65 6e74 2064  t your payment d
+00011360: 6574 6169 6c73 2e20 506c 6561 7365 2063  etails. Please c
+00011370: 686f 6f73 6520 6120 6469 6666 6572 656e  hoose a differen
+00011380: 7420 636f 6c6f 7220 6f72 2067 6172 6d65  t color or garme
+00011390: 6e74 2122 292e 2054 656c 6567 7261 6d20  nt!"). Telegram 
+000113a0: 7769 6c6c 2064 6973 706c 6179 2074 6869  will display thi
+000113b0: 7320 6d65 7373 6167 6520 746f 2074 6865  s message to the
+000113c0: 2075 7365 722e 0a20 2020 203a 7265 7475   user..    :retu
+000113d0: 726e 3a0a 2020 2020 2222 220a 2020 2020  rn:.    """.    
+000113e0: 6d65 7468 6f64 5f75 726c 203d 2027 616e  method_url = 'an
+000113f0: 7377 6572 5072 6543 6865 636b 6f75 7451  swerPreCheckoutQ
+00011400: 7565 7279 270a 2020 2020 7061 796c 6f61  uery'.    payloa
+00011410: 6420 3d20 7b27 7072 655f 6368 6563 6b6f  d = {'pre_checko
+00011420: 7574 5f71 7565 7279 5f69 6427 3a20 7072  ut_query_id': pr
+00011430: 655f 6368 6563 6b6f 7574 5f71 7565 7279  e_checkout_query
+00011440: 5f69 642c 2027 6f6b 273a 206f 6b7d 0a20  _id, 'ok': ok}. 
+00011450: 2020 2069 6620 6572 726f 725f 6d65 7373     if error_mess
+00011460: 6167 653a 0a20 2020 2020 2020 2070 6179  age:.        pay
+00011470: 6c6f 6164 5b27 6572 726f 725f 6d65 7373  load['error_mess
+00011480: 6167 6527 5d20 3d20 6572 726f 725f 6d65  age'] = error_me
+00011490: 7373 6167 650a 2020 2020 7265 7475 726e  ssage.    return
+000114a0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+000114b0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+000114c0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+000114d0: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+000114e0: 0a0a 0a64 6566 2075 6e70 696e 5f61 6c6c  ...def unpin_all
+000114f0: 5f67 656e 6572 616c 5f66 6f72 756d 5f74  _general_forum_t
+00011500: 6f70 6963 5f6d 6573 7361 6765 7328 746f  opic_messages(to
+00011510: 6b65 6e2c 2063 6861 745f 6964 2c20 7665  ken, chat_id, ve
+00011520: 7269 6679 3d54 7275 6529 3a0a 2020 2020  rify=True):.    
+00011530: 6d65 7468 6f64 5f75 726c 203d 2027 756e  method_url = 'un
+00011540: 7069 6e41 6c6c 4765 6e65 7261 6c46 6f72  pinAllGeneralFor
+00011550: 756d 546f 7069 634d 6573 7361 6765 7327  umTopicMessages'
+00011560: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00011570: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+00011580: 6964 7d0a 2020 2020 7265 7475 726e 205f  id}.    return _
+00011590: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+000115a0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+000115b0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+000115c0: 6d65 7468 6f64 3d27 706f 7374 272c 2076  method='post', v
+000115d0: 6572 6966 793d 7665 7269 6679 290a 0a0a  erify=verify)...
+000115e0: 2320 496e 6c69 6e65 5175 6572 790a 0a64  # InlineQuery..d
+000115f0: 6566 2061 6e73 7765 725f 6361 6c6c 6261  ef answer_callba
+00011600: 636b 5f71 7565 7279 2874 6f6b 656e 2c20  ck_query(token, 
+00011610: 6361 6c6c 6261 636b 5f71 7565 7279 5f69  callback_query_i
+00011620: 642c 2074 6578 743d 4e6f 6e65 2c20 7368  d, text=None, sh
+00011630: 6f77 5f61 6c65 7274 3d4e 6f6e 652c 2075  ow_alert=None, u
+00011640: 726c 3d4e 6f6e 652c 2063 6163 6865 5f74  rl=None, cache_t
+00011650: 696d 653d 4e6f 6e65 2c20 7665 7269 6679  ime=None, verify
+00011660: 3d54 7275 6529 3a0a 2020 2020 2222 220a  =True):.    """.
+00011670: 2020 2020 5573 6520 7468 6973 206d 6574      Use this met
+00011680: 686f 6420 746f 2073 656e 6420 616e 7377  hod to send answ
+00011690: 6572 7320 746f 2063 616c 6c62 6163 6b20  ers to callback 
+000116a0: 7175 6572 6965 7320 7365 6e74 2066 726f  queries sent fro
+000116b0: 6d20 696e 6c69 6e65 206b 6579 626f 6172  m inline keyboar
+000116c0: 6473 2e20 5468 6520 616e 7377 6572 2077  ds. The answer w
+000116d0: 696c 6c20 6265 2064 6973 706c 6179 6564  ill be displayed
+000116e0: 2074 6f20 7468 6520 7573 6572 2061 7320   to the user as 
+000116f0: 6120 6e6f 7469 6669 6361 7469 6f6e 2061  a notification a
+00011700: 7420 7468 6520 746f 7020 6f66 2074 6865  t the top of the
+00011710: 2063 6861 7420 7363 7265 656e 206f 7220   chat screen or 
+00011720: 6173 2061 6e20 616c 6572 742e 204f 6e20  as an alert. On 
+00011730: 7375 6363 6573 732c 2054 7275 6520 6973  success, True is
+00011740: 2072 6574 7572 6e65 642e 0a20 2020 2041   returned..    A
+00011750: 6c74 6572 6e61 7469 7665 6c79 2c20 7468  lternatively, th
+00011760: 6520 7573 6572 2063 616e 2062 6520 7265  e user can be re
+00011770: 6469 7265 6374 6564 2074 6f20 7468 6520  directed to the 
+00011780: 7370 6563 6966 6965 6420 4761 6d65 2055  specified Game U
+00011790: 524c 2e20 466f 7220 7468 6973 206f 7074  RL. For this opt
+000117a0: 696f 6e20 746f 2077 6f72 6b2c 2079 6f75  ion to work, you
+000117b0: 206d 7573 7420 6669 7273 7420 6372 6561   must first crea
+000117c0: 7465 2061 2067 616d 6520 666f 7220 796f  te a game for yo
+000117d0: 7572 2062 6f74 2076 6961 2042 6f74 4661  ur bot via BotFa
+000117e0: 7468 6572 2061 6e64 2061 6363 6570 7420  ther and accept 
+000117f0: 7468 6520 7465 726d 732e 204f 7468 6572  the terms. Other
+00011800: 7769 7365 2c20 796f 7520 6d61 7920 7573  wise, you may us
+00011810: 6520 6c69 6e6b 7320 6c69 6b65 2074 656c  e links like tel
+00011820: 6567 7261 6d2e 6d65 2f79 6f75 725f 626f  egram.me/your_bo
+00011830: 743f 7374 6172 743d 5858 5858 2074 6861  t?start=XXXX tha
+00011840: 7420 6f70 656e 2079 6f75 7220 626f 7420  t open your bot 
+00011850: 7769 7468 2061 2070 6172 616d 6574 6572  with a parameter
+00011860: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
+00011870: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
+00011880: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
+00011890: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
+000118a0: 2020 3a70 6172 616d 2063 616c 6c62 6163    :param callbac
+000118b0: 6b5f 7175 6572 795f 6964 3a20 556e 6971  k_query_id: Uniq
+000118c0: 7565 2069 6465 6e74 6966 6965 7220 666f  ue identifier fo
+000118d0: 7220 7468 6520 7175 6572 7920 746f 2062  r the query to b
+000118e0: 6520 616e 7377 6572 6564 0a20 2020 203a  e answered.    :
+000118f0: 7061 7261 6d20 7465 7874 3a20 284f 7074  param text: (Opt
+00011900: 696f 6e61 6c29 2054 6578 7420 6f66 2074  ional) Text of t
+00011910: 6865 206e 6f74 6966 6963 6174 696f 6e2e  he notification.
+00011920: 2049 6620 6e6f 7420 7370 6563 6966 6965   If not specifie
+00011930: 642c 206e 6f74 6869 6e67 2077 696c 6c20  d, nothing will 
+00011940: 6265 2073 686f 776e 2074 6f20 7468 6520  be shown to the 
+00011950: 7573 6572 2c20 302d 3230 3020 6368 6172  user, 0-200 char
+00011960: 6163 7465 7273 0a20 2020 203a 7061 7261  acters.    :para
+00011970: 6d20 7368 6f77 5f61 6c65 7274 3a20 284f  m show_alert: (O
+00011980: 7074 696f 6e61 6c29 2049 6620 7472 7565  ptional) If true
+00011990: 2c20 616e 2061 6c65 7274 2077 696c 6c20  , an alert will 
+000119a0: 6265 2073 686f 776e 2062 7920 7468 6520  be shown by the 
+000119b0: 636c 6965 6e74 2069 6e73 7465 6164 206f  client instead o
+000119c0: 6620 6120 6e6f 7469 6669 6361 7469 6f6e  f a notification
+000119d0: 2061 7420 7468 6520 746f 7020 6f66 2074   at the top of t
+000119e0: 6865 2063 6861 7420 7363 7265 656e 2e20  he chat screen. 
+000119f0: 4465 6661 756c 7473 2074 6f20 6661 6c73  Defaults to fals
+00011a00: 652e 0a20 2020 203a 7061 7261 6d20 7572  e..    :param ur
+00011a10: 6c3a 2028 4f70 7469 6f6e 616c 2920 5552  l: (Optional) UR
+00011a20: 4c20 7468 6174 2077 696c 6c20 6265 206f  L that will be o
+00011a30: 7065 6e65 6420 6279 2074 6865 2075 7365  pened by the use
+00011a40: 7227 7320 636c 6965 6e74 2e20 4966 2079  r's client. If y
+00011a50: 6f75 2068 6176 6520 6372 6561 7465 6420  ou have created 
+00011a60: 6120 4761 6d65 2061 6e64 2061 6363 6570  a Game and accep
+00011a70: 7465 6420 7468 6520 636f 6e64 6974 696f  ted the conditio
+00011a80: 6e73 2076 6961 2040 426f 7466 6174 6865  ns via @Botfathe
+00011a90: 722c 2073 7065 6369 6679 2074 6865 2055  r, specify the U
+00011aa0: 524c 2074 6861 7420 6f70 656e 7320 796f  RL that opens yo
+00011ab0: 7572 2067 616d 6520 e280 9320 6e6f 7465  ur game ... note
+00011ac0: 2074 6861 7420 7468 6973 2077 696c 6c20   that this will 
+00011ad0: 6f6e 6c79 2077 6f72 6b20 6966 2074 6865  only work if the
+00011ae0: 2071 7565 7279 2063 6f6d 6573 2066 726f   query comes fro
+00011af0: 6d20 6120 6361 6c6c 6261 636b 5f67 616d  m a callback_gam
+00011b00: 6520 6275 7474 6f6e 2e0a 2020 2020 4f74  e button..    Ot
+00011b10: 6865 7277 6973 652c 2079 6f75 206d 6179  herwise, you may
+00011b20: 2075 7365 206c 696e 6b73 206c 696b 6520   use links like 
+00011b30: 7465 6c65 6772 616d 2e6d 652f 796f 7572  telegram.me/your
+00011b40: 5f62 6f74 3f73 7461 7274 3d58 5858 5820  _bot?start=XXXX 
+00011b50: 7468 6174 206f 7065 6e20 796f 7572 2062  that open your b
+00011b60: 6f74 2077 6974 6820 6120 7061 7261 6d65  ot with a parame
+00011b70: 7465 722e 0a20 2020 203a 7061 7261 6d20  ter..    :param 
+00011b80: 6361 6368 655f 7469 6d65 3a20 284f 7074  cache_time: (Opt
+00011b90: 696f 6e61 6c29 2054 6865 206d 6178 696d  ional) The maxim
+00011ba0: 756d 2061 6d6f 756e 7420 6f66 2074 696d  um amount of tim
+00011bb0: 6520 696e 2073 6563 6f6e 6473 2074 6861  e in seconds tha
+00011bc0: 7420 7468 6520 7265 7375 6c74 206f 6620  t the result of 
+00011bd0: 7468 6520 6361 6c6c 6261 636b 2071 7565  the callback que
+00011be0: 7279 206d 6179 2062 6520 6361 6368 6564  ry may be cached
+00011bf0: 2063 6c69 656e 742d 7369 6465 2e20 5465   client-side. Te
+00011c00: 6c65 6772 616d 2061 7070 7320 7769 6c6c  legram apps will
+00011c10: 2073 7570 706f 7274 2063 6163 6869 6e67   support caching
+00011c20: 2073 7461 7274 696e 6720 696e 2076 6572   starting in ver
+00011c30: 7369 6f6e 2033 2e31 342e 2044 6566 6175  sion 3.14. Defau
+00011c40: 6c74 7320 746f 2030 2e0a 2020 2020 3a72  lts to 0..    :r
+00011c50: 6574 7572 6e3a 0a20 2020 2022 2222 0a20  eturn:.    """. 
+00011c60: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00011c70: 2761 6e73 7765 7243 616c 6c62 6163 6b51  'answerCallbackQ
+00011c80: 7565 7279 270a 2020 2020 7061 796c 6f61  uery'.    payloa
+00011c90: 6420 3d20 7b27 6361 6c6c 6261 636b 5f71  d = {'callback_q
+00011ca0: 7565 7279 5f69 6427 3a20 6361 6c6c 6261  uery_id': callba
+00011cb0: 636b 5f71 7565 7279 5f69 647d 0a20 2020  ck_query_id}.   
+00011cc0: 2069 6620 7465 7874 3a0a 2020 2020 2020   if text:.      
+00011cd0: 2020 7061 796c 6f61 645b 2774 6578 7427    payload['text'
+00011ce0: 5d20 3d20 7465 7874 0a20 2020 2069 6620  ] = text.    if 
+00011cf0: 7368 6f77 5f61 6c65 7274 2069 7320 6e6f  show_alert is no
+00011d00: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00011d10: 7061 796c 6f61 645b 2773 686f 775f 616c  payload['show_al
+00011d20: 6572 7427 5d20 3d20 7368 6f77 5f61 6c65  ert'] = show_ale
+00011d30: 7274 0a20 2020 2069 6620 7572 6c3a 0a20  rt.    if url:. 
+00011d40: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00011d50: 7572 6c27 5d20 3d20 7572 6c0a 2020 2020  url'] = url.    
+00011d60: 6966 2063 6163 6865 5f74 696d 6520 6973  if cache_time is
+00011d70: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00011d80: 2020 2070 6179 6c6f 6164 5b27 6361 6368     payload['cach
+00011d90: 655f 7469 6d65 275d 203d 2063 6163 6865  e_time'] = cache
+00011da0: 5f74 696d 650a 2020 2020 7265 7475 726e  _time.    return
+00011db0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00011dc0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00011dd0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00011de0: 2c20 6d65 7468 6f64 3d27 706f 7374 272c  , method='post',
+00011df0: 2076 6572 6966 793d 7665 7269 6679 290a   verify=verify).
+00011e00: 0a0a 6465 6620 6765 745f 7573 6572 5f63  ..def get_user_c
+00011e10: 6861 745f 626f 6f73 7473 2874 6f6b 656e  hat_boosts(token
+00011e20: 2c20 6368 6174 5f69 642c 2075 7365 725f  , chat_id, user_
+00011e30: 6964 2c20 7665 7269 6679 3d54 7275 6529  id, verify=True)
+00011e40: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00011e50: 203d 2027 6765 7455 7365 7243 6861 7442   = 'getUserChatB
+00011e60: 6f6f 7374 7327 0a20 2020 2070 6179 6c6f  oosts'.    paylo
+00011e70: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+00011e80: 2063 6861 745f 6964 2c20 2775 7365 725f   chat_id, 'user_
+00011e90: 6964 273a 2075 7365 725f 6964 7d0a 2020  id': user_id}.  
+00011ea0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00011eb0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00011ec0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00011ed0: 3d70 6179 6c6f 6164 2c20 7665 7269 6679  =payload, verify
+00011ee0: 3d76 6572 6966 7929 0a0a 0a64 6566 2061  =verify)...def a
+00011ef0: 6e73 7765 725f 696e 6c69 6e65 5f71 7565  nswer_inline_que
+00011f00: 7279 2874 6f6b 656e 2c20 696e 6c69 6e65  ry(token, inline
+00011f10: 5f71 7565 7279 5f69 642c 2072 6573 756c  _query_id, resul
+00011f20: 7473 2c20 6361 6368 655f 7469 6d65 3d4e  ts, cache_time=N
+00011f30: 6f6e 652c 2069 735f 7065 7273 6f6e 616c  one, is_personal
+00011f40: 3d4e 6f6e 652c 206e 6578 745f 6f66 6673  =None, next_offs
+00011f50: 6574 3d4e 6f6e 652c 0a20 2020 2020 2020  et=None,.       
+00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f70: 2062 7574 746f 6e3d 4e6f 6e65 2c20 7665   button=None, ve
+00011f80: 7269 6679 3d54 7275 6529 3a0a 2020 2020  rify=True):.    
+00011f90: 6d65 7468 6f64 5f75 726c 203d 2027 616e  method_url = 'an
+00011fa0: 7377 6572 496e 6c69 6e65 5175 6572 7927  swerInlineQuery'
+00011fb0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00011fc0: 2769 6e6c 696e 655f 7175 6572 795f 6964  'inline_query_id
+00011fd0: 273a 2069 6e6c 696e 655f 7175 6572 795f  ': inline_query_
+00011fe0: 6964 2c20 2772 6573 756c 7473 273a 205f  id, 'results': _
+00011ff0: 636f 6e76 6572 745f 6c69 7374 5f6a 736f  convert_list_jso
+00012000: 6e5f 7365 7269 616c 697a 6162 6c65 2872  n_serializable(r
+00012010: 6573 756c 7473 297d 0a20 2020 2069 6620  esults)}.    if 
+00012020: 6361 6368 655f 7469 6d65 2069 7320 6e6f  cache_time is no
+00012030: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00012040: 7061 796c 6f61 645b 2763 6163 6865 5f74  payload['cache_t
+00012050: 696d 6527 5d20 3d20 6361 6368 655f 7469  ime'] = cache_ti
+00012060: 6d65 0a20 2020 2069 6620 6973 5f70 6572  me.    if is_per
+00012070: 736f 6e61 6c20 6973 206e 6f74 204e 6f6e  sonal is not Non
+00012080: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00012090: 6164 5b27 6973 5f70 6572 736f 6e61 6c27  ad['is_personal'
+000120a0: 5d20 3d20 6973 5f70 6572 736f 6e61 6c0a  ] = is_personal.
+000120b0: 2020 2020 6966 206e 6578 745f 6f66 6673      if next_offs
+000120c0: 6574 2069 7320 6e6f 7420 4e6f 6e65 3a0a  et is not None:.
+000120d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000120e0: 276e 6578 745f 6f66 6673 6574 275d 203d  'next_offset'] =
+000120f0: 206e 6578 745f 6f66 6673 6574 0a20 2020   next_offset.   
+00012100: 2069 6620 6275 7474 6f6e 2069 7320 6e6f   if button is no
+00012110: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00012120: 7061 796c 6f61 645b 2262 7574 746f 6e22  payload["button"
+00012130: 5d20 3d20 6275 7474 6f6e 2e74 6f5f 6a73  ] = button.to_js
+00012140: 6f6e 2829 0a20 2020 2072 6574 7572 6e20  on().    return 
+00012150: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00012160: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00012170: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00012180: 206d 6574 686f 643d 2770 6f73 7427 2c20   method='post', 
+00012190: 7665 7269 6679 3d76 6572 6966 7929 0a0a  verify=verify)..
+000121a0: 0a64 6566 2067 6574 5f73 7469 636b 6572  .def get_sticker
+000121b0: 5f73 6574 2874 6f6b 656e 2c20 6e61 6d65  _set(token, name
+000121c0: 2c20 7665 7269 6679 3d54 7275 6529 3a0a  , verify=True):.
+000121d0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000121e0: 2027 6765 7453 7469 636b 6572 5365 7427   'getStickerSet'
+000121f0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00012200: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00012210: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00012220: 616d 733d 7b27 6e61 6d65 273a 206e 616d  ams={'name': nam
+00012230: 657d 2c20 7665 7269 6679 3d76 6572 6966  e}, verify=verif
+00012240: 7929 0a0a 0a64 6566 2067 6574 5f63 7573  y)...def get_cus
+00012250: 746f 6d5f 656d 6f6a 695f 7374 6963 6b65  tom_emoji_sticke
+00012260: 7273 2874 6f6b 656e 2c20 6375 7374 6f6d  rs(token, custom
+00012270: 5f65 6d6f 6a69 5f69 6473 2c20 7665 7269  _emoji_ids, veri
+00012280: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+00012290: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
+000122a0: 4375 7374 6f6d 456d 6f6a 6953 7469 636b  CustomEmojiStick
+000122b0: 6572 7327 0a20 2020 2072 6574 7572 6e20  ers'.    return 
+000122c0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+000122d0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+000122e0: 2070 6172 616d 733d 7b27 6375 7374 6f6d   params={'custom
+000122f0: 5f65 6d6f 6a69 5f69 6473 273a 206a 736f  _emoji_ids': jso
+00012300: 6e2e 6475 6d70 7328 6375 7374 6f6d 5f65  n.dumps(custom_e
+00012310: 6d6f 6a69 5f69 6473 297d 2c20 7665 7269  moji_ids)}, veri
+00012320: 6679 3d76 6572 6966 7929 0a0a 0a64 6566  fy=verify)...def
+00012330: 2073 6574 5f73 7469 636b 6572 5f6b 6579   set_sticker_key
+00012340: 776f 7264 7328 746f 6b65 6e2c 2073 7469  words(token, sti
+00012350: 636b 6572 2c20 6b65 7977 6f72 6473 3d4e  cker, keywords=N
+00012360: 6f6e 652c 2076 6572 6966 793d 5472 7565  one, verify=True
+00012370: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
+00012380: 6c20 3d20 2773 6574 5374 6963 6b65 724b  l = 'setStickerK
+00012390: 6579 776f 7264 7327 0a20 2020 2070 6179  eywords'.    pay
+000123a0: 6c6f 6164 203d 207b 2773 7469 636b 6572  load = {'sticker
+000123b0: 273a 2073 7469 636b 6572 7d0a 2020 2020  ': sticker}.    
+000123c0: 6966 206b 6579 776f 7264 733a 0a20 2020  if keywords:.   
+000123d0: 2020 2020 2070 6179 6c6f 6164 5b27 6b65       payload['ke
+000123e0: 7977 6f72 6473 275d 203d 206a 736f 6e2e  ywords'] = json.
+000123f0: 6475 6d70 7328 6b65 7977 6f72 6473 290a  dumps(keywords).
+00012400: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00012410: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00012420: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00012430: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+00012440: 6f64 3d27 706f 7374 272c 2076 6572 6966  od='post', verif
+00012450: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00012460: 7365 745f 7374 6963 6b65 725f 6d61 736b  set_sticker_mask
+00012470: 5f70 6f73 6974 696f 6e28 746f 6b65 6e2c  _position(token,
+00012480: 2073 7469 636b 6572 2c20 6d61 736b 5f70   sticker, mask_p
+00012490: 6f73 6974 696f 6e3d 4e6f 6e65 2c20 7665  osition=None, ve
+000124a0: 7269 6679 3d54 7275 6529 3a0a 2020 2020  rify=True):.    
+000124b0: 6d65 7468 6f64 5f75 726c 203d 2027 7365  method_url = 'se
+000124c0: 7453 7469 636b 6572 4d61 736b 506f 7369  tStickerMaskPosi
+000124d0: 7469 6f6e 270a 2020 2020 7061 796c 6f61  tion'.    payloa
+000124e0: 6420 3d20 7b27 7374 6963 6b65 7227 3a20  d = {'sticker': 
+000124f0: 7374 6963 6b65 727d 0a20 2020 2069 6620  sticker}.    if 
+00012500: 6d61 736b 5f70 6f73 6974 696f 6e3a 0a20  mask_position:. 
+00012510: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00012520: 6d61 736b 5f70 6f73 6974 696f 6e27 5d20  mask_position'] 
+00012530: 3d20 6d61 736b 5f70 6f73 6974 696f 6e2e  = mask_position.
+00012540: 746f 5f6a 736f 6e28 290a 2020 2020 7265  to_json().    re
+00012550: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00012560: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00012570: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00012580: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+00012590: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+000125a0: 6679 290a 0a0a 6465 6620 7570 6c6f 6164  fy)...def upload
+000125b0: 5f73 7469 636b 6572 5f66 696c 6528 746f  _sticker_file(to
+000125c0: 6b65 6e2c 2075 7365 725f 6964 2c20 7374  ken, user_id, st
+000125d0: 6963 6b65 722c 2073 7469 636b 6572 5f66  icker, sticker_f
+000125e0: 6f72 6d61 742c 2076 6572 6966 793d 5472  ormat, verify=Tr
+000125f0: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+00012600: 7572 6c20 3d20 2775 706c 6f61 6453 7469  url = 'uploadSti
+00012610: 636b 6572 4669 6c65 270a 2020 2020 7061  ckerFile'.    pa
+00012620: 796c 6f61 6420 3d20 7b27 7573 6572 5f69  yload = {'user_i
+00012630: 6427 3a20 7573 6572 5f69 642c 2027 7374  d': user_id, 'st
+00012640: 6963 6b65 725f 666f 726d 6174 273a 2073  icker_format': s
+00012650: 7469 636b 6572 5f66 6f72 6d61 747d 0a20  ticker_format}. 
+00012660: 2020 2066 696c 6573 203d 207b 2773 7469     files = {'sti
+00012670: 636b 6572 273a 2073 7469 636b 6572 7d0a  cker': sticker}.
+00012680: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00012690: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+000126a0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+000126b0: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
+000126c0: 733d 6669 6c65 732c 206d 6574 686f 643d  s=files, method=
+000126d0: 2770 6f73 7427 2c20 7665 7269 6679 3d76  'post', verify=v
+000126e0: 6572 6966 7929 0a0a 0a64 6566 2073 6574  erify)...def set
+000126f0: 5f63 7573 746f 6d5f 656d 6f6a 695f 7374  _custom_emoji_st
+00012700: 6963 6b65 725f 7365 745f 7468 756d 626e  icker_set_thumbn
+00012710: 6169 6c28 746f 6b65 6e2c 206e 616d 652c  ail(token, name,
+00012720: 2063 7573 746f 6d5f 656d 6f6a 695f 6964   custom_emoji_id
+00012730: 3d4e 6f6e 652c 2076 6572 6966 793d 5472  =None, verify=Tr
+00012740: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+00012750: 7572 6c20 3d20 2773 6574 4375 7374 6f6d  url = 'setCustom
+00012760: 456d 6f6a 6953 7469 636b 6572 5365 7454  EmojiStickerSetT
+00012770: 6875 6d62 6e61 696c 270a 2020 2020 7061  humbnail'.    pa
+00012780: 796c 6f61 6420 3d20 7b27 6e61 6d65 273a  yload = {'name':
+00012790: 206e 616d 657d 0a20 2020 2069 6620 6375   name}.    if cu
+000127a0: 7374 6f6d 5f65 6d6f 6a69 5f69 6420 6973  stom_emoji_id is
+000127b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000127c0: 2020 2070 6179 6c6f 6164 5b27 6375 7374     payload['cust
+000127d0: 6f6d 5f65 6d6f 6a69 5f69 6427 5d20 3d20  om_emoji_id'] = 
+000127e0: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 640a  custom_emoji_id.
+000127f0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00012800: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00012810: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00012820: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+00012830: 6f64 3d27 706f 7374 272c 2076 6572 6966  od='post', verif
+00012840: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00012850: 7365 745f 7374 6963 6b65 725f 7365 745f  set_sticker_set_
+00012860: 7469 746c 6528 746f 6b65 6e2c 206e 616d  title(token, nam
+00012870: 652c 2074 6974 6c65 2c20 7665 7269 6679  e, title, verify
+00012880: 3d54 7275 6529 3a0a 2020 2020 6d65 7468  =True):.    meth
+00012890: 6f64 5f75 726c 203d 2027 7365 7453 7469  od_url = 'setSti
+000128a0: 636b 6572 5365 7454 6974 6c65 270a 2020  ckerSetTitle'.  
+000128b0: 2020 7061 796c 6f61 6420 3d20 7b27 6e61    payload = {'na
+000128c0: 6d65 273a 206e 616d 652c 2027 7469 746c  me': name, 'titl
+000128d0: 6527 3a20 7469 746c 657d 0a20 2020 2072  e': title}.    r
+000128e0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+000128f0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00012900: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012910: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+00012920: 6f73 7427 2c20 7665 7269 6679 3d76 6572  ost', verify=ver
+00012930: 6966 7929 0a0a 0a64 6566 2064 656c 6574  ify)...def delet
+00012940: 655f 7374 6963 6b65 725f 7365 7428 746f  e_sticker_set(to
+00012950: 6b65 6e2c 206e 616d 652c 2076 6572 6966  ken, name, verif
+00012960: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+00012970: 686f 645f 7572 6c20 3d20 2764 656c 6574  hod_url = 'delet
+00012980: 6553 7469 636b 6572 5365 7427 0a20 2020  eStickerSet'.   
+00012990: 2070 6179 6c6f 6164 203d 207b 276e 616d   payload = {'nam
+000129a0: 6527 3a20 6e61 6d65 7d0a 2020 2020 7265  e': name}.    re
+000129b0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+000129c0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+000129d0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+000129e0: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+000129f0: 7374 272c 2076 6572 6966 793d 7665 7269  st', verify=veri
+00012a00: 6679 290a 0a0a 6465 6620 7365 745f 7374  fy)...def set_st
+00012a10: 6963 6b65 725f 656d 6f6a 695f 6c69 7374  icker_emoji_list
+00012a20: 2874 6f6b 656e 2c20 7374 6963 6b65 722c  (token, sticker,
+00012a30: 2065 6d6f 6a69 5f6c 6973 742c 2076 6572   emoji_list, ver
+00012a40: 6966 793d 5472 7565 293a 0a20 2020 206d  ify=True):.    m
+00012a50: 6574 686f 645f 7572 6c20 3d20 2773 6574  ethod_url = 'set
+00012a60: 5374 6963 6b65 7245 6d6f 6a69 4c69 7374  StickerEmojiList
+00012a70: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+00012a80: 7b27 7374 6963 6b65 7227 3a20 7374 6963  {'sticker': stic
+00012a90: 6b65 722c 2027 656d 6f6a 695f 6c69 7374  ker, 'emoji_list
+00012aa0: 273a 206a 736f 6e2e 6475 6d70 7328 656d  ': json.dumps(em
+00012ab0: 6f6a 695f 6c69 7374 297d 0a20 2020 2072  oji_list)}.    r
+00012ac0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00012ad0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00012ae0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012af0: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+00012b00: 6f73 7427 2c20 7665 7269 6679 3d76 6572  ost', verify=ver
+00012b10: 6966 7929 0a0a 0a64 6566 2063 7265 6174  ify)...def creat
+00012b20: 655f 6e65 775f 7374 6963 6b65 725f 7365  e_new_sticker_se
+00012b30: 7428 0a20 2020 2020 2020 2074 6f6b 656e  t(.        token
+00012b40: 2c20 7573 6572 5f69 642c 206e 616d 652c  , user_id, name,
+00012b50: 2074 6974 6c65 2c20 7374 6963 6b65 7273   title, stickers
+00012b60: 2c20 7374 6963 6b65 725f 7479 7065 3d4e  , sticker_type=N
+00012b70: 6f6e 652c 206e 6565 6473 5f72 6570 6169  one, needs_repai
+00012b80: 6e74 696e 673d 4e6f 6e65 2c20 7665 7269  nting=None, veri
+00012b90: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+00012ba0: 7468 6f64 5f75 726c 203d 2027 6372 6561  thod_url = 'crea
+00012bb0: 7465 4e65 7753 7469 636b 6572 5365 7427  teNewStickerSet'
+00012bc0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00012bd0: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
+00012be0: 6964 2c20 276e 616d 6527 3a20 6e61 6d65  id, 'name': name
+00012bf0: 2c20 2774 6974 6c65 273a 2074 6974 6c65  , 'title': title
+00012c00: 7d0a 2020 2020 6966 2073 7469 636b 6572  }.    if sticker
+00012c10: 5f74 7970 653a 0a20 2020 2020 2020 2070  _type:.        p
+00012c20: 6179 6c6f 6164 5b27 7374 6963 6b65 725f  ayload['sticker_
+00012c30: 7479 7065 275d 203d 2073 7469 636b 6572  type'] = sticker
+00012c40: 5f74 7970 650a 2020 2020 6966 206e 6565  _type.    if nee
+00012c50: 6473 5f72 6570 6169 6e74 696e 6720 6973  ds_repainting is
+00012c60: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00012c70: 2020 2070 6179 6c6f 6164 5b27 6e65 6564     payload['need
+00012c80: 735f 7265 7061 696e 7469 6e67 275d 203d  s_repainting'] =
+00012c90: 206e 6565 6473 5f72 6570 6169 6e74 696e   needs_repaintin
+00012ca0: 670a 0a20 2020 2066 696c 6573 203d 207b  g..    files = {
+00012cb0: 7d0a 2020 2020 6c73 7420 3d20 5b5d 0a0a  }.    lst = []..
+00012cc0: 2020 2020 666f 7220 7374 6963 6b65 7220      for sticker 
+00012cd0: 696e 2073 7469 636b 6572 733a 0a20 2020  in stickers:.   
+00012ce0: 2020 2020 206a 736f 6e5f 6469 6374 2c20       json_dict, 
+00012cf0: 6669 6c65 203d 2073 7469 636b 6572 2e63  file = sticker.c
+00012d00: 6f6e 7665 7274 5f69 6e70 7574 5f73 7469  onvert_input_sti
+00012d10: 636b 6572 2829 0a20 2020 2020 2020 206a  cker().        j
+00012d20: 736f 6e5f 6469 6374 203d 2073 7469 636b  son_dict = stick
+00012d30: 6572 2e74 6f5f 6469 6374 2829 0a0a 2020  er.to_dict()..  
+00012d40: 2020 2020 2020 6966 2066 696c 653a 0a20        if file:. 
+00012d50: 2020 2020 2020 2020 2020 206c 6973 745f             list_
+00012d60: 6b65 7973 203d 206c 6973 7428 6669 6c65  keys = list(file
+00012d70: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
+00012d80: 2020 2020 2066 696c 6573 5b6c 6973 745f       files[list_
+00012d90: 6b65 7973 5b30 5d5d 203d 2066 696c 655b  keys[0]] = file[
+00012da0: 6c69 7374 5f6b 6579 735b 305d 5d0a 2020  list_keys[0]].  
+00012db0: 2020 2020 2020 6c73 742e 6170 7065 6e64        lst.append
+00012dc0: 286a 736f 6e5f 6469 6374 290a 0a20 2020  (json_dict)..   
+00012dd0: 2070 6179 6c6f 6164 5b27 7374 6963 6b65   payload['sticke
+00012de0: 7273 275d 203d 206a 736f 6e2e 6475 6d70  rs'] = json.dump
+00012df0: 7328 6c73 7429 0a0a 2020 2020 7265 7475  s(lst)..    retu
+00012e00: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00012e10: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00012e20: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00012e30: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
+00012e40: 206d 6574 686f 643d 2770 6f73 7427 2c20   method='post', 
+00012e50: 7665 7269 6679 3d76 6572 6966 7929 0a0a  verify=verify)..
+00012e60: 0a64 6566 2061 6464 5f73 7469 636b 6572  .def add_sticker
+00012e70: 5f74 6f5f 7365 7428 746f 6b65 6e2c 2075  _to_set(token, u
+00012e80: 7365 725f 6964 2c20 6e61 6d65 2c20 7374  ser_id, name, st
+00012e90: 6963 6b65 722c 2076 6572 6966 793d 5472  icker, verify=Tr
+00012ea0: 7565 293a 0a20 2020 206d 6574 686f 645f  ue):.    method_
+00012eb0: 7572 6c20 3d20 2761 6464 5374 6963 6b65  url = 'addSticke
+00012ec0: 7254 6f53 6574 270a 2020 2020 6a73 6f6e  rToSet'.    json
+00012ed0: 5f64 6963 742c 2066 696c 6573 203d 2073  _dict, files = s
+00012ee0: 7469 636b 6572 2e63 6f6e 7665 7274 5f69  ticker.convert_i
+00012ef0: 6e70 7574 5f73 7469 636b 6572 2829 0a20  nput_sticker(). 
+00012f00: 2020 2070 6179 6c6f 6164 203d 207b 2775     payload = {'u
+00012f10: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
+00012f20: 2c20 276e 616d 6527 3a20 6e61 6d65 2c20  , 'name': name, 
+00012f30: 2773 7469 636b 6572 273a 206a 736f 6e5f  'sticker': json_
+00012f40: 6469 6374 7d0a 2020 2020 7265 7475 726e  dict}.    return
+00012f50: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00012f60: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00012f70: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00012f80: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
+00012f90: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+00012fa0: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+00012fb0: 6566 2073 6574 5f73 7469 636b 6572 5f70  ef set_sticker_p
+00012fc0: 6f73 6974 696f 6e5f 696e 5f73 6574 2874  osition_in_set(t
+00012fd0: 6f6b 656e 2c20 7374 6963 6b65 722c 2070  oken, sticker, p
+00012fe0: 6f73 6974 696f 6e2c 2076 6572 6966 793d  osition, verify=
+00012ff0: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+00013000: 645f 7572 6c20 3d20 2773 6574 5374 6963  d_url = 'setStic
+00013010: 6b65 7250 6f73 6974 696f 6e49 6e53 6574  kerPositionInSet
+00013020: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+00013030: 7b27 7374 6963 6b65 7227 3a20 7374 6963  {'sticker': stic
+00013040: 6b65 722c 2027 706f 7369 7469 6f6e 273a  ker, 'position':
+00013050: 2070 6f73 6974 696f 6e7d 0a20 2020 2072   position}.    r
+00013060: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00013070: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00013080: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00013090: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+000130a0: 6f73 7427 2c20 7665 7269 6679 3d76 6572  ost', verify=ver
+000130b0: 6966 7929 0a0a 0a64 6566 2064 656c 6574  ify)...def delet
+000130c0: 655f 7374 6963 6b65 725f 6672 6f6d 5f73  e_sticker_from_s
+000130d0: 6574 2874 6f6b 656e 2c20 7374 6963 6b65  et(token, sticke
+000130e0: 722c 2076 6572 6966 793d 5472 7565 293a  r, verify=True):
+000130f0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00013100: 3d20 2764 656c 6574 6553 7469 636b 6572  = 'deleteSticker
+00013110: 4672 6f6d 5365 7427 0a20 2020 2070 6179  FromSet'.    pay
+00013120: 6c6f 6164 203d 207b 2773 7469 636b 6572  load = {'sticker
+00013130: 273a 2073 7469 636b 6572 7d0a 2020 2020  ': sticker}.    
+00013140: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00013150: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00013160: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00013170: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+00013180: 706f 7374 272c 2076 6572 6966 793d 7665  post', verify=ve
+00013190: 7269 6679 290a 0a0a 6465 6620 616e 7377  rify)...def answ
+000131a0: 6572 5f77 6562 5f61 7070 5f71 7565 7279  er_web_app_query
+000131b0: 2874 6f6b 656e 2c20 7765 625f 6170 705f  (token, web_app_
+000131c0: 7175 6572 795f 6964 2c20 7265 7375 6c74  query_id, result
+000131d0: 3a20 7479 7065 732e 496e 6c69 6e65 5175  : types.InlineQu
+000131e0: 6572 7952 6573 756c 7442 6173 652c 2076  eryResultBase, v
+000131f0: 6572 6966 793d 5472 7565 293a 0a20 2020  erify=True):.   
+00013200: 206d 6574 686f 645f 7572 6c20 3d20 2761   method_url = 'a
+00013210: 6e73 7765 7257 6562 4170 7051 7565 7279  nswerWebAppQuery
+00013220: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
+00013230: 7b27 7765 625f 6170 705f 7175 6572 795f  {'web_app_query_
+00013240: 6964 273a 2077 6562 5f61 7070 5f71 7565  id': web_app_que
+00013250: 7279 5f69 642c 2027 7265 7375 6c74 273a  ry_id, 'result':
+00013260: 2072 6573 756c 742e 746f 5f6a 736f 6e28   result.to_json(
+00013270: 297d 0a20 2020 2072 6574 7572 6e20 5f6d  )}.    return _m
+00013280: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00013290: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000132a0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+000132b0: 6574 686f 643d 2770 6f73 7427 2c20 7665  ethod='post', ve
+000132c0: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+000132d0: 6566 2063 7265 6174 655f 696e 766f 6963  ef create_invoic
+000132e0: 655f 6c69 6e6b 2874 6f6b 656e 2c20 7469  e_link(token, ti
+000132f0: 746c 652c 2064 6573 6372 6970 7469 6f6e  tle, description
+00013300: 2c20 7061 796c 6f61 642c 2070 726f 7669  , payload, provi
+00013310: 6465 725f 746f 6b65 6e2c 0a20 2020 2020  der_token,.     
+00013320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013330: 2020 2063 7572 7265 6e63 792c 2070 7269     currency, pri
+00013340: 6365 732c 206d 6178 5f74 6970 5f61 6d6f  ces, max_tip_amo
+00013350: 756e 743d 4e6f 6e65 2c20 7375 6767 6573  unt=None, sugges
+00013360: 7465 645f 7469 705f 616d 6f75 6e74 733d  ted_tip_amounts=
+00013370: 4e6f 6e65 2c20 7072 6f76 6964 6572 5f64  None, provider_d
+00013380: 6174 613d 4e6f 6e65 2c0a 2020 2020 2020  ata=None,.      
+00013390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000133a0: 2020 7068 6f74 6f5f 7572 6c3d 4e6f 6e65    photo_url=None
+000133b0: 2c20 7068 6f74 6f5f 7369 7a65 3d4e 6f6e  , photo_size=Non
+000133c0: 652c 2070 686f 746f 5f77 6964 7468 3d4e  e, photo_width=N
+000133d0: 6f6e 652c 2070 686f 746f 5f68 6569 6768  one, photo_heigh
+000133e0: 743d 4e6f 6e65 2c20 6e65 6564 5f6e 616d  t=None, need_nam
+000133f0: 653d 4e6f 6e65 2c0a 2020 2020 2020 2020  e=None,.        
+00013400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013410: 6e65 6564 5f70 686f 6e65 5f6e 756d 6265  need_phone_numbe
+00013420: 723d 4e6f 6e65 2c0a 2020 2020 2020 2020  r=None,.        
+00013430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013440: 6e65 6564 5f65 6d61 696c 3d4e 6f6e 652c  need_email=None,
+00013450: 206e 6565 645f 7368 6970 7069 6e67 5f61   need_shipping_a
+00013460: 6464 7265 7373 3d4e 6f6e 652c 2073 656e  ddress=None, sen
+00013470: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
+00013480: 6f5f 7072 6f76 6964 6572 3d4e 6f6e 652c  o_provider=None,
+00013490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000134a0: 2020 2020 2020 2020 2073 656e 645f 656d           send_em
+000134b0: 6169 6c5f 746f 5f70 726f 7669 6465 723d  ail_to_provider=
+000134c0: 4e6f 6e65 2c20 6973 5f66 6c65 7869 626c  None, is_flexibl
+000134d0: 653d 4e6f 6e65 2c20 7665 7269 6679 3d54  e=None, verify=T
+000134e0: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+000134f0: 5f75 726c 203d 2072 2763 7265 6174 6549  _url = r'createI
+00013500: 6e76 6f69 6365 4c69 6e6b 270a 2020 2020  nvoiceLink'.    
+00013510: 7061 796c 6f61 6420 3d20 7b27 7469 746c  payload = {'titl
+00013520: 6527 3a20 7469 746c 652c 2027 6465 7363  e': title, 'desc
+00013530: 7269 7074 696f 6e27 3a20 6465 7363 7269  ription': descri
+00013540: 7074 696f 6e2c 2027 7061 796c 6f61 6427  ption, 'payload'
+00013550: 3a20 7061 796c 6f61 642c 2027 7072 6f76  : payload, 'prov
+00013560: 6964 6572 5f74 6f6b 656e 273a 2070 726f  ider_token': pro
+00013570: 7669 6465 725f 746f 6b65 6e2c 0a20 2020  vider_token,.   
+00013580: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
+00013590: 7265 6e63 7927 3a20 6375 7272 656e 6379  rency': currency
+000135a0: 2c20 2770 7269 6365 7327 3a20 5f63 6f6e  , 'prices': _con
+000135b0: 7665 7274 5f6c 6973 745f 6a73 6f6e 5f73  vert_list_json_s
+000135c0: 6572 6961 6c69 7a61 626c 6528 7072 6963  erializable(pric
+000135d0: 6573 297d 0a20 2020 2069 6620 6d61 785f  es)}.    if max_
+000135e0: 7469 705f 616d 6f75 6e74 3a0a 2020 2020  tip_amount:.    
+000135f0: 2020 2020 7061 796c 6f61 645b 276d 6178      payload['max
+00013600: 5f74 6970 5f61 6d6f 756e 7427 5d20 3d20  _tip_amount'] = 
+00013610: 6d61 785f 7469 705f 616d 6f75 6e74 0a20  max_tip_amount. 
+00013620: 2020 2069 6620 7375 6767 6573 7465 645f     if suggested_
+00013630: 7469 705f 616d 6f75 6e74 733a 0a20 2020  tip_amounts:.   
+00013640: 2020 2020 2070 6179 6c6f 6164 5b27 7375       payload['su
+00013650: 6767 6573 7465 645f 7469 705f 616d 6f75  ggested_tip_amou
+00013660: 6e74 7327 5d20 3d20 6a73 6f6e 2e64 756d  nts'] = json.dum
+00013670: 7073 2873 7567 6765 7374 6564 5f74 6970  ps(suggested_tip
+00013680: 5f61 6d6f 756e 7473 290a 2020 2020 6966  _amounts).    if
+00013690: 2070 726f 7669 6465 725f 6461 7461 3a0a   provider_data:.
 000136a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000136b0: 2772 6570 6c79 5f70 6172 616d 6574 6572  'reply_parameter
-000136c0: 7327 5d20 3d20 7265 706c 795f 7061 7261  s'] = reply_para
-000136d0: 6d65 7465 7273 2e74 6f5f 6a73 6f6e 2829  meters.to_json()
-000136e0: 0a20 2020 2069 6620 6275 7369 6e65 7373  .    if business
-000136f0: 5f63 6f6e 6e65 6374 696f 6e5f 6964 2069  _connection_id i
-00013700: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00013710: 2020 2020 7061 796c 6f61 645b 2762 7573      payload['bus
-00013720: 696e 6573 735f 636f 6e6e 6563 7469 6f6e  iness_connection
-00013730: 5f69 6427 5d20 3d20 6275 7369 6e65 7373  _id'] = business
-00013740: 5f63 6f6e 6e65 6374 696f 6e5f 6964 0a20  _connection_id. 
-00013750: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00013760: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00013770: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00013780: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
-00013790: 2063 7265 6174 655f 666f 7275 6d5f 746f   create_forum_to
-000137a0: 7069 6328 746f 6b65 6e2c 2063 6861 745f  pic(token, chat_
-000137b0: 6964 2c20 6e61 6d65 2c20 6963 6f6e 5f63  id, name, icon_c
-000137c0: 6f6c 6f72 3d4e 6f6e 652c 2069 636f 6e5f  olor=None, icon_
-000137d0: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 643d  custom_emoji_id=
-000137e0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-000137f0: 645f 7572 6c20 3d20 7227 6372 6561 7465  d_url = r'create
-00013800: 466f 7275 6d54 6f70 6963 270a 2020 2020  ForumTopic'.    
-00013810: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-00013820: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
-00013830: 6e61 6d65 273a 206e 616d 657d 0a20 2020  name': name}.   
-00013840: 2069 6620 6963 6f6e 5f63 6f6c 6f72 3a0a   if icon_color:.
-00013850: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00013860: 2769 636f 6e5f 636f 6c6f 7227 5d20 3d20  'icon_color'] = 
-00013870: 6963 6f6e 5f63 6f6c 6f72 0a20 2020 2069  icon_color.    i
-00013880: 6620 6963 6f6e 5f63 7573 746f 6d5f 656d  f icon_custom_em
-00013890: 6f6a 695f 6964 3a0a 2020 2020 2020 2020  oji_id:.        
-000138a0: 7061 796c 6f61 645b 2769 636f 6e5f 6375  payload['icon_cu
-000138b0: 7374 6f6d 5f65 6d6f 6a69 5f69 6427 5d20  stom_emoji_id'] 
-000138c0: 3d20 6963 6f6e 5f63 7573 746f 6d5f 656d  = icon_custom_em
-000138d0: 6f6a 695f 6964 0a20 2020 2072 6574 7572  oji_id.    retur
-000138e0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-000138f0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00013900: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00013910: 6429 0a0a 0a64 6566 2065 6469 745f 666f  d)...def edit_fo
-00013920: 7275 6d5f 746f 7069 6328 746f 6b65 6e2c  rum_topic(token,
-00013930: 2063 6861 745f 6964 2c20 6d65 7373 6167   chat_id, messag
-00013940: 655f 7468 7265 6164 5f69 642c 206e 616d  e_thread_id, nam
-00013950: 653d 4e6f 6e65 2c20 6963 6f6e 5f63 7573  e=None, icon_cus
-00013960: 746f 6d5f 656d 6f6a 695f 6964 3d4e 6f6e  tom_emoji_id=Non
-00013970: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00013980: 726c 203d 2072 2765 6469 7446 6f72 756d  rl = r'editForum
-00013990: 546f 7069 6327 0a20 2020 2070 6179 6c6f  Topic'.    paylo
-000139a0: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-000139b0: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
-000139c0: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
-000139d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000139e0: 7d0a 2020 2020 6966 206e 616d 6520 6973  }.    if name is
-000139f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00013a00: 2020 2070 6179 6c6f 6164 5b27 6e61 6d65     payload['name
-00013a10: 275d 203d 206e 616d 650a 2020 2020 6966  '] = name.    if
-00013a20: 2069 636f 6e5f 6375 7374 6f6d 5f65 6d6f   icon_custom_emo
-00013a30: 6a69 5f69 6420 6973 206e 6f74 204e 6f6e  ji_id is not Non
-00013a40: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00013a50: 6164 5b27 6963 6f6e 5f63 7573 746f 6d5f  ad['icon_custom_
-00013a60: 656d 6f6a 695f 6964 275d 203d 2069 636f  emoji_id'] = ico
-00013a70: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
-00013a80: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
-00013a90: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00013aa0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00013ab0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00013ac0: 6465 6620 636c 6f73 655f 666f 7275 6d5f  def close_forum_
-00013ad0: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
-00013ae0: 745f 6964 2c20 6d65 7373 6167 655f 7468  t_id, message_th
-00013af0: 7265 6164 5f69 6429 3a0a 2020 2020 6d65  read_id):.    me
-00013b00: 7468 6f64 5f75 726c 203d 2072 2763 6c6f  thod_url = r'clo
-00013b10: 7365 466f 7275 6d54 6f70 6963 270a 2020  seForumTopic'.  
-00013b20: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-00013b30: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-00013b40: 2027 6d65 7373 6167 655f 7468 7265 6164   'message_thread
-00013b50: 5f69 6427 3a20 6d65 7373 6167 655f 7468  _id': message_th
-00013b60: 7265 6164 5f69 647d 0a20 2020 2072 6574  read_id}.    ret
-00013b70: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00013b80: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00013b90: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00013ba0: 6f61 6429 0a0a 0a64 6566 2072 656f 7065  oad)...def reope
-00013bb0: 6e5f 666f 7275 6d5f 746f 7069 6328 746f  n_forum_topic(to
-00013bc0: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
-00013bd0: 7373 6167 655f 7468 7265 6164 5f69 6429  ssage_thread_id)
-00013be0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00013bf0: 203d 2072 2772 656f 7065 6e46 6f72 756d   = r'reopenForum
-00013c00: 546f 7069 6327 0a20 2020 2070 6179 6c6f  Topic'.    paylo
-00013c10: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00013c20: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
-00013c30: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
-00013c40: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00013c50: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-00013c60: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00013c70: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00013c80: 7261 6d73 3d70 6179 6c6f 6164 290a 0a0a  rams=payload)...
-00013c90: 6465 6620 6465 6c65 7465 5f66 6f72 756d  def delete_forum
-00013ca0: 5f74 6f70 6963 2874 6f6b 656e 2c20 6368  _topic(token, ch
-00013cb0: 6174 5f69 642c 206d 6573 7361 6765 5f74  at_id, message_t
-00013cc0: 6872 6561 645f 6964 293a 0a20 2020 206d  hread_id):.    m
-00013cd0: 6574 686f 645f 7572 6c20 3d20 7227 6465  ethod_url = r'de
-00013ce0: 6c65 7465 466f 7275 6d54 6f70 6963 270a  leteForumTopic'.
-00013cf0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-00013d00: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-00013d10: 642c 2027 6d65 7373 6167 655f 7468 7265  d, 'message_thre
-00013d20: 6164 5f69 6427 3a20 6d65 7373 6167 655f  ad_id': message_
-00013d30: 7468 7265 6164 5f69 647d 0a20 2020 2072  thread_id}.    r
-00013d40: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00013d50: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00013d60: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00013d70: 796c 6f61 6429 0a0a 0a64 6566 2075 6e70  yload)...def unp
-00013d80: 696e 5f61 6c6c 5f66 6f72 756d 5f74 6f70  in_all_forum_top
-00013d90: 6963 5f6d 6573 7361 6765 7328 746f 6b65  ic_messages(toke
-00013da0: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
-00013db0: 6167 655f 7468 7265 6164 5f69 6429 3a0a  age_thread_id):.
-00013dc0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00013dd0: 2072 2775 6e70 696e 416c 6c46 6f72 756d   r'unpinAllForum
-00013de0: 546f 7069 634d 6573 7361 6765 7327 0a20  TopicMessages'. 
-00013df0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-00013e00: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-00013e10: 2c20 276d 6573 7361 6765 5f74 6872 6561  , 'message_threa
-00013e20: 645f 6964 273a 206d 6573 7361 6765 5f74  d_id': message_t
-00013e30: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
-00013e40: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00013e50: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00013e60: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00013e70: 6c6f 6164 290a 0a0a 6465 6620 6765 745f  load)...def get_
-00013e80: 666f 7275 6d5f 746f 7069 635f 6963 6f6e  forum_topic_icon
-00013e90: 5f73 7469 636b 6572 7328 746f 6b65 6e29  _stickers(token)
-00013ea0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00013eb0: 203d 2072 2767 6574 466f 7275 6d54 6f70   = r'getForumTop
-00013ec0: 6963 4963 6f6e 5374 6963 6b65 7273 270a  icIconStickers'.
-00013ed0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00013ee0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00013ef0: 6d65 7468 6f64 5f75 726c 290a 0a0a 6465  method_url)...de
-00013f00: 6620 7374 6f70 5f70 6f6c 6c28 746f 6b65  f stop_poll(toke
-00013f10: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
-00013f20: 6167 655f 6964 2c20 7265 706c 795f 6d61  age_id, reply_ma
-00013f30: 726b 7570 3d4e 6f6e 6529 3a0a 2020 2020  rkup=None):.    
-00013f40: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-00013f50: 746f 7050 6f6c 6c27 0a20 2020 2070 6179  topPoll'.    pay
-00013f60: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00013f70: 273a 2073 7472 2863 6861 745f 6964 292c  ': str(chat_id),
-00013f80: 2027 6d65 7373 6167 655f 6964 273a 206d   'message_id': m
-00013f90: 6573 7361 6765 5f69 647d 0a20 2020 2069  essage_id}.    i
-00013fa0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-00013fb0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00013fc0: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
-00013fd0: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
-00013fe0: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-00013ff0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00014000: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00014010: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00014020: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
-00014030: 6620 6564 6974 5f67 656e 6572 616c 5f66  f edit_general_f
-00014040: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
-00014050: 2c20 6368 6174 5f69 642c 206e 616d 6529  , chat_id, name)
-00014060: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00014070: 203d 2072 2765 6469 7447 656e 6572 616c   = r'editGeneral
-00014080: 466f 7275 6d54 6f70 6963 270a 2020 2020  ForumTopic'.    
-00014090: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-000140a0: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
-000140b0: 6e61 6d65 273a 206e 616d 657d 0a20 2020  name': name}.   
-000140c0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-000140d0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-000140e0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-000140f0: 7061 796c 6f61 6429 0a0a 0a64 6566 2063  payload)...def c
-00014100: 6c6f 7365 5f67 656e 6572 616c 5f66 6f72  lose_general_for
-00014110: 756d 5f74 6f70 6963 2874 6f6b 656e 2c20  um_topic(token, 
-00014120: 6368 6174 5f69 6429 3a0a 2020 2020 6d65  chat_id):.    me
-00014130: 7468 6f64 5f75 726c 203d 2072 2763 6c6f  thod_url = r'clo
-00014140: 7365 4765 6e65 7261 6c46 6f72 756d 546f  seGeneralForumTo
-00014150: 7069 6327 0a20 2020 2070 6179 6c6f 6164  pic'.    payload
-00014160: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-00014170: 6861 745f 6964 7d0a 2020 2020 7265 7475  hat_id}.    retu
-00014180: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00014190: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000141a0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-000141b0: 6164 290a 0a0a 6465 6620 7265 6f70 656e  ad)...def reopen
-000141c0: 5f67 656e 6572 616c 5f66 6f72 756d 5f74  _general_forum_t
-000141d0: 6f70 6963 2874 6f6b 656e 2c20 6368 6174  opic(token, chat
-000141e0: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-000141f0: 5f75 726c 203d 2072 2772 656f 7065 6e47  _url = r'reopenG
-00014200: 656e 6572 616c 466f 7275 6d54 6f70 6963  eneralForumTopic
-00014210: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00014220: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-00014230: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
-00014240: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00014250: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00014260: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00014270: 0a0a 0a64 6566 2068 6964 655f 6765 6e65  ...def hide_gene
-00014280: 7261 6c5f 666f 7275 6d5f 746f 7069 6328  ral_forum_topic(
-00014290: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
-000142a0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-000142b0: 3d20 7227 6869 6465 4765 6e65 7261 6c46  = r'hideGeneralF
-000142c0: 6f72 756d 546f 7069 6327 0a20 2020 2070  orumTopic'.    p
-000142d0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-000142e0: 6964 273a 2063 6861 745f 6964 7d0a 2020  id': chat_id}.  
-000142f0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00014300: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00014310: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00014320: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00014330: 756e 6869 6465 5f67 656e 6572 616c 5f66  unhide_general_f
-00014340: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
-00014350: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
-00014360: 6d65 7468 6f64 5f75 726c 203d 2072 2775  method_url = r'u
-00014370: 6e68 6964 6547 656e 6572 616c 466f 7275  nhideGeneralForu
-00014380: 6d54 6f70 6963 270a 2020 2020 7061 796c  mTopic'.    payl
-00014390: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-000143a0: 3a20 6368 6174 5f69 647d 0a20 2020 2072  : chat_id}.    r
-000143b0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-000143c0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-000143d0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-000143e0: 796c 6f61 6429 0a0a 0a64 6566 2064 656c  yload)...def del
-000143f0: 6574 655f 6d65 7373 6167 6573 2874 6f6b  ete_messages(tok
-00014400: 656e 2c20 6368 6174 5f69 642c 206d 6573  en, chat_id, mes
-00014410: 7361 6765 5f69 6473 293a 0a20 2020 206d  sage_ids):.    m
-00014420: 6574 686f 645f 7572 6c20 3d20 2764 656c  ethod_url = 'del
-00014430: 6574 654d 6573 7361 6765 7327 0a20 2020  eteMessages'.   
-00014440: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
-00014450: 2020 2020 2027 6368 6174 5f69 6427 3a20       'chat_id': 
-00014460: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
-00014470: 2027 6d65 7373 6167 655f 6964 7327 3a20   'message_ids': 
-00014480: 6a73 6f6e 2e64 756d 7073 286d 6573 7361  json.dumps(messa
-00014490: 6765 5f69 6473 290a 2020 2020 7d0a 2020  ge_ids).    }.  
-000144a0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-000144b0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-000144c0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-000144d0: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-000144e0: 666f 7277 6172 645f 6d65 7373 6167 6573  forward_messages
-000144f0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-00014500: 2066 726f 6d5f 6368 6174 5f69 642c 206d   from_chat_id, m
-00014510: 6573 7361 6765 5f69 6473 2c20 6469 7361  essage_ids, disa
-00014520: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00014530: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
-00014540: 2020 2020 2020 2020 2020 2020 6d65 7373              mess
-00014550: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-00014560: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
-00014570: 656e 743d 4e6f 6e65 293a 0a20 2020 206d  ent=None):.    m
-00014580: 6574 686f 645f 7572 6c20 3d20 2766 6f72  ethod_url = 'for
-00014590: 7761 7264 4d65 7373 6167 6573 270a 2020  wardMessages'.  
-000145a0: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
-000145b0: 2020 2020 2020 2763 6861 745f 6964 273a        'chat_id':
-000145c0: 2063 6861 745f 6964 2c0a 2020 2020 2020   chat_id,.      
-000145d0: 2020 2766 726f 6d5f 6368 6174 5f69 6427    'from_chat_id'
-000145e0: 3a20 6672 6f6d 5f63 6861 745f 6964 2c0a  : from_chat_id,.
-000145f0: 2020 2020 2020 2020 276d 6573 7361 6765          'message
-00014600: 5f69 6473 273a 206a 736f 6e2e 6475 6d70  _ids': json.dump
-00014610: 7328 6d65 7373 6167 655f 6964 7329 2c0a  s(message_ids),.
-00014620: 2020 2020 7d0a 2020 2020 6966 2064 6973      }.    if dis
-00014630: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00014640: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00014650: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00014660: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00014670: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00014680: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00014690: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-000146a0: 6561 645f 6964 2069 7320 6e6f 7420 4e6f  ead_id is not No
-000146b0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000146c0: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
-000146d0: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
-000146e0: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
-000146f0: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
-00014700: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
-00014710: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00014720: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
-00014730: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
-00014740: 6e74 656e 740a 2020 2020 7265 7475 726e  ntent.    return
-00014750: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00014760: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00014770: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00014780: 290a 0a0a 6465 6620 636f 7079 5f6d 6573  )...def copy_mes
-00014790: 7361 6765 7328 746f 6b65 6e2c 2063 6861  sages(token, cha
-000147a0: 745f 6964 2c20 6672 6f6d 5f63 6861 745f  t_id, from_chat_
-000147b0: 6964 2c20 6d65 7373 6167 655f 6964 732c  id, message_ids,
-000147c0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-000147d0: 6174 696f 6e3d 4e6f 6e65 2c0a 2020 2020  ation=None,.    
-000147e0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
-000147f0: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
-00014800: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
-00014810: 6e74 656e 743d 4e6f 6e65 2c20 7265 6d6f  ntent=None, remo
-00014820: 7665 5f63 6170 7469 6f6e 3d4e 6f6e 6529  ve_caption=None)
-00014830: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00014840: 203d 2027 636f 7079 4d65 7373 6167 6573   = 'copyMessages
-00014850: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00014860: 7b0a 2020 2020 2020 2020 2763 6861 745f  {.        'chat_
-00014870: 6964 273a 2063 6861 745f 6964 2c0a 2020  id': chat_id,.  
-00014880: 2020 2020 2020 2766 726f 6d5f 6368 6174        'from_chat
-00014890: 5f69 6427 3a20 6672 6f6d 5f63 6861 745f  _id': from_chat_
-000148a0: 6964 2c0a 2020 2020 2020 2020 276d 6573  id,.        'mes
-000148b0: 7361 6765 5f69 6473 273a 206a 736f 6e2e  sage_ids': json.
-000148c0: 6475 6d70 7328 6d65 7373 6167 655f 6964  dumps(message_id
-000148d0: 7329 2c0a 2020 2020 7d0a 2020 2020 6966  s),.    }.    if
-000148e0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-000148f0: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00014900: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00014910: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
-00014920: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
-00014930: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00014940: 6e0a 2020 2020 6966 206d 6573 7361 6765  n.    if message
-00014950: 5f74 6872 6561 645f 6964 2069 7320 6e6f  _thread_id is no
-00014960: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00014970: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
-00014980: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
-00014990: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000149a0: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
-000149b0: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
-000149c0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-000149d0: 6c6f 6164 5b27 7072 6f74 6563 745f 636f  load['protect_co
-000149e0: 6e74 656e 7427 5d20 3d20 7072 6f74 6563  ntent'] = protec
-000149f0: 745f 636f 6e74 656e 740a 2020 2020 6966  t_content.    if
-00014a00: 2072 656d 6f76 655f 6361 7074 696f 6e20   remove_caption 
-00014a10: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00014a20: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
-00014a30: 6d6f 7665 5f63 6170 7469 6f6e 275d 203d  move_caption'] =
-00014a40: 2072 656d 6f76 655f 6361 7074 696f 6e0a   remove_caption.
-00014a50: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00014a60: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00014a70: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00014a80: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
-00014a90: 6620 5f63 6f6e 7665 7274 5f6c 6973 745f  f _convert_list_
-00014aa0: 6a73 6f6e 5f73 6572 6961 6c69 7a61 626c  json_serializabl
-00014ab0: 6528 7265 7375 6c74 7329 3a0a 2020 2020  e(results):.    
-00014ac0: 7265 7420 3d20 2727 0a20 2020 2066 6f72  ret = ''.    for
-00014ad0: 2072 2069 6e20 7265 7375 6c74 733a 0a20   r in results:. 
-00014ae0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00014af0: 616e 6365 2872 2c20 7479 7065 732e 4a73  ance(r, types.Js
-00014b00: 6f6e 5365 7269 616c 697a 6162 6c65 293a  onSerializable):
-00014b10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00014b20: 203d 2072 6574 202b 2072 2e74 6f5f 6a73   = ret + r.to_js
-00014b30: 6f6e 2829 202b 2027 2c27 0a20 2020 2069  on() + ','.    i
-00014b40: 6620 6c65 6e28 7265 7429 203e 2030 3a0a  f len(ret) > 0:.
-00014b50: 2020 2020 2020 2020 7265 7420 3d20 7265          ret = re
-00014b60: 745b 3a2d 315d 0a20 2020 2072 6574 7572  t[:-1].    retur
-00014b70: 6e20 275b 2720 2b20 7265 7420 2b20 275d  n '[' + ret + ']
-00014b80: 270a 0a0a 6465 6620 5f63 6f6e 7665 7274  '...def _convert
-00014b90: 5f6d 6172 6b75 7028 6d61 726b 7570 293a  _markup(markup):
-00014ba0: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
-00014bb0: 6365 286d 6172 6b75 702c 2074 7970 6573  ce(markup, types
-00014bc0: 2e4a 736f 6e53 6572 6961 6c69 7a61 626c  .JsonSerializabl
-00014bd0: 6529 3a0a 2020 2020 2020 2020 7265 7475  e):.        retu
-00014be0: 726e 206d 6172 6b75 702e 746f 5f6a 736f  rn markup.to_jso
-00014bf0: 6e28 290a 2020 2020 7265 7475 726e 206d  n().    return m
-00014c00: 6172 6b75 700a 0a0a 6465 6620 5f63 6f6e  arkup...def _con
-00014c10: 7665 7274 5f65 6e74 6974 6573 2865 6e74  vert_entites(ent
-00014c20: 6974 6573 293a 0a20 2020 2069 6620 656e  ites):.    if en
-00014c30: 7469 7465 7320 6973 204e 6f6e 653a 0a20  tites is None:. 
-00014c40: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00014c50: 6e65 0a20 2020 2065 6c69 6620 6c65 6e28  ne.    elif len(
-00014c60: 656e 7469 7465 7329 203d 3d20 303a 0a20  entites) == 0:. 
-00014c70: 2020 2020 2020 2072 6574 7572 6e20 5b5d         return []
-00014c80: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
-00014c90: 616e 6365 2865 6e74 6974 6573 5b30 5d2c  ance(entites[0],
-00014ca0: 2074 7970 6573 2e4a 736f 6e53 6572 6961   types.JsonSeria
-00014cb0: 6c69 7a61 626c 6529 3a0a 2020 2020 2020  lizable):.      
-00014cc0: 2020 7265 7475 726e 205b 656e 7469 7479    return [entity
-00014cd0: 2e74 6f5f 6a73 6f6e 2829 2066 6f72 2065  .to_json() for e
-00014ce0: 6e74 6974 7920 696e 2065 6e74 6974 6573  ntity in entites
-00014cf0: 5d0a 2020 2020 656c 7365 3a0a 2020 2020  ].    else:.    
-00014d00: 2020 2020 7265 7475 726e 2065 6e74 6974      return entit
-00014d10: 6573 0a0a 0a64 6566 205f 636f 6e76 6572  es...def _conver
-00014d20: 745f 706f 6c6c 5f6f 7074 696f 6e73 2870  t_poll_options(p
-00014d30: 6f6c 6c5f 6f70 7469 6f6e 7329 3a0a 2020  oll_options):.  
-00014d40: 2020 6966 2070 6f6c 6c5f 6f70 7469 6f6e    if poll_option
-00014d50: 7320 6973 204e 6f6e 653a 0a20 2020 2020  s is None:.     
-00014d60: 2020 2072 6574 7572 6e20 4e6f 6e65 0a20     return None. 
-00014d70: 2020 2065 6c69 6620 6c65 6e28 706f 6c6c     elif len(poll
-00014d80: 5f6f 7074 696f 6e73 2920 3d3d 2030 3a0a  _options) == 0:.
-00014d90: 2020 2020 2020 2020 7265 7475 726e 205b          return [
-00014da0: 5d0a 2020 2020 656c 6966 2069 7369 6e73  ].    elif isins
-00014db0: 7461 6e63 6528 706f 6c6c 5f6f 7074 696f  tance(poll_optio
-00014dc0: 6e73 5b30 5d2c 2073 7472 293a 0a20 2020  ns[0], str):.   
-00014dd0: 2020 2020 2023 2043 6f6d 7061 7469 6269       # Compatibi
-00014de0: 6c69 7479 206d 6f64 6520 7769 7468 2070  lity mode with p
-00014df0: 7265 7669 6f75 7320 6275 6720 7768 656e  revious bug when
-00014e00: 206f 6e6c 7920 6c69 7374 206f 6620 7374   only list of st
-00014e10: 7269 6e67 2077 6173 2061 6363 6570 7465  ring was accepte
-00014e20: 6420 6173 2070 6f6c 6c5f 6f70 7469 6f6e  d as poll_option
-00014e30: 730a 2020 2020 2020 2020 7265 7475 726e  s.        return
-00014e40: 2070 6f6c 6c5f 6f70 7469 6f6e 730a 2020   poll_options.  
-00014e50: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00014e60: 6528 706f 6c6c 5f6f 7074 696f 6e73 5b30  e(poll_options[0
-00014e70: 5d2c 2074 7970 6573 2e50 6f6c 6c4f 7074  ], types.PollOpt
-00014e80: 696f 6e29 3a0a 2020 2020 2020 2020 7265  ion):.        re
-00014e90: 7475 726e 205b 6f70 7469 6f6e 2e74 6578  turn [option.tex
-00014ea0: 7420 666f 7220 6f70 7469 6f6e 2069 6e20  t for option in 
-00014eb0: 706f 6c6c 5f6f 7074 696f 6e73 5d0a 2020  poll_options].  
-00014ec0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00014ed0: 7265 7475 726e 2070 6f6c 6c5f 6f70 7469  return poll_opti
-00014ee0: 6f6e 730a 0a0a 6465 6620 636f 6e76 6572  ons...def conver
-00014ef0: 745f 696e 7075 745f 6d65 6469 6128 6d65  t_input_media(me
-00014f00: 6469 6129 3a0a 2020 2020 6966 2069 7369  dia):.    if isi
-00014f10: 6e73 7461 6e63 6528 6d65 6469 612c 2074  nstance(media, t
-00014f20: 7970 6573 2e49 6e70 7574 4d65 6469 6129  ypes.InputMedia)
-00014f30: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00014f40: 206d 6564 6961 2e63 6f6e 7665 7274 5f69   media.convert_i
-00014f50: 6e70 7574 5f6d 6564 6961 2829 0a20 2020  nput_media().   
-00014f60: 2072 6574 7572 6e20 4e6f 6e65 2c20 4e6f   return None, No
-00014f70: 6e65 0a0a 0a64 6566 2063 6f6e 7665 7274  ne...def convert
-00014f80: 5f69 6e70 7574 5f6d 6564 6961 5f61 7272  _input_media_arr
-00014f90: 6179 2861 7272 6179 293a 0a20 2020 206d  ay(array):.    m
-00014fa0: 6564 6961 203d 205b 5d0a 2020 2020 6669  edia = [].    fi
-00014fb0: 6c65 7320 3d20 7b7d 0a20 2020 2066 6f72  les = {}.    for
-00014fc0: 2069 6e70 7574 5f6d 6564 6961 2069 6e20   input_media in 
-00014fd0: 6172 7261 793a 0a20 2020 2020 2020 2069  array:.        i
-00014fe0: 6620 6973 696e 7374 616e 6365 2869 6e70  f isinstance(inp
-00014ff0: 7574 5f6d 6564 6961 2c20 7479 7065 732e  ut_media, types.
-00015000: 496e 7075 744d 6564 6961 293a 0a20 2020  InputMedia):.   
-00015010: 2020 2020 2020 2020 206d 6564 6961 5f64           media_d
-00015020: 6963 7420 3d20 696e 7075 745f 6d65 6469  ict = input_medi
-00015030: 612e 746f 5f64 6963 7428 290a 2020 2020  a.to_dict().    
-00015040: 2020 2020 2020 2020 6966 206d 6564 6961          if media
-00015050: 5f64 6963 745b 276d 6564 6961 275d 2e73  _dict['media'].s
-00015060: 7461 7274 7377 6974 6828 2761 7474 6163  tartswith('attac
-00015070: 683a 2f2f 2729 3a0a 2020 2020 2020 2020  h://'):.        
-00015080: 2020 2020 2020 2020 6b65 7920 3d20 6d65          key = me
-00015090: 6469 615f 6469 6374 5b27 6d65 6469 6127  dia_dict['media'
-000150a0: 5d2e 7265 706c 6163 6528 2761 7474 6163  ].replace('attac
-000150b0: 683a 2f2f 272c 2027 2729 0a20 2020 2020  h://', '').     
-000150c0: 2020 2020 2020 2020 2020 2066 696c 6573             files
-000150d0: 5b6b 6579 5d20 3d20 696e 7075 745f 6d65  [key] = input_me
-000150e0: 6469 612e 6d65 6469 610a 2020 2020 2020  dia.media.      
-000150f0: 2020 2020 2020 6d65 6469 612e 6170 7065        media.appe
-00015100: 6e64 286d 6564 6961 5f64 6963 7429 0a20  nd(media_dict). 
-00015110: 2020 2072 6574 7572 6e20 6a73 6f6e 2e64     return json.d
-00015120: 756d 7073 286d 6564 6961 292c 2066 696c  umps(media), fil
-00015130: 6573 0a0a 0a64 6566 205f 6e6f 5f65 6e63  es...def _no_enc
-00015140: 6f64 6528 6675 6e63 293a 0a20 2020 2064  ode(func):.    d
-00015150: 6566 2077 7261 7070 6572 286b 6579 2c20  ef wrapper(key, 
-00015160: 7661 6c29 3a0a 2020 2020 2020 2020 6966  val):.        if
-00015170: 206b 6579 203d 3d20 2766 696c 656e 616d   key == 'filenam
-00015180: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-00015190: 7265 7475 726e 2075 277b 307d 3d7b 317d  return u'{0}={1}
-000151a0: 272e 666f 726d 6174 286b 6579 2c20 7661  '.format(key, va
-000151b0: 6c29 0a20 2020 2020 2020 2065 6c73 653a  l).        else:
-000151c0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000151d0: 7572 6e20 6675 6e63 286b 6579 2c20 7661  urn func(key, va
-000151e0: 6c29 0a0a 2020 2020 7265 7475 726e 2077  l)..    return w
-000151f0: 7261 7070 6572 0a0a 0a63 6c61 7373 2041  rapper...class A
-00015200: 7069 4578 6365 7074 696f 6e28 4578 6365  piException(Exce
-00015210: 7074 696f 6e29 3a0a 2020 2020 2222 220a  ption):.    """.
-00015220: 2020 2020 5468 6973 2063 6c61 7373 2072      This class r
-00015230: 6570 7265 7365 6e74 7320 6120 6261 7365  epresents a base
-00015240: 2045 7863 6570 7469 6f6e 2074 6872 6f77   Exception throw
-00015250: 6e20 7768 656e 2061 2063 616c 6c20 746f  n when a call to
-00015260: 2074 6865 2054 656c 6567 7261 6d20 4150   the Telegram AP
-00015270: 4920 6661 696c 732e 0a20 2020 2049 6e20  I fails..    In 
-00015280: 6164 6469 7469 6f6e 2074 6f20 616e 2069  addition to an i
-00015290: 6e66 6f72 6d61 7469 7665 206d 6573 7361  nformative messa
-000152a0: 6765 2c20 6974 2068 6173 2061 2060 6675  ge, it has a `fu
-000152b0: 6e63 7469 6f6e 5f6e 616d 6560 2061 6e64  nction_name` and
-000152c0: 2061 2060 7265 7375 6c74 6020 6174 7472   a `result` attr
-000152d0: 6962 7574 652c 2077 6869 6368 2072 6573  ibute, which res
-000152e0: 7065 6374 6976 656c 790a 2020 2020 636f  pectively.    co
-000152f0: 6e74 6169 6e20 7468 6520 6e61 6d65 206f  ntain the name o
-00015300: 6620 7468 6520 6661 696c 6564 2066 756e  f the failed fun
-00015310: 6374 696f 6e20 616e 6420 7468 6520 7265  ction and the re
-00015320: 7475 726e 6564 2072 6573 756c 7420 7468  turned result th
-00015330: 6174 206d 6164 6520 7468 6520 6675 6e63  at made the func
-00015340: 7469 6f6e 2074 6f20 6265 2063 6f6e 7369  tion to be consi
-00015350: 6465 7265 6420 2061 730a 2020 2020 6661  dered  as.    fa
-00015360: 696c 6564 2e0a 2020 2020 2222 220a 0a20  iled..    """.. 
-00015370: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00015380: 7365 6c66 2c20 6d73 672c 2066 756e 6374  self, msg, funct
-00015390: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
-000153a0: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
-000153b0: 2841 7069 4578 6365 7074 696f 6e2c 2073  (ApiException, s
-000153c0: 656c 6629 2e5f 5f69 6e69 745f 5f28 2241  elf).__init__("A
-000153d0: 2072 6571 7565 7374 2074 6f20 7468 6520   request to the 
-000153e0: 5465 6c65 6772 616d 2041 5049 2077 6173  Telegram API was
-000153f0: 2075 6e73 7563 6365 7373 6675 6c2e 207b   unsuccessful. {
-00015400: 307d 222e 666f 726d 6174 286d 7367 2929  0}".format(msg))
-00015410: 0a20 2020 2020 2020 2073 656c 662e 6675  .        self.fu
-00015420: 6e63 7469 6f6e 5f6e 616d 6520 3d20 6675  nction_name = fu
-00015430: 6e63 7469 6f6e 5f6e 616d 650a 2020 2020  nction_name.    
-00015440: 2020 2020 7365 6c66 2e72 6573 756c 7420      self.result 
-00015450: 3d20 7265 7375 6c74 0a0a 0a63 6c61 7373  = result...class
-00015460: 2041 7069 4854 5450 4578 6365 7074 696f   ApiHTTPExceptio
-00015470: 6e28 4170 6945 7863 6570 7469 6f6e 293a  n(ApiException):
-00015480: 0a20 2020 2022 2222 0a20 2020 2054 6869  .    """.    Thi
-00015490: 7320 636c 6173 7320 7265 7072 6573 656e  s class represen
-000154a0: 7473 2061 6e20 4578 6365 7074 696f 6e20  ts an Exception 
-000154b0: 7468 726f 776e 2077 6865 6e20 6120 6361  thrown when a ca
-000154c0: 6c6c 2074 6f20 7468 6520 0a20 2020 2054  ll to the .    T
-000154d0: 656c 6567 7261 6d20 4150 4920 7365 7276  elegram API serv
-000154e0: 6572 2072 6574 7572 6e73 2048 5454 5020  er returns HTTP 
-000154f0: 636f 6465 2074 6861 7420 6973 206e 6f74  code that is not
-00015500: 2032 3030 2e0a 2020 2020 2222 220a 0a20   200..    """.. 
-00015510: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00015520: 7365 6c66 2c20 6675 6e63 7469 6f6e 5f6e  self, function_n
-00015530: 616d 652c 2072 6573 756c 7429 3a0a 2020  ame, result):.  
-00015540: 2020 2020 2020 7375 7065 7228 4170 6948        super(ApiH
-00015550: 5454 5045 7863 6570 7469 6f6e 2c20 7365  TTPException, se
-00015560: 6c66 292e 5f5f 696e 6974 5f5f 280a 2020  lf).__init__(.  
-00015570: 2020 2020 2020 2020 2020 2254 6865 2073            "The s
-00015580: 6572 7665 7220 7265 7475 726e 6564 2048  erver returned H
-00015590: 5454 5020 7b30 7d20 7b31 7d2e 2052 6573  TTP {0} {1}. Res
-000155a0: 706f 6e73 6520 626f 6479 3a5c 6e5b 7b32  ponse body:\n[{2
-000155b0: 7d5d 2220 5c0a 2020 2020 2020 2020 2020  }]" \.          
-000155c0: 2020 2020 2020 2e66 6f72 6d61 7428 7265        .format(re
-000155d0: 7375 6c74 2e73 7461 7475 735f 636f 6465  sult.status_code
-000155e0: 2c20 7265 7375 6c74 2e72 6561 736f 6e2c  , result.reason,
-000155f0: 2072 6573 756c 742e 7465 7874 2e65 6e63   result.text.enc
-00015600: 6f64 6528 2775 7466 3827 2929 2c0a 2020  ode('utf8')),.  
-00015610: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
-00015620: 6f6e 5f6e 616d 652c 0a20 2020 2020 2020  on_name,.       
-00015630: 2020 2020 2072 6573 756c 7429 0a0a 0a63       result)...c
-00015640: 6c61 7373 2041 7069 496e 7661 6c69 644a  lass ApiInvalidJ
-00015650: 534f 4e45 7863 6570 7469 6f6e 2841 7069  SONException(Api
-00015660: 4578 6365 7074 696f 6e29 3a0a 2020 2020  Exception):.    
-00015670: 2222 220a 2020 2020 5468 6973 2063 6c61  """.    This cla
-00015680: 7373 2072 6570 7265 7365 6e74 7320 616e  ss represents an
-00015690: 2045 7863 6570 7469 6f6e 2074 6872 6f77   Exception throw
-000156a0: 6e20 7768 656e 2061 2063 616c 6c20 746f  n when a call to
-000156b0: 2074 6865 200a 2020 2020 5465 6c65 6772   the .    Telegr
-000156c0: 616d 2041 5049 2073 6572 7665 7220 7265  am API server re
-000156d0: 7475 726e 7320 696e 7661 6c69 6420 6a73  turns invalid js
-000156e0: 6f6e 2e0a 2020 2020 2222 220a 0a20 2020  on..    """..   
-000156f0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-00015700: 6c66 2c20 6675 6e63 7469 6f6e 5f6e 616d  lf, function_nam
-00015710: 652c 2072 6573 756c 7429 3a0a 2020 2020  e, result):.    
-00015720: 2020 2020 7375 7065 7228 4170 6949 6e76      super(ApiInv
-00015730: 616c 6964 4a53 4f4e 4578 6365 7074 696f  alidJSONExceptio
-00015740: 6e2c 2073 656c 6629 2e5f 5f69 6e69 745f  n, self).__init_
-00015750: 5f28 0a20 2020 2020 2020 2020 2020 2022  _(.            "
-00015760: 5468 6520 7365 7276 6572 2072 6574 7572  The server retur
-00015770: 6e65 6420 616e 2069 6e76 616c 6964 204a  ned an invalid J
-00015780: 534f 4e20 7265 7370 6f6e 7365 2e20 5265  SON response. Re
-00015790: 7370 6f6e 7365 2062 6f64 793a 5c6e 5b7b  sponse body:\n[{
-000157a0: 307d 5d22 205c 0a20 2020 2020 2020 2020  0}]" \.         
-000157b0: 2020 2020 2020 202e 666f 726d 6174 2872         .format(r
-000157c0: 6573 756c 742e 7465 7874 2e65 6e63 6f64  esult.text.encod
-000157d0: 6528 2775 7466 3827 2929 2c0a 2020 2020  e('utf8')),.    
-000157e0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-000157f0: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-00015800: 2020 2072 6573 756c 7429 0a0a 0a63 6c61     result)...cla
-00015810: 7373 2041 7069 5465 6c65 6772 616d 4578  ss ApiTelegramEx
-00015820: 6365 7074 696f 6e28 4170 6945 7863 6570  ception(ApiExcep
-00015830: 7469 6f6e 293a 0a20 2020 2022 2222 0a20  tion):.    """. 
-00015840: 2020 2054 6869 7320 636c 6173 7320 7265     This class re
-00015850: 7072 6573 656e 7473 2061 6e20 4578 6365  presents an Exce
-00015860: 7074 696f 6e20 7468 726f 776e 2077 6865  ption thrown whe
-00015870: 6e20 6120 5465 6c65 6772 616d 2041 5049  n a Telegram API
-00015880: 2072 6574 7572 6e73 2065 7272 6f72 2063   returns error c
-00015890: 6f64 652e 0a20 2020 2022 2222 0a0a 2020  ode..    """..  
-000158a0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-000158b0: 656c 662c 2066 756e 6374 696f 6e5f 6e61  elf, function_na
-000158c0: 6d65 2c20 7265 7375 6c74 2c20 7265 7375  me, result, resu
-000158d0: 6c74 5f6a 736f 6e29 3a0a 2020 2020 2020  lt_json):.      
-000158e0: 2020 7375 7065 7228 4170 6954 656c 6567    super(ApiTeleg
-000158f0: 7261 6d45 7863 6570 7469 6f6e 2c20 7365  ramException, se
-00015900: 6c66 292e 5f5f 696e 6974 5f5f 280a 2020  lf).__init__(.  
-00015910: 2020 2020 2020 2020 2020 2245 7272 6f72            "Error
-00015920: 2063 6f64 653a 207b 307d 2e20 4465 7363   code: {0}. Desc
-00015930: 7269 7074 696f 6e3a 207b 317d 2220 5c0a  ription: {1}" \.
-00015940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015950: 2e66 6f72 6d61 7428 7265 7375 6c74 5f6a  .format(result_j
-00015960: 736f 6e5b 2765 7272 6f72 5f63 6f64 6527  son['error_code'
-00015970: 5d2c 2072 6573 756c 745f 6a73 6f6e 5b27  ], result_json['
-00015980: 6465 7363 7269 7074 696f 6e27 5d29 2c0a  description']),.
-00015990: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-000159a0: 7469 6f6e 5f6e 616d 652c 0a20 2020 2020  tion_name,.     
-000159b0: 2020 2020 2020 2072 6573 756c 7429 0a20         result). 
-000159c0: 2020 2020 2020 2073 656c 662e 7265 7375         self.resu
-000159d0: 6c74 5f6a 736f 6e20 3d20 7265 7375 6c74  lt_json = result
-000159e0: 5f6a 736f 6e0a 2020 2020 2020 2020 7365  _json.        se
-000159f0: 6c66 2e65 7272 6f72 5f63 6f64 6520 3d20  lf.error_code = 
-00015a00: 7265 7375 6c74 5f6a 736f 6e5b 2765 7272  result_json['err
-00015a10: 6f72 5f63 6f64 6527 5d0a 2020 2020 2020  or_code'].      
-00015a20: 2020 7365 6c66 2e64 6573 6372 6970 7469    self.descripti
-00015a30: 6f6e 203d 2072 6573 756c 745f 6a73 6f6e  on = result_json
-00015a40: 5b27 6465 7363 7269 7074 696f 6e27 5d0a  ['description'].
+000136b0: 2770 726f 7669 6465 725f 6461 7461 275d  'provider_data']
+000136c0: 203d 2070 726f 7669 6465 725f 6461 7461   = provider_data
+000136d0: 0a20 2020 2069 6620 7068 6f74 6f5f 7572  .    if photo_ur
+000136e0: 6c3a 0a20 2020 2020 2020 2070 6179 6c6f  l:.        paylo
+000136f0: 6164 5b27 7068 6f74 6f5f 7572 6c27 5d20  ad['photo_url'] 
+00013700: 3d20 7068 6f74 6f5f 7572 6c0a 2020 2020  = photo_url.    
+00013710: 6966 2070 686f 746f 5f73 697a 653a 0a20  if photo_size:. 
+00013720: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00013730: 7068 6f74 6f5f 7369 7a65 275d 203d 2070  photo_size'] = p
+00013740: 686f 746f 5f73 697a 650a 2020 2020 6966  hoto_size.    if
+00013750: 2070 686f 746f 5f77 6964 7468 3a0a 2020   photo_width:.  
+00013760: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00013770: 686f 746f 5f77 6964 7468 275d 203d 2070  hoto_width'] = p
+00013780: 686f 746f 5f77 6964 7468 0a20 2020 2069  hoto_width.    i
+00013790: 6620 7068 6f74 6f5f 6865 6967 6874 3a0a  f photo_height:.
+000137a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000137b0: 2770 686f 746f 5f68 6569 6768 7427 5d20  'photo_height'] 
+000137c0: 3d20 7068 6f74 6f5f 6865 6967 6874 0a20  = photo_height. 
+000137d0: 2020 2069 6620 6e65 6564 5f6e 616d 6520     if need_name 
+000137e0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000137f0: 2020 2020 2070 6179 6c6f 6164 5b27 6e65       payload['ne
+00013800: 6564 5f6e 616d 6527 5d20 3d20 6e65 6564  ed_name'] = need
+00013810: 5f6e 616d 650a 2020 2020 6966 206e 6565  _name.    if nee
+00013820: 645f 7068 6f6e 655f 6e75 6d62 6572 2069  d_phone_number i
+00013830: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00013840: 2020 2020 7061 796c 6f61 645b 276e 6565      payload['nee
+00013850: 645f 7068 6f6e 655f 6e75 6d62 6572 275d  d_phone_number']
+00013860: 203d 206e 6565 645f 7068 6f6e 655f 6e75   = need_phone_nu
+00013870: 6d62 6572 0a20 2020 2069 6620 6e65 6564  mber.    if need
+00013880: 5f65 6d61 696c 2069 7320 6e6f 7420 4e6f  _email is not No
+00013890: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+000138a0: 6f61 645b 276e 6565 645f 656d 6169 6c27  oad['need_email'
+000138b0: 5d20 3d20 6e65 6564 5f65 6d61 696c 0a20  ] = need_email. 
+000138c0: 2020 2069 6620 6e65 6564 5f73 6869 7070     if need_shipp
+000138d0: 696e 675f 6164 6472 6573 7320 6973 206e  ing_address is n
+000138e0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000138f0: 2070 6179 6c6f 6164 5b27 6e65 6564 5f73   payload['need_s
+00013900: 6869 7070 696e 675f 6164 6472 6573 7327  hipping_address'
+00013910: 5d20 3d20 6e65 6564 5f73 6869 7070 696e  ] = need_shippin
+00013920: 675f 6164 6472 6573 730a 2020 2020 6966  g_address.    if
+00013930: 2073 656e 645f 7068 6f6e 655f 6e75 6d62   send_phone_numb
+00013940: 6572 5f74 6f5f 7072 6f76 6964 6572 2069  er_to_provider i
+00013950: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00013960: 2020 2020 7061 796c 6f61 645b 2773 656e      payload['sen
+00013970: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
+00013980: 6f5f 7072 6f76 6964 6572 275d 203d 2073  o_provider'] = s
+00013990: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
+000139a0: 5f74 6f5f 7072 6f76 6964 6572 0a20 2020  _to_provider.   
+000139b0: 2069 6620 7365 6e64 5f65 6d61 696c 5f74   if send_email_t
+000139c0: 6f5f 7072 6f76 6964 6572 2069 7320 6e6f  o_provider is no
+000139d0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000139e0: 7061 796c 6f61 645b 2773 656e 645f 656d  payload['send_em
+000139f0: 6169 6c5f 746f 5f70 726f 7669 6465 7227  ail_to_provider'
+00013a00: 5d20 3d20 7365 6e64 5f65 6d61 696c 5f74  ] = send_email_t
+00013a10: 6f5f 7072 6f76 6964 6572 0a20 2020 2069  o_provider.    i
+00013a20: 6620 6973 5f66 6c65 7869 626c 6520 6973  f is_flexible is
+00013a30: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00013a40: 2020 2070 6179 6c6f 6164 5b27 6973 5f66     payload['is_f
+00013a50: 6c65 7869 626c 6527 5d20 3d20 6973 5f66  lexible'] = is_f
+00013a60: 6c65 7869 626c 650a 2020 2020 7265 7475  lexible.    retu
+00013a70: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00013a80: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00013a90: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00013aa0: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
+00013ab0: 272c 2076 6572 6966 793d 7665 7269 6679  ', verify=verify
+00013ac0: 290a 0a0a 2320 6e6f 696e 7370 6563 7469  )...# noinspecti
+00013ad0: 6f6e 2050 7953 6861 646f 7769 6e67 4275  on PyShadowingBu
+00013ae0: 696c 7469 6e73 0a64 6566 2073 656e 645f  iltins.def send_
+00013af0: 706f 6c6c 280a 2020 2020 2020 2020 746f  poll(.        to
+00013b00: 6b65 6e2c 2063 6861 745f 6964 2c0a 2020  ken, chat_id,.  
+00013b10: 2020 2020 2020 7175 6573 7469 6f6e 2c20        question, 
+00013b20: 6f70 7469 6f6e 732c 0a20 2020 2020 2020  options,.       
+00013b30: 2069 735f 616e 6f6e 796d 6f75 733d 4e6f   is_anonymous=No
+00013b40: 6e65 2c20 7479 7065 3d4e 6f6e 652c 2061  ne, type=None, a
+00013b50: 6c6c 6f77 735f 6d75 6c74 6970 6c65 5f61  llows_multiple_a
+00013b60: 6e73 7765 7273 3d4e 6f6e 652c 2063 6f72  nswers=None, cor
+00013b70: 7265 6374 5f6f 7074 696f 6e5f 6964 3d4e  rect_option_id=N
+00013b80: 6f6e 652c 2065 7870 6c61 6e61 7469 6f6e  one, explanation
+00013b90: 3d4e 6f6e 652c 0a20 2020 2020 2020 2065  =None,.        e
+00013ba0: 7870 6c61 6e61 7469 6f6e 5f70 6172 7365  xplanation_parse
+00013bb0: 5f6d 6f64 653d 4e6f 6e65 2c20 6f70 656e  _mode=None, open
+00013bc0: 5f70 6572 696f 643d 4e6f 6e65 2c20 636c  _period=None, cl
+00013bd0: 6f73 655f 6461 7465 3d4e 6f6e 652c 2069  ose_date=None, i
+00013be0: 735f 636c 6f73 6564 3d4e 6f6e 652c 2064  s_closed=None, d
+00013bf0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00013c00: 696f 6e3d 4661 6c73 652c 0a20 2020 2020  ion=False,.     
+00013c10: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
+00013c20: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+00013c30: 6e65 2c20 6578 706c 616e 6174 696f 6e5f  ne, explanation_
+00013c40: 656e 7469 7469 6573 3d4e 6f6e 652c 2070  entities=None, p
+00013c50: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00013c60: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+00013c70: 6561 645f 6964 3d4e 6f6e 652c 0a20 2020  ead_id=None,.   
+00013c80: 2020 2020 2072 6570 6c79 5f70 6172 616d       reply_param
+00013c90: 6574 6572 733d 4e6f 6e65 2c0a 2020 2020  eters=None,.    
+00013ca0: 2020 2020 6275 7369 6e65 7373 5f63 6f6e      business_con
+00013cb0: 6e65 6374 696f 6e5f 6964 3d4e 6f6e 652c  nection_id=None,
+00013cc0: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+00013cd0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00013ce0: 7227 7365 6e64 506f 6c6c 270a 2020 2020  r'sendPoll'.    
+00013cf0: 7061 796c 6f61 6420 3d20 7b0a 2020 2020  payload = {.    
+00013d00: 2020 2020 2763 6861 745f 6964 273a 2073      'chat_id': s
+00013d10: 7472 2863 6861 745f 6964 292c 0a20 2020  tr(chat_id),.   
+00013d20: 2020 2020 2027 7175 6573 7469 6f6e 273a       'question':
+00013d30: 2071 7565 7374 696f 6e2c 0a20 2020 2020   question,.     
+00013d40: 2020 2027 6f70 7469 6f6e 7327 3a20 6a73     'options': js
+00013d50: 6f6e 2e64 756d 7073 285f 636f 6e76 6572  on.dumps(_conver
+00013d60: 745f 706f 6c6c 5f6f 7074 696f 6e73 286f  t_poll_options(o
+00013d70: 7074 696f 6e73 2929 7d0a 0a20 2020 2069  ptions))}..    i
+00013d80: 6620 6973 5f61 6e6f 6e79 6d6f 7573 2069  f is_anonymous i
+00013d90: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00013da0: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
+00013db0: 616e 6f6e 796d 6f75 7327 5d20 3d20 6973  anonymous'] = is
+00013dc0: 5f61 6e6f 6e79 6d6f 7573 0a20 2020 2069  _anonymous.    i
+00013dd0: 6620 7479 7065 2069 7320 6e6f 7420 4e6f  f type is not No
+00013de0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+00013df0: 6f61 645b 2774 7970 6527 5d20 3d20 7479  oad['type'] = ty
+00013e00: 7065 0a20 2020 2069 6620 616c 6c6f 7773  pe.    if allows
+00013e10: 5f6d 756c 7469 706c 655f 616e 7377 6572  _multiple_answer
+00013e20: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+00013e30: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00013e40: 616c 6c6f 7773 5f6d 756c 7469 706c 655f  allows_multiple_
+00013e50: 616e 7377 6572 7327 5d20 3d20 616c 6c6f  answers'] = allo
+00013e60: 7773 5f6d 756c 7469 706c 655f 616e 7377  ws_multiple_answ
+00013e70: 6572 730a 2020 2020 6966 2063 6f72 7265  ers.    if corre
+00013e80: 6374 5f6f 7074 696f 6e5f 6964 2069 7320  ct_option_id is 
+00013e90: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00013ea0: 2020 7061 796c 6f61 645b 2763 6f72 7265    payload['corre
+00013eb0: 6374 5f6f 7074 696f 6e5f 6964 275d 203d  ct_option_id'] =
+00013ec0: 2063 6f72 7265 6374 5f6f 7074 696f 6e5f   correct_option_
+00013ed0: 6964 0a20 2020 2069 6620 6578 706c 616e  id.    if explan
+00013ee0: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
+00013ef0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00013f00: 6164 5b27 6578 706c 616e 6174 696f 6e27  ad['explanation'
+00013f10: 5d20 3d20 6578 706c 616e 6174 696f 6e0a  ] = explanation.
+00013f20: 2020 2020 6966 2065 7870 6c61 6e61 7469      if explanati
+00013f30: 6f6e 5f70 6172 7365 5f6d 6f64 6520 6973  on_parse_mode is
+00013f40: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00013f50: 2020 2070 6179 6c6f 6164 5b27 6578 706c     payload['expl
+00013f60: 616e 6174 696f 6e5f 7061 7273 655f 6d6f  anation_parse_mo
+00013f70: 6465 275d 203d 2065 7870 6c61 6e61 7469  de'] = explanati
+00013f80: 6f6e 5f70 6172 7365 5f6d 6f64 650a 2020  on_parse_mode.  
+00013f90: 2020 6966 206f 7065 6e5f 7065 7269 6f64    if open_period
+00013fa0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00013fb0: 2020 2020 2020 7061 796c 6f61 645b 276f        payload['o
+00013fc0: 7065 6e5f 7065 7269 6f64 275d 203d 206f  pen_period'] = o
+00013fd0: 7065 6e5f 7065 7269 6f64 0a20 2020 2069  pen_period.    i
+00013fe0: 6620 636c 6f73 655f 6461 7465 2069 7320  f close_date is 
+00013ff0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00014000: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00014010: 636c 6f73 655f 6461 7465 2c20 6461 7465  close_date, date
+00014020: 7469 6d65 293a 0a20 2020 2020 2020 2020  time):.         
+00014030: 2020 2070 6179 6c6f 6164 5b27 636c 6f73     payload['clos
+00014040: 655f 6461 7465 275d 203d 2063 6c6f 7365  e_date'] = close
+00014050: 5f64 6174 652e 7469 6d65 7374 616d 7028  _date.timestamp(
+00014060: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00014070: 2020 2020 2020 2020 2020 2020 7061 796c              payl
+00014080: 6f61 645b 2763 6c6f 7365 5f64 6174 6527  oad['close_date'
+00014090: 5d20 3d20 636c 6f73 655f 6461 7465 0a20  ] = close_date. 
+000140a0: 2020 2069 6620 6973 5f63 6c6f 7365 6420     if is_closed 
+000140b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000140c0: 2020 2020 2070 6179 6c6f 6164 5b27 6973       payload['is
+000140d0: 5f63 6c6f 7365 6427 5d20 3d20 6973 5f63  _closed'] = is_c
+000140e0: 6c6f 7365 640a 2020 2020 6966 2064 6973  losed.    if dis
+000140f0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00014100: 6e3a 0a20 2020 2020 2020 2070 6179 6c6f  n:.        paylo
+00014110: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
+00014120: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
+00014130: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00014140: 6e0a 2020 2020 6966 2072 6570 6c79 5f6d  n.    if reply_m
+00014150: 6172 6b75 7020 6973 206e 6f74 204e 6f6e  arkup is not Non
+00014160: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00014170: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
+00014180: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
+00014190: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
+000141a0: 7029 0a20 2020 2069 6620 7469 6d65 6f75  p).    if timeou
+000141b0: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
+000141c0: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
+000141d0: 7469 6d65 6f75 740a 2020 2020 6966 2065  timeout.    if e
+000141e0: 7870 6c61 6e61 7469 6f6e 5f65 6e74 6974  xplanation_entit
+000141f0: 6965 733a 0a20 2020 2020 2020 2070 6179  ies:.        pay
+00014200: 6c6f 6164 5b27 6578 706c 616e 6174 696f  load['explanatio
+00014210: 6e5f 656e 7469 7469 6573 275d 203d 206a  n_entities'] = j
+00014220: 736f 6e2e 6475 6d70 7328 0a20 2020 2020  son.dumps(.     
+00014230: 2020 2020 2020 2074 7970 6573 2e4d 6573         types.Mes
+00014240: 7361 6765 456e 7469 7479 2e74 6f5f 6c69  sageEntity.to_li
+00014250: 7374 5f6f 665f 6469 6374 7328 6578 706c  st_of_dicts(expl
+00014260: 616e 6174 696f 6e5f 656e 7469 7469 6573  anation_entities
+00014270: 2929 0a20 2020 2069 6620 7072 6f74 6563  )).    if protec
+00014280: 745f 636f 6e74 656e 743a 0a20 2020 2020  t_content:.     
+00014290: 2020 2070 6179 6c6f 6164 5b27 7072 6f74     payload['prot
+000142a0: 6563 745f 636f 6e74 656e 7427 5d20 3d20  ect_content'] = 
+000142b0: 7072 6f74 6563 745f 636f 6e74 656e 740a  protect_content.
+000142c0: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
+000142d0: 6872 6561 645f 6964 3a0a 2020 2020 2020  hread_id:.      
+000142e0: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+000142f0: 6765 5f74 6872 6561 645f 6964 275d 203d  ge_thread_id'] =
+00014300: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00014310: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
+00014320: 7061 7261 6d65 7465 7273 2069 7320 6e6f  parameters is no
+00014330: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00014340: 7061 796c 6f61 645b 2772 6570 6c79 5f70  payload['reply_p
+00014350: 6172 616d 6574 6572 7327 5d20 3d20 7265  arameters'] = re
+00014360: 706c 795f 7061 7261 6d65 7465 7273 2e74  ply_parameters.t
+00014370: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
+00014380: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+00014390: 696f 6e5f 6964 2069 7320 6e6f 7420 4e6f  ion_id is not No
+000143a0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
+000143b0: 6f61 645b 2762 7573 696e 6573 735f 636f  oad['business_co
+000143c0: 6e6e 6563 7469 6f6e 5f69 6427 5d20 3d20  nnection_id'] = 
+000143d0: 6275 7369 6e65 7373 5f63 6f6e 6e65 6374  business_connect
+000143e0: 696f 6e5f 6964 0a20 2020 2072 6574 7572  ion_id.    retur
+000143f0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00014400: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00014410: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00014420: 642c 2076 6572 6966 793d 7665 7269 6679  d, verify=verify
+00014430: 290a 0a0a 6465 6620 6372 6561 7465 5f66  )...def create_f
+00014440: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
+00014450: 2c20 6368 6174 5f69 642c 206e 616d 652c  , chat_id, name,
+00014460: 2069 636f 6e5f 636f 6c6f 723d 4e6f 6e65   icon_color=None
+00014470: 2c20 6963 6f6e 5f63 7573 746f 6d5f 656d  , icon_custom_em
+00014480: 6f6a 695f 6964 3d4e 6f6e 652c 2076 6572  oji_id=None, ver
+00014490: 6966 793d 5472 7565 293a 0a20 2020 206d  ify=True):.    m
+000144a0: 6574 686f 645f 7572 6c20 3d20 7227 6372  ethod_url = r'cr
+000144b0: 6561 7465 466f 7275 6d54 6f70 6963 270a  eateForumTopic'.
+000144c0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+000144d0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+000144e0: 642c 2027 6e61 6d65 273a 206e 616d 657d  d, 'name': name}
+000144f0: 0a20 2020 2069 6620 6963 6f6e 5f63 6f6c  .    if icon_col
+00014500: 6f72 3a0a 2020 2020 2020 2020 7061 796c  or:.        payl
+00014510: 6f61 645b 2769 636f 6e5f 636f 6c6f 7227  oad['icon_color'
+00014520: 5d20 3d20 6963 6f6e 5f63 6f6c 6f72 0a20  ] = icon_color. 
+00014530: 2020 2069 6620 6963 6f6e 5f63 7573 746f     if icon_custo
+00014540: 6d5f 656d 6f6a 695f 6964 3a0a 2020 2020  m_emoji_id:.    
+00014550: 2020 2020 7061 796c 6f61 645b 2769 636f      payload['ico
+00014560: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
+00014570: 6427 5d20 3d20 6963 6f6e 5f63 7573 746f  d'] = icon_custo
+00014580: 6d5f 656d 6f6a 695f 6964 0a20 2020 2072  m_emoji_id.    r
+00014590: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+000145a0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+000145b0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+000145c0: 796c 6f61 642c 2076 6572 6966 793d 7665  yload, verify=ve
+000145d0: 7269 6679 290a 0a0a 6465 6620 6564 6974  rify)...def edit
+000145e0: 5f66 6f72 756d 5f74 6f70 6963 2874 6f6b  _forum_topic(tok
+000145f0: 656e 2c20 6368 6174 5f69 642c 206d 6573  en, chat_id, mes
+00014600: 7361 6765 5f74 6872 6561 645f 6964 2c20  sage_thread_id, 
+00014610: 6e61 6d65 3d4e 6f6e 652c 2069 636f 6e5f  name=None, icon_
+00014620: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 643d  custom_emoji_id=
+00014630: 4e6f 6e65 2c20 7665 7269 6679 3d54 7275  None, verify=Tru
+00014640: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+00014650: 726c 203d 2072 2765 6469 7446 6f72 756d  rl = r'editForum
+00014660: 546f 7069 6327 0a20 2020 2070 6179 6c6f  Topic'.    paylo
+00014670: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+00014680: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
+00014690: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
+000146a0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000146b0: 7d0a 2020 2020 6966 206e 616d 6520 6973  }.    if name is
+000146c0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000146d0: 2020 2070 6179 6c6f 6164 5b27 6e61 6d65     payload['name
+000146e0: 275d 203d 206e 616d 650a 2020 2020 6966  '] = name.    if
+000146f0: 2069 636f 6e5f 6375 7374 6f6d 5f65 6d6f   icon_custom_emo
+00014700: 6a69 5f69 6420 6973 206e 6f74 204e 6f6e  ji_id is not Non
+00014710: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
+00014720: 6164 5b27 6963 6f6e 5f63 7573 746f 6d5f  ad['icon_custom_
+00014730: 656d 6f6a 695f 6964 275d 203d 2069 636f  emoji_id'] = ico
+00014740: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
+00014750: 640a 2020 2020 7265 7475 726e 205f 6d61  d.    return _ma
+00014760: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00014770: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00014780: 7261 6d73 3d70 6179 6c6f 6164 2c20 7665  rams=payload, ve
+00014790: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+000147a0: 6566 2063 6c6f 7365 5f66 6f72 756d 5f74  ef close_forum_t
+000147b0: 6f70 6963 2874 6f6b 656e 2c20 6368 6174  opic(token, chat
+000147c0: 5f69 642c 206d 6573 7361 6765 5f74 6872  _id, message_thr
+000147d0: 6561 645f 6964 2c20 7665 7269 6679 3d54  ead_id, verify=T
+000147e0: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+000147f0: 5f75 726c 203d 2072 2763 6c6f 7365 466f  _url = r'closeFo
+00014800: 7275 6d54 6f70 6963 270a 2020 2020 7061  rumTopic'.    pa
+00014810: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00014820: 6427 3a20 6368 6174 5f69 642c 2027 6d65  d': chat_id, 'me
+00014830: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+00014840: 3a20 6d65 7373 6167 655f 7468 7265 6164  : message_thread
+00014850: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
+00014860: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00014870: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00014880: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00014890: 2076 6572 6966 793d 7665 7269 6679 290a   verify=verify).
+000148a0: 0a0a 6465 6620 7265 6f70 656e 5f66 6f72  ..def reopen_for
+000148b0: 756d 5f74 6f70 6963 2874 6f6b 656e 2c20  um_topic(token, 
+000148c0: 6368 6174 5f69 642c 206d 6573 7361 6765  chat_id, message
+000148d0: 5f74 6872 6561 645f 6964 2c20 7665 7269  _thread_id, veri
+000148e0: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+000148f0: 7468 6f64 5f75 726c 203d 2072 2772 656f  thod_url = r'reo
+00014900: 7065 6e46 6f72 756d 546f 7069 6327 0a20  penForumTopic'. 
+00014910: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+00014920: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+00014930: 2c20 276d 6573 7361 6765 5f74 6872 6561  , 'message_threa
+00014940: 645f 6964 273a 206d 6573 7361 6765 5f74  d_id': message_t
+00014950: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
+00014960: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00014970: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00014980: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00014990: 6c6f 6164 2c20 7665 7269 6679 3d76 6572  load, verify=ver
+000149a0: 6966 7929 0a0a 0a64 6566 2064 656c 6574  ify)...def delet
+000149b0: 655f 666f 7275 6d5f 746f 7069 6328 746f  e_forum_topic(to
+000149c0: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
+000149d0: 7373 6167 655f 7468 7265 6164 5f69 642c  ssage_thread_id,
+000149e0: 2076 6572 6966 793d 5472 7565 293a 0a20   verify=True):. 
+000149f0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00014a00: 7227 6465 6c65 7465 466f 7275 6d54 6f70  r'deleteForumTop
+00014a10: 6963 270a 2020 2020 7061 796c 6f61 6420  ic'.    payload 
+00014a20: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00014a30: 6174 5f69 642c 2027 6d65 7373 6167 655f  at_id, 'message_
+00014a40: 7468 7265 6164 5f69 6427 3a20 6d65 7373  thread_id': mess
+00014a50: 6167 655f 7468 7265 6164 5f69 647d 0a20  age_thread_id}. 
+00014a60: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+00014a70: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00014a80: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00014a90: 733d 7061 796c 6f61 642c 2076 6572 6966  s=payload, verif
+00014aa0: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00014ab0: 756e 7069 6e5f 616c 6c5f 666f 7275 6d5f  unpin_all_forum_
+00014ac0: 746f 7069 635f 6d65 7373 6167 6573 2874  topic_messages(t
+00014ad0: 6f6b 656e 2c20 6368 6174 5f69 642c 206d  oken, chat_id, m
+00014ae0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00014af0: 2c20 7665 7269 6679 3d54 7275 6529 3a0a  , verify=True):.
+00014b00: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00014b10: 2072 2775 6e70 696e 416c 6c46 6f72 756d   r'unpinAllForum
+00014b20: 546f 7069 634d 6573 7361 6765 7327 0a20  TopicMessages'. 
+00014b30: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+00014b40: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+00014b50: 2c20 276d 6573 7361 6765 5f74 6872 6561  , 'message_threa
+00014b60: 645f 6964 273a 206d 6573 7361 6765 5f74  d_id': message_t
+00014b70: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
+00014b80: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00014b90: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00014ba0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00014bb0: 6c6f 6164 2c20 7665 7269 6679 3d76 6572  load, verify=ver
+00014bc0: 6966 7929 0a0a 0a64 6566 2067 6574 5f66  ify)...def get_f
+00014bd0: 6f72 756d 5f74 6f70 6963 5f69 636f 6e5f  orum_topic_icon_
+00014be0: 7374 6963 6b65 7273 2874 6f6b 656e 2c20  stickers(token, 
+00014bf0: 7665 7269 6679 3d54 7275 6529 3a0a 2020  verify=True):.  
+00014c00: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00014c10: 2767 6574 466f 7275 6d54 6f70 6963 4963  'getForumTopicIc
+00014c20: 6f6e 5374 6963 6b65 7273 270a 2020 2020  onStickers'.    
+00014c30: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00014c40: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00014c50: 6f64 5f75 726c 2c20 7665 7269 6679 3d76  od_url, verify=v
+00014c60: 6572 6966 7929 0a0a 0a64 6566 2073 746f  erify)...def sto
+00014c70: 705f 706f 6c6c 2874 6f6b 656e 2c20 6368  p_poll(token, ch
+00014c80: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
+00014c90: 642c 2072 6570 6c79 5f6d 6172 6b75 703d  d, reply_markup=
+00014ca0: 4e6f 6e65 2c20 7665 7269 6679 3d54 7275  None, verify=Tru
+00014cb0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
+00014cc0: 726c 203d 2072 2773 746f 7050 6f6c 6c27  rl = r'stopPoll'
+00014cd0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00014ce0: 2763 6861 745f 6964 273a 2073 7472 2863  'chat_id': str(c
+00014cf0: 6861 745f 6964 292c 2027 6d65 7373 6167  hat_id), 'messag
+00014d00: 655f 6964 273a 206d 6573 7361 6765 5f69  e_id': message_i
+00014d10: 647d 0a20 2020 2069 6620 7265 706c 795f  d}.    if reply_
+00014d20: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
+00014d30: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
+00014d40: 6172 6b75 7027 5d20 3d20 5f63 6f6e 7665  arkup'] = _conve
+00014d50: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
+00014d60: 6d61 726b 7570 290a 2020 2020 7265 7475  markup).    retu
+00014d70: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00014d80: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00014d90: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00014da0: 6164 2c20 7665 7269 6679 3d76 6572 6966  ad, verify=verif
+00014db0: 7929 0a0a 0a64 6566 2065 6469 745f 6765  y)...def edit_ge
+00014dc0: 6e65 7261 6c5f 666f 7275 6d5f 746f 7069  neral_forum_topi
+00014dd0: 6328 746f 6b65 6e2c 2063 6861 745f 6964  c(token, chat_id
+00014de0: 2c20 6e61 6d65 2c20 7665 7269 6679 3d54  , name, verify=T
+00014df0: 7275 6529 3a0a 2020 2020 6d65 7468 6f64  rue):.    method
+00014e00: 5f75 726c 203d 2072 2765 6469 7447 656e  _url = r'editGen
+00014e10: 6572 616c 466f 7275 6d54 6f70 6963 270a  eralForumTopic'.
+00014e20: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+00014e30: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+00014e40: 642c 2027 6e61 6d65 273a 206e 616d 657d  d, 'name': name}
+00014e50: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00014e60: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00014e70: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00014e80: 616d 733d 7061 796c 6f61 642c 2076 6572  ams=payload, ver
+00014e90: 6966 793d 7665 7269 6679 290a 0a0a 6465  ify=verify)...de
+00014ea0: 6620 636c 6f73 655f 6765 6e65 7261 6c5f  f close_general_
+00014eb0: 666f 7275 6d5f 746f 7069 6328 746f 6b65  forum_topic(toke
+00014ec0: 6e2c 2063 6861 745f 6964 2c20 7665 7269  n, chat_id, veri
+00014ed0: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+00014ee0: 7468 6f64 5f75 726c 203d 2072 2763 6c6f  thod_url = r'clo
+00014ef0: 7365 4765 6e65 7261 6c46 6f72 756d 546f  seGeneralForumTo
+00014f00: 7069 6327 0a20 2020 2070 6179 6c6f 6164  pic'.    payload
+00014f10: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00014f20: 6861 745f 6964 7d0a 2020 2020 7265 7475  hat_id}.    retu
+00014f30: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00014f40: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00014f50: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00014f60: 6164 2c20 7665 7269 6679 3d76 6572 6966  ad, verify=verif
+00014f70: 7929 0a0a 0a64 6566 2072 656f 7065 6e5f  y)...def reopen_
+00014f80: 6765 6e65 7261 6c5f 666f 7275 6d5f 746f  general_forum_to
+00014f90: 7069 6328 746f 6b65 6e2c 2063 6861 745f  pic(token, chat_
+00014fa0: 6964 2c20 7665 7269 6679 3d54 7275 6529  id, verify=True)
+00014fb0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
+00014fc0: 203d 2072 2772 656f 7065 6e47 656e 6572   = r'reopenGener
+00014fd0: 616c 466f 7275 6d54 6f70 6963 270a 2020  alForumTopic'.  
+00014fe0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+00014ff0: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
+00015000: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00015010: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00015020: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00015030: 616d 733d 7061 796c 6f61 642c 2076 6572  ams=payload, ver
+00015040: 6966 793d 7665 7269 6679 290a 0a0a 6465  ify=verify)...de
+00015050: 6620 6869 6465 5f67 656e 6572 616c 5f66  f hide_general_f
+00015060: 6f72 756d 5f74 6f70 6963 2874 6f6b 656e  orum_topic(token
+00015070: 2c20 6368 6174 5f69 642c 2076 6572 6966  , chat_id, verif
+00015080: 793d 5472 7565 293a 0a20 2020 206d 6574  y=True):.    met
+00015090: 686f 645f 7572 6c20 3d20 7227 6869 6465  hod_url = r'hide
+000150a0: 4765 6e65 7261 6c46 6f72 756d 546f 7069  GeneralForumTopi
+000150b0: 6327 0a20 2020 2070 6179 6c6f 6164 203d  c'.    payload =
+000150c0: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+000150d0: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
+000150e0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+000150f0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00015100: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00015110: 2c20 7665 7269 6679 3d76 6572 6966 7929  , verify=verify)
+00015120: 0a0a 0a64 6566 2075 6e68 6964 655f 6765  ...def unhide_ge
+00015130: 6e65 7261 6c5f 666f 7275 6d5f 746f 7069  neral_forum_topi
+00015140: 6328 746f 6b65 6e2c 2063 6861 745f 6964  c(token, chat_id
+00015150: 2c20 7665 7269 6679 3d54 7275 6529 3a0a  , verify=True):.
+00015160: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00015170: 2072 2775 6e68 6964 6547 656e 6572 616c   r'unhideGeneral
+00015180: 466f 7275 6d54 6f70 6963 270a 2020 2020  ForumTopic'.    
+00015190: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+000151a0: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
+000151b0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+000151c0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+000151d0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+000151e0: 733d 7061 796c 6f61 642c 2076 6572 6966  s=payload, verif
+000151f0: 793d 7665 7269 6679 290a 0a0a 6465 6620  y=verify)...def 
+00015200: 6465 6c65 7465 5f6d 6573 7361 6765 7328  delete_messages(
+00015210: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00015220: 6d65 7373 6167 655f 6964 732c 2076 6572  message_ids, ver
+00015230: 6966 793d 5472 7565 293a 0a20 2020 206d  ify=True):.    m
+00015240: 6574 686f 645f 7572 6c20 3d20 2764 656c  ethod_url = 'del
+00015250: 6574 654d 6573 7361 6765 7327 0a20 2020  eteMessages'.   
+00015260: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
+00015270: 2020 2020 2027 6368 6174 5f69 6427 3a20       'chat_id': 
+00015280: 6368 6174 5f69 642c 0a20 2020 2020 2020  chat_id,.       
+00015290: 2027 6d65 7373 6167 655f 6964 7327 3a20   'message_ids': 
+000152a0: 6a73 6f6e 2e64 756d 7073 286d 6573 7361  json.dumps(messa
+000152b0: 6765 5f69 6473 290a 2020 2020 7d0a 2020  ge_ids).    }.  
+000152c0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+000152d0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+000152e0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+000152f0: 3d70 6179 6c6f 6164 2c20 7665 7269 6679  =payload, verify
+00015300: 3d76 6572 6966 7929 0a0a 0a64 6566 2066  =verify)...def f
+00015310: 6f72 7761 7264 5f6d 6573 7361 6765 7328  orward_messages(
+00015320: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00015330: 6672 6f6d 5f63 6861 745f 6964 2c20 6d65  from_chat_id, me
+00015340: 7373 6167 655f 6964 732c 2064 6973 6162  ssage_ids, disab
+00015350: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00015360: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00015370: 2020 2020 2020 2020 2020 206d 6573 7361             messa
+00015380: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
+00015390: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
+000153a0: 6e74 3d4e 6f6e 652c 2076 6572 6966 793d  nt=None, verify=
+000153b0: 5472 7565 293a 0a20 2020 206d 6574 686f  True):.    metho
+000153c0: 645f 7572 6c20 3d20 2766 6f72 7761 7264  d_url = 'forward
+000153d0: 4d65 7373 6167 6573 270a 2020 2020 7061  Messages'.    pa
+000153e0: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
+000153f0: 2020 2763 6861 745f 6964 273a 2063 6861    'chat_id': cha
+00015400: 745f 6964 2c0a 2020 2020 2020 2020 2766  t_id,.        'f
+00015410: 726f 6d5f 6368 6174 5f69 6427 3a20 6672  rom_chat_id': fr
+00015420: 6f6d 5f63 6861 745f 6964 2c0a 2020 2020  om_chat_id,.    
+00015430: 2020 2020 276d 6573 7361 6765 5f69 6473      'message_ids
+00015440: 273a 206a 736f 6e2e 6475 6d70 7328 6d65  ': json.dumps(me
+00015450: 7373 6167 655f 6964 7329 2c0a 2020 2020  ssage_ids),.    
+00015460: 7d0a 2020 2020 6966 2064 6973 6162 6c65  }.    if disable
+00015470: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
+00015480: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00015490: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
+000154a0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000154b0: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
+000154c0: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
+000154d0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+000154e0: 6964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  id is not None:.
+000154f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00015500: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+00015510: 6964 275d 203d 206d 6573 7361 6765 5f74  id'] = message_t
+00015520: 6872 6561 645f 6964 0a20 2020 2069 6620  hread_id.    if 
+00015530: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+00015540: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00015550: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
+00015560: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
+00015570: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
+00015580: 740a 2020 2020 7265 7475 726e 205f 6d61  t.    return _ma
+00015590: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+000155a0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000155b0: 7261 6d73 3d70 6179 6c6f 6164 2c20 7665  rams=payload, ve
+000155c0: 7269 6679 3d76 6572 6966 7929 0a0a 0a64  rify=verify)...d
+000155d0: 6566 2063 6f70 795f 6d65 7373 6167 6573  ef copy_messages
+000155e0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+000155f0: 2066 726f 6d5f 6368 6174 5f69 642c 206d   from_chat_id, m
+00015600: 6573 7361 6765 5f69 6473 2c20 6469 7361  essage_ids, disa
+00015610: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00015620: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
+00015630: 2020 2020 2020 2020 206d 6573 7361 6765           message
+00015640: 5f74 6872 6561 645f 6964 3d4e 6f6e 652c  _thread_id=None,
+00015650: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00015660: 3d4e 6f6e 652c 2072 656d 6f76 655f 6361  =None, remove_ca
+00015670: 7074 696f 6e3d 4e6f 6e65 2c20 7665 7269  ption=None, veri
+00015680: 6679 3d54 7275 6529 3a0a 2020 2020 6d65  fy=True):.    me
+00015690: 7468 6f64 5f75 726c 203d 2027 636f 7079  thod_url = 'copy
+000156a0: 4d65 7373 6167 6573 270a 2020 2020 7061  Messages'.    pa
+000156b0: 796c 6f61 6420 3d20 7b0a 2020 2020 2020  yload = {.      
+000156c0: 2020 2763 6861 745f 6964 273a 2063 6861    'chat_id': cha
+000156d0: 745f 6964 2c0a 2020 2020 2020 2020 2766  t_id,.        'f
+000156e0: 726f 6d5f 6368 6174 5f69 6427 3a20 6672  rom_chat_id': fr
+000156f0: 6f6d 5f63 6861 745f 6964 2c0a 2020 2020  om_chat_id,.    
+00015700: 2020 2020 276d 6573 7361 6765 5f69 6473      'message_ids
+00015710: 273a 206a 736f 6e2e 6475 6d70 7328 6d65  ': json.dumps(me
+00015720: 7373 6167 655f 6964 7329 2c0a 2020 2020  ssage_ids),.    
+00015730: 7d0a 2020 2020 6966 2064 6973 6162 6c65  }.    if disable
+00015740: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
+00015750: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00015760: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
+00015770: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00015780: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
+00015790: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
+000157a0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+000157b0: 6964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  id is not None:.
+000157c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000157d0: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+000157e0: 6964 275d 203d 206d 6573 7361 6765 5f74  id'] = message_t
+000157f0: 6872 6561 645f 6964 0a20 2020 2069 6620  hread_id.    if 
+00015800: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+00015810: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00015820: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
+00015830: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
+00015840: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
+00015850: 740a 2020 2020 6966 2072 656d 6f76 655f  t.    if remove_
+00015860: 6361 7074 696f 6e20 6973 206e 6f74 204e  caption is not N
+00015870: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
+00015880: 6c6f 6164 5b27 7265 6d6f 7665 5f63 6170  load['remove_cap
+00015890: 7469 6f6e 275d 203d 2072 656d 6f76 655f  tion'] = remove_
+000158a0: 6361 7074 696f 6e0a 2020 2020 7265 7475  caption.    retu
+000158b0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+000158c0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+000158d0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+000158e0: 6164 2c20 7665 7269 6679 3d76 6572 6966  ad, verify=verif
+000158f0: 7929 0a0a 0a64 6566 205f 636f 6e76 6572  y)...def _conver
+00015900: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
+00015910: 616c 697a 6162 6c65 2872 6573 756c 7473  alizable(results
+00015920: 293a 0a20 2020 2072 6574 203d 2027 270a  ):.    ret = ''.
+00015930: 2020 2020 666f 7220 7220 696e 2072 6573      for r in res
+00015940: 756c 7473 3a0a 2020 2020 2020 2020 6966  ults:.        if
+00015950: 2069 7369 6e73 7461 6e63 6528 722c 2074   isinstance(r, t
+00015960: 7970 6573 2e4a 736f 6e53 6572 6961 6c69  ypes.JsonSeriali
+00015970: 7a61 626c 6529 3a0a 2020 2020 2020 2020  zable):.        
+00015980: 2020 2020 7265 7420 3d20 7265 7420 2b20      ret = ret + 
+00015990: 722e 746f 5f6a 736f 6e28 2920 2b20 272c  r.to_json() + ',
+000159a0: 270a 2020 2020 6966 206c 656e 2872 6574  '.    if len(ret
+000159b0: 2920 3e20 303a 0a20 2020 2020 2020 2072  ) > 0:.        r
+000159c0: 6574 203d 2072 6574 5b3a 2d31 5d0a 2020  et = ret[:-1].  
+000159d0: 2020 7265 7475 726e 2027 5b27 202b 2072    return '[' + r
+000159e0: 6574 202b 2027 5d27 0a0a 0a64 6566 205f  et + ']'...def _
+000159f0: 636f 6e76 6572 745f 6d61 726b 7570 286d  convert_markup(m
+00015a00: 6172 6b75 7029 3a0a 2020 2020 6966 2069  arkup):.    if i
+00015a10: 7369 6e73 7461 6e63 6528 6d61 726b 7570  sinstance(markup
+00015a20: 2c20 7479 7065 732e 4a73 6f6e 5365 7269  , types.JsonSeri
+00015a30: 616c 697a 6162 6c65 293a 0a20 2020 2020  alizable):.     
+00015a40: 2020 2072 6574 7572 6e20 6d61 726b 7570     return markup
+00015a50: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2072  .to_json().    r
+00015a60: 6574 7572 6e20 6d61 726b 7570 0a0a 0a64  eturn markup...d
+00015a70: 6566 205f 636f 6e76 6572 745f 656e 7469  ef _convert_enti
+00015a80: 7465 7328 656e 7469 7465 7329 3a0a 2020  tes(entites):.  
+00015a90: 2020 6966 2065 6e74 6974 6573 2069 7320    if entites is 
+00015aa0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7265  None:.        re
+00015ab0: 7475 726e 204e 6f6e 650a 2020 2020 656c  turn None.    el
+00015ac0: 6966 206c 656e 2865 6e74 6974 6573 2920  if len(entites) 
+00015ad0: 3d3d 2030 3a0a 2020 2020 2020 2020 7265  == 0:.        re
+00015ae0: 7475 726e 205b 5d0a 2020 2020 656c 6966  turn [].    elif
+00015af0: 2069 7369 6e73 7461 6e63 6528 656e 7469   isinstance(enti
+00015b00: 7465 735b 305d 2c20 7479 7065 732e 4a73  tes[0], types.Js
+00015b10: 6f6e 5365 7269 616c 697a 6162 6c65 293a  onSerializable):
+00015b20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00015b30: 5b65 6e74 6974 792e 746f 5f6a 736f 6e28  [entity.to_json(
+00015b40: 2920 666f 7220 656e 7469 7479 2069 6e20  ) for entity in 
+00015b50: 656e 7469 7465 735d 0a20 2020 2065 6c73  entites].    els
+00015b60: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
+00015b70: 6e20 656e 7469 7465 730a 0a0a 6465 6620  n entites...def 
+00015b80: 5f63 6f6e 7665 7274 5f70 6f6c 6c5f 6f70  _convert_poll_op
+00015b90: 7469 6f6e 7328 706f 6c6c 5f6f 7074 696f  tions(poll_optio
+00015ba0: 6e73 293a 0a20 2020 2069 6620 706f 6c6c  ns):.    if poll
+00015bb0: 5f6f 7074 696f 6e73 2069 7320 4e6f 6e65  _options is None
+00015bc0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00015bd0: 204e 6f6e 650a 2020 2020 656c 6966 206c   None.    elif l
+00015be0: 656e 2870 6f6c 6c5f 6f70 7469 6f6e 7329  en(poll_options)
+00015bf0: 203d 3d20 303a 0a20 2020 2020 2020 2072   == 0:.        r
+00015c00: 6574 7572 6e20 5b5d 0a20 2020 2065 6c69  eturn [].    eli
+00015c10: 6620 6973 696e 7374 616e 6365 2870 6f6c  f isinstance(pol
+00015c20: 6c5f 6f70 7469 6f6e 735b 305d 2c20 7374  l_options[0], st
+00015c30: 7229 3a0a 2020 2020 2020 2020 2320 436f  r):.        # Co
+00015c40: 6d70 6174 6962 696c 6974 7920 6d6f 6465  mpatibility mode
+00015c50: 2077 6974 6820 7072 6576 696f 7573 2062   with previous b
+00015c60: 7567 2077 6865 6e20 6f6e 6c79 206c 6973  ug when only lis
+00015c70: 7420 6f66 2073 7472 696e 6720 7761 7320  t of string was 
+00015c80: 6163 6365 7074 6564 2061 7320 706f 6c6c  accepted as poll
+00015c90: 5f6f 7074 696f 6e73 0a20 2020 2020 2020  _options.       
+00015ca0: 2072 6574 7572 6e20 706f 6c6c 5f6f 7074   return poll_opt
+00015cb0: 696f 6e73 0a20 2020 2065 6c69 6620 6973  ions.    elif is
+00015cc0: 696e 7374 616e 6365 2870 6f6c 6c5f 6f70  instance(poll_op
+00015cd0: 7469 6f6e 735b 305d 2c20 7479 7065 732e  tions[0], types.
+00015ce0: 506f 6c6c 4f70 7469 6f6e 293a 0a20 2020  PollOption):.   
+00015cf0: 2020 2020 2072 6574 7572 6e20 5b6f 7074       return [opt
+00015d00: 696f 6e2e 7465 7874 2066 6f72 206f 7074  ion.text for opt
+00015d10: 696f 6e20 696e 2070 6f6c 6c5f 6f70 7469  ion in poll_opti
+00015d20: 6f6e 735d 0a20 2020 2065 6c73 653a 0a20  ons].    else:. 
+00015d30: 2020 2020 2020 2072 6574 7572 6e20 706f         return po
+00015d40: 6c6c 5f6f 7074 696f 6e73 0a0a 0a64 6566  ll_options...def
+00015d50: 2063 6f6e 7665 7274 5f69 6e70 7574 5f6d   convert_input_m
+00015d60: 6564 6961 286d 6564 6961 293a 0a20 2020  edia(media):.   
+00015d70: 2069 6620 6973 696e 7374 616e 6365 286d   if isinstance(m
+00015d80: 6564 6961 2c20 7479 7065 732e 496e 7075  edia, types.Inpu
+00015d90: 744d 6564 6961 293a 0a20 2020 2020 2020  tMedia):.       
+00015da0: 2072 6574 7572 6e20 6d65 6469 612e 636f   return media.co
+00015db0: 6e76 6572 745f 696e 7075 745f 6d65 6469  nvert_input_medi
+00015dc0: 6128 290a 2020 2020 7265 7475 726e 204e  a().    return N
+00015dd0: 6f6e 652c 204e 6f6e 650a 0a0a 6465 6620  one, None...def 
+00015de0: 636f 6e76 6572 745f 696e 7075 745f 6d65  convert_input_me
+00015df0: 6469 615f 6172 7261 7928 6172 7261 7929  dia_array(array)
+00015e00: 3a0a 2020 2020 6d65 6469 6120 3d20 5b5d  :.    media = []
+00015e10: 0a20 2020 2066 696c 6573 203d 207b 7d0a  .    files = {}.
+00015e20: 2020 2020 666f 7220 696e 7075 745f 6d65      for input_me
+00015e30: 6469 6120 696e 2061 7272 6179 3a0a 2020  dia in array:.  
+00015e40: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00015e50: 6e63 6528 696e 7075 745f 6d65 6469 612c  nce(input_media,
+00015e60: 2074 7970 6573 2e49 6e70 7574 4d65 6469   types.InputMedi
+00015e70: 6129 3a0a 2020 2020 2020 2020 2020 2020  a):.            
+00015e80: 6d65 6469 615f 6469 6374 203d 2069 6e70  media_dict = inp
+00015e90: 7574 5f6d 6564 6961 2e74 6f5f 6469 6374  ut_media.to_dict
+00015ea0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
+00015eb0: 6620 6d65 6469 615f 6469 6374 5b27 6d65  f media_dict['me
+00015ec0: 6469 6127 5d2e 7374 6172 7473 7769 7468  dia'].startswith
+00015ed0: 2827 6174 7461 6368 3a2f 2f27 293a 0a20  ('attach://'):. 
+00015ee0: 2020 2020 2020 2020 2020 2020 2020 206b                 k
+00015ef0: 6579 203d 206d 6564 6961 5f64 6963 745b  ey = media_dict[
+00015f00: 276d 6564 6961 275d 2e72 6570 6c61 6365  'media'].replace
+00015f10: 2827 6174 7461 6368 3a2f 2f27 2c20 2727  ('attach://', ''
+00015f20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00015f30: 2020 6669 6c65 735b 6b65 795d 203d 2069    files[key] = i
+00015f40: 6e70 7574 5f6d 6564 6961 2e6d 6564 6961  nput_media.media
+00015f50: 0a20 2020 2020 2020 2020 2020 206d 6564  .            med
+00015f60: 6961 2e61 7070 656e 6428 6d65 6469 615f  ia.append(media_
+00015f70: 6469 6374 290a 2020 2020 7265 7475 726e  dict).    return
+00015f80: 206a 736f 6e2e 6475 6d70 7328 6d65 6469   json.dumps(medi
+00015f90: 6129 2c20 6669 6c65 730a 0a0a 6465 6620  a), files...def 
+00015fa0: 5f6e 6f5f 656e 636f 6465 2866 756e 6329  _no_encode(func)
+00015fb0: 3a0a 2020 2020 6465 6620 7772 6170 7065  :.    def wrappe
+00015fc0: 7228 6b65 792c 2076 616c 293a 0a20 2020  r(key, val):.   
+00015fd0: 2020 2020 2069 6620 6b65 7920 3d3d 2027       if key == '
+00015fe0: 6669 6c65 6e61 6d65 273a 0a20 2020 2020  filename':.     
+00015ff0: 2020 2020 2020 2072 6574 7572 6e20 7527         return u'
+00016000: 7b30 7d3d 7b31 7d27 2e66 6f72 6d61 7428  {0}={1}'.format(
+00016010: 6b65 792c 2076 616c 290a 2020 2020 2020  key, val).      
+00016020: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00016030: 2020 2020 7265 7475 726e 2066 756e 6328      return func(
+00016040: 6b65 792c 2076 616c 290a 0a20 2020 2072  key, val)..    r
+00016050: 6574 7572 6e20 7772 6170 7065 720a 0a0a  eturn wrapper...
+00016060: 636c 6173 7320 4170 6945 7863 6570 7469  class ApiExcepti
+00016070: 6f6e 2845 7863 6570 7469 6f6e 293a 0a20  on(Exception):. 
+00016080: 2020 2022 2222 0a20 2020 2054 6869 7320     """.    This 
+00016090: 636c 6173 7320 7265 7072 6573 656e 7473  class represents
+000160a0: 2061 2062 6173 6520 4578 6365 7074 696f   a base Exceptio
+000160b0: 6e20 7468 726f 776e 2077 6865 6e20 6120  n thrown when a 
+000160c0: 6361 6c6c 2074 6f20 7468 6520 5465 6c65  call to the Tele
+000160d0: 6772 616d 2041 5049 2066 6169 6c73 2e0a  gram API fails..
+000160e0: 2020 2020 496e 2061 6464 6974 696f 6e20      In addition 
+000160f0: 746f 2061 6e20 696e 666f 726d 6174 6976  to an informativ
+00016100: 6520 6d65 7373 6167 652c 2069 7420 6861  e message, it ha
+00016110: 7320 6120 6066 756e 6374 696f 6e5f 6e61  s a `function_na
+00016120: 6d65 6020 616e 6420 6120 6072 6573 756c  me` and a `resul
+00016130: 7460 2061 7474 7269 6275 7465 2c20 7768  t` attribute, wh
+00016140: 6963 6820 7265 7370 6563 7469 7665 6c79  ich respectively
+00016150: 0a20 2020 2063 6f6e 7461 696e 2074 6865  .    contain the
+00016160: 206e 616d 6520 6f66 2074 6865 2066 6169   name of the fai
+00016170: 6c65 6420 6675 6e63 7469 6f6e 2061 6e64  led function and
+00016180: 2074 6865 2072 6574 7572 6e65 6420 7265   the returned re
+00016190: 7375 6c74 2074 6861 7420 6d61 6465 2074  sult that made t
+000161a0: 6865 2066 756e 6374 696f 6e20 746f 2062  he function to b
+000161b0: 6520 636f 6e73 6964 6572 6564 2020 6173  e considered  as
+000161c0: 0a20 2020 2066 6169 6c65 642e 0a20 2020  .    failed..   
+000161d0: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
+000161e0: 696e 6974 5f5f 2873 656c 662c 206d 7367  init__(self, msg
+000161f0: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
+00016200: 2072 6573 756c 7429 3a0a 2020 2020 2020   result):.      
+00016210: 2020 7375 7065 7228 4170 6945 7863 6570    super(ApiExcep
+00016220: 7469 6f6e 2c20 7365 6c66 292e 5f5f 696e  tion, self).__in
+00016230: 6974 5f5f 2822 4120 7265 7175 6573 7420  it__("A request 
+00016240: 746f 2074 6865 2054 656c 6567 7261 6d20  to the Telegram 
+00016250: 4150 4920 7761 7320 756e 7375 6363 6573  API was unsucces
+00016260: 7366 756c 2e20 7b30 7d22 2e66 6f72 6d61  sful. {0}".forma
+00016270: 7428 6d73 6729 290a 2020 2020 2020 2020  t(msg)).        
+00016280: 7365 6c66 2e66 756e 6374 696f 6e5f 6e61  self.function_na
+00016290: 6d65 203d 2066 756e 6374 696f 6e5f 6e61  me = function_na
+000162a0: 6d65 0a20 2020 2020 2020 2073 656c 662e  me.        self.
+000162b0: 7265 7375 6c74 203d 2072 6573 756c 740a  result = result.
+000162c0: 0a0a 636c 6173 7320 4170 6948 5454 5045  ..class ApiHTTPE
+000162d0: 7863 6570 7469 6f6e 2841 7069 4578 6365  xception(ApiExce
+000162e0: 7074 696f 6e29 3a0a 2020 2020 2222 220a  ption):.    """.
+000162f0: 2020 2020 5468 6973 2063 6c61 7373 2072      This class r
+00016300: 6570 7265 7365 6e74 7320 616e 2045 7863  epresents an Exc
+00016310: 6570 7469 6f6e 2074 6872 6f77 6e20 7768  eption thrown wh
+00016320: 656e 2061 2063 616c 6c20 746f 2074 6865  en a call to the
+00016330: 200a 2020 2020 5465 6c65 6772 616d 2041   .    Telegram A
+00016340: 5049 2073 6572 7665 7220 7265 7475 726e  PI server return
+00016350: 7320 4854 5450 2063 6f64 6520 7468 6174  s HTTP code that
+00016360: 2069 7320 6e6f 7420 3230 302e 0a20 2020   is not 200..   
+00016370: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
+00016380: 696e 6974 5f5f 2873 656c 662c 2066 756e  init__(self, fun
+00016390: 6374 696f 6e5f 6e61 6d65 2c20 7265 7375  ction_name, resu
+000163a0: 6c74 293a 0a20 2020 2020 2020 2073 7570  lt):.        sup
+000163b0: 6572 2841 7069 4854 5450 4578 6365 7074  er(ApiHTTPExcept
+000163c0: 696f 6e2c 2073 656c 6629 2e5f 5f69 6e69  ion, self).__ini
+000163d0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+000163e0: 2022 5468 6520 7365 7276 6572 2072 6574   "The server ret
+000163f0: 7572 6e65 6420 4854 5450 207b 307d 207b  urned HTTP {0} {
+00016400: 317d 2e20 5265 7370 6f6e 7365 2062 6f64  1}. Response bod
+00016410: 793a 5c6e 5b7b 327d 5d22 205c 0a20 2020  y:\n[{2}]" \.   
+00016420: 2020 2020 2020 2020 2020 2020 202e 666f               .fo
+00016430: 726d 6174 2872 6573 756c 742e 7374 6174  rmat(result.stat
+00016440: 7573 5f63 6f64 652c 2072 6573 756c 742e  us_code, result.
+00016450: 7265 6173 6f6e 2c20 7265 7375 6c74 2e74  reason, result.t
+00016460: 6578 742e 656e 636f 6465 2827 7574 6638  ext.encode('utf8
+00016470: 2729 292c 0a20 2020 2020 2020 2020 2020  ')),.           
+00016480: 2066 756e 6374 696f 6e5f 6e61 6d65 2c0a   function_name,.
+00016490: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+000164a0: 6c74 290a 0a0a 636c 6173 7320 4170 6949  lt)...class ApiI
+000164b0: 6e76 616c 6964 4a53 4f4e 4578 6365 7074  nvalidJSONExcept
+000164c0: 696f 6e28 4170 6945 7863 6570 7469 6f6e  ion(ApiException
+000164d0: 293a 0a20 2020 2022 2222 0a20 2020 2054  ):.    """.    T
+000164e0: 6869 7320 636c 6173 7320 7265 7072 6573  his class repres
+000164f0: 656e 7473 2061 6e20 4578 6365 7074 696f  ents an Exceptio
+00016500: 6e20 7468 726f 776e 2077 6865 6e20 6120  n thrown when a 
+00016510: 6361 6c6c 2074 6f20 7468 6520 0a20 2020  call to the .   
+00016520: 2054 656c 6567 7261 6d20 4150 4920 7365   Telegram API se
+00016530: 7276 6572 2072 6574 7572 6e73 2069 6e76  rver returns inv
+00016540: 616c 6964 206a 736f 6e2e 0a20 2020 2022  alid json..    "
+00016550: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00016560: 6974 5f5f 2873 656c 662c 2066 756e 6374  it__(self, funct
+00016570: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+00016580: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
+00016590: 2841 7069 496e 7661 6c69 644a 534f 4e45  (ApiInvalidJSONE
+000165a0: 7863 6570 7469 6f6e 2c20 7365 6c66 292e  xception, self).
+000165b0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+000165c0: 2020 2020 2020 2254 6865 2073 6572 7665        "The serve
+000165d0: 7220 7265 7475 726e 6564 2061 6e20 696e  r returned an in
+000165e0: 7661 6c69 6420 4a53 4f4e 2072 6573 706f  valid JSON respo
+000165f0: 6e73 652e 2052 6573 706f 6e73 6520 626f  nse. Response bo
+00016600: 6479 3a5c 6e5b 7b30 7d5d 2220 5c0a 2020  dy:\n[{0}]" \.  
+00016610: 2020 2020 2020 2020 2020 2020 2020 2e66                .f
+00016620: 6f72 6d61 7428 7265 7375 6c74 2e74 6578  ormat(result.tex
+00016630: 742e 656e 636f 6465 2827 7574 6638 2729  t.encode('utf8')
+00016640: 292c 0a20 2020 2020 2020 2020 2020 2066  ),.            f
+00016650: 756e 6374 696f 6e5f 6e61 6d65 2c0a 2020  unction_name,.  
+00016660: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00016670: 290a 0a0a 636c 6173 7320 4170 6954 656c  )...class ApiTel
+00016680: 6567 7261 6d45 7863 6570 7469 6f6e 2841  egramException(A
+00016690: 7069 4578 6365 7074 696f 6e29 3a0a 2020  piException):.  
+000166a0: 2020 2222 220a 2020 2020 5468 6973 2063    """.    This c
+000166b0: 6c61 7373 2072 6570 7265 7365 6e74 7320  lass represents 
+000166c0: 616e 2045 7863 6570 7469 6f6e 2074 6872  an Exception thr
+000166d0: 6f77 6e20 7768 656e 2061 2054 656c 6567  own when a Teleg
+000166e0: 7261 6d20 4150 4920 7265 7475 726e 7320  ram API returns 
+000166f0: 6572 726f 7220 636f 6465 2e0a 2020 2020  error code..    
+00016700: 2222 220a 0a20 2020 2064 6566 205f 5f69  """..    def __i
+00016710: 6e69 745f 5f28 7365 6c66 2c20 6675 6e63  nit__(self, func
+00016720: 7469 6f6e 5f6e 616d 652c 2072 6573 756c  tion_name, resul
+00016730: 742c 2072 6573 756c 745f 6a73 6f6e 293a  t, result_json):
+00016740: 0a20 2020 2020 2020 2073 7570 6572 2841  .        super(A
+00016750: 7069 5465 6c65 6772 616d 4578 6365 7074  piTelegramExcept
+00016760: 696f 6e2c 2073 656c 6629 2e5f 5f69 6e69  ion, self).__ini
+00016770: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00016780: 2022 4572 726f 7220 636f 6465 3a20 7b30   "Error code: {0
+00016790: 7d2e 2044 6573 6372 6970 7469 6f6e 3a20  }. Description: 
+000167a0: 7b31 7d22 205c 0a20 2020 2020 2020 2020  {1}" \.         
+000167b0: 2020 2020 2020 202e 666f 726d 6174 2872         .format(r
+000167c0: 6573 756c 745f 6a73 6f6e 5b27 6572 726f  esult_json['erro
+000167d0: 725f 636f 6465 275d 2c20 7265 7375 6c74  r_code'], result
+000167e0: 5f6a 736f 6e5b 2764 6573 6372 6970 7469  _json['descripti
+000167f0: 6f6e 275d 292c 0a20 2020 2020 2020 2020  on']),.         
+00016800: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+00016810: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
+00016820: 7375 6c74 290a 2020 2020 2020 2020 7365  sult).        se
+00016830: 6c66 2e72 6573 756c 745f 6a73 6f6e 203d  lf.result_json =
+00016840: 2072 6573 756c 745f 6a73 6f6e 0a20 2020   result_json.   
+00016850: 2020 2020 2073 656c 662e 6572 726f 725f       self.error_
+00016860: 636f 6465 203d 2072 6573 756c 745f 6a73  code = result_js
+00016870: 6f6e 5b27 6572 726f 725f 636f 6465 275d  on['error_code']
+00016880: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
+00016890: 7363 7269 7074 696f 6e20 3d20 7265 7375  scription = resu
+000168a0: 6c74 5f6a 736f 6e5b 2764 6573 6372 6970  lt_json['descrip
+000168b0: 7469 6f6e 275d 0a                        tion'].
```

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/async_telebot.py` & `pytelegrambotapi_fixed-4.12.7/telebot/async_telebot.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/asyncio_filters.py` & `pytelegrambotapi_fixed-4.12.7/telebot/asyncio_filters.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/asyncio_handler_backends.py` & `pytelegrambotapi_fixed-4.12.7/telebot/asyncio_handler_backends.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/asyncio_helper.py` & `pytelegrambotapi_fixed-4.12.7/telebot/asyncio_helper.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/callback_data.py` & `pytelegrambotapi_fixed-4.12.7/telebot/callback_data.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/custom_filters.py` & `pytelegrambotapi_fixed-4.12.7/telebot/custom_filters.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/formatting.py` & `pytelegrambotapi_fixed-4.12.7/telebot/formatting.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/handler_backends.py` & `pytelegrambotapi_fixed-4.12.7/telebot/handler_backends.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/service_utils.py` & `pytelegrambotapi_fixed-4.12.7/telebot/service_utils.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/types.py` & `pytelegrambotapi_fixed-4.12.7/telebot/types.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/telebot/util.py` & `pytelegrambotapi_fixed-4.12.7/telebot/util.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/tests/test_handler_backends.py` & `pytelegrambotapi_fixed-4.12.7/tests/test_handler_backends.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/tests/test_telebot.py` & `pytelegrambotapi_fixed-4.12.7/tests/test_telebot.py`

 * *Files identical despite different names*

### Comparing `pytelegrambotapi_fixed-4.12.6/tests/test_types.py` & `pytelegrambotapi_fixed-4.12.7/tests/test_types.py`

 * *Files identical despite different names*

